(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return s}));var r=n("FurV"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Set}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:"[DEFAULT]",optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(n)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(n)return null;throw o}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(l){}try{for(var i=Object(r.h)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=Object(r.e)(o.value,2),a=s[1],u=this.normalizeInstanceIdentifier(s[0]);try{var c=this.getOrInitializeService({instanceIdentifier:u});a.resolve(c)}catch(l){}}}catch(h){e={error:h}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,(function(){var t;return Object(r.d)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.g)(Object(r.g)([],Object(r.e)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),Object(r.e)(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t="[DEFAULT]"),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.instanceIdentifier,o=t.options,s=void 0===o?{}:o,a=this.normalizeInstanceIdentifier(void 0===i?"[DEFAULT]":i);if(this.isInitialized(a))throw Error(this.name+"("+a+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var u=this.getOrInitializeService({instanceIdentifier:a,options:s});try{for(var c=Object(r.h)(this.instancesDeferred.entries()),l=c.next();!l.done;l=c.next()){var h=Object(r.e)(l.value,2),d=h[1];a===this.normalizeInstanceIdentifier(h[0])&&d.resolve(u)}}catch(f){e={error:f}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return this.invokeOnInitCallbacks(u,a),u},t.prototype.onInit=function(t){var e=this;return this.onInitCallbacks.add(t),function(){e.onInitCallbacks.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i;try{for(var o=Object(r.h)(this.onInitCallbacks),s=o.next();!s.done;s=o.next()){var a=s.value;try{a(t,e)}catch(u){}}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,"[DEFAULT]"===e?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(s){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),a=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3RSX":function(t,e,n){"use strict";var r=n("Qfp6");t.exports=function(t){return!(!t||"string"!=typeof t||t.length<6||new RegExp("[^"+r.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(t))}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return c}));var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}const c=s},"5R+2":function(t,e){t.exports=function(t,e,n){for(var r=(2<<Math.log(e.length-1)/Math.LN2)-1,i=-~(1.6*r*n/e.length),o="";;)for(var s=t(i),a=i;a--;)if((o+=e[s[a]&r]||"").length===+n)return o}},"6MUB":function(t,e,n){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,i){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map((function(i){var o=encodeURIComponent(r(i))+n;return Array.isArray(t[i])?t[i].map((function(t){return o+encodeURIComponent(r(t))})).join(e):o+encodeURIComponent(r(t[i]))})).join(e):i?encodeURIComponent(r(i))+n+encodeURIComponent(r(t)):""}},"6Uf2":function(t,e,n){"use strict";(function(t){var e=n("zIRd"),r=n("/6Yf"),i=n("qOnz"),o=n("FurV"),s=n("q/0M"),a="";function u(t){a=t}var c,l=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(i.I)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(i.C)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),h=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(i.i)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),d=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new l(e)}}catch(n){}return new h},f=d("localStorage"),p=d("sessionStorage"),g=new s.b("@firebase/database"),m=(c=1,function(){return c++}),y=function(t){var e=Object(i.H)(t),n=new i.d;n.update(e);var r=n.digest();return i.g.encodeByteArray(r)},v=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var o=t[r];Array.isArray(o)||o&&"object"==typeof o&&"number"==typeof o.length?n+=v.apply(null,o):n+="object"==typeof o?Object(i.I)(o):o,n+=" "}return n},b=null,_=!0,w=function(t,e){Object(i.e)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(g.logLevel=s.a.VERBOSE,b=g.log.bind(g),e&&p.set("logging_enabled",!0)):"function"==typeof t?b=t:(b=null,p.remove("logging_enabled"))},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===_&&(_=!1,null===b&&!0===p.get("logging_enabled")&&w(!0)),b){var n=v.apply(null,t);b(n)}},S=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];O.apply(void 0,Object(o.g)([t],Object(o.e)(e)))}},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+v.apply(void 0,Object(o.g)([],Object(o.e)(t)));g.error(n)},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+v.apply(void 0,Object(o.g)([],Object(o.e)(t)));throw g.error(n),new Error(n)},T=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+v.apply(void 0,Object(o.g)([],Object(o.e)(t)));g.warn(n)},I=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},k="[MIN_NAME]",x="[MAX_NAME]",A=function(t,e){if(t===e)return 0;if(t===k||e===x)return-1;if(e===k||t===x)return 1;var n=F(t),r=F(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},N=function(t,e){return t===e?0:t<e?-1:1},j=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(i.I)(e))},R=function(t){if("object"!=typeof t||null===t)return Object(i.I)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",o=0;o<e.length;o++)0!==o&&(r+=","),r+=Object(i.I)(e[o]),r+=":",r+=R(t[e[o]]);return r+"}"},P=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function D(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var L=function(t){var e,n,r,o,s;Object(i.e)(!I(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(o=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-o)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},M=new RegExp("^-?(0*)\\d{1,10}$"),F=function(t){if(M.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},U=function(t){try{t()}catch(e){setTimeout((function(){throw T("Exception was thrown by user callback.",e.stack||""),e}),Math.floor(0))}},V=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},q=function(){function t(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then((function(t){return n.appCheck=t}))}return t.prototype.getToken=function(t){var e=this;return this.appCheck?this.appCheck.getToken(t):new Promise((function(n,r){setTimeout((function(){e.appCheck?e.getToken(t).then(n,r):n(null)}),0)}))},t.prototype.addTokenChangeListener=function(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then((function(e){return e.addTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){T('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},t}(),z=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((function(t){return r.auth_=t}))}return t.prototype.getToken=function(t){var e=this;return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(O("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):new Promise((function(n,r){setTimeout((function(){e.auth_?e.getToken(t).then(n,r):n(null)}),0)}))},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';T(t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),B=function(){function t(t){this.accessToken=t}return t.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},t.prototype.addTokenChangeListener=function(t){t(this.accessToken)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.OWNER="owner",t}(),W=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,H=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=f.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&f.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}();function K(t,e,n){var r;if(Object(i.e)("string"==typeof e,"typeof type must == string"),Object(i.e)("object"==typeof n,"typeof params must == object"),"websocket"===e)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if("long_polling"!==e)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var o=[];return D(n,(function(t,e){o.push(t+"="+e)})),r+o.join("&")}var G=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(i.i)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(i.l)(this.counters_)},t}(),J={},Q={};function $(t){var e=t.toString();return J[e]||(J[e]=new G),J[e]}var Y=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&U((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),X=function(){function t(t,e,n,r,i,o,s){var a=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=S(t),this.stats_=$(e),this.urlFn=function(t){return a.appCheckToken&&(t.ac=a.appCheckToken),K(e,"long_polling",t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Y(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if(Object(i.y)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Z((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(o.e)(t,5),i=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===i)n.id=s,n.password=a;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(o.e)(t,2),i=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),n.appCheckToken&&(t.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&W.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(i.y)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(i.I)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(i.h)(e),r=P(n,1840),o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(i.y)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(i.I)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Z=function(){function t(e,n,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(i.y)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=m(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){O("frame writing exception"),u.stack&&O(u.stack),O(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||O("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;Object(i.y)()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){O("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},t}(),tt=null;"undefined"!=typeof MozWebSocket?tt=MozWebSocket:"undefined"!=typeof WebSocket&&(tt=WebSocket);var et=function(){function t(e,n,r,i,o,s,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=S(this.connId),this.stats_=$(n),this.connURL=t.connectionURL_(n,s,a,i),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n,r){var o={v:"5"};return!Object(i.y)()&&"undefined"!=typeof location&&location.hostname&&W.test(location.hostname)&&(o.r="f"),e&&(o.s=e),n&&(o.ls=n),r&&(o.ac=r),K(t,"websocket",o)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,f.set("previous_websocket_failure",!0);try{if(Object(i.y)()){var r={headers:{"User-Agent":"Firebase/5/"+a+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}};this.nodeAdmin?r.headers.Authorization=this.authToken||"":r.headers["X-Firebase-AppCheck"]=this.appCheckToken||"";var o=process.env,s=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new tt(this.connURL,[],r)}else this.mySock=new tt(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(c){this.log_("Error instantiating WebSocket.");var u=c.message||c.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==tt&&!t.forceDisallow_},t.previouslyFailed=function(){return f.isInMemoryStorage||!0===f.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){f.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(i.C)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(i.e)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(i.I)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=P(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),nt=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[X,et]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=et&&et.isAvailable(),s=i&&!et.previouslyFailed();if(e.webSocketOnly&&(i||T("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[et];else{var a=this.transports_=[];try{for(var u=Object(o.h)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),rt=function(){function t(t,e,n,r,i,o,s,a,u,c){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=S("c:"+this.id+":"),this.transportManager_=new nt(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=V((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=j("t",t),n=j("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=j("t",t),n=j("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=j("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?C("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):C("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&T("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),V((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):V((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(f.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),it=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.refreshAppCheckToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),ot=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(i.e)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(o.g)([],Object(o.e)(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(i.e)(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),st=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(i.w)()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return Object(o.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(i.e)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(ot),at=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function ut(){return new at("")}function ct(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function lt(t){return t.pieces_.length-t.pieceNum_}function ht(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new at(t.pieces_,e)}function dt(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function ft(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function pt(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new at(e,0)}function gt(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof at)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new at(n,0)}function mt(t){return t.pieceNum_>=t.pieces_.length}function yt(t,e){var n=ct(t),r=ct(e);if(null===n)return e;if(n===r)return yt(ht(t),ht(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function vt(t,e){for(var n=ft(t,0),r=ft(e,0),i=0;i<n.length&&i<r.length;i++){var o=A(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function bt(t,e){if(lt(t)!==lt(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function _t(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(lt(t)>lt(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var wt=function(){return function(t,e){this.errorPrefix_=e,this.parts_=ft(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(i.G)(this.parts_[n]);Ot(this)}}();function Ot(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+St(t))}function St(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var Ct,Et,Tt=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return Object(o.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(i.e)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(ot),It=function(t){function e(n,r,o,s,a,u,c,l){var h=t.call(this)||this;if(h.repoInfo_=n,h.applicationId_=r,h.onDataUpdate_=o,h.onConnectStatus_=s,h.onServerInfoUpdate_=a,h.authTokenProvider_=u,h.appCheckTokenProvider_=c,h.authOverride_=l,h.id=e.nextPersistentConnectionId_++,h.log_=S("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=1e3,h.maxReconnectDelay_=3e5,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.appCheckToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.invalidAppCheckTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,l&&!Object(i.y)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Tt.getInstance().on("visible",h.onVisible_,h),-1===n.host.indexOf("fblocal")&&st.getInstance().on("online",h.onOnline_,h),h}return Object(o.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,o={r,a:t,b:e};this.log_(Object(i.I)(o)),Object(i.e)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this;this.initConnection_();var n=new i.a,r={p:t._path.toString(),q:t._queryObject},o={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[s];void 0!==t&&o===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){this.initConnection_();var o=t._queryIdentifier,s=t._path.toString();this.log_("Listen called for "+s+" "+o),this.listens.has(s)||this.listens.set(s,new Map),Object(i.e)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Object(i.e)(!this.listens.get(s).has(o),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(o,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,(function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(i.i)(t,"w")){var n=Object(i.F)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',o=e._path.toString();T("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+o+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(i.q)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(i.B)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},e.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(e){var n=e.s,r=e.d||"error";"ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,r)}))},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Object(i.e)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){this.initConnection_();var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(i.I)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):C("Unrecognized action received from server: "+Object(i.I)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(i.e)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r,s,a,u,c,l,h,d,f,p,g,m=this;return Object(o.d)(this,(function(y){switch(y.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this.lastSessionId,u=!1,c=null,this.realtime_={close:l=function(){c?c.close():(u=!0,r())},sendRequest:function(t){Object(i.e)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)}},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,y.label=1;case 1:return y.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)])];case 2:return d=o.e.apply(void 0,[y.sent(),2]),f=d[0],p=d[1],u?O("getToken() completed but was canceled"):(O("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=p&&p.token,c=new rt(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,(function(t){T(t+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),a)),[3,4];case 3:return g=y.sent(),this.log_("Failed to get token: "+g),u||(this.repoInfo_.nodeAdmin&&T(g),l()),[3,4];case 4:return[2]}}))}))},e.prototype.interrupt=function(t){O("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){O("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(i.u)(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return R(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new at(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){O("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onAppCheckRevoked_=function(t,e){O("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=Object(o.h)(this.listens.values()),s=i.next();!s.done;s=i.next()){var a=s.value;try{for(var u=(n=void 0,Object(o.h)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(d){n={error:d}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(f){t={error:f}}finally{try{s&&!s.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(i.y)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+a.replace(/\./g,"-")]=1,Object(i.w)()?t["framework.cordova"]=1:Object(i.z)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=st.getInstance().currentlyOnline();return Object(i.u)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(it),kt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),xt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new kt(k,t),r=new kt(k,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return kt.MIN},t}(),At=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return Ct},set:function(t){Ct=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return A(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(i.f)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return kt.MIN},e.prototype.maxPost=function(){return new kt(x,Ct)},e.prototype.makePost=function(t,e){return Object(i.e)("string"==typeof t,"KeyIndex indexValue must always be a string."),new kt(t,Ct)},e.prototype.toString=function(){return".key"},e}(xt),Nt=new At,jt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Rt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Dt.EMPTY_NODE,this.right=null!=o?o:Dt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Dt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Dt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Pt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Rt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Dt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Rt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Rt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new jt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new jt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new jt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new jt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Pt,t}();function Lt(t,e){return A(t.name,e.name)}function Mt(t,e){return A(t,e)}var Ft,Ut,Vt,qt,zt,Bt=function(t){return"number"==typeof t?"number:"+L(t):"string:"+t},Wt=function(t){if(t.isLeafNode()){var e=t.val();Object(i.e)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(i.i)(e,".sv"),"Priority must be a string or number.")}else Object(i.e)(t===Et||t.isEmpty(),"priority of unexpected type.");Object(i.e)(t===Et||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Ht=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(i.e)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Wt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Ft},set:function(t){Ft=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return mt(e)?this:".priority"===ct(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=ct(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(i.e)(".priority"!==r||1===lt(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(ht(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Bt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?L(this.value_):this.value_,this.lazyHash_=y(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(i.e)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(i.e)(o>=0,"Unknown leaf type: "+n),Object(i.e)(s>=0,"Unknown leaf type: "+r),o===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-o},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Kt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?A(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return kt.MIN},e.prototype.maxPost=function(){return new kt(x,new Ht("[PRIORITY-POST]",Vt))},e.prototype.makePost=function(t,e){var n=Ut(t);return new kt(e,new Ht("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(xt)),Gt=Math.log(2),Jt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Gt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Qt=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Rt(s,o.node,Rt.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new Rt(s,o.node,Rt.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new Rt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,Rt.BLACK):(a(h,Rt.BLACK),a(h,Rt.RED))}return o}(new Jt(t.length));return new Dt(r||e,o)},$t={},Yt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(i.e)($t&&Kt,"ChildrenNode.ts has not been loaded"),qt=qt||new t({".priority":$t},{".priority":Kt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(i.F)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Dt?e:null},t.prototype.hasIndex=function(t){return Object(i.i)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(i.e)(e!==Nt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,s=[],a=!1,u=n.getIterator(kt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),s.push(c),c=u.getNext();r=a?Qt(s,e.getCompare()):$t;var l=e.toString(),h=Object(o.a)({},this.indexSet_);h[l]=e;var d=Object(o.a)({},this.indexes_);return d[l]=r,new t(d,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(i.D)(this.indexes_,(function(t,o){var s=Object(i.F)(r.indexSet_,o);if(Object(i.e)(s,"Missing index implementation for "+o),t===$t){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(kt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),Qt(a,s.getCompare())}return $t}var l=n.get(e.name),h=t;return l&&(h=h.remove(new kt(e.name,l))),h.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(i.D)(this.indexes_,(function(t){if(t===$t)return t;var r=n.get(e.name);return r?t.remove(new kt(e.name,r)):t})),this.indexSet_)},t}(),Xt=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Wt(this.priorityNode_),this.children_.isEmpty()&&Object(i.e)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return zt||(zt=new t(new Dt(Mt),null,Yt.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||zt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?zt:e},t.prototype.getChild=function(t){var e=ct(t);return null===e?this:this.getImmediateChild(e).getChild(ht(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(i.e)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new kt(e,n),o=void 0,s=void 0;n.isEmpty()?(o=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=o.isEmpty()?zt:this.priorityNode_;return new t(o,a,s)},t.prototype.updateChild=function(t,e){var n=ct(t);if(null===n)return e;Object(i.e)(".priority"!==ct(t)||1===lt(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(ht(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Kt,(function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1})),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Bt(this.getPriority().val())+":"),this.forEachChild(Kt,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":y(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new kt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new kt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new kt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,kt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,kt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Zt?-1:0},t.prototype.withIndex=function(e){if(e===Nt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Nt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Kt),r=e.getIterator(Kt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Nt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Zt=new(function(t){function e(){return t.call(this,new Dt(Mt),Xt.EMPTY_NODE,Yt.Default)||this}return Object(o.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Xt.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Xt));function te(t,e){if(void 0===e&&(e=null),null===t)return Xt.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(i.e)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Ht(t,te(e));if(t instanceof Array){var n=Xt.EMPTY_NODE;return D(t,(function(e,r){if(Object(i.i)(t,e)&&"."!==e.substring(0,1)){var o=te(r);!o.isLeafNode()&&o.isEmpty()||(n=n.updateImmediateChild(e,o))}})),n.updatePriority(te(e))}var r=[],o=!1;if(D(t,(function(t,e){if("."!==t.substring(0,1)){var n=te(e);n.isEmpty()||(o=o||!n.getPriority().isEmpty(),r.push(new kt(t,n)))}})),0===r.length)return Xt.EMPTY_NODE;var s=Qt(r,Lt,(function(t){return t.name}),Mt);if(o){var a=Qt(r,Kt.getCompare());return new Xt(s,te(e),new Yt({".priority":a},{".priority":Kt}))}return new Xt(s,te(e),Yt.Default)}Object.defineProperties(kt,{MIN:{value:new kt(k,Xt.EMPTY_NODE)},MAX:{value:new kt(x,Zt)}}),At.__EMPTY_NODE=Xt.EMPTY_NODE,Ht.__childrenNodeConstructor=Xt,Et=Zt,Vt=Zt,Ut=te;var ee,ne,re=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(i.e)(!mt(e)&&".priority"!==ct(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(o.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?A(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=te(t),r=Xt.EMPTY_NODE.updateChild(this.indexPath_,n);return new kt(e,r)},e.prototype.maxPost=function(){var t=Xt.EMPTY_NODE.updateChild(this.indexPath_,Zt);return new kt(x,t)},e.prototype.toString=function(){return ft(this.indexPath_,0).join("/")},e}(xt),ie=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?A(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return kt.MIN},e.prototype.maxPost=function(){return kt.MAX},e.prototype.makePost=function(t,e){var n=te(t);return new kt(e,n)},e.prototype.toString=function(){return".value"},e}(xt)),oe="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",se=(ee=0,ne=[],function(t){var e,n=t===ee;ee=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=oe.charAt(t%64),t=Math.floor(t/64);Object(i.e)(0===t,"Cannot push at time == 0");var o=r.join("");if(n){for(e=11;e>=0&&63===ne[e];e--)ne[e]=0;ne[e]++}else for(e=0;e<12;e++)ne[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)o+=oe.charAt(ne[e]);return Object(i.e)(20===o.length,"nextPushId: Length should be 20."),o}),ae=function(t){if("2147483647"===t)return"-";var e=F(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return x;var o=oe.charAt(oe.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},ue=function(t){if("-2147483648"===t)return k;var e=F(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=oe.charAt(oe.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function ce(t){return{type:"value",snapshotNode:t}}function le(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function he(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function de(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var fe=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,o,s){Object(i.e)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(he(e,a)):Object(i.e)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(le(e,n)):s.trackChildChange(de(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Kt,(function(t,r){e.hasChild(t)||n.trackChildChange(he(t,r))})),e.isLeafNode()||e.forEachChild(Kt,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(de(e,r,i))}else n.trackChildChange(le(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Xt.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),pe=function(){function t(e){this.indexedFilter_=new fe(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new kt(e,n))||(n=Xt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Xt.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Xt.EMPTY_NODE);var i=this;return e.forEachChild(Kt,(function(t,e){i.matches(new kt(t,e))||(r=r.updateImmediateChild(t,Xt.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),ge=function(){function t(t){this.rangedFilter_=new pe(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new kt(e,n))||(n=Xt.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Xt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Xt.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Xt.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,Xt.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,o){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(i.e)(u.numChildren()===this.limit_,"");var c=new kt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var d=u.getImmediateChild(e),f=r.getChildAfterChild(this.index_,l,this.reverse_);null!=f&&(f.name===e||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,c);if(h&&!n.isEmpty()&&p>=0)return null!=o&&o.trackChildChange(de(e,n,d)),u.updateImmediateChild(e,n);null!=o&&o.trackChildChange(he(e,d));var g=u.updateImmediateChild(e,Xt.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=o&&o.trackChildChange(le(f.name,f.node)),g.updateImmediateChild(f.name,f.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=o&&(o.trackChildChange(he(l.name,l.node)),o.trackChildChange(le(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,Xt.EMPTY_NODE)):t},t}(),me=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Kt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(i.e)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(i.e)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:k},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(i.e)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(i.e)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:x},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(i.e)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Kt},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function ye(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function ve(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function be(t,e){var n=t.copy();return n.index_=e,n}function _e(t){var e,n={};return t.isDefault()||(t.index_===Kt?e="$priority":t.index_===ie?e="$value":t.index_===Nt?e="$key":(Object(i.e)(t.index_ instanceof re,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Object(i.I)(e),t.startSet_&&(n.startAt=Object(i.I)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Object(i.I)(t.indexStartName_))),t.endSet_&&(n.endAt=Object(i.I)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Object(i.I)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function we(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Kt&&(e.i=t.index_.toString()),e}var Oe=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.repoInfo_=e,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=S("p:rest:"),o.listens_={},o}return Object(o.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(i.e)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,o){var s=this,a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=_e(t._queryParams);this.restRequest_(a+".json",l,(function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(i.F)(s.listens_,u)===c&&o(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=_e(t._queryParams),r=t._path.toString(),o=new i.a;return this.restRequest_(r+".json",n,(function(t,n){var i=n;404===t&&(i=null,t=null),null===t?(e.onDataUpdate_(r,i,!1,null),o.resolve(i)):o.reject(new Error(i))})),o.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;return void 0===e&&(e={}),e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(s){var a=Object(o.e)(s,2),u=a[0],c=a[1];u&&u.accessToken&&(e.auth=u.accessToken),c&&c.token&&(e.ac=c.token);var l=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(i.E)(e);r.log_("Sending REST request for "+l);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(n&&4===h.readyState){r.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);var t=null;if(h.status>=200&&h.status<300){try{t=Object(i.C)(h.responseText)}catch(e){T("Failed to parse JSON response for "+l+": "+h.responseText)}n(null,t)}else 401!==h.status&&404!==h.status&&T("Got unsuccessful REST response for "+l+" Status: "+h.status),n(h.status);n=null}},h.open("GET",l,!0),h.send()}))},e}(it),Se=function(){function t(){this.rootNode_=Xt.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();function Ce(){return{value:null,children:new Map}}function Ee(t,e,n){if(mt(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=ct(e);t.children.has(r)||t.children.set(r,Ce()),Ee(t.children.get(r),e=ht(e),n)}}function Te(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach((function(t,n){e(n,t)}))}(t,(function(t,r){Te(r,new at(e.toString()+"/"+t),n)}))}var Ie=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(o.a)({},t);return this.last_&&D(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),ke=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Ie(t);var n=1e4+2e4*Math.random();V(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;D(e,(function(e,o){o>0&&Object(i.i)(t.statsToReport_,e)&&(n[e]=o,r=!0)})),r&&this.server_.reportStats(n),V(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),xe=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function Ae(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Ne,je=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=xe.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(mt(this.path)){if(null!=this.affectedTree.value)return Object(i.e)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new at(e));return new t(ut(),n,this.revert)}return Object(i.e)(ct(this.path)===e,"operationForChild called for unrelated child."),new t(ht(this.path),this.affectedTree,this.revert)},t}(),Re=function(){function t(t,e){this.source=t,this.path=e,this.type=xe.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return mt(this.path)?new t(this.source,ut()):new t(this.source,ht(this.path))},t}(),Pe=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=xe.OVERWRITE}return t.prototype.operationForChild=function(e){return mt(this.path)?new t(this.source,ut(),this.snap.getImmediateChild(e)):new t(this.source,ht(this.path),this.snap)},t}(),De=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=xe.MERGE}return t.prototype.operationForChild=function(e){if(mt(this.path)){var n=this.children.subtree(new at(e));return n.isEmpty()?null:n.value?new Pe(this.source,ut(),n.value):new t(this.source,ut(),n)}return Object(i.e)(ct(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,ht(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Le=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(mt(t))return this.isFullyInitialized()&&!this.filtered_;var e=ct(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Me=function(){return function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}();function Fe(t,e,n,r,o,s){var a=r.filter((function(t){return t.type===n}));a.sort((function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Object(i.f)("Should only compare child_ events.");var r=new kt(e.childName,e.snapshotNode),o=new kt(n.childName,n.snapshotNode);return t.index_.compare(r,o)}(t,e,n)})),a.forEach((function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);o.forEach((function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))}))}))}function Ue(t,e){return{eventCache:t,serverCache:e}}function Ve(t,e,n,r){return Ue(new Le(e,n,r),t.serverCache)}function qe(t,e,n,r){return Ue(t.eventCache,new Le(e,n,r))}function ze(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Be(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var We=function(){function t(t,e){void 0===e&&(Ne||(Ne=new Dt(N)),e=Ne),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return D(e,(function(t,e){n=n.set(new at(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:ut(),value:this.value};if(mt(t))return null;var n=ct(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(ht(t),e);return null!=i?{path:gt(new at(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(mt(e))return this;var n=ct(e),r=this.children.get(n);return null!==r?r.subtree(ht(e)):new t(null)},t.prototype.set=function(e,n){if(mt(e))return new t(n,this.children);var r=ct(e),i=(this.children.get(r)||new t(null)).set(ht(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(mt(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=ct(e),r=this.children.get(n);if(r){var i=r.remove(ht(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(mt(t))return this.value;var e=ct(t),n=this.children.get(e);return n?n.get(ht(t)):null},t.prototype.setTree=function(e,n){if(mt(e))return n;var r,i=ct(e),o=(this.children.get(i)||new t(null)).setTree(ht(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(ut(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(gt(t,r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,ut(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(mt(t))return null;var i=ct(t),o=this.children.get(i);return o?o.findOnPath_(ht(t),gt(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,ut(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(mt(e))return this;this.value&&r(n,this.value);var i=ct(e),o=this.children.get(i);return o?o.foreachOnPath_(ht(e),gt(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(ut(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(gt(t,n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t}(),He=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new We(null))},t}();function Ke(t,e,n){if(mt(e))return new He(new We(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=yt(i,e);return o=o.updateChild(s,n),new He(t.writeTree_.set(i,o))}var a=new We(n),u=t.writeTree_.setTree(e,a);return new He(u)}function Ge(t,e,n){var r=t;return D(n,(function(t,n){r=Ke(r,gt(e,t),n)})),r}function Je(t,e){if(mt(e))return He.empty();var n=t.writeTree_.setTree(e,new We(null));return new He(n)}function Qe(t,e){return null!=$e(t,e)}function $e(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(yt(n.path,e)):null}function Ye(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Kt,(function(t,n){e.push(new kt(t,n))})):t.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new kt(t,n.value))})),e}function Xe(t,e){if(mt(e))return t;var n=$e(t,e);return new He(null!=n?new We(n):t.writeTree_.subtree(e))}function Ze(t){return t.writeTree_.isEmpty()}function tn(t,e){return function t(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var o=null;return n.children.inorderTraversal((function(n,s){".priority"===n?(Object(i.e)(null!==s.value,"Priority writes must always be leaf nodes"),o=s.value):r=t(gt(e,n),s,r)})),r.getChild(e).isEmpty()||null===o||(r=r.updateChild(gt(e,".priority"),o)),r}(ut(),t.writeTree_,e)}function en(t,e){return fn(e,t)}function nn(t,e){if(t.snap)return _t(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&_t(gt(t.path,n),e))return!0;return!1}function rn(t){return t.visible}function on(t,e,n){for(var r=He.empty(),o=0;o<t.length;++o){var s=t[o];if(e(s)){var a=s.path,u=void 0;if(s.snap)_t(n,a)?r=Ke(r,u=yt(n,a),s.snap):_t(a,n)&&(u=yt(a,n),r=Ke(r,ut(),s.snap.getChild(u)));else{if(!s.children)throw Object(i.f)("WriteRecord should have .snap or .children");if(_t(n,a))r=Ge(r,u=yt(n,a),s.children);else if(_t(a,n))if(mt(u=yt(a,n)))r=Ge(r,ut(),s.children);else{var c=Object(i.F)(s.children,ct(u));if(c){var l=c.getChild(ht(u));r=Ke(r,ut(),l)}}}}}return r}function sn(t,e,n,r,i){if(r||i){var o=Xe(t.visibleWrites,e);return!i&&Ze(o)?n:i||null!=n||Qe(o,ut())?tn(on(t.allWrites,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(_t(t.path,e)||_t(e,t.path))}),e),n||Xt.EMPTY_NODE):null}var s=$e(t.visibleWrites,e);if(null!=s)return s;var a=Xe(t.visibleWrites,e);return Ze(a)?n:null!=n||Qe(a,ut())?tn(a,n||Xt.EMPTY_NODE):null}function an(t,e,n,r){return sn(t.writeTree,t.treePath,e,n,r)}function un(t,e){return function(t,e,n){var r=Xt.EMPTY_NODE,i=$e(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Kt,(function(t,e){r=r.updateImmediateChild(t,e)})),r;if(n){var o=Xe(t.visibleWrites,e);return n.forEachChild(Kt,(function(t,e){var n=tn(Xe(o,new at(t)),e);r=r.updateImmediateChild(t,n)})),Ye(o).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}return Ye(Xe(t.visibleWrites,e)).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}(t.writeTree,t.treePath,e)}function cn(t,e,n,r){return function(t,e,n,r,o){Object(i.e)(r||o,"Either existingEventSnap or existingServerSnap must exist");var s=gt(e,n);if(Qe(t.visibleWrites,s))return null;var a=Xe(t.visibleWrites,s);return Ze(a)?o.getChild(n):tn(a,o.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function ln(t,e){return function(t,e){return $e(t.visibleWrites,e)}(t.writeTree,gt(t.treePath,e))}function hn(t,e,n){return function(t,e,n,r){var i=gt(e,n),o=$e(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?tn(Xe(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function dn(t,e){return fn(gt(t.treePath,e),t.writeTree)}function fn(t,e){return{treePath:t,writeTree:e}}var pn=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(i.e)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(i.e)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var o=r.type;if("child_added"===e&&"child_removed"===o)this.changeMap.set(n,de(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===o)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===o)this.changeMap.set(n,he(n,r.oldSnap));else if("child_changed"===e&&"child_added"===o)this.changeMap.set(n,le(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==o)throw Object(i.f)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,de(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),gn=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),mn=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Le(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return hn(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Be(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){var a,u=Xe(t.visibleWrites,e),c=$e(u,ut());if(null!=c)a=c;else{if(null==n)return[];a=tn(u,n)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];for(var l=[],h=s.getCompare(),d=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),f=d.getNext();f&&l.length<1;)0!==h(f,r)&&l.push(f),f=d.getNext();return l}(t.writeTree,t.treePath,e,n,0,i,o)}(this.writes_,r,e,0,n,t);return 0===i.length?null:i[0]},t}();function yn(t,e,n,r,o,s){var a=e.eventCache;if(null!=ln(r,n))return e;var u=void 0,c=void 0;if(mt(n))if(Object(i.e)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=Be(e),h=un(r,l instanceof Xt?l:Xt.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{var d=an(r,Be(e));u=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{var f=ct(n);if(".priority"===f){Object(i.e)(1===lt(n),"Can't have a priority with additional path components");var p=a.getNode(),g=cn(r,n,p,c=e.serverCache.getNode());u=null!=g?t.filter.updatePriority(p,g):a.getNode()}else{var m=ht(n),y=void 0;if(a.isCompleteForChild(f)){c=e.serverCache.getNode();var v=cn(r,n,a.getNode(),c);y=null!=v?a.getNode().getImmediateChild(f).updateChild(m,v):a.getNode().getImmediateChild(f)}else y=hn(r,f,e.serverCache);u=null!=y?t.filter.updateChild(a.getNode(),f,y,m,o,s):a.getNode()}}return Ve(e,u,a.isFullyInitialized()||mt(n),t.filter.filtersNodes())}function vn(t,e,n,r,i,o,s,a){var u,c=e.serverCache,l=s?t.filter:t.filter.getIndexedFilter();if(mt(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var d=ct(n);if(!c.isCompleteForPath(n)&&lt(n)>1)return e;var f=ht(n),p=c.getNode().getImmediateChild(d).updateChild(f,r);u=".priority"===d?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),d,p,f,gn,null)}var g=qe(e,u,c.isFullyInitialized()||mt(n),l.filtersNodes());return yn(t,g,n,i,new mn(i,g,o),a)}function bn(t,e,n,r,i,o,s){var a,u,c=e.eventCache,l=new mn(i,e,o);if(mt(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),a=Ve(e,u,!0,t.filter.filtersNodes());else{var h=ct(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),a=Ve(e,u,c.isFullyInitialized(),c.isFiltered());else{var d=ht(n),f=c.getNode().getImmediateChild(h),p=void 0;if(mt(d))p=r;else{var g=l.getCompleteChild(h);p=null!=g?".priority"===dt(d)&&g.getChild(pt(d)).isEmpty()?g:g.updateChild(d,r):Xt.EMPTY_NODE}a=f.equals(p)?e:Ve(e,t.filter.updateChild(c.getNode(),h,p,d,l,s),c.isFullyInitialized(),t.filter.filtersNodes())}}return a}function _n(t,e){return t.eventCache.isCompleteForChild(e)}function wn(t,e,n){return n.foreach((function(t,n){e=e.updateChild(t,n)})),e}function On(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=mt(n)?r:new We(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=wn(0,e.serverCache.getNode().getImmediateChild(n),r);c=vn(t,c,new at(n),u,i,o,s,a)}})),u.children.inorderTraversal((function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=wn(0,e.serverCache.getNode().getImmediateChild(n),r);c=vn(t,c,new at(n),h,i,o,s,a)}})),c}var Sn,Cn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new fe(r.getIndex()),o=(n=r).loadsAllData()?new fe(n.getIndex()):n.hasLimit()?new ge(n):new pe(n);this.processor_=function(t){return{filter:t}}(o);var s=e.serverCache,a=e.eventCache,u=i.updateFullNode(Xt.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(Xt.EMPTY_NODE,a.getNode(),null),l=new Le(u,s.isFullyInitialized(),i.filtersNodes()),h=new Le(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=Ue(h,l),this.eventGenerator_=new Me(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function En(t,e){var n=Be(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!mt(e)&&!n.getImmediateChild(ct(e)).isEmpty())?n.getChild(e):null}function Tn(t){return 0===t.eventRegistrations_.length}function In(t,e,n){var r=[];if(n){Object(i.e)(null==e,"A cancel should cancel all event registrations.");var o=t.query._path;t.eventRegistrations_.forEach((function(t){var e=t.createCancelEvent(n,o);e&&r.push(e)}))}if(e){for(var s=[],a=0;a<t.eventRegistrations_.length;++a){var u=t.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(a+1));break}}else s.push(u)}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function kn(t,e,n,r){e.type===xe.MERGE&&null!==e.source.queryId&&(Object(i.e)(Be(t.viewCache_),"We should always have a full cache before handling merges"),Object(i.e)(ze(t.viewCache_),"Missing event cache, even though we have a server cache"));var o,s,a=t.viewCache_,u=function(t,e,n,r,o){var s,a,u=new pn;if(n.type===xe.OVERWRITE){var c=n;c.source.fromUser?s=bn(t,e,c.path,c.snap,r,o,u):(Object(i.e)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!mt(c.path),s=vn(t,e,c.path,c.snap,r,o,a,u))}else if(n.type===xe.MERGE){var l=n;l.source.fromUser?s=function(t,e,n,r,i,o,s){var a=e;return r.foreach((function(r,u){var c=gt(n,r);_n(e,ct(c))&&(a=bn(t,a,c,u,i,o,s))})),r.foreach((function(r,u){var c=gt(n,r);_n(e,ct(c))||(a=bn(t,a,c,u,i,o,s))})),a}(t,e,l.path,l.children,r,o,u):(Object(i.e)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=On(t,e,l.path,l.children,r,o,a,u))}else if(n.type===xe.ACK_USER_WRITE){var h=n;s=h.revert?function(t,e,n,r,o,s){var a;if(null!=ln(r,n))return e;var u=new mn(r,e,o),c=e.eventCache.getNode(),l=void 0;if(mt(n)||".priority"===ct(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=an(r,Be(e));else{var d=e.serverCache.getNode();Object(i.e)(d instanceof Xt,"serverChildren would be complete if leaf node"),h=un(r,d)}l=t.filter.updateFullNode(c,h=h,s)}else{var f=ct(n),p=hn(r,f,e.serverCache);null==p&&e.serverCache.isCompleteForChild(f)&&(p=c.getImmediateChild(f)),(l=null!=p?t.filter.updateChild(c,f,p,ht(n),u,s):e.eventCache.getNode().hasChild(f)?t.filter.updateChild(c,f,Xt.EMPTY_NODE,ht(n),u,s):c).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=an(r,Be(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,a,s))}return a=e.serverCache.isFullyInitialized()||null!=ln(r,ut()),Ve(e,l,a,t.filter.filtersNodes())}(t,e,h.path,r,o,u):function(t,e,n,r,i,o,s){if(null!=ln(i,n))return e;var a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(mt(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return vn(t,e,n,u.getNode().getChild(n),i,o,a,s);if(mt(n)){var c=new We(null);return u.getNode().forEachChild(Nt,(function(t,e){c=c.set(new at(t),e)})),On(t,e,n,c,i,o,a,s)}return e}var l=new We(null);return r.foreach((function(t,e){var r=gt(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))})),On(t,e,n,l,i,o,a,s)}(t,e,h.path,h.affectedTree,r,o,u)}else{if(n.type!==xe.LISTEN_COMPLETE)throw Object(i.f)("Unknown operation type: "+n.type);s=function(t,e,n,r,i){var o=e.serverCache;return yn(t,qe(e,o.getNode(),o.isFullyInitialized()||mt(n),o.isFiltered()),n,r,gn,i)}(t,e,n.path,r,u)}var d=u.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=ze(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(ce(ze(e)))}}(e,s,d),{viewCache:s,changes:d}}(t.processor_,a,e,n,r);return o=t.processor_,s=u.viewCache,Object(i.e)(s.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),Object(i.e)(s.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),Object(i.e)(u.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,xn(t,u.changes,u.viewCache.eventCache.getNode(),null)}function xn(t,e,n,r){return function(t,e,n,r){var i=[],o=[];return e.forEach((function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})})),Fe(t,i,"child_removed",e,r,n),Fe(t,i,"child_added",e,r,n),Fe(t,i,"child_moved",o,r,n),Fe(t,i,"child_changed",e,r,n),Fe(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}var An,Nn=function(){return function(){this.views=new Map}}();function jn(t,e,n,r){var s,a,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return Object(i.e)(null!=c,"SyncTree gave us an op for an invalid query."),kn(c,e,n,r)}var l=[];try{for(var h=Object(o.h)(t.views.values()),d=h.next();!d.done;d=h.next())l=l.concat(kn(c=d.value,e,n,r))}catch(f){s={error:f}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(s)throw s.error}}return l}function Rn(t,e,n,r,i){var o=t.views.get(e._queryIdentifier);if(!o){var s=an(n,i?r:null),a=!1;s?a=!0:r instanceof Xt?(s=un(n,r),a=!1):(s=Xt.EMPTY_NODE,a=!1);var u=Ue(new Le(s,a,!1),new Le(r,i,!1));return new Cn(e,u)}return o}function Pn(t){var e,n,r=[];try{for(var i=Object(o.h)(t.views.values()),s=i.next();!s.done;s=i.next()){var a=s.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(u){e={error:u}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Dn(t,e){var n,r,i=null;try{for(var s=Object(o.h)(t.views.values()),a=s.next();!a.done;a=s.next())i=i||En(a.value,e)}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i}function Ln(t,e){return e._queryParams.loadsAllData()?Un(t):t.views.get(e._queryIdentifier)}function Mn(t,e){return null!=Ln(t,e)}function Fn(t){return null!=Un(t)}function Un(t){var e,n;try{for(var r=Object(o.h)(t.views.values()),i=r.next();!i.done;i=r.next()){var s=i.value;if(s.query._queryParams.loadsAllData())return s}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var Vn=1,qn=function(){return function(t){this.listenProvider_=t,this.syncPointTree_=new We(null),this.pendingWriteTree_={visibleWrites:He.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}();function zn(t,e,n,r,o){return function(t,e,n,r,o){Object(i.e)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:o}),o&&(t.visibleWrites=Ke(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,o),o?Jn(t,new Pe({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Bn(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex((function(t){return t.writeId===e}));Object(i.e)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var o=r.visible,s=!1,a=t.allWrites.length-1;o&&a>=0;){var u=t.allWrites[a];u.visible&&(a>=n&&nn(u,r.path)?o=!1:_t(r.path,u.path)&&(s=!0)),a--}return!!o&&(s?(function(t){t.visibleWrites=on(t.allWrites,rn,ut()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=Je(t.visibleWrites,r.path):D(r.children,(function(e){t.visibleWrites=Je(t.visibleWrites,gt(r.path,e))})),!0))}(t.pendingWriteTree_,e)){var o=new We(null);return null!=r.snap?o=o.set(ut(),!0):D(r.children,(function(t){o=o.set(new at(t),!0)})),Jn(t,new je(r.path,o,n))}return[]}function Wn(t,e,n){return Jn(t,new Pe({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Hn(t,e,n,r){var s=e._path,a=t.syncPointTree_.get(s),u=[];if(a&&("default"===e._queryIdentifier||Mn(a,e))){var c=function(t,e,n,r){var s,a,u=e._queryIdentifier,c=[],l=[],h=Fn(t);if("default"===u)try{for(var d=Object(o.h)(t.views.entries()),f=d.next();!f.done;f=d.next()){var p,g=Object(o.e)(f.value,2),m=g[0];l=l.concat(In(p=g[1],n,r)),Tn(p)&&(t.views.delete(m),p.query._queryParams.loadsAllData()||c.push(p.query))}}catch(y){s={error:y}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(s)throw s.error}}else(p=t.views.get(u))&&(l=l.concat(In(p,n,r)),Tn(p)&&(t.views.delete(u),p.query._queryParams.loadsAllData()||c.push(p.query)));return h&&!Fn(t)&&c.push(new(Object(i.e)(Sn,"Reference.ts has not been loaded"),Sn)(e._repo,e._path)),{removed:c,events:l}}(a,e,n,r);0===a.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(s));var l=c.removed;u=c.events;var h=-1!==l.findIndex((function(t){return t._queryParams.loadsAllData()})),d=t.syncPointTree_.findOnPath(s,(function(t,e){return Fn(e)}));if(h&&!d){var f=t.syncPointTree_.subtree(s);if(!f.isEmpty())for(var p=function(t){return t.fold((function(t,e,n){if(e&&Fn(e))return[Un(e)];var r=[];return e&&(r=Pn(e)),D(n,(function(t,e){r=r.concat(e)})),r}))}(f),g=0;g<p.length;++g){var m=p[g],y=m.query,v=Qn(t,m);t.listenProvider_.startListening(er(y),$n(t,y),v.hashFn,v.onComplete)}}!d&&l.length>0&&!r&&(h?t.listenProvider_.stopListening(er(e),null):l.forEach((function(e){var n=t.queryToTagMap.get(Yn(e));t.listenProvider_.stopListening(er(e),n)}))),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=Yn(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,l)}return u}function Kn(t,e,n){var r=e._path,o=null,s=!1;t.syncPointTree_.foreachOnPath(r,(function(t,e){var n=yt(t,r);o=o||Dn(e,n),s=s||Fn(e)}));var a,u=t.syncPointTree_.get(r);u?(s=s||Fn(u),o=o||Dn(u,ut())):(u=new Nn,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=o?a=!0:(a=!1,o=Xt.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=Dn(e,ut());n&&(o=o.updateImmediateChild(t,n))})));var c=Mn(u,e);if(!c&&!e._queryParams.loadsAllData()){var l=Yn(e);Object(i.e)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=Vn++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var d=function(t,e,n,r,i,o){var s=Rn(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),function(t,e){t.eventRegistrations_.push(e)}(s,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Kt,(function(t,e){r.push(le(t,e))})),n.isFullyInitialized()&&r.push(ce(n.getNode())),xn(t,r,n.getNode(),e)}(s,n)}(u,e,n,en(t.pendingWriteTree_,r),o,a);if(!c&&!s){var f=Ln(u,e);d=d.concat(function(t,e,n){var r=e._path,o=$n(t,e),s=Qn(t,n),a=t.listenProvider_.startListening(er(e),o,s.hashFn,s.onComplete),u=t.syncPointTree_.subtree(r);if(o)Object(i.e)(!Fn(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold((function(t,e,n){if(!mt(t)&&e&&Fn(e))return[Un(e).query];var r=[];return e&&(r=r.concat(Pn(e).map((function(t){return t.query})))),D(n,(function(t,e){r=r.concat(e)})),r})),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(er(h),$n(t,h))}return a}(t,e,f))}return d}function Gn(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(function(t,n){var r=Dn(n,yt(t,e));if(r)return r}));return sn(r,e,i,n,!0)}function Jn(t,e){return function t(e,n,r,i){if(mt(e.path))return function t(e,n,r,i){var o=n.get(ut());null==r&&null!=o&&(r=Dn(o,ut()));var s=[];return n.children.inorderTraversal((function(n,o){var a=r?r.getImmediateChild(n):null,u=dn(i,n),c=e.operationForChild(n);c&&(s=s.concat(t(c,o,a,u)))})),o&&(s=s.concat(jn(o,e,i,r))),s}(e,n,r,i);var o=n.get(ut());null==r&&null!=o&&(r=Dn(o,ut()));var s=[],a=ct(e.path),u=e.operationForChild(a),c=n.children.get(a);if(c&&u){var l=r?r.getImmediateChild(a):null,h=dn(i,a);s=s.concat(t(u,c,l,h))}return o&&(s=s.concat(jn(o,e,i,r))),s}(e,t.syncPointTree_,null,en(t.pendingWriteTree_,ut()))}function Qn(t,e){var n=e.query,r=$n(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||Xt.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=Xn(t,n);if(r){var i=Zn(r),o=i.path,s=i.queryId,a=yt(o,e);return tr(t,o,new Re(Ae(s),a))}return[]}(t,n._path,r):function(t,e){return Jn(t,new Re({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Hn(t,n,null,i)}}}function $n(t,e){var n=Yn(e);return t.queryToTagMap.get(n)}function Yn(t){return t._path.toString()+"$"+t._queryIdentifier}function Xn(t,e){return t.tagToQueryMap.get(e)}function Zn(t){var e=t.indexOf("$");return Object(i.e)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new at(t.substr(0,e))}}function tr(t,e,n){var r=t.syncPointTree_.get(e);return Object(i.e)(r,"Missing sync point for query tag that we're tracking"),jn(r,n,en(t.pendingWriteTree_,e),null)}function er(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Object(i.e)(An,"Reference.ts has not been loaded"),An)(t._repo,t._path):t}var nr=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),rr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=gt(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return Gn(this.syncTree_,this.path_)},t}(),ir=function(t,e,n){return t&&"object"==typeof t?(Object(i.e)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?or(t[".sv"],e,n):"object"==typeof t[".sv"]?sr(t[".sv"],e):void Object(i.e)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},or=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(i.e)(!1,"Unexpected server value: "+t)}},sr=function(t,e,n){t.hasOwnProperty("increment")||Object(i.e)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(i.e)(!1,"Unexpected increment value: "+r);var o=e.node();if(Object(i.e)(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;var s=o.getValue();return"number"!=typeof s?r:s+r},ar=function(t,e,n,r){return cr(e,new rr(n,t),r)},ur=function(t,e,n){return cr(t,new nr(e),n)};function cr(t,e,n){var r,i=t.getPriority().val(),o=ir(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=ir(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Ht(a,te(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Ht(o))),u.forEachChild(Kt,(function(t,i){var o=cr(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}var lr=function(){return function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n}}();function hr(t,e){for(var n=e instanceof at?e:new at(e),r=t,o=ct(n);null!==o;){var s=Object(i.F)(r.node.children,o)||{children:{},childCount:0};r=new lr(o,r,s),o=ct(n=ht(n))}return r}function dr(t){return t.node.value}function fr(t,e){t.node.value=e,function t(e){null!==e.parent&&function(e,n,r){var o=function(t){return void 0===dr(t)&&!pr(t)}(r),s=Object(i.i)(e.node.children,n);o&&s?(delete e.node.children[n],e.node.childCount--,t(e)):o||s||(e.node.children[n]=r.node,e.node.childCount++,t(e))}(e.parent,e.name,e)}(t)}function pr(t){return t.node.childCount>0}function gr(t,e){D(t.node.children,(function(n,r){e(new lr(n,t,r))}))}function mr(t){return new at(null===t.parent?t.name:mr(t.parent)+"/"+t.name)}var yr=/[\[\].#$\/\u0000-\u001F\u007F]/,vr=/[\[\].#$\u0000-\u001F\u007F]/,br=function(t){return"string"==typeof t&&0!==t.length&&!yr.test(t)},_r=function(t){return"string"==typeof t&&0!==t.length&&!vr.test(t)},wr=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!I(t)||t&&"object"==typeof t&&Object(i.i)(t,".sv")},Or=function(t,e,n,r){r&&void 0===e||Sr(Object(i.n)(t,"value"),e,n)},Sr=function(t,e,n){var r=n instanceof at?new wt(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+St(r));if("function"==typeof e)throw new Error(t+"contains a function "+St(r)+" with contents = "+e.toString());if(I(e))throw new Error(t+"contains "+e.toString()+" "+St(r));if("string"==typeof e&&e.length>10485760/3&&Object(i.G)(e)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+St(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var o=!1,s=!1;if(D(e,(function(e,n){if(".value"===e)o=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!br(e)))throw new Error(t+" contains an invalid key ("+e+") "+St(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,u;!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Object(i.G)(e),Ot(t)}(r,e),Sr(t,n,r),u=(a=r).parts_.pop(),a.byteLength_-=Object(i.G)(u),a.parts_.length>0&&(a.byteLength_-=1)})),o&&s)throw new Error(t+' contains ".value" child '+St(r)+" in addition to actual children.")}},Cr=function(t,e,n,r){if(!r||void 0!==e){var o=Object(i.n)(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");var s=[];D(e,(function(t,e){var r=new at(t);if(Sr(o,e,gt(n,r)),".priority"===dt(r)&&!wr(e))throw new Error(o+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=ft(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!br(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(vt);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&_t(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(o,s)}},Er=function(t,e,n){if(!n||void 0!==e){if(I(e))throw new Error(Object(i.n)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!wr(e))throw new Error(Object(i.n)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Tr=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(i.n)(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Ir=function(t,e,n,r){if(!(r&&void 0===n||br(n)))throw new Error(Object(i.n)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},kr=function(t,e,n,r){if(!(r&&void 0===n||_r(n)))throw new Error(Object(i.n)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},xr=function(t,e){if(".info"===ct(e))throw new Error(t+" failed = Can't modify data under /.info/")},Ar=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!br(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),_r(t)}(n))throw new Error(Object(i.n)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Nr=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(i.n)(t,e)+"must be a boolean.")},jr=function(){return function(){this.eventLists_=[],this.recursionDepth_=0}}();function Rr(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||bt(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Pr(t,e,n){Rr(t,n),Lr(t,(function(t){return bt(t,e)}))}function Dr(t,e,n){Rr(t,n),Lr(t,(function(t){return _t(t,e)||_t(e,t)}))}function Lr(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(Mr(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Mr(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();b&&O("event: "+n.toString()),U(r)}}}var Fr=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new jr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ce(),this.transactionQueueTree_=new lr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function Ur(t){var e=t.infoData_.getNode(new at(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function Vr(t){return(e=(e={timestamp:Ur(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function qr(t,e,n,r,o){t.dataUpdateCount++;var s=new at(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(o)if(r){var u=Object(i.D)(n,(function(t){return te(t)}));a=function(t,e,n,r){var i=Xn(t,r);if(i){var o=Zn(i),s=o.path,a=o.queryId,u=yt(s,e),c=We.fromObject(n);return tr(t,s,new De(Ae(a),u,c))}return[]}(t.serverSyncTree_,s,u,o)}else{var c=te(n);a=function(t,e,n,r){var i=Xn(t,r);if(null!=i){var o=Zn(i),s=o.path,a=o.queryId,u=yt(s,e);return tr(t,s,new Pe(Ae(a),u,n))}return[]}(t.serverSyncTree_,s,c,o)}else if(r){var l=Object(i.D)(n,(function(t){return te(t)}));a=function(t,e,n){var r=We.fromObject(n);return Jn(t,new De({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,l)}else{var h=te(n);a=Wn(t.serverSyncTree_,s,h)}var d=s;a.length>0&&(d=Zr(t,s)),Dr(t.eventQueue_,d,a)}function zr(t,e){Br(t,"connected",e),!1===e&&function(t){Qr(t,"onDisconnectEvents");var e=Vr(t),n=Ce();Te(t.onDisconnect_,ut(),(function(r,i){var o=ar(r,i,t.serverSyncTree_,e);Ee(n,r,o)}));var r=[];Te(n,ut(),(function(e,n){r=r.concat(Wn(t.serverSyncTree_,e,n));var i=ri(t,e);Zr(t,i)})),t.onDisconnect_=Ce(),Dr(t.eventQueue_,ut(),r)}(t)}function Br(t,e,n){var r=new at("/.info/"+e),i=te(n);t.infoData_.updateSnapshot(r,i);var o=Wn(t.infoSyncTree_,r,i);Dr(t.eventQueue_,r,o)}function Wr(t){return t.nextWriteId_++}function Hr(t,e,n,r,i){Qr(t,"set",{path:e.toString(),value:n,priority:r});var o=Vr(t),s=te(n,r),a=Gn(t.serverSyncTree_,e),u=ur(s,a,o),c=Wr(t),l=zn(t.serverSyncTree_,e,u,c,!0);Rr(t.eventQueue_,l),t.server_.put(e.toString(),s.val(!0),(function(n,r){var o="ok"===n;o||T("set at "+e+" failed: "+n);var s=Bn(t.serverSyncTree_,c,!o);Dr(t.eventQueue_,e,s),$r(0,i,n,r)}));var h=ri(t,e);Zr(t,h),Dr(t.eventQueue_,h,[])}function Kr(t,e,n,r){var i=te(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(function(n,o){"ok"===n&&Ee(t.onDisconnect_,e,i),$r(0,r,n,o)}))}function Gr(t,e,n){var r;r=".info"===ct(e._path)?Hn(t.infoSyncTree_,e,n):Hn(t.serverSyncTree_,e,n),Pr(t.eventQueue_,e._path,r)}function Jr(t){t.persistentConnection_&&t.persistentConnection_.interrupt("repo_interrupt")}function Qr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),O.apply(void 0,Object(o.g)([r],Object(o.e)(e)))}function $r(t,e,n,r){e&&U((function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}}))}function Yr(t,e,n){return Gn(t.serverSyncTree_,e,n)||Xt.EMPTY_NODE}function Xr(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||ni(t,e),dr(e)){var n=ei(t,e);Object(i.e)(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return 0===t.status}))&&function(t,e,n){for(var r=n.map((function(t){return t.currentWriteId})),o=Yr(t,e,r),s=o,a=o.hash(),u=0;u<n.length;u++){var c=n[u];Object(i.e)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=yt(e,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),d=e;t.server_.put(d.toString(),h,(function(r){Qr(t,"transaction put response",{path:d.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=function(e){n[e].status=2,i=i.concat(Bn(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push((function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)})),n[e].unwatcher()},a=0;a<n.length;a++)s(a);for(ni(t,hr(t.transactionQueueTree_,e)),Xr(t,t.transactionQueueTree_),Dr(t.eventQueue_,e,i),a=0;a<o.length;a++)U(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)n[a].status=3===n[a].status?4:0;else for(T("transaction at "+d.toString()+" failed: "+r),a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r;Zr(t,e)}}),a)}(t,mr(e),n)}else pr(e)&&gr(e,(function(e){Xr(t,e)}))}function Zr(t,e){var n=ti(t,e),r=mr(n);return function(t,e,n){if(0!==e.length){for(var r=[],o=[],s=e.filter((function(t){return 0===t.status})).map((function(t){return t.currentWriteId})),a=function(a){var u,c=e[a],l=yt(n,c.path),h=!1;if(Object(i.e)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,o=o.concat(Bn(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,u="maxretry",o=o.concat(Bn(t.serverSyncTree_,c.currentWriteId,!0));else{var d=Yr(t,c.path,s);c.currentInputSnapshot=d;var f=e[a].update(d.val());if(void 0!==f){Sr("transaction failed: Data returned ",f,c.path);var p=te(f);"object"==typeof f&&null!=f&&Object(i.i)(f,".priority")||(p=p.updatePriority(d.getPriority()));var g=c.currentWriteId,m=Vr(t),y=ur(p,d,m);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=y,c.currentWriteId=Wr(t),s.splice(s.indexOf(g),1),o=(o=o.concat(zn(t.serverSyncTree_,c.path,y,c.currentWriteId,c.applyLocally))).concat(Bn(t.serverSyncTree_,g,!0))}else h=!0,u="nodata",o=o.concat(Bn(t.serverSyncTree_,c.currentWriteId,!0))}Dr(t.eventQueue_,n,o),o=[],h&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===u?function(){return e[a].onComplete(null,!1,e[a].currentInputSnapshot)}:function(){return e[a].onComplete(new Error(u),!1,null)}))},u=0;u<e.length;u++)a(u);for(ni(t,t.transactionQueueTree_),u=0;u<r.length;u++)U(r[u]);Xr(t,t.transactionQueueTree_)}}(t,ei(t,n),r),r}function ti(t,e){var n,r=t.transactionQueueTree_;for(n=ct(e);null!==n&&void 0===dr(r);)r=hr(r,n),n=ct(e=ht(e));return r}function ei(t,e){var n=[];return function t(e,n,r){var i=dr(n);if(i)for(var o=0;o<i.length;o++)r.push(i[o]);gr(n,(function(n){t(e,n,r)}))}(t,e,n),n.sort((function(t,e){return t.order-e.order})),n}function ni(t,e){var n=dr(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,fr(e,n.length>0?n:void 0)}gr(e,(function(e){ni(t,e)}))}function ri(t,e){var n=mr(ti(t,e)),r=hr(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,(function(e){ii(t,e)})),ii(t,r),function t(e,n,r,i){r&&!i&&n(e),gr(e,(function(e){t(e,n,!0,i)})),r&&i&&n(e)}(r,(function(e){ii(t,e)})),n}function ii(t,e){var n=dr(e);if(n){for(var r=[],o=[],s=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(Object(i.e)(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):(Object(i.e)(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),o=o.concat(Bn(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===s?fr(e,void 0):n.length=s+1,Dr(t.eventQueue_,mr(e),o),a=0;a<r.length;a++)U(r[a])}}var oi=function(t,e){var n=si(t),r=n.namespace;return"firebase.com"===n.domain&&E(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||E("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&T("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new H(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new at(n.pathString)}},si=function(t){var e="",n="",r="",i="",s="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,d)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Object(o.h)(t.split("&")),s=i.next();!s.done;s=i.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):T("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,d)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:i,namespace:s}},ai=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(i.I)(this.snapshot.exportVal())},t}(),ui=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),ci=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return Object(i.e)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),li=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t,e,n,r=new i.a;return t=this._repo,e=this._path,n=r.wrapCallback((function(){})),t.server_.onDisconnectCancel(e.toString(),(function(r,i){"ok"===r&&function t(e,n){if(mt(n))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var r=e.value;return e.value=null,r.forEachChild(Kt,(function(t,n){Ee(e,new at(t),n)})),t(e,n)}if(e.children.size>0){var i=ct(n);return n=ht(n),e.children.has(i)&&t(e.children.get(i),n)&&e.children.delete(i),0===e.children.size}return!0}(t.onDisconnect_,e),$r(0,n,r,i)})),r.promise},t.prototype.remove=function(){xr("OnDisconnect.remove",this._path);var t=new i.a;return Kr(this._repo,this._path,null,t.wrapCallback((function(){}))),t.promise},t.prototype.set=function(t){xr("OnDisconnect.set",this._path),Or("OnDisconnect.set",t,this._path,!1);var e=new i.a;return Kr(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},t.prototype.setWithPriority=function(t,e){xr("OnDisconnect.setWithPriority",this._path),Or("OnDisconnect.setWithPriority",t,this._path,!1),Er("OnDisconnect.setWithPriority",e,!1);var n=new i.a;return function(t,e,n,r,i){var o=te(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),(function(n,r){"ok"===n&&Ee(t.onDisconnect_,e,o),$r(0,i,n,r)}))}(this._repo,this._path,t,e,n.wrapCallback((function(){}))),n.promise},t.prototype.update=function(t){xr("OnDisconnect.update",this._path),Cr("OnDisconnect.update",t,this._path,!1);var e=new i.a;return function(t,e,n,r){if(Object(i.u)(n))return O("onDisconnect().update() called with empty data.  Don't do anything."),void $r(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,(function(i,o){"ok"===i&&D(n,(function(n,r){var i=te(r);Ee(t.onDisconnect_,gt(e,n),i)})),$r(0,r,i,o)}))}(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},t}(),hi=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return mt(this._path)?null:dt(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new gi(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=we(this._queryParams),e=R(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return we(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=Object(i.o)(e))instanceof t))return!1;var n=this._repo===e._repo,r=bt(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function di(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function fi(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Nt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==k)throw new Error(r);if("string"!=typeof e)throw new Error(o)}if(t.hasEnd()){if(t.getIndexEndName()!==x)throw new Error(r);if("string"!=typeof n)throw new Error(o)}}else if(t.getIndex()===Kt){if(null!=e&&!wr(e)||null!=n&&!wr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(i.e)(t.getIndex()instanceof re||t.getIndex()===ie,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function pi(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var gi=function(t){function e(e,n){return t.call(this,e,n,new me,!1)||this}return Object(o.c)(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=pt(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(hi),mi=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new at(e),r=bi(this.ref,e);return new t(this._node.getChild(n),r,Kt)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return e(new t(i,bi(n.ref,r),Kt))}))},t.prototype.hasChild=function(t){var e=new at(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function yi(t,e){return(t=Object(i.o)(t))._checkNotDeleted("ref"),void 0!==e?bi(t._root,e):t._root}function vi(t,e){(t=Object(i.o)(t))._checkNotDeleted("refFromURL");var n=oi(e,t._repo.repoInfo_.nodeAdmin);Ar("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||E("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),yi(t,n.path.toString())}function bi(t,e){var n;return null===ct((t=Object(i.o)(t))._path)?((n=e)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),kr("child","path",n,!1)):kr("child","path",e,!1),new gi(t._repo,gt(t._path,e))}function _i(t,e){t=Object(i.o)(t),xr("push",t._path),Or("push",e,t._path,!0);var n,r=Ur(t._repo),o=se(r),s=bi(t,o),a=bi(t,o);return n=null!=e?Oi(a,e).then((function(){return a})):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),s}function wi(t){return xr("remove",t._path),Oi(t,null)}function Oi(t,e){t=Object(i.o)(t),xr("set",t._path),Or("set",e,t._path,!1);var n=new i.a;return Hr(t._repo,t._path,e,null,n.wrapCallback((function(){}))),n.promise}function Si(t,e){t=Object(i.o)(t),xr("setPriority",t._path),Er("setPriority",e,!1);var n=new i.a;return Hr(t._repo,gt(t._path,".priority"),e,null,n.wrapCallback((function(){}))),n.promise}function Ci(t,e,n){if(xr("setWithPriority",t._path),Or("setWithPriority",e,t._path,!1),Er("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new i.a;return Hr(t._repo,t._path,e,n,r.wrapCallback((function(){}))),r.promise}function Ei(t,e){Cr("update",e,t._path,!1);var n=new i.a;return function(t,e,n,r){Qr(t,"update",{path:e.toString(),value:n});var o=!0,s=Vr(t),a={};if(D(n,(function(n,r){o=!1,a[n]=ar(gt(e,n),te(r),t.serverSyncTree_,s)})),o)O("update() called with empty data.  Don't do anything."),$r(0,r,"ok",void 0);else{var u=Wr(t),c=function(t,e,n,r){!function(t,e,n,r){Object(i.e)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Ge(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var o=We.fromObject(n);return Jn(t,new De({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,o))}(t.serverSyncTree_,e,a,u);Rr(t.eventQueue_,c),t.server_.merge(e.toString(),n,(function(n,i){var o="ok"===n;o||T("update at "+e+" failed: "+n);var s=Bn(t.serverSyncTree_,u,!o),a=s.length>0?Zr(t,e):e;Dr(t.eventQueue_,a,s),$r(0,r,n,i)})),D(n,(function(n){var r=ri(t,gt(e,n));Zr(t,r)})),Dr(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback((function(){}))),n.promise}var Ti=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new ai("value",this,new mi(t.snapshotNode,new gi(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new ui(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),Ii=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return this.eventType===("children_removed"===e?"child_removed":e)},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new ui(this,t,e):null},t.prototype.createEvent=function(t,e){Object(i.e)(null!=t.childName,"Child events should have a childName.");var n=bi(new gi(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new ai(t.type,this,new mi(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function ki(t,e,n,r,i){var o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){var s=n,a=function(e,n){Gr(t._repo,t,c),s(e,n)};a.userCallback=n.userCallback,a.context=n.context,n=a}var u=new ci(n,o||void 0),c="value"===e?new Ti(u):new Ii(e,u);return function(t,e,n){var r;r=".info"===ct(e._path)?Kn(t.infoSyncTree_,e,n):Kn(t.serverSyncTree_,e,n),Pr(t.eventQueue_,e._path,r)}(t._repo,t,c),function(){return Gr(t._repo,t,c)}}function xi(t,e,n,r){return ki(t,"value",e,n,r)}function Ai(t,e,n,r){return ki(t,"child_added",e,n,r)}function Ni(t,e,n,r){return ki(t,"child_changed",e,n,r)}function ji(t,e,n,r){return ki(t,"child_moved",e,n,r)}function Ri(t,e,n,r){return ki(t,"child_removed",e,n,r)}function Pi(t,e,n){var r=null,i=n?new ci(n):null;"value"===e?r=new Ti(i):e&&(r=new Ii(e,i)),Gr(t._repo,t,r)}var Di=function(){return function(){}}(),Li=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){Or("endAt",this._value,t._path,!0);var e=ve(t._queryParams,this._value,this._key);if(pi(e),fi(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new hi(t._repo,t._path,e,t._orderByCalled)},e}(Di);function Mi(t,e){return Ir("endAt","key",e,!0),new Li(t,e)}var Fi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){Or("endBefore",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Nt?("string"==typeof n&&(n=ue(n)),i=ve(e,n,r)):i=ve(e,n,null==r?k:ue(r)),i.endBeforeSet_=!0,i);if(pi(o),fi(o),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new hi(t._repo,t._path,o,t._orderByCalled)},e}(Di);function Ui(t,e){return Ir("endBefore","key",e,!0),new Fi(t,e)}var Vi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){Or("startAt",this._value,t._path,!0);var e=ye(t._queryParams,this._value,this._key);if(pi(e),fi(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new hi(t._repo,t._path,e,t._orderByCalled)},e}(Di);function qi(t,e){return void 0===t&&(t=null),Ir("startAt","key",e,!0),new Vi(t,e)}var zi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){Or("startAfter",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Nt?("string"==typeof n&&(n=ae(n)),i=ye(e,n,r)):i=ye(e,n,null==r?x:ae(r)),i.startAfterSet_=!0,i);if(pi(o),fi(o),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new hi(t._repo,t._path,o,t._orderByCalled)},e}(Di);function Bi(t,e){return Ir("startAfter","key",e,!0),new zi(t,e)}var Wi=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(o.c)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new hi(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="l",n),t._orderByCalled);var e,n},e}(Di);function Hi(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Wi(t)}var Ki=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(o.c)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new hi(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="r",n),t._orderByCalled);var e,n},e}(Di);function Gi(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Ki(t)}var Ji=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return Object(o.c)(e,t),e.prototype._apply=function(t){di(t,"orderByChild");var e=new at(this._path);if(mt(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new re(e),r=be(t._queryParams,n);return fi(r),new hi(t._repo,t._path,r,!0)},e}(Di);function Qi(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return kr("orderByChild","path",t,!1),new Ji(t)}var $i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype._apply=function(t){di(t,"orderByKey");var e=be(t._queryParams,Nt);return fi(e),new hi(t._repo,t._path,e,!0)},e}(Di);function Yi(){return new $i}var Xi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype._apply=function(t){di(t,"orderByPriority");var e=be(t._queryParams,Kt);return fi(e),new hi(t._repo,t._path,e,!0)},e}(Di);function Zi(){return new Xi}var to=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype._apply=function(t){di(t,"orderByValue");var e=be(t._queryParams,ie);return fi(e),new hi(t._repo,t._path,e,!0)},e}(Di);function eo(){return new to}var no=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){if(Or("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Li(this._value,this._key)._apply(new Vi(this._value,this._key)._apply(t))},e}(Di);function ro(t,e){return Ir("equalTo","key",e,!0),new no(t,e)}function io(t){for(var e,n,r=[],s=1;s<arguments.length;s++)r[s-1]=arguments[s];var a=Object(i.o)(t);try{for(var u=Object(o.h)(r),c=u.next();!c.done;c=u.next()){var l=c.value;a=l._apply(a)}}catch(h){e={error:h}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a}!function(t){Object(i.e)(!Sn,"__referenceConstructor has already been defined"),Sn=t}(gi),function(t){Object(i.e)(!An,"__referenceConstructor has already been defined"),An=t}(gi);var oo={},so=!1;function ao(t,e,n,r,i){var o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||E("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),O("Using default host for project ",t.options.projectId),o=t.options.projectId+"-default-rtdb.firebaseio.com");var s,a=oi(o,i),u=a.repoInfo,c=void 0;"undefined"!=typeof process&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(s=!0,u=(a=oi(o="http://"+c+"?ns="+u.namespace,i)).repoInfo):s=!a.repoInfo.secure;var l=i&&s?new B(B.OWNER):new z(t.name,t.options,e);Ar("Invalid Firebase Database URL",a),mt(a.path)||E("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(t,e,n,r){var i=oo[e.name];i||(oo[e.name]=i={});var o=i[t.toURLString()];return o&&E("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Fr(t,so,n,r),i[t.toURLString()]=o,o}(u,t,l,new q(t.name,n));return new uo(h,t)}var uo=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(function(t,e,n){if(t.stats_=$(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Oe(t.repoInfo_,(function(e,n,r,i){qr(t,e,n,r,i)}),t.authTokenProvider_,t.appCheckProvider_),setTimeout((function(){return zr(t,!0)}),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(i.I)(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new It(t.repoInfo_,e,(function(e,n,r,i){qr(t,e,n,r,i)}),(function(e){zr(t,e)}),(function(e){!function(t,e){D(e,(function(e,n){Br(t,e,n)}))}(t,e)}),t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}var r,o;t.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),t.appCheckProvider_.addTokenChangeListener((function(e){t.server_.refreshAppCheckToken(e.token)})),t.statsReporter_=(r=function(){return new ke(t.stats_,t.server_)},o=t.repoInfo_.toString(),Q[o]||(Q[o]=r()),Q[o]),t.infoData_=new Se,t.infoSyncTree_=new qn({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e._path);return s.isEmpty()||(o=Wn(t.infoSyncTree_,e._path,s),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),Br(t,"connected",!1),t.serverSyncTree_=new qn({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);Dr(t.eventQueue_,e._path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new gi(this._repo,ut())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){var t,e,n;return this._checkNotDeleted("delete"),t=this._repo,(n=oo[e=this.app.name])&&n[t.key]===t||E("Database "+e+"("+t.repoInfo_+") has already been deleted."),Jr(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null,Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&E("Cannot call "+t+" on a deleted database.")},t}();function co(t){(t=Object(i.o)(t))._checkNotDeleted("goOffline"),Jr(t._repo)}function lo(t){var e;(t=Object(i.o)(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume("repo_interrupt")}var ho={".sv":"timestamp"},fo=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function po(t,e,n){var r;if(t=Object(i.o)(t),xr("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var o=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,s=new i.a,a=xi(t,(function(){}));return function(e,n,r,o,a,u){Qr(e,"transaction on "+n);var c={path:n,update:r,onComplete:function(e,n,r){var i=null;e?s.reject(e):(i=new mi(r,new gi(t._repo,t._path),Kt),s.resolve(new fo(n,i)))},status:null,order:m(),applyLocally:u,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=Yr(e,n,void 0);c.currentInputSnapshot=l;var h=c.update(l.val());if(void 0===h)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Sr("transaction failed: Data returned ",h,c.path),c.status=0;var d=hr(e.transactionQueueTree_,n),f=dr(d)||[];f.push(c),fr(d,f);var p=void 0;"object"==typeof h&&null!==h&&Object(i.i)(h,".priority")?(p=Object(i.F)(h,".priority"),Object(i.e)(wr(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(Gn(e.serverSyncTree_,n)||Xt.EMPTY_NODE).getPriority().val();var g=Vr(e),y=te(h,p),v=ur(y,l,g);c.currentOutputSnapshotRaw=y,c.currentOutputSnapshotResolved=v,c.currentWriteId=Wr(e);var b=zn(e.serverSyncTree_,n,v,c.currentWriteId,c.applyLocally);Dr(e.eventQueue_,n,b),Xr(e,e.transactionQueueTree_)}}(t._repo,t._path,e,0,a,o),s.promise}var go=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){Object(i.J)("OnDisconnect.cancel",0,1,arguments.length),Object(i.K)("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},t.prototype.remove=function(t){Object(i.J)("OnDisconnect.remove",0,1,arguments.length),Object(i.K)("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},t.prototype.set=function(t,e){Object(i.J)("OnDisconnect.set",1,2,arguments.length),Object(i.K)("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},t.prototype.setWithPriority=function(t,e,n){Object(i.J)("OnDisconnect.setWithPriority",2,3,arguments.length),Object(i.K)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then((function(){return n(null)}),(function(t){return n(t)})),r},t.prototype.update=function(t,e){if(Object(i.J)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,T("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Object(i.K)("OnDisconnect.update","onComplete",e,!0);var o=this._delegate.update(t);return e&&o.then((function(){return e(null)}),(function(t){return e(t)})),o},t}(),mo=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(i.J)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),yo=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return Object(i.J)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return Object(i.J)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return Object(i.J)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return Object(i.J)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return Object(i.J)("DataSnapshot.child",0,1,arguments.length),e=String(e),kr("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return Object(i.J)("DataSnapshot.hasChild",1,1,arguments.length),kr("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return Object(i.J)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return Object(i.J)("DataSnapshot.forEach",1,1,arguments.length),Object(i.K)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach((function(r){return e(new t(n._database,r))}))},t.prototype.hasChildren=function(){return Object(i.J)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(i.J)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return Object(i.J)("DataSnapshot.ref",0,0,arguments.length),new bo(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),vo=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,o){var s,a=this;Object(i.J)("Query.on",2,4,arguments.length),Object(i.K)("Query.on","callback",n,!1);var u=t.getCancelAndContextArgs_("Query.on",r,o),c=function(t,e){n.call(u.context,new yo(a.database,t),e)};c.userCallback=n,c.context=u.context;var l=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(e){case"value":return xi(this._delegate,c,l),n;case"child_added":return Ai(this._delegate,c,l),n;case"child_removed":return Ri(this._delegate,c,l),n;case"child_changed":return Ni(this._delegate,c,l),n;case"child_moved":return ji(this._delegate,c,l),n;default:throw new Error(Object(i.n)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if(Object(i.J)("Query.off",0,3,arguments.length),Tr("Query.off",t,!0),Object(i.K)("Query.off","callback",e,!0),Object(i.L)("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,Pi(this._delegate,t,r)}else Pi(this._delegate,t)},t.prototype.get=function(){var t=this;return function(t){return function(t,e){var n=function(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(function(t,e){var i=yt(t,n);r=r||Dn(e,i)}));var i=t.syncPointTree_.get(n);i?r=r||Dn(i,ut()):(i=new Nn,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new Le(r,!0,!1):null;return ze(Rn(i,e,en(t.pendingWriteTree_,e._path),o?s.getNode():Xt.EMPTY_NODE,o).viewCache_)}(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then((function(n){var r=te(n),i=Wn(t.serverSyncTree_,e._path,r);return Pr(t.eventQueue_,e._path,i),Promise.resolve(r)}),(function(n){return Qr(t,"get for query "+Object(i.I)(e)+" failed: "+n),Promise.reject(new Error(n))}))}((t=Object(i.o)(t))._repo,t).then((function(e){return new mi(e,new gi(t._repo,t._path),t._queryParams.getIndex())}))}(this._delegate).then((function(e){return new yo(t.database,e)}))},t.prototype.once=function(e,n,r,o){var s=this;Object(i.J)("Query.once",1,4,arguments.length),Object(i.K)("Query.once","callback",n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,o),u=new i.a,c=function(t,e){var r=new yo(s.database,t);n&&n.call(a.context,r,e),u.resolve(r)};c.userCallback=n,c.context=a.context;var l=function(t){a.cancel&&a.cancel.call(a.context,t),u.reject(t)};switch(e){case"value":xi(this._delegate,c,l,{onlyOnce:!0});break;case"child_added":Ai(this._delegate,c,l,{onlyOnce:!0});break;case"child_removed":Ri(this._delegate,c,l,{onlyOnce:!0});break;case"child_changed":Ni(this._delegate,c,l,{onlyOnce:!0});break;case"child_moved":ji(this._delegate,c,l,{onlyOnce:!0});break;default:throw new Error(Object(i.n)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise},t.prototype.limitToFirst=function(e){return Object(i.J)("Query.limitToFirst",1,1,arguments.length),new t(this.database,io(this._delegate,Hi(e)))},t.prototype.limitToLast=function(e){return Object(i.J)("Query.limitToLast",1,1,arguments.length),new t(this.database,io(this._delegate,Gi(e)))},t.prototype.orderByChild=function(e){return Object(i.J)("Query.orderByChild",1,1,arguments.length),new t(this.database,io(this._delegate,Qi(e)))},t.prototype.orderByKey=function(){return Object(i.J)("Query.orderByKey",0,0,arguments.length),new t(this.database,io(this._delegate,Yi()))},t.prototype.orderByPriority=function(){return Object(i.J)("Query.orderByPriority",0,0,arguments.length),new t(this.database,io(this._delegate,Zi()))},t.prototype.orderByValue=function(){return Object(i.J)("Query.orderByValue",0,0,arguments.length),new t(this.database,io(this._delegate,eo()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),Object(i.J)("Query.startAt",0,2,arguments.length),new t(this.database,io(this._delegate,qi(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),Object(i.J)("Query.startAfter",0,2,arguments.length),new t(this.database,io(this._delegate,Bi(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),Object(i.J)("Query.endAt",0,2,arguments.length),new t(this.database,io(this._delegate,Mi(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),Object(i.J)("Query.endBefore",0,2,arguments.length),new t(this.database,io(this._delegate,Ui(e,n)))},t.prototype.equalTo=function(e,n){return Object(i.J)("Query.equalTo",1,2,arguments.length),new t(this.database,io(this._delegate,ro(e,n)))},t.prototype.toString=function(){return Object(i.J)("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return Object(i.J)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if(Object(i.J)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,Object(i.K)(t,"cancel",r.cancel,!0),r.context=n,Object(i.L)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(i.n)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new bo(this.database,new gi(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),bo=function(t){function e(e,n){var r=t.call(this,e,new hi(n._repo,n._path,new me,!1))||this;return r.database=e,r._delegate=n,r}return Object(o.c)(e,t),e.prototype.getKey=function(){return Object(i.J)("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return Object(i.J)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new e(this.database,bi(this._delegate,t))},e.prototype.getParent=function(){Object(i.J)("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return Object(i.J)("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){Object(i.J)("Reference.set",1,2,arguments.length),Object(i.K)("Reference.set","onComplete",e,!0);var n=Oi(this._delegate,t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},e.prototype.update=function(t,e){if(Object(i.J)("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,T("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}xr("Reference.update",this._delegate._path),Object(i.K)("Reference.update","onComplete",e,!0);var o=Ei(this._delegate,t);return e&&o.then((function(){return e(null)}),(function(t){return e(t)})),o},e.prototype.setWithPriority=function(t,e,n){Object(i.J)("Reference.setWithPriority",2,3,arguments.length),Object(i.K)("Reference.setWithPriority","onComplete",n,!0);var r=Ci(this._delegate,t,e);return n&&r.then((function(){return n(null)}),(function(t){return n(t)})),r},e.prototype.remove=function(t){Object(i.J)("Reference.remove",0,1,arguments.length),Object(i.K)("Reference.remove","onComplete",t,!0);var e=wi(this._delegate);return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},e.prototype.transaction=function(t,e,n){var r=this;Object(i.J)("Reference.transaction",1,3,arguments.length),Object(i.K)("Reference.transaction","transactionUpdate",t,!1),Object(i.K)("Reference.transaction","onComplete",e,!0),Nr("Reference.transaction","applyLocally",n,!0);var o=po(this._delegate,t,{applyLocally:n}).then((function(t){return new mo(t.committed,new yo(r.database,t.snapshot))}));return e&&o.then((function(t){return e(null,t.committed,t.snapshot)}),(function(t){return e(t,!1,null)})),o},e.prototype.setPriority=function(t,e){Object(i.J)("Reference.setPriority",1,2,arguments.length),Object(i.K)("Reference.setPriority","onComplete",e,!0);var n=Si(this._delegate,t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},e.prototype.push=function(t,n){var r=this;Object(i.J)("Reference.push",0,2,arguments.length),Object(i.K)("Reference.push","onComplete",n,!0);var o=_i(this._delegate,t),s=o.then((function(t){return new e(r.database,t)}));n&&s.then((function(){return n(null)}),(function(t){return n(t)}));var a=new e(this.database,o);return a.then=s.then.bind(s),a.catch=s.catch.bind(s,void 0),a},e.prototype.onDisconnect=function(){return xr("Reference.onDisconnect",this._delegate._path),new go(new li(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(vo),_o=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={}),(t=Object(i.o)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&E("Cannot call useEmulator() after instance has already been initialized.");var o=t._repoInternal,s=void 0;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&E('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new B(B.OWNER);else if(r.mockUserToken){var a=Object(i.j)(r.mockUserToken,t.app.options.projectId);s=new B(a)}!function(t,e,n,r){t.repoInfo_=new H(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}(o,e,n,s)}(this._delegate,t,e,n)},t.prototype.ref=function(t){if(Object(i.J)("database.ref",0,1,arguments.length),t instanceof bo){var e=vi(this._delegate,t.toString());return new bo(this,e)}return e=yi(this._delegate,t),new bo(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";Object(i.J)(e,1,1,arguments.length);var n=vi(this._delegate,t);return new bo(this,n)},t.prototype.goOffline=function(){return Object(i.J)("database.goOffline",0,0,arguments.length),co(this._delegate)},t.prototype.goOnline=function(){return Object(i.J)("database.goOnline",0,0,arguments.length),lo(this._delegate)},t.ServerValue={TIMESTAMP:ho,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}(),wo=Object.freeze({__proto__:null,forceLongPolling:function(){et.forceDisallow(),X.forceAllow()},forceWebSockets:function(){X.forceDisallow()},isWebSocketsAvailable:function(){return et.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new Ie(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce((function(t,e){return Math.max(e.length,t)}),0);D(n,(function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)}))}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){t.stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,i=t.customAuthImpl,o=t.namespace,s=t.nodeAdmin,a=void 0!==s&&s;u(t.version);var c=new r.c("auth-internal",new r.b("database-standalone"));return c.setComponent(new r.a("auth-internal",(function(){return i}),"PRIVATE")),{instance:new _o(ao(e,c,void 0,n,a),e),namespace:o}}}),Oo=It;It.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},It.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var So=Object.freeze({__proto__:null,DataConnection:Oo,RealTimeConnection:rt,hijackHash:function(t){var e=It.prototype.put;return It.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){It.prototype.put=e}},ConnectionTarget:H,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){so=t}(t)}}),Co=_o.ServerValue;!function(e){u(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new r.a("database",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new _o(ao(r,i,o,n),r)}),"PUBLIC").setServiceProps({Reference:bo,Query:vo,Database:_o,DataSnapshot:yo,enableLogging:w,INTERNAL:wo,ServerValue:Co,TEST_ACCESS:So}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.10.1"),Object(i.y)()&&(t.exports=n)}(e.a)}).call(this,n("3UD+")(t))},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"8Qeq":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");function i(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Bpvx:function(t,e,n){"use strict";var r=n("Qfp6"),i=n("Pfkr"),o=n("3RSX"),s=n("n8Jw")||0;function a(){return i(s)}t.exports=a,t.exports.generate=a,t.exports.seed=function(e){return r.seed(e),t.exports},t.exports.worker=function(e){return s=e,t.exports},t.exports.characters=function(t){return void 0!==t&&r.characters(t),r.shuffled()},t.exports.isValid=o},CR0S:function(t,e,n){"use strict";var r="object"==typeof window&&(window.crypto||window.msCrypto);t.exports=r&&r.getRandomValues?function(t){return r.getRandomValues(new Uint8Array(t))}:function(t){for(var e=[],n=0;n<t;n++)e.push(Math.floor(256*Math.random()));return e}},Cfvw:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule((function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())})))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o}));var r=n("3N8a");const i=new(n("IjjT").a)(r.a),o=i},DH7j:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EY2u:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},FurV:function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"f",(function(){return s})),n.d(e,"b",(function(){return a})),n.d(e,"d",(function(){return u})),n.d(e,"h",(function(){return c})),n.d(e,"e",(function(){return l})),n.d(e,"g",(function(){return h}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function a(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function u(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function c(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function h(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}},HDdC:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("8Qeq"),i=n("7o/Q"),o=n("2QA8"),s=n("gRHU"),a=n("kJWO"),u=n("SpAZ"),c=n("2fFW");let l=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:r}=this,a=function(t,e,n){if(t){if(t instanceof i.a)return t;if(t[o.a])return t[o.a]()}return t||e||n?new i.a(t,e,n):new i.a(s.a)}(t,e,n);if(a.add(r?r.call(a,this.source):this.source||c.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),c.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){c.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),Object(r.a)(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=h(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[a.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?u.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=h(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function h(t){if(t||(t=c.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",(function(){return r.a})),r.a.registerVersion("firebase","8.6.2","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",(function(){return i}));const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",(function(){return r}))},Pfkr:function(t,e,n){"use strict";var r,i,o=n("vZIR");n("Qfp6"),t.exports=function(t){var e="",n=Math.floor(.001*(Date.now()-1567752802062));return n===i?r++:(r=0,i=n),e+=o(7),e+=o(t),r>0&&(e+=o(r)),e+o(n)}},Qfp6:function(t,e,n){"use strict";var r,i,o,s=n("fqyn"),a="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function u(){o=!1}function c(t){if(t){if(t!==r){if(t.length!==a.length)throw new Error("Custom alphabet for shortid must be "+a.length+" unique characters. You submitted "+t.length+" characters: "+t);var e=t.split("").filter((function(t,e,n){return e!==n.lastIndexOf(t)}));if(e.length)throw new Error("Custom alphabet for shortid must be "+a.length+" unique characters. These characters were not unique: "+e.join(", "));r=t,u()}}else r!==a&&(r=a,u())}function l(){return o||(o=function(){r||c(a);for(var t,e=r.split(""),n=[],i=s.nextValue();e.length>0;)i=s.nextValue(),t=Math.floor(i*e.length),n.push(e.splice(t,1)[0]);return n.join("")}())}t.exports={get:function(){return r||a},characters:function(t){return c(t),r},seed:function(t){s.seed(t),i!==t&&(u(),i=t)},lookup:function(t){return l()[t]},shuffled:l}},SeVD:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",(function(){return r}))},VRyK:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},XNiG:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return l}));var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",(function(){return r}))},Y7HM:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("DH7j");function i(t){return!Object(r.a)(t)&&t-parseFloat(t)+1>=0}},YcCt:function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,i){n=n||"=";var o={};if("string"!=typeof t||0===t.length)return o;var s=/\+/g;t=t.split(e=e||"&");var a=1e3;i&&"number"==typeof i.maxKeys&&(a=i.maxKeys);var u=t.length;a>0&&u>a&&(u=a);for(var c=0;c<u;++c){var l,h,d,f,p=t[c].replace(s,"%20"),g=p.indexOf(n);g>=0?(l=p.substr(0,g),h=p.substr(g+1)):(l=p,h=""),d=decodeURIComponent(l),f=decodeURIComponent(h),r(o,d)?Array.isArray(o[d])?o[d].push(f):o[d]=[o[d],f]:o[d]=f}return o}},Ylt2:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.b)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",(function(){return r}))},fXoL:function(t,e,n){"use strict";n.d(e,"a",(function(){return go})),n.d(e,"b",(function(){return Ya})),n.d(e,"c",(function(){return Ka})),n.d(e,"d",(function(){return Wa})),n.d(e,"e",(function(){return Ha})),n.d(e,"f",(function(){return qu})),n.d(e,"g",(function(){return Nu})),n.d(e,"h",(function(){return $i})),n.d(e,"i",(function(){return uu})),n.d(e,"j",(function(){return Ps})),n.d(e,"k",(function(){return tu})),n.d(e,"l",(function(){return Ds})),n.d(e,"m",(function(){return wn})),n.d(e,"n",(function(){return Ia})),n.d(e,"o",(function(){return K})),n.d(e,"p",(function(){return l})),n.d(e,"q",(function(){return H})),n.d(e,"r",(function(){return po})),n.d(e,"s",(function(){return ta})),n.d(e,"t",(function(){return ea})),n.d(e,"u",(function(){return Za})),n.d(e,"v",(function(){return st})),n.d(e,"w",(function(){return Ru})),n.d(e,"x",(function(){return ot})),n.d(e,"y",(function(){return Tu})),n.d(e,"z",(function(){return hu})),n.d(e,"A",(function(){return h})),n.d(e,"B",(function(){return $a})),n.d(e,"C",(function(){return Qa})),n.d(e,"D",(function(){return xa})),n.d(e,"E",(function(){return Us})),n.d(e,"F",(function(){return Ms})),n.d(e,"G",(function(){return Fs})),n.d(e,"H",(function(){return qs})),n.d(e,"I",(function(){return cr})),n.d(e,"J",(function(){return f})),n.d(e,"K",(function(){return Lu})),n.d(e,"L",(function(){return oa})),n.d(e,"M",(function(){return bu})),n.d(e,"N",(function(){return Xi})),n.d(e,"O",(function(){return Bs})),n.d(e,"P",(function(){return zs})),n.d(e,"Q",(function(){return aa})),n.d(e,"R",(function(){return gt})),n.d(e,"S",(function(){return Iu})),n.d(e,"T",(function(){return Un})),n.d(e,"U",(function(){return A})),n.d(e,"V",(function(){return Fn})),n.d(e,"W",(function(){return Uu})),n.d(e,"X",(function(){return Ou})),n.d(e,"Y",(function(){return Xa})),n.d(e,"Z",(function(){return Zi})),n.d(e,"ab",(function(){return ws})),n.d(e,"bb",(function(){return ar})),n.d(e,"cb",(function(){return Wn})),n.d(e,"db",(function(){return xn})),n.d(e,"eb",(function(){return Nn})),n.d(e,"fb",(function(){return Dn})),n.d(e,"gb",(function(){return Rn})),n.d(e,"hb",(function(){return jn})),n.d(e,"ib",(function(){return Pn})),n.d(e,"jb",(function(){return ys})),n.d(e,"kb",(function(){return Fu})),n.d(e,"lb",(function(){return vs})),n.d(e,"mb",(function(){return bs})),n.d(e,"nb",(function(){return An})),n.d(e,"ob",(function(){return M})),n.d(e,"pb",(function(){return To})),n.d(e,"qb",(function(){return Ho})),n.d(e,"rb",(function(){return Wo})),n.d(e,"sb",(function(){return ms})),n.d(e,"tb",(function(){return $t})),n.d(e,"ub",(function(){return I})),n.d(e,"vb",(function(){return kn})),n.d(e,"wb",(function(){return vo})),n.d(e,"xb",(function(){return Wt})),n.d(e,"yb",(function(){return Ns})),n.d(e,"zb",(function(){return Ar})),n.d(e,"Ab",(function(){return Ao})),n.d(e,"Bb",(function(){return is})),n.d(e,"Cb",(function(){return Ua})),n.d(e,"Db",(function(){return bt})),n.d(e,"Eb",(function(){return Tt})),n.d(e,"Fb",(function(){return y})),n.d(e,"Gb",(function(){return v})),n.d(e,"Hb",(function(){return St})),n.d(e,"Ib",(function(){return It})),n.d(e,"Jb",(function(){return Po})),n.d(e,"Kb",(function(){return Vo})),n.d(e,"Lb",(function(){return zo})),n.d(e,"Mb",(function(){return qo})),n.d(e,"Nb",(function(){return Uo})),n.d(e,"Ob",(function(){return Fo})),n.d(e,"Pb",(function(){return Bo})),n.d(e,"Qb",(function(){return yn})),n.d(e,"Rb",(function(){return ds})),n.d(e,"Sb",(function(){return et})),n.d(e,"Tb",(function(){return Do})),n.d(e,"Ub",(function(){return Ba})),n.d(e,"Vb",(function(){return Ko})),n.d(e,"Wb",(function(){return Va})),n.d(e,"Xb",(function(){return Qo})),n.d(e,"Yb",(function(){return Oa})),n.d(e,"Zb",(function(){return Sa})),n.d(e,"ac",(function(){return Ca})),n.d(e,"bc",(function(){return Xo})),n.d(e,"cc",(function(){return Yo})),n.d(e,"dc",(function(){return Lo})),n.d(e,"ec",(function(){return Zo})),n.d(e,"fc",(function(){return va})),n.d(e,"gc",(function(){return ba})),n.d(e,"hc",(function(){return Fa})),n.d(e,"ic",(function(){return Ro})),n.d(e,"jc",(function(){return ge})),n.d(e,"kc",(function(){return hr})),n.d(e,"lc",(function(){return lr})),n.d(e,"mc",(function(){return Ct})),n.d(e,"nc",(function(){return jo})),n.d(e,"oc",(function(){return za})),n.d(e,"pc",(function(){return cs})),n.d(e,"qc",(function(){return ls})),n.d(e,"rc",(function(){return hs}));var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function u(t){return{toString:t}.toString()}function c(t,e,n){return u(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty("__parameters__")?t.__parameters__:Object.defineProperty(t,"__parameters__",{value:[]}).__parameters__;for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}const l=c("Inject",t=>({token:t})),h=c("Optional"),d=c("Self"),f=c("SkipSelf");var p=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function g(t){for(let e in t)if(t[e]===g)return e;throw Error("Could not find renamed property on target object.")}function m(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function y(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function v(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function b(t){return _(t,t[O])||_(t,t[E])}function _(t,e){return e&&e.token===t?e:null}function w(t){return t&&(t.hasOwnProperty(S)||t.hasOwnProperty(T))?t[S]:null}const O=g({\u0275prov:g}),S=g({\u0275inj:g}),C=g({\u0275provFallback:g}),E=g({ngInjectableDef:g}),T=g({ngInjectorDef:g});function I(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(I).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function k(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const x=g({__forward_ref__:g});function A(t){return t.__forward_ref__=A,t.toString=function(){return I(this())},t}function N(t){return j(t)?t():t}function j(t){return"function"==typeof t&&t.hasOwnProperty(x)&&t.__forward_ref__===A}const R="undefined"!=typeof globalThis&&globalThis,P="undefined"!=typeof window&&window,D="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,L="undefined"!=typeof global&&global,M=R||L||P||D,F=g({\u0275cmp:g}),U=g({\u0275dir:g}),V=g({\u0275pipe:g}),q=g({\u0275mod:g}),z=g({\u0275loc:g}),B=g({\u0275fac:g}),W=g({__NG_ELEMENT_ID__:g});class H{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=y({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return"InjectionToken "+this._desc}}const K=new H("INJECTOR",-1),G={},J=/\n/gm,Q=g({provide:String,useValue:g});let $,Y=void 0;function X(t){const e=Y;return Y=t,e}function Z(t){const e=$;return $=t,e}function tt(t,e=p.Default){if(void 0===Y)throw new Error("inject() must be called from an injection context");return null===Y?nt(t,void 0,e):Y.get(t,e&p.Optional?null:void 0,e)}function et(t,e=p.Default){return($||tt)(N(t),e)}function nt(t,e,n){const r=b(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&p.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${I(t)}]`)}function rt(t){const e=[];for(let n=0;n<t.length;n++){const r=N(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=p.Default;for(let e=0;e<r.length;e++){const i=r[e];i instanceof h||"Optional"===i.ngMetadataName||i===h?n|=p.Optional:i instanceof f||"SkipSelf"===i.ngMetadataName||i===f?n|=p.SkipSelf:i instanceof d||"Self"===i.ngMetadataName||i===d?n|=p.Self:t=i instanceof l||i===l?i.token:i}e.push(et(t,n))}else e.push(et(r))}return e}class it{get(t,e=G){if(e===G){const e=new Error(`NullInjectorError: No provider for ${I(t)}!`);throw e.name="NullInjectorError",e}return e}}class ot{}class st{}function at(t,e){t.forEach(t=>Array.isArray(t)?at(t,e):e(t))}function ut(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ct(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function lt(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function ht(t,e,n){let r=ft(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function dt(t,e){const n=ft(t,e);if(n>=0)return t[1|n]}function ft(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}var pt=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),gt=function(t){return t[t.Emulated=0]="Emulated",t[t.Native=1]="Native",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const mt={},yt=[];let vt=0;function bt(t){return u(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===pt.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||yt,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||gt.Emulated,id:"c",styles:t.styles||yt,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=vt++,n.inputs=Et(t.inputs,e),n.outputs=Et(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(_t):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(wt):null,n})}function _t(t){return kt(t)||function(t){return t[U]||null}(t)}function wt(t){return function(t){return t[V]||null}(t)}const Ot={};function St(t){const e={type:t.type,bootstrap:t.bootstrap||yt,declarations:t.declarations||yt,imports:t.imports||yt,exports:t.exports||yt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&u(()=>{Ot[t.id]=t.type}),e}function Ct(t,e){return u(()=>{const n=At(t,!0);n.declarations=e.declarations||yt,n.imports=e.imports||yt,n.exports=e.exports||yt})}function Et(t,e){if(null==t)return mt;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const Tt=bt;function It(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function kt(t){return t[F]||null}function xt(t,e){return t.hasOwnProperty(B)?t[B]:null}function At(t,e){const n=t[q]||null;if(!n&&!0===e)throw new Error(`Type ${I(t)} does not have '\u0275mod' property.`);return n}function Nt(t){return Array.isArray(t)&&"object"==typeof t[1]}function jt(t){return Array.isArray(t)&&!0===t[1]}function Rt(t){return 0!=(8&t.flags)}function Pt(t){return 2==(2&t.flags)}function Dt(t){return 1==(1&t.flags)}function Lt(t){return null!==t.template}function Mt(t){return 0!=(512&t[2])}function Ft(t){return"string"==typeof t?t:null==t?"":""+t}function Ut(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Ft(t)}const Vt=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(M))();function qt(t){return t instanceof Function?t():t}function zt(t,e){const n=e?" in "+e:"";throw new Error(`No provider for ${Ut(t)} found${n}`)}class Bt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function Wt(){return Ht}function Ht(t){return t.type.prototype.ngOnChanges&&(t.setInput=Gt),Kt}function Kt(){const t=Jt(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===mt)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Gt(t,e,n,r){const i=Jt(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:mt,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new Bt(u&&u.currentValue,e,s===mt),t[r]=e}function Jt(t){return t.__ngSimpleChanges__||null}Wt.ngInherit=!0;let Qt=void 0;function $t(t){Qt=t}function Yt(t){return!!t.listen}const Xt={createRenderer:(t,e)=>void 0!==Qt?Qt:"undefined"!=typeof document?document:void 0};function Zt(t){for(;Array.isArray(t);)t=t[0];return t}function te(t,e){return Zt(e[t+20])}function ee(t,e){return Zt(e[t.index])}function ne(t,e){return t.data[e+20]}function re(t,e){return t[e+20]}function ie(t,e){const n=e[t];return Nt(n)?n:n[0]}function oe(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function se(t){return 4==(4&t[2])}function ae(t){return 128==(128&t[2])}function ue(t,e){return null===t||null==e?null:t[e]}function ce(t){t[18]=0}function le(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const he={lFrame:Ne(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function de(){return he.bindingsEnabled}function fe(){return he.lFrame.lView}function pe(){return he.lFrame.tView}function ge(t){he.lFrame.contextLView=t}function me(){return he.lFrame.currentTNode}function ye(t,e){he.lFrame.currentTNode=t,he.lFrame.isParent=e}function ve(){return he.lFrame.isParent}function be(){he.lFrame.isParent=!1}function _e(){return he.isInCheckNoChangesMode}function we(t){he.isInCheckNoChangesMode=t}function Oe(){const t=he.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Se(){return he.lFrame.bindingIndex++}function Ce(t,e){const n=he.lFrame;n.bindingIndex=n.bindingRootIndex=t,Ee(e)}function Ee(t){he.lFrame.currentDirectiveIndex=t}function Te(){return he.lFrame.currentQueryIndex}function Ie(t){he.lFrame.currentQueryIndex=t}function ke(t,e){const n=Ae();he.lFrame=n,n.currentTNode=e,n.lView=t}function xe(t){const e=Ae(),n=t[1];he.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex}function Ae(){const t=he.lFrame,e=null===t?null:t.child;return null===e?Ne(t):e}function Ne(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null};return null!==t&&(t.child=e),e}function je(){const t=he.lFrame;return he.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Re=je;function Pe(){const t=je();t.isParent=!0,t.tView=null,t.selectedIndex=0,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function De(){return he.lFrame.selectedIndex}function Le(t){he.lFrame.selectedIndex=t}function Me(){const t=he.lFrame;return ne(t.tView,t.selectedIndex)}function Fe(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function Ue(t,e,n){ze(t,e,3,n)}function Ve(t,e,n,r){(3&t[2])===n&&ze(t,e,n,r)}function qe(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function ze(t,e,n,r){const i=null!=r?r:-1;let o=0;for(let s=void 0!==r?65535&t[18]:0;s<e.length;s++)if("number"==typeof e[s+1]){if(o=e[s],null!=r&&o>=r)break}else e[s]<0&&(t[18]+=65536),(o<i||-1==i)&&(Be(t,n,e,s),t[18]=(4294901760&t[18])+s+2),s++}function Be(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}class We{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function He(t,e,n){const r=Yt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];Ge(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Ke(t){return 3===t||4===t||6===t}function Ge(t){return 64===t.charCodeAt(0)}function Je(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Qe(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Qe(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function $e(t){return-1!==t}function Ye(t){return 32767&t}function Xe(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Ze=!0;function tn(t){const e=Ze;return Ze=t,e}let en=0;function nn(t,e){const n=on(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,rn(r.data,t),rn(e,null),rn(r.blueprint,null));const i=sn(t,e),o=t.injectorIndex;if($e(i)){const t=Ye(i),n=Xe(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function rn(t,e){t.push(0,0,0,0,0,0,0,0,e)}function on(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function sn(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function an(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(W)&&(r=n[W]),null==r&&(r=n[W]=en++);const i=255&r,o=1<<i,s=64&i,a=32&i,u=e.data;128&i?s?a?u[t+7]|=o:u[t+6]|=o:a?u[t+5]|=o:u[t+4]|=o:s?a?u[t+3]|=o:u[t+2]|=o:a?u[t+1]|=o:u[t]|=o}(t,e,n)}function un(t,e,n,r=p.Default,i){if(null!==t){const i=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(W)?t[W]:void 0;return"number"==typeof e&&e>0?255&e:e}(n);if("function"==typeof i){ke(e,t);try{const t=i();if(null!=t||r&p.Optional)return t;zt(n)}finally{Re()}}else if("number"==typeof i){if(-1===i)return new gn(t,e);let o=null,s=on(t,e),a=-1,u=r&p.Host?e[16][6]:null;for((-1===s||r&p.SkipSelf)&&(a=-1===s?sn(t,e):e[s+8],-1!==a&&pn(r,!1)?(o=e[1],s=Ye(a),e=Xe(a,e)):s=-1);-1!==s;){const t=e[1];if(fn(i,s,t.data)){const t=ln(s,e,n,o,r,u);if(t!==cn)return t}a=e[s+8],-1!==a&&pn(r,e[1].data[s+8]===u)&&fn(i,s,e)?(o=t,s=Ye(a),e=Xe(a,e)):s=-1}}}if(r&p.Optional&&void 0===i&&(i=null),0==(r&(p.Self|p.Host))){const t=e[9],o=Z(void 0);try{return t?t.get(n,i,r&p.Optional):nt(n,i,r&p.Optional)}finally{Z(o)}}if(r&p.Optional)return i;zt(n,"NodeInjector")}const cn={};function ln(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=hn(a,s,n,null==r?Pt(a)&&Ze:r!=s&&2===a.type,i&p.Host&&o===a);return null!==u?dn(e,s,u,a):cn}function hn(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&Lt(t)&&t.type===n)return u}return null}function dn(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof We){const s=i;s.resolving&&function(t,e){throw new Error("Circular dependency in DI detected for "+t)}(Ut(o[n]));const a=tn(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?Z(s.injectImpl):null;ke(t,r);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=Ht(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&Z(u),tn(a),s.resolving=!1,Re()}}return i}function fn(t,e,n){const r=64&t,i=32&t;let o;return o=128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e],!!(o&1<<t)}function pn(t,e){return!(t&p.Self||t&p.Host&&e)}class gn{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return un(this._tNode,this._lView,t,void 0,e)}}function mn(t){const e=t;if(j(t))return()=>{const t=mn(N(e));return t?t():null};let n=xt(e);if(null===n){const t=w(e);n=t&&t.factory}return n||null}function yn(t){return u(()=>{const e=t.prototype.constructor,n=e[B]||mn(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[B]||mn(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function vn(t){return t.ngDebugContext}function bn(t){return t.ngOriginalError}function _n(t,...e){t.error(...e)}class wn{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||_n}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?vn(t)?vn(t):this._findContext(bn(t)):null}_findOriginalError(t){let e=bn(t);for(;e&&bn(e);)e=bn(e);return e}}class On{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}class Sn extends On{getTypeName(){return"HTML"}}class Cn extends On{getTypeName(){return"Style"}}class En extends On{getTypeName(){return"Script"}}class Tn extends On{getTypeName(){return"URL"}}class In extends On{getTypeName(){return"ResourceURL"}}function kn(t){return t instanceof On?t.changingThisBreaksApplicationSecurity:t}function xn(t,e){const n=An(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see http://g.co/ng/security#xss)`)}return n===e}function An(t){return t instanceof On&&t.getTypeName()||null}function Nn(t){return new Sn(t)}function jn(t){return new Cn(t)}function Rn(t){return new En(t)}function Pn(t){return new Tn(t)}function Dn(t){return new In(t)}let Ln=!0,Mn=!1;function Fn(){return Mn=!0,Ln}function Un(){if(Mn)throw new Error("Cannot enable prod mode after platform setup.");Ln=!1}class Vn{getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(e){return null}}}class qn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=t,e;const n=this.inertDocument.createElement("body");return n.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const zn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Bn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Wn(t){return(t=String(t)).match(zn)||t.match(Bn)?t:(Fn()&&console.warn(`WARNING: sanitizing unsafe URL value ${t} (see http://g.co/ng/security#xss)`),"unsafe:"+t)}function Hn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Kn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Gn=Hn("area,br,col,hr,img,wbr"),Jn=Hn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Qn=Hn("rp,rt"),$n=Kn(Qn,Jn),Yn=Kn(Gn,Kn(Jn,Hn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Kn(Qn,Hn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),$n),Xn=Hn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Zn=Hn("srcset"),tr=Kn(Xn,Zn,Hn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Hn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),er=Hn("script,style,template");class nr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Yn.hasOwnProperty(e))return this.sanitizedSomething=!0,!er.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!tr.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;Xn[o]&&(s=Wn(s)),Zn[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Wn(t.trim())).join(", ")),this.buf.push(" ",e,'="',or(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Yn.hasOwnProperty(e)&&!Gn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(or(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e}}const rr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ir=/([^\#-~ |!])/g;function or(t){return t.replace(/&/g,"&amp;").replace(rr,(function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"})).replace(ir,(function(t){return"&#"+t.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let sr;function ar(t,e){let n=null;try{sr=sr||function(t){return function(){try{return!!(new window.DOMParser).parseFromString("","text/html")}catch(t){return!1}}()?new Vn:new qn(t)}(t);let r=e?String(e):"";n=sr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=sr.getInertBodyElement(r)}while(r!==o);const s=new nr,a=s.sanitizeChildren(ur(n)||n);return Fn()&&s.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n){const t=ur(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function ur(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var cr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function lr(t){const e=dr();return e?e.sanitize(cr.URL,t)||"":xn(t,"URL")?kn(t):Wn(Ft(t))}function hr(t){const e=dr();if(e)return e.sanitize(cr.RESOURCE_URL,t)||"";if(xn(t,"ResourceURL"))return kn(t);throw new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)")}function dr(){const t=fe();return t&&t[12]}function fr(t,e){t.__ngContext__=e}function pr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}function gr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==pr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function mr(t){return 0===t.type&&"ng-template"!==t.tagName}function yr(t,e,n){return e===(0!==t.type||n?t.tagName:"ng-template")}function vr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Ke(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!yr(t,u,n)||""===u&&1===e.length){if(br(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!gr(t.attrs,c,n)){if(br(r))return!1;s=!0}continue}const l=_r(8&r?"class":u,i,mr(t),n);if(-1===l){if(br(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==pr(e,c,0)||2&r&&c!==t){if(br(r))return!1;s=!0}}}}else{if(!s&&!br(r)&&!br(u))return!1;if(s&&br(u))continue;s=!1,r=u|1&r}}return br(r)||s}function br(t){return 0==(1&t)}function _r(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function wr(t,e,n=!1){for(let r=0;r<e.length;r++)if(vr(t,e[r],n))return!0;return!1}function Or(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function Sr(t,e){return t?":not("+e.trim()+")":e}function Cr(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||br(s)||(e+=Sr(o,i),i=""),r=s,o=o||!br(r);n++}return""!==i&&(e+=Sr(o,i)),e}const Er={};function Tr(t){const e=t[3];return jt(e)?e[3]:e}function Ir(t){return xr(t[13])}function kr(t){return xr(t[4])}function xr(t){for(;null!==t&&!jt(t);)t=t[4];return t}function Ar(t){Nr(pe(),fe(),De()+t,_e())}function Nr(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&Ue(e,r,n)}else{const r=t.preOrderHooks;null!==r&&Ve(e,r,0,n)}Le(n)}function jr(t,e){return t<<17|e<<2}function Rr(t){return t>>17&32767}function Pr(t){return 2|t}function Dr(t){return(131068&t)>>2}function Lr(t,e){return-131069&t|e<<2}function Mr(t){return 1|t}function Fr(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];Ie(i),n.contentQueries(2,e[o],o)}}}function Ur(t,e,n){return Yt(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Vr(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,ce(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function qr(t,e,n,r,i){const o=e+20,s=t.data[o]||function(t,e,n,r,i){const o=me(),s=ve(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s&&null==o.child&&null!==a.parent?o.child=a:s||(o.next=a)),a}(t,o,n,r,i);return ye(s,!0),s}function zr(t,e,n){xe(e);try{const r=t.viewQuery;null!==r&&bi(1,r,n);const i=t.template;null!==i&&Hr(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Fr(t,e),t.staticViewQueries&&bi(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)pi(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,Pe()}}function Br(t,e,n,r){const i=e[2];if(256==(256&i))return;xe(e);const o=_e();try{ce(e),he.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Hr(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&Ue(e,n,null)}else{const n=t.preOrderHooks;null!==n&&Ve(e,n,0,null),qe(e,0)}if(function(t){for(let e=Ir(t);null!==e;e=kr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&le(r,1),n[2]|=1024}}}(e),function(t){for(let e=Ir(t);null!==e;e=kr(e))for(let t=10;t<e.length;t++){const n=e[t],r=n[1];ae(n)&&Br(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&Fr(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&Ue(e,n)}else{const n=t.contentHooks;null!==n&&Ve(e,n,1),qe(e,1)}!function(t,e){try{const n=t.expandoInstructions;if(null!==n){let r=t.expandoStartIndex,i=-1,o=-1;for(let t=0;t<n.length;t++){const s=n[t];"number"==typeof s?s<=0?(o=0-s,Le(o),r+=9+n[++t],i=r):r+=s:(null!==s&&(Ce(r,i),s(2,e[i])),i++)}}}finally{Le(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)fi(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&bi(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&Ue(e,n)}else{const n=t.viewHooks;null!==n&&Ve(e,n,2),qe(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,le(e[3],-1))}finally{Pe()}}function Wr(t,e,n,r){const i=e[10],o=!_e(),s=se(e);try{o&&!s&&i.begin&&i.begin(),s&&zr(t,e,r),Br(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Hr(t,e,n,r,i){const o=De();try{Le(-1),2&r&&e.length>20&&Nr(t,e,0,_e()),n(r,i)}finally{Le(o)}}function Kr(t,e,n){if(Rt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function Gr(t,e,n){de()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||nn(n,e),fr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=Lt(r);o&&ci(e,n,r);const u=dn(e,t,a,n);fr(u,e),null!==s&&li(0,a-i,u,r,0,s),o&&(ie(n.index,e)[8]=u)}}(t,e,n,ee(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=t.expandoInstructions,s=t.firstCreatePass,a=n.index-20,u=he.lFrame.currentDirectiveIndex;try{Le(a);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];Ee(n),null!==r.hostBindings||0!==r.hostVars||null!==r.hostAttrs?ri(r,i):s&&o.push(null)}}finally{Le(-1),Ee(u)}}(t,e,n))}function Jr(t,e,n=ee){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Qr(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=$r(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function $r(t,e,n,r,i,o,s,a,u,c){const l=20+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Er);return n}(l,h),f="function"==typeof c?c():c;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function Yr(t,e,n,r){const i=wi(e);i.push(n),t.firstCreatePass&&function(t){return t.cleanup||(t.cleanup=[])}(t).push(r,i.length-1)}function Xr(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Zr(t,e,n,r,i,o,s,a){const u=ee(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(Si(t,n,c,r,i),Pt(e)&&function(t,e){const n=ie(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):2===e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.tagName||"",r):i,Yt(o)?o.setProperty(u,r,i):Ge(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function ti(t,e,n,r){let i=!1;if(de()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];wr(n,s.selectors,!1)&&(i||(i=[]),an(nn(n,e),t,s.type),Lt(s)?(oi(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){let r=0;i=!0,ai(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}ii(t,n,o.length);let a=!1,u=!1;for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Je(n.mergedAttrs,c.hostAttrs),ui(t,e,c),si(t.data.length-1,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!a&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index-20),a=!0),u||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index-20),u=!0),ei(t,c),r+=c.hostVars}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||mr(e)?null:hi(n,i);o.push(c),s=Xr(n,u,s),a=Xr(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n),ni(t,e,r)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new Error(`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Je(n.mergedAttrs,n.attrs),i}function ei(t,e){const n=t.expandoInstructions;n.push(e.hostBindings),0!==e.hostVars&&n.push(e.hostVars)}function ni(t,e,n){for(let r=0;r<n;r++)e.push(Er),t.blueprint.push(Er),t.data.push(null)}function ri(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function ii(t,e,n){const r=20-e.index,i=t.data.length-(1048575&e.providerIndexes);(t.expandoInstructions||(t.expandoInstructions=[])).push(r,i,n)}function oi(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function si(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Lt(e)&&(n[""]=t)}}function ai(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function ui(t,e,n){t.data.push(n);const r=n.factory||(n.factory=xt(n.type)),i=new We(r,Lt(n),null);t.blueprint.push(i),e.push(i)}function ci(t,e,n){const r=ee(e,t),i=Qr(n),o=t[10],s=gi(t,Vr(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function li(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function hi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function di(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function fi(t,e){const n=ie(e,t);if(ae(n)){const t=n[1];80&n[2]?Br(t,n,t.template,n[8]):n[5]>0&&function t(e){for(let r=Ir(e);null!==r;r=kr(r))for(let e=10;e<r.length;e++){const n=r[e];if(1024&n[2]){const t=n[1];Br(t,n,t.template,n[8])}else n[5]>0&&t(n)}const n=e[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=ie(n[r],e);ae(i)&&i[5]>0&&t(i)}}(n)}}function pi(t,e){const n=ie(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),zr(r,n,n[8])}function gi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function mi(t){for(;t;){t[2]|=64;const e=Tr(t);if(Mt(t)&&!e)return t;t=e}return null}function yi(t,e,n){const r=e[10];r.begin&&r.begin();try{Br(t,e,t.template,n)}catch(i){throw Oi(e,i),i}finally{r.end&&r.end()}}function vi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=oe(n),i=r[1];Wr(i,r,i.template,n)}}(t[8])}function bi(t,e,n){Ie(0),e(t,n)}const _i=(()=>Promise.resolve(null))();function wi(t){return t[7]||(t[7]=[])}function Oi(t,e){const n=t[9],r=n?n.get(wn,null):null;r&&r.handleError(e)}function Si(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Ci(t,e,n,r,i){if(null!=r){let o,s=!1;jt(r)?o=r:Nt(r)&&(s=!0,r=r[0]);const a=Zt(r);0===t&&null!==n?null==i?Ni(e,n,a):Ai(e,n,a,i||null):1===t&&null!==n?Ai(e,n,a,i||null):2===t?function(t,e,n){const r=Ri(t,e);r&&function(t,e,n,r){Yt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==Zt(n)&&Ci(e,t,r,o,i);for(let s=10;s<n.length;s++){const i=n[s];Mi(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Ei(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,le(i,-1)),n.splice(r,1)}function Ti(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Ei(o,r),e>0&&(t[n-1][4]=r[4]);const s=ct(t,10+e);Mi(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Ii(t,e){if(!(256&e[2])){const n=e[11];Yt(n)&&n.destroyNode&&Mi(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return ki(t[1],t);for(;e;){let n=null;if(Nt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)Nt(e)&&ki(e[1],e),e=e[3];null===e&&(e=t),Nt(e)&&ki(e[1],e),n=e&&e[4]}e=n}}(e)}}function ki(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof We)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup;if(null!==n){const t=e[7];for(let r=0;r<n.length-1;r+=2)if("string"==typeof n[r]){const i=n[r+1],o="function"==typeof i?i(e):Zt(e[i]),s=t[n[r+2]],a=n[r+3];"boolean"==typeof a?o.removeEventListener(n[r],s,a):a>=0?t[a]():t[-a].unsubscribe(),r+=2}else n[r].call(t[n[r+1]]);e[7]=null}}(t,e),1===e[1].type&&Yt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&jt(e[3])){n!==e[3]&&Ei(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function xi(t,e,n){let r=e.parent;for(;null!=r&&(3===r.type||4===r.type);)r=(e=r).parent;if(null===r)return n[0];if(e&&4===e.type&&4&e.flags)return ee(e,n).parentNode;if(2&r.flags){const e=t.data,n=e[e[r.index].directiveStart].encapsulation;if(n!==gt.ShadowDom&&n!==gt.Native)return null}return ee(r,n)}function Ai(t,e,n,r){Yt(t)?t.insertBefore(e,n,r):e.insertBefore(n,r,!0)}function Ni(t,e,n){Yt(t)?t.appendChild(e,n):e.appendChild(n)}function ji(t,e,n,r){null!==r?Ai(t,e,n,r):Ni(t,e,n)}function Ri(t,e){return Yt(t)?t.parentNode(e):e.parentNode}function Pi(t,e){return 3===t.type||4===t.type?ee(t,e):null}function Di(t,e,n,r){const i=xi(t,r,e);if(null!=i){const t=e[11],o=Pi(r.parent||e[6],e);if(Array.isArray(n))for(let e=0;e<n.length;e++)ji(t,i,n[e],o);else ji(t,i,n,o)}}function Li(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;s&&0===e&&(a&&fr(Zt(a),r),n.flags|=4),64!=(64&n.flags)&&(3===u||4===u?(Li(t,e,n.child,r,i,o,!1),Ci(e,t,i,a,o)):1===u?Fi(t,e,r,n,i,o):Ci(e,t,i,a,o)),n=s?n.projectionNext:n.next}}function Mi(t,e,n,r,i,o){Li(n,r,t.firstChild,e,i,o,!1)}function Fi(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Ci(e,t,i,a[u],o);else Li(t,e,a,s[3],i,o,!0)}function Ui(t,e,n){Yt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Vi(t,e,n){Yt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}class qi{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._viewContainerRef=null}get rootNodes(){const t=this._lView,e=t[1];return function t(e,n,r,i,o=!1){for(;null!==r;){const s=n[r.index];if(null!==s&&i.push(Zt(s)),jt(s))for(let e=10;e<s.length;e++){const n=s[e],r=n[1].firstChild;null!==r&&t(n[1],n,r,i)}const a=r.type;if(3===a||4===a)t(e,n,r.child,i);else if(1===a){const e=n[16],o=e[6].projection[r.projection];if(Array.isArray(o))i.push(...o);else{const n=Tr(e);t(n[1],n,o,i,!0)}}r=o?r.projectionNext:r.next}return i}(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}Ii(this._lView[1],this._lView)}onDestroy(t){Yr(this._lView[1],this._lView,null,t)}markForCheck(){mi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){yi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){we(!0);try{yi(t,e,n)}finally{we(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}detachFromAppRef(){var t;this._appRef=null,Mi(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class zi extends qi{constructor(t){super(t),this._view=t}detectChanges(){vi(this._view)}checkNoChanges(){!function(t){we(!0);try{vi(t)}finally{we(!1)}}(this._view)}get context(){return null}}let Bi,Wi,Hi;function Ki(t,e,n){return Bi||(Bi=class extends t{}),new Bi(ee(e,n))}function Gi(t,e,n,r){return Wi||(Wi=class extends t{constructor(t,e,n){super(),this._declarationView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Vr(this._declarationView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationView[this._declarationTContainer.index];const r=this._declarationView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),zr(e,n,t),new qi(n)}}),0===n.type?new Wi(r,n,Ki(e,n,r)):null}function Ji(t,e,n,r){let i;Hi||(Hi=class extends t{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostView=n}get element(){return Ki(e,this._hostTNode,this._hostView)}get injector(){return new gn(this._hostTNode,this._hostView)}get parentInjector(){const t=sn(this._hostTNode,this._hostView);if($e(t)){const e=Xe(t,this._hostView),n=Ye(t);return new gn(e[1].data[n+8],e)}return new gn(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){return null!==this._lContainer[8]&&this._lContainer[8][t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(ot,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),jt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Hi(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=10+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-10?(e[4]=n[i],ut(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=function t(e,n){const r=10+e+1;if(r<n.length){const e=n[r],i=e[1].firstChild;if(null!==i)return function e(n,r){if(null!==r){const i=r.type;if(2===i)return ee(r,n);if(0===i)return t(-1,n[r.index]);if(3===i||4===i){const i=r.child;if(null!==i)return e(n,i);{const e=n[r.index];return jt(e)?t(-1,e):Zt(e)}}{const t=n[16],i=t[6],o=Tr(t),s=i.projection[r.projection];return null!=s?e(o,s):e(n,r.next)}}return null}(e,i)}return n[7]}(i,o),a=n[11],u=Ri(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Mi(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(this),ut(o[8],i,t),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(t,e)}indexOf(t){const e=this._lContainer[8];return null!==e?e.indexOf(t):-1}remove(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=Ti(this._lContainer,e);n&&(ct(this._lContainer[8],e),Ii(n[1],n))}detach(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=Ti(this._lContainer,e);return n&&null!=ct(this._lContainer[8],e)?new qi(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}allocateContainerIfNeeded(){null===this._lContainer[8]&&(this._lContainer[8]=[])}});const o=r[n.index];if(jt(o))i=o;else{let t;if(3===n.type)t=Zt(o);else if(t=r[11].createComment(""),Mt(r)){const e=r[11],i=ee(n,r);Ai(e,Ri(e,i),t,function(t,e){return Yt(t)?t.nextSibling(e):e.nextSibling}(e,i))}else Di(r[1],r,t,n);r[n.index]=i=di(o,r,t,n),gi(r,i)}return new Hi(i,n,r)}function Qi(t=!1){return function(t,e,n){if(!n&&Pt(t)){const n=ie(t.index,e);return new qi(n,n)}return 2===t.type||0===t.type||3===t.type||4===t.type?new qi(e[16],e):null}(me(),fe(),t)}let $i=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Yi(),t})();const Yi=Qi,Xi=Function,Zi=new H("Set Injector scope."),to={},eo={},no=[];let ro=void 0;function io(){return void 0===ro&&(ro=new it),ro}function oo(t,e=null,n=null,r){return new so(t,n,e||io(),r)}class so{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&at(e,n=>this.processProvider(n,t,e)),at([t],t=>this.processInjectorType(t,[],i)),this.records.set(K,co(void 0,this));const o=this.records.get(Zi);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:I(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=G,n=p.Default){this.assertNotDestroyed();const r=X(this);try{if(!(n&p.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof H)&&b(t);e=n&&this.injectableDefInScope(n)?co(ao(t),to):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&p.Self?io():this.parent).get(t,e=n&p.Optional&&e===G?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(I(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e.__source&&i.unshift(e.__source),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=I(e);if(Array.isArray(e))i=e.map(I).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):I(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(J,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{X(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(I(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=N(t)))return!1;let r=w(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=w(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{at(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];at(r,t=>this.processProvider(t,n,r||no))}}this.injectorDefTypes.add(o),this.records.set(o,co(r.factory,to));const a=r.providers;if(null!=a&&!s){const e=t;at(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=ho(t=N(t))?t:N(t&&t.provide);const i=function(t,e,n){return lo(t)?co(void 0,t.useValue):co(uo(t),to)}(t);if(ho(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=co(void 0,to,!0),e.factory=()=>rt(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===to&&(e.value=eo,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function ao(t){const e=b(t),n=null!==e?e.factory:xt(t);if(null!==n)return n;const r=w(t);if(null!==r)return r.factory;if(t instanceof H)throw new Error(`Token ${I(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=lt(e,"?");throw new Error(`Can't resolve all parameters for ${I(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[O]||t[E]||t[C]&&t[C]());if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function uo(t,e,n){let r=void 0;if(ho(t)){const e=N(t);return xt(e)||ao(e)}if(lo(t))r=()=>N(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...rt(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>et(N(t.useExisting));else{const e=N(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return xt(e)||ao(e);r=()=>new e(...rt(t.deps))}var i;return r}function co(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function lo(t){return null!==t&&"object"==typeof t&&Q in t}function ho(t){return"function"==typeof t}const fo=function(t,e,n){return function(t,e=null,n=null,r){const i=oo(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let po=(()=>{class t{static create(t,e){return Array.isArray(t)?fo(t,e,""):fo(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=G,t.NULL=new it,t.\u0275prov=y({token:t,providedIn:"any",factory:()=>et(K)}),t.__NG_ELEMENT_ID__=-1,t})();const go=new H("AnalyzeForEntryComponents");function mo(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=k(i,t):2==o&&(r=k(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function yo(t,e){const n=oe(t)[1],r=n.data.length-1;Fe(n,{directiveStart:r,directiveEnd:r+1})}function vo(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i=void 0;if(Lt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=bo(t.inputs),e.declaredInputs=bo(t.declaredInputs),e.outputs=bo(t.outputs);const n=i.hostBindings;n&&Oo(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&_o(t,o),s&&wo(t,s),m(t.inputs,i.inputs),m(t.declaredInputs,i.declaredInputs),m(t.outputs,i.outputs),Lt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===vo&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Je(i.hostAttrs,n=Je(n,i.hostAttrs))}}(r)}function bo(t){return t===mt?{}:t===yt?[]:t}function _o(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function wo(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function Oo(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let So=null;function Co(){if(!So){const t=M.Symbol;if(t&&t.iterator)So=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(So=n)}}}return So}class Eo{constructor(t){this.wrapped=t}static wrap(t){return new Eo(t)}static unwrap(t){return Eo.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Eo}}function To(t){return!!Io(t)&&(Array.isArray(t)||!(t instanceof Map)&&Co()in t)}function Io(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function ko(t,e,n){return t[e]=n}function xo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Ao(t,e,n,r){const i=fe();return xo(i,Se(),e)&&(pe(),function(t,e,n,r,i,o){const s=ee(t,e),a=e[11];if(null==r)Yt(a)?a.removeAttribute(s,n,o):s.removeAttribute(n);else{const e=null==i?Ft(r):i(r,t.tagName||"",n);Yt(a)?a.setAttribute(s,n,e,o):o?s.setAttributeNS(o,n,e):s.setAttribute(n,e)}}(Me(),i,t,e,n,r)),Ao}function No(t,e,n,r){return xo(t,Se(),n)?e+Ft(n)+r:Er}function jo(t,e,n,r,i,o,s,a){const u=fe(),c=pe(),l=t+20,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=qr(e,t,0,s||null,ue(c,a));ti(e,n,l,ue(c,u)),Fe(e,l);const h=l.tViews=$r(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(t,c,u,e,n,r,i,o,s):c.data[l];ye(h,!1);const d=u[11].createComment("");Di(c,u,d,h),fr(d,u),gi(u,u[l]=di(d,u,d,h)),Dt(h)&&Gr(c,u,h),null!=s&&Jr(u,h,a)}function Ro(t){return re(he.lFrame.contextLView,t)}function Po(t,e=p.Default){const n=fe();return null===n?et(t,e):un(me(),n,N(t),e)}function Do(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Ke(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(me(),t)}function Lo(t,e,n){const r=fe();return xo(r,Se(),e)&&Zr(pe(),Me(),r,t,e,r[11],n,!1),Lo}function Mo(t,e,n,r,i){const o=i?"class":"style";Si(t,n,e.inputs[o],o,r)}function Fo(t,e,n,r){const i=fe(),o=pe(),s=20+t,a=i[11],u=i[s]=Ur(e,a,he.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=qr(e,t,2,i,ue(a,o));return ti(e,n,u,ue(a,s)),null!==u.attrs&&mo(u,u.attrs,!1),null!==u.mergedAttrs&&mo(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(t,o,i,0,e,n,r):o.data[s];ye(c,!0);const l=c.mergedAttrs;null!==l&&He(a,u,l);const h=c.classes;null!==h&&Vi(a,u,h);const d=c.styles;null!==d&&Ui(a,u,d),Di(o,i,u,c),0===he.lFrame.elementDepthCount&&fr(u,i),he.lFrame.elementDepthCount++,Dt(c)&&(Gr(o,i,c),Kr(o,c,i)),null!==r&&Jr(i,c)}function Uo(){let t=me();ve()?be():(t=t.parent,ye(t,!1));const e=t;he.lFrame.elementDepthCount--;const n=pe();n.firstCreatePass&&(Fe(n,t),Rt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Mo(n,e,fe(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Mo(n,e,fe(),e.stylesWithoutHost,!1)}function Vo(t,e,n,r){Fo(t,e,n,r),Uo()}function qo(t,e,n){const r=fe(),i=pe(),o=t+20,s=i.firstCreatePass?function(t,e,n,r,i){const o=e.consts,s=ue(o,r),a=qr(e,t,3,"ng-container",s);return null!==s&&mo(a,s,!0),ti(e,n,a,ue(o,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(t,i,r,e,n):i.data[o];ye(s,!0);const a=r[o]=r[11].createComment("");Di(i,r,a,s),fr(a,r),Dt(s)&&(Gr(i,r,s),Kr(i,s,r)),null!=n&&Jr(r,s)}function zo(){let t=me();const e=pe();ve()?be():(t=t.parent,ye(t,!1)),e.firstCreatePass&&(Fe(e,t),Rt(t)&&e.queries.elementEnd(t))}function Bo(){return fe()}function Wo(t){return!!t&&"function"==typeof t.then}function Ho(t){return!!t&&"function"==typeof t.subscribe}function Ko(t,e,n=!1,r){const i=fe(),o=pe(),s=me();return function(t,e,n,r,i,o,s=!1,a){const u=Dt(r),c=t.firstCreatePass&&(t.cleanup||(t.cleanup=[])),l=wi(e);let h=!0;if(2===r.type){const d=ee(r,e),f=a?a(d):mt,p=f.target||d,g=l.length,m=a?t=>a(Zt(t[r.index])).target:r.index;if(Yt(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Jo(r,e,o,!1);const t=n.listen(f.name||p,i,o);l.push(o,t),c&&c.push(i,m,g,g+1)}}else o=Jo(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,m,g,s)}const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),Ko}function Go(t,e,n){try{return!1!==e(n)}catch(r){return Oi(t,r),!1}}function Jo(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?ie(t.index,e):e;0==(32&e[2])&&mi(s);let a=Go(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=Go(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Qo(t=1){return function(t){return(he.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,he.lFrame.contextLView))[8]}(t)}function $o(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?wr(t,o,!0):Or(r,o))return i}else n=i}return n}function Yo(t){const e=fe()[16][6];if(!e.projection){const n=e.projection=lt(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?$o(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function Xo(t,e=0,n){const r=fe(),i=pe(),o=qr(i,t,1,null,n||null);null===o.projection&&(o.projection=e),be(),function(t,e,n){Fi(e[11],0,e,n,xi(t,n,e),Pi(n.parent||e[6],e))}(i,r,o)}function Zo(t,e,n){return ts(t,"",e,"",n),Zo}function ts(t,e,n,r,i){const o=fe(),s=No(o,e,n,r);return s!==Er&&Zr(pe(),Me(),o,t,s,o[11],i,!1),ts}const es=[];function ns(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?Rr(o):Dr(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];rs(t[a],e)&&(u=!0,t[a+1]=r?Mr(n):Pr(n)),a=r?Rr(n):Dr(n)}u&&(t[n+1]=r?Pr(o):Mr(o))}function rs(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&ft(t,e)>=0}function is(t,e){return function(t,e,n,r){const i=fe(),o=pe(),s=function(t){const e=he.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+2,n}();o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const r=i[De()+20],o=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(r)&&null===e&&!o&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=he.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=e.residualClasses;if(null===i)0===e.classBindings&&(n=ss(n=os(null,t,e,n,true),e.attrs,true),o=null);else{const r=e.directiveStylingLast;if(-1===r||t[r]!==i)if(n=os(i,t,e,n,true),null===o){let n=function(t,e,n){const r=e.classBindings;if(0!==Dr(r))return t[Rr(r)]}(t,e);void 0!==n&&Array.isArray(n)&&(n=os(null,t,e,n[1],true),n=ss(n,e.attrs,true),function(t,e,n,r){t[Rr(e.classBindings)]=r}(t,e,0,n))}else o=function(t,e,n){let r=void 0;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=ss(r,t[o].hostAttrs,true);return ss(r,e.attrs,true)}(t,e)}return void 0!==o&&(e.residualClasses=o),n}(i,r,e),function(t,e,n,r,i,o){let s=e.classBindings,a=Rr(s),u=Dr(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||ft(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=Rr(t[a+1]);t[r+1]=jr(e,a),0!==e&&(t[e+1]=Lr(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=jr(a,0),0!==a&&(t[a+1]=Lr(t[a+1],r)),a=r;else t[r+1]=jr(u,0),0===a?a=r:t[u+1]=Lr(t[u+1],r),u=r;l&&(t[r+1]=Pr(t[r+1])),ns(t,c,r,!0),ns(t,c,r,!1),function(t,e,n,r,i){const o=t.residualClasses;null!=o&&"string"==typeof e&&ft(o,e)>=0&&(n[r+1]=Mr(n[r+1]))}(e,c,t,r),s=jr(a,u),e.classBindings=s}(i,r,e,n,o)}}(o,t,s),e!==Er&&xo(i,s,e)&&function(t,e,n,r,i,o,s,a){if(2!==e.type)return;const u=t.data,c=u[a+1];us(1==(1&c)?as(u,e,n,i,Dr(c),true):void 0)||(us(o)||function(t){return 2==(2&t)}(c)&&(o=as(u,null,n,i,a,true)),function(t,e,n,r,i){const o=Yt(t);i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r)}(r,0,te(De(),n),i,o))}(o,o.data[De()+20],i,i[11],t,i[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=I(kn(t))),t}(e),0,s)}(t,e),is}function os(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=ss(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function ss(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),ht(t,s,!!n||e[++o]))}return void 0===t?null:t}function as(t,e,n,r,i,o){const s=null===e;let a=void 0;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===Er&&(l=c?es:void 0);let h=c?dt(l,r):u===r?l:void 0;if(o&&!us(h)&&(h=dt(e,r)),us(h)&&(a=h,s))return a;const d=t[i+1];i=s?Rr(d):Dr(d)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=dt(t,r))}return a}function us(t){return void 0!==t}function cs(t,e=""){const n=fe(),r=pe(),i=t+20,o=r.firstCreatePass?qr(r,t,2,null,null):r.data[i],s=n[i]=function(t,e){return Yt(e)?e.createText(t):e.createTextNode(t)}(e,n[11]);Di(r,n,s,o),ye(o,!1)}function ls(t){return hs("",t,""),ls}function hs(t,e,n){const r=fe(),i=No(r,t,e,n);return i!==Er&&function(t,e,n){const r=te(e,t),i=t[11];Yt(i)?i.setValue(r,n):r.textContent=n}(r,De(),i),hs}function ds(t,e,n){const r=fe();return xo(r,Se(),e)&&Zr(pe(),Me(),r,t,e,r[11],n,!0),ds}const fs=void 0;var ps=["en",[["a","p"],["AM","PM"],fs],[["AM","PM"],fs,fs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],fs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],fs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",fs,"{1} 'at' {0}",fs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let gs={};function ms(t,e,n){"string"!=typeof e&&(n=e,e=t[ws.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),gs[e]=t,n&&(gs[e][ws.ExtraData]=n)}function ys(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=_s(e);if(n)return n;const r=e.split("-")[0];if(n=_s(r),n)return n;if("en"===r)return ps;throw new Error(`Missing locale data for the locale "${t}".`)}function vs(t){return ys(t)[ws.CurrencyCode]||null}function bs(t){return ys(t)[ws.PluralCase]}function _s(t){return t in gs||(gs[t]=M.ng&&M.ng.common&&M.ng.common.locales&&M.ng.common.locales[t]),gs[t]}var ws=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});let Os="en-US";function Ss(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: "+t+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Os=t.toLowerCase().replace(/_/g,"-"))}function Cs(t,e,n,r,i){if(t=N(t),Array.isArray(t))for(let o=0;o<t.length;o++)Cs(t[o],e,n,r,i);else{const o=pe(),s=fe();let a=ho(t)?t:N(t.provide),u=uo(t);const c=me(),l=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(ho(t)||!t.multi){const r=new We(u,i,Po),f=Is(a,e,i?l:l+d,h);-1===f?(an(nn(c,s),o,a),Es(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[f]=r,s[f]=r)}else{const f=Is(a,e,l+d,h),p=Is(a,e,l,l+d),g=f>=0&&n[f],m=p>=0&&n[p];if(i&&!m||!i&&!g){an(nn(c,s),o,a);const l=function(t,e,n,r,i){const o=new We(t,n,Po);return o.multi=[],o.index=e,o.componentProviders=0,Ts(o,i,r&&!n),o}(i?xs:ks,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),Es(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else Es(o,t,f>-1?f:p,Ts(n[i?p:f],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function Es(t,e,n,r){const i=ho(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function Ts(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Is(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function ks(t,e,n,r){return As(this.multi,[])}function xs(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=dn(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),As(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],As(i,o);return o}function As(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Ns(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=pe();if(r.firstCreatePass){const i=Lt(t);Cs(n,r.data,r.blueprint,i,!0),Cs(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class js{}class Rs{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${I(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Ps=(()=>{class t{}return t.NULL=new Rs,t})(),Ds=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>Ls(t),t})();const Ls=function(t){return Ki(t,me(),fe())};class Ms{}var Fs=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});let Us=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Vs(),t})();const Vs=function(){const t=fe(),e=ie(me().index,t);return function(t){const e=t[11];if(Yt(e))return e;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(Nt(e)?e:t)};let qs=(()=>{class t{}return t.\u0275prov=y({token:t,providedIn:"root",factory:()=>null}),t})();class zs{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Bs=new zs("10.2.5");class Ws{constructor(){}supports(t){return To(t)}create(t){return new Ks(t)}}const Hs=(t,e)=>e;class Ks{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Hs}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<$s(n,r,i)?e:n,s=$s(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!To(t))throw new Error(`Error trying to diff '${I(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Co()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new Gs(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Qs),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Qs),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Gs{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Js{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Qs{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Js,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function $s(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Ys{constructor(){}supports(t){return t instanceof Map||Io(t)}create(){return new Xs}}class Xs{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Io(t)))throw new Error(`Error trying to diff '${I(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Zs(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Zs{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let ta=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new f,new h]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=y({token:t,providedIn:"root",factory:()=>new t([new Ws])}),t})(),ea=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new f,new h]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=y({token:t,providedIn:"root",factory:()=>new t([new Ys])}),t})();const na=[new Ys],ra=new ta([new Ws]),ia=new ea(na);let oa=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>sa(t,Ds),t})();const sa=function(t,e){return Gi(t,e,me(),fe())};let aa=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>ua(t,Ds),t})();const ua=function(t,e){return Ji(t,e,me(),fe())},ca={};class la extends Ps{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=kt(t);return new fa(e,this.ngModule)}}function ha(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const da=new H("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Vt});class fa extends js{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Cr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return ha(this.componentDef.inputs)}get outputs(){return ha(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,ca,i);return o!==ca||r===ca?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Ms,Xt),s=i.get(qs,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(Yt(t))return t.selectRootElement(e,n===gt.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Ur(u,o.createRenderer(null,this.componentDef),function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:Vt,clean:_i,playerHandler:null,flags:0},d=$r(0,null,null,1,0,null,null,null,null,null),f=Vr(null,d,h,l,null,null,o,a,s,i);let p,g;xe(f);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=qr(s,0,2,null,null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(mo(a,u,!0),null!==t&&(He(i,t,u),null!==a.classes&&Vi(i,t,a.classes),null!==a.styles&&Ui(i,t,a.styles)));const c=r.createRenderer(t,e),l=Vr(n,Qr(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(an(nn(a,n),s,e.type),oi(s,a),ai(a,n.length,1)),gi(n,l),n[20]=l}(c,this.componentDef,f,o,a);if(c)if(n)He(a,c,["ng-version",Bs.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!br(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&He(a,c,t),e&&e.length>0&&Vi(a,c,e.join(" "))}if(g=ne(d,0),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=me();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),ii(t,r,1),ui(t,e,n));const i=dn(e,t,e.length-1,r);fr(i,e);const o=ee(r,e);return o&&fr(o,e),i}(o,n,e);r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries&&e.contentQueries(1,s,n.length-1);const a=me();if(o.firstCreatePass&&(null!==e.hostBindings||null!==e.hostAttrs)){Le(a.index-20);const t=n[1];ei(t,e),ni(t,n,e.hostVars),ri(e,s)}return s}(t,this.componentDef,f,h,[yo]),zr(d,f,null)}finally{Pe()}return new pa(this.componentType,p,Ki(Ds,g,f),f,g)}}class pa extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.destroyCbs=[],this.instance=e,this.hostView=this.changeDetectorRef=new zi(r),this.componentType=t}get injector(){return new gn(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(t=>t()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(t){this.destroyCbs&&this.destroyCbs.push(t)}}const ga=new Map;class ma extends ot{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new la(this);const n=At(t),r=t[z]||null;r&&Ss(r),this._bootstrapComponents=qt(n.bootstrap),this._r3Injector=oo(t,e,[{provide:ot,useValue:this},{provide:Ps,useValue:this.componentFactoryResolver}],I(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=po.THROW_IF_NOT_FOUND,n=p.Default){return t===po||t===ot||t===K?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class ya extends st{constructor(t){super(),this.moduleType=t,null!==At(t)&&function(t){const e=new Set;!function t(n){const r=At(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${I(e)} vs ${I(e.name)}`)}(i,ga.get(i),n),ga.set(i,n));const o=qt(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new ma(this.moduleType,t)}}function va(t,e,n){const r=Oe()+t,i=fe();return i[r]===Er?ko(i,r,n?e.call(n):e()):function(t,e){return t[e]}(i,r)}function ba(t,e,n,r){return wa(fe(),Oe(),t,e,n,r)}function _a(t,e){const n=t[e];return n===Er?void 0:n}function wa(t,e,n,r,i,o){const s=e+n;return xo(t,s,i)?ko(t,s+1,o?r.call(o,i):r(i)):_a(t,s+1)}function Oa(t,e){const n=pe();let r;const i=t+20;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new Error(`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=xt(r.type)),s=Z(Po);try{const e=tn(!1),r=o();return tn(e),function(t,e,n,r){const i=n+20;i>=t.data.length&&(t.data[i]=null,t.blueprint[i]=null),e[i]=r}(n,fe(),t,r),r}finally{Z(s)}}function Sa(t,e,n){const r=fe(),i=re(r,t);return Ta(r,Ea(r,t)?wa(r,Oe(),e,i.transform,n,i):i.transform(n))}function Ca(t,e,n,r){const i=fe(),o=re(i,t);return Ta(i,Ea(i,t)?function(t,e,n,r,i,o,s){const a=e+n;return function(t,e,n,r){const i=xo(t,e,n);return xo(t,e+1,r)||i}(t,a,i,o)?ko(t,a+2,s?r.call(s,i,o):r(i,o)):_a(t,a+2)}(i,Oe(),e,o.transform,n,r,o):o.transform(n,r))}function Ea(t,e){return t[1].data[e+20].pure}function Ta(t,e){return Eo.isWrapped(e)&&(e=Eo.unwrap(e),t[he.lFrame.bindingIndex]=Er),e}const Ia=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function ka(){return this._results[Co()]()}class xa{constructor(){this.dirty=!0,this._results=[],this.changes=new Ia,this.length=0;const t=Co(),e=xa.prototype;e[t]||(e[t]=ka)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=function t(e,n){void 0===n&&(n=e);for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?(n===e&&(n=e.slice(0,r)),t(i,n)):n!==e&&n.push(i)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Aa{constructor(t){this.queryList=t,this.matches=null}clone(){return new Aa(this.queryList)}setDirty(){this.queryList.setDirty()}}class Na{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Na(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==qa(t,e).matches&&this.queries[e].setDirty()}}class ja{constructor(t,e,n,r=null){this.predicate=t,this.descendants=e,this.isStatic=n,this.read=r}}class Ra{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Ra(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Pa{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Pa(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&3===n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Da(e,i)),this.matchTNodeWithReadOption(t,e,hn(e,t,i,!1,!1))}else n===oa?0===e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,hn(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Ds||r===aa||r===oa&&0===e.type)this.addMatch(e.index,-2);else{const n=hn(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Da(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function La(t,e,n,r){return-1===n?function(t,e){return 2===t.type||3===t.type?Ki(Ds,t,e):0===t.type?Gi(oa,Ds,t,e):null}(e,t):-2===n?function(t,e,n){return n===Ds?Ki(Ds,e,t):n===oa?Gi(oa,Ds,e,t):n===aa?Ji(aa,Ds,e,t):void 0}(t,e,r):dn(t,t[1],n,e)}function Ma(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:La(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function Fa(t){const e=fe(),n=pe(),r=Te();Ie(r+1);const i=qa(n,r);if(t.dirty&&se(e)===i.metadata.isStatic){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?function t(e,n,r,i){const o=e.queries.getByIndex(r),s=o.matches;if(null!==s){const a=Ma(e,n,o,r);for(let e=0;e<s.length;e+=2){const r=s[e];if(r>0)i.push(a[e/2]);else{const o=s[e+1],a=n[-r];for(let e=10;e<a.length;e++){const n=a[e];n[17]===n[3]&&t(n[1],n,o,i)}if(null!==a[9]){const e=a[9];for(let n=0;n<e.length;n++){const r=e[n];t(r[1],r,o,i)}}}}}return i}(n,e,r,[]):Ma(n,e,i,r);t.reset(o),t.notifyOnChanges()}return!0}return!1}function Ua(t,e,n,r){!function(t,e,n,r,i,o,s,a){t.firstCreatePass&&(function(t,e,n){null===t.queries&&(t.queries=new Ra),t.queries.track(new Pa(e,n))}(t,new ja(n,r,false,i),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(t.contentQueries.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,a)),function(t,e){const n=new xa;Yr(t,e,n,n.destroy),null===e[19]&&(e[19]=new Na),e[19].queries.push(new Aa(n))}(t,e)}(pe(),fe(),e,n,r,0,me(),t)}function Va(){return t=fe(),e=Te(),t[19].queries[e].queryList;var t,e}function qa(t,e){return t.queries.getByIndex(e)}function za(t,e){return Gi(oa,Ds,t,e)}function Ba(t=p.Default){const e=Qi(!0);if(null!=e||t&p.Optional)return e;zt("ChangeDetectorRef")}const Wa=new H("Application Initializer");let Ha=(()=>{class t{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Wo(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(et(Wa,8))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();const Ka=new H("AppId"),Ga={provide:Ka,useFactory:function(){return`${Ja()}${Ja()}${Ja()}`},deps:[]};function Ja(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Qa=new H("Platform Initializer"),$a=new H("Platform ID"),Ya=new H("appBootstrapListener");let Xa=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();const Za=new H("LocaleId"),tu=new H("DefaultCurrencyCode");class eu{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const nu=function(t){return new ya(t)},ru=nu,iu=function(t){return Promise.resolve(nu(t))},ou=function(t){const e=nu(t),n=qt(At(t).declarations).reduce((t,e)=>{const n=kt(e);return n&&t.push(new fa(n)),t},[]);return new eu(e,n)},su=ou,au=function(t){return Promise.resolve(ou(t))};let uu=(()=>{class t{constructor(){this.compileModuleSync=ru,this.compileModuleAsync=iu,this.compileModuleAndAllComponentsSync=su,this.compileModuleAndAllComponentsAsync=au}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();const cu=(()=>Promise.resolve(0))();function lu(t){"undefined"==typeof Zone?cu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class hu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ia(!1),this.onMicrotaskEmpty=new Ia(!1),this.onStable=new Ia(!1),this.onError=new Ia(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=e,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let t=M.requestAnimationFrame,e=M.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(M,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,gu(t),pu(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),gu(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,r,i,o,s,a)=>{try{return mu(t),n.invokeTask(i,o,s,a)}finally{e&&"eventTask"===o.type&&e(),yu(t)}},onInvoke:(e,n,r,i,o,s,a)=>{try{return mu(t),e.invoke(r,i,o,s,a)}finally{yu(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,gu(t),pu(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!hu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(hu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,fu,du,du);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function du(){}const fu={};function pu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function gu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function mu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function yu(t){t._nesting--,pu(t)}class vu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ia,this.onMicrotaskEmpty=new Ia,this.onStable=new Ia,this.onError=new Ia}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let bu=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{hu.assertNotInAngularZone(),lu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())lu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(et(hu))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})(),_u=(()=>{class t{constructor(){this._applications=new Map,Cu.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Cu.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();class wu{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Ou(t){Cu=t}let Su,Cu=new wu;const Eu=new H("AllowMultipleToken");class Tu{constructor(t,e){this.name=t,this.token=e}}function Iu(t,e,n=[]){const r="Platform: "+e,i=new H(r);return(e=[])=>{let o=ku();if(!o||o.injector.get(Eu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Zi,useValue:"platform"});!function(t){if(Su&&!Su.destroyed&&!Su.injector.get(Eu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Su=t.get(xu);const e=t.get(Qa,null);e&&e.forEach(t=>t())}(po.create({providers:t,name:r}))}return function(t){const e=ku();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function ku(){return Su&&!Su.destroyed?Su:null}let xu=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new vu:("zone.js"===t?void 0:t)||new hu({enableLongStackTrace:Fn(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),r=[{provide:hu,useValue:n}];return n.run(()=>{const e=po.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(wn,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(()=>ju(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{o.handleError(t)}})),function(t,e,n){try{const r=n();return Wo(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Ha);return t.runInitializers(),t.donePromise.then(()=>(Ss(i.injector.get(Za,"en-US")||"en-US"),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Au({},e);return function(t,e,n){const r=new ya(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Nu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${I(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(et(po))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();function Au(t,e){return Array.isArray(e)?e.reduce(Au,t):Object.assign(Object.assign({},t),e)}let Nu=(()=>{class t{constructor(t,e,n,r,i,u){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=u,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Fn(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const c=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),l=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{hu.assertNotInAngularZone(),lu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{hu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(c,l.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof js?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(ot),i=n.create(po.NULL,[],e||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const o=i.injector.get(bu,null);return o&&i.injector.get(_u).registerApplication(i.location.nativeElement,o),this._loadComponent(i),Fn()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;ju(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ya,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),ju(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(et(hu),et(Xa),et(po),et(wn),et(Ps),et(Ha))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();function ju(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Ru{}class Pu{}const Du={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Lu=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Du}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Mu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Mu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(et(uu),et(Pu,8))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();function Mu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Fu=function(t){return null},Uu=Iu(null,"core",[{provide:$a,useValue:"unknown"},{provide:xu,deps:[po]},{provide:_u,deps:[]},{provide:Xa,deps:[]}]),Vu=[{provide:Nu,useClass:Nu,deps:[hu,Xa,po,wn,Ps,Ha]},{provide:da,deps:[hu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Ha,useClass:Ha,deps:[[new h,Wa]]},{provide:uu,useClass:uu,deps:[]},Ga,{provide:ta,useFactory:function(){return ra},deps:[]},{provide:ea,useFactory:function(){return ia},deps:[]},{provide:Za,useFactory:function(t){return Ss(t=t||"undefined"!=typeof $localize&&$localize.locale||"en-US"),t},deps:[[new l(Za),new h,new f]]},{provide:tu,useValue:"USD"}];let qu=(()=>{class t{constructor(t){}}return t.\u0275mod=St({type:t}),t.\u0275inj=v({factory:function(e){return new(e||t)(et(Nu))},providers:Vu}),t})()},fqyn:function(t,e,n){"use strict";var r=1;t.exports={nextValue:function(){return(r=(9301*r+49297)%233280)/233280},seed:function(t){r=t}}},gRHU:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule((function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()}))),r})}},je4i:function(t,e,n){"use strict";t.exports=n("Bpvx")},kJWO:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",(function(){return r}))},n8Jw:function(t,e,n){"use strict";t.exports=0},ngJS:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},oB13:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("XNiG"),i=n("HDdC"),o=(n("7o/Q"),n("quSY")),s=n("x+ZX");class a extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.a,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.a.EMPTY)),t}refCount(){return Object(s.a)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function l(t,e){return function(n){let r;if(r="function"==typeof t?t:function(){return t},"function"==typeof e)return n.lift(new h(r,e));const i=Object.create(n,u);return i.source=n,i.subjectFactory=r,i}}class h{constructor(t,e){this.subjectFactory=t,this.selector=e}call(t,e){const{selector:n}=this,r=this.subjectFactory(),i=n(r).subscribe(t);return i.add(e.subscribe(r)),i}}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return l}));var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("z6cu");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return Object(s.a)(this.error);case"C":return Object(i.b)()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return d})),n.d(e,"d",(function(){return f}));var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function d(t){o.forEach((function(e){e.setLogLevel(t)}))}function f(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return E})),n.d(e,"c",(function(){return C})),n.d(e,"d",(function(){return F})),n.d(e,"e",(function(){return i})),n.d(e,"f",(function(){return o})),n.d(e,"g",(function(){return a})),n.d(e,"h",(function(){return u})),n.d(e,"i",(function(){return R})),n.d(e,"j",(function(){return f})),n.d(e,"k",(function(){return U})),n.d(e,"l",(function(){return l})),n.d(e,"m",(function(){return h})),n.d(e,"n",(function(){return B})),n.d(e,"o",(function(){return J})),n.d(e,"p",(function(){return p})),n.d(e,"q",(function(){return j})),n.d(e,"r",(function(){return y})),n.d(e,"s",(function(){return v})),n.d(e,"t",(function(){return _})),n.d(e,"u",(function(){return D})),n.d(e,"v",(function(){return w})),n.d(e,"w",(function(){return g})),n.d(e,"x",(function(){return m})),n.d(e,"y",(function(){return S})),n.d(e,"z",(function(){return b})),n.d(e,"A",(function(){return O})),n.d(e,"B",(function(){return N})),n.d(e,"C",(function(){return k})),n.d(e,"D",(function(){return L})),n.d(e,"E",(function(){return M})),n.d(e,"F",(function(){return P})),n.d(e,"G",(function(){return G})),n.d(e,"H",(function(){return K})),n.d(e,"I",(function(){return x})),n.d(e,"J",(function(){return z})),n.d(e,"K",(function(){return W})),n.d(e,"L",(function(){return H}));var r=n("FurV"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var d=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function f(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=Object(r.a)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[a.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),a.encodeString(JSON.stringify(s),!1),""].join(".")}function p(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function g(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())}function m(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function y(){return"object"==typeof self&&self.self===self}function v(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function b(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _(){return p().indexOf("Electron/")>=0}function w(){var t=p();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function O(){return p().indexOf("MSAppHost/")>=0}function S(){return!1}var C=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,E.prototype.create),o}return Object(r.c)(e,t),e}(Error),E=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?T(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new C(i,a,r);return u},t}();function T(t,e){return t.replace(I,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var I=/\{\$([^}]+)}/g;function k(t){return JSON.parse(t)}function x(t){return JSON.stringify(t)}var A=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=k(c(o[0])||""),n=k(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},N=function(t){var e=A(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},j=function(t){var e=A(t).claims;return"object"==typeof e&&!0===e.admin};function R(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function D(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function L(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function M(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var F=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function U(t,e){var n=new V(t,e);return n.subscribe.bind(n)}var V=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=q),void 0===r.error&&(r.error=q),void 0===r.complete&&(r.complete=q);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function q(){}var z=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function B(t,e){return t+" failed: "+e+" argument "}function W(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(B(t,e)+"must be a valid function.")}function H(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(B(t,e)+"must be a valid context object.")}var K=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},G=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function J(t){return t&&t._delegate?t._delegate:t}},qgXg:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return u}));var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},r8II:function(t,e,n){"use strict";e.decode=e.parse=n("YcCt"),e.encode=e.stringify=n("6MUB")},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return T})),n.d(e,"b",(function(){return b})),n.d(e,"c",(function(){return v})),n.d(e,"d",(function(){return f})),n.d(e,"e",(function(){return y})),n.d(e,"f",(function(){return C})),n.d(e,"g",(function(){return w})),n.d(e,"h",(function(){return p})),n.d(e,"i",(function(){return m})),n.d(e,"j",(function(){return O}));var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule((function(e){r.runGuarded(()=>{t.apply(this,[e])})}),e,n)}}class d{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class f{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.b))}}function p(t){return function(e){return(e=e.lift(new d(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.q("angularfire2.app.options"),b=new u.q("angularfire2.app.nameOrConfig"),_=new u.P("6.1.5");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&S("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const O=()=>{S("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},S=(t,...e)=>{Object(u.V)()&&"undefined"!=typeof console&&console[t](...e)};function C(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&S("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const E={provide:class{},useFactory:w,deps:[v,u.z,[new u.A,b]]};let T=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",_.full,t.toString()),c.a.registerVersion("angular",u.O.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275mod=u.Hb({type:t}),t.\u0275inj=u.Gb({factory:function(e){return new(e||t)(u.Sb(u.B))},providers:[E]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class d extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const f=new d(l);var p=n("Y7HM");class g extends r.a{constructor(t,e=0,n=f){super(),this.source=t,this.delayTime=e,this.scheduler=n,(!Object(p.a)(e)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=f)}static create(t,e=0,n=f){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function m(t,e=0){return function(n){return n.lift(new y(t,e))}}class y{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},vZIR:function(t,e,n){"use strict";var r=n("Qfp6"),i=n("CR0S"),o=n("5R+2");t.exports=function(t){for(var e,n=0,s="";!e;)s+=o(i,r.get(),1),e=t<Math.pow(16,n+1),n++;return s}},vkgz:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("oB13"),i=n("x+ZX"),o=n("XNiG");function s(){return new o.a}function a(){return t=>Object(i.a)()(Object(r.a)(s)(t))}},"x+ZX":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",(function(){return r}))},z6cu:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("HDdC");function i(t,e){return new r.a(e?n=>e.schedule(o,0,{error:t,subscriber:n}):e=>e.error(t))}function o({error:t,subscriber:e}){e.error(t)}},zIRd:function(t,e,n){"use strict";var r,i,o=n("FurV"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),f=new u.b("@firebase/app"),p=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.l)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){f.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();p.prototype.name&&p.prototype.options||p.prototype.delete||console.log("dc");var g=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name="[DEFAULT]");var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.i)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void f.warn(c.join(" "))}o(new a.a(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.6.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||"[DEFAULT]",!Object(s.i)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return f.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.m)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(p);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.m)(e,t)},createSubscribe:s.k,ErrorFactory:s.b,deepExtend:s.m}),e}(),m=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(Object(s.r)()&&void 0!==self.firebase){f.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&f.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var v=g.initializeApp;g.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.x)()&&f.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),v.apply(void 0,t)};var b=g;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",(function(t){return new m(t)}),"PRIVATE")),t.registerVersion(h,"0.6.22",void 0),t.registerVersion("fire-js","")}(b),e.a=b},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");const i={apiKey:"AIzaSyBzmXumYjOj_AINSeVOB96doLWGqh4xSOU",authDomain:"fotos-app-779cb.firebaseapp.com",databaseURL:"https://fotos-app-779cb-default-rtdb.firebaseio.com",projectId:"fotos-app-779cb",storageBucket:"fotos-app-779cb.appspot.com",messagingSenderId:"420287488542",appId:"1:420287488542:web:36bce96229e7974d02840f",measurementId:"G-E9JTVTWSQG"};let o=null;function s(){return o}const a=new r.q("DocumentToken");let u=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Fb)({factory:c,token:t,providedIn:"platform"}),t})();function c(){return Object(r.Sb)(h)}const l=new r.q("Location Initialized");let h=(()=>{class t extends u{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=s().getLocation(),this._history=s().getHistory()}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){d()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){d()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(a))},t.\u0275prov=Object(r.Fb)({factory:f,token:t,providedIn:"platform"}),t})();function d(){return!!window.history.pushState}function f(){return new h(Object(r.Sb)(a))}function p(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function g(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function m(t){return t&&"?"!==t[0]?"?"+t:t}let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Fb)({factory:v,token:t,providedIn:"root"}),t})();function v(t){const e=Object(r.Sb)(a).location;return new _(Object(r.Sb)(u),e&&e.origin||"")}const b=new r.q("appBaseHref");let _=(()=>{class t extends y{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return p(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+m(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+m(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+m(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(u),r.Sb(b,8))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t extends y{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=p(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+m(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+m(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(u),r.Sb(b,8))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),O=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=g(C(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+m(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,C(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+m(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+m(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(y),r.Sb(u))},t.normalizeQueryParams=m,t.joinWithSlash=p,t.stripTrailingSlash=g,t.\u0275prov=Object(r.Fb)({factory:S,token:t,providedIn:"root"}),t})();function S(){return new O(Object(r.Sb)(y),Object(r.Sb)(u))}function C(t){return t.replace(/\/index.html$/,"")}var E=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}({}),T=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),I=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t[1/0]=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}({});function k(t,e){const n=Object(r.jb)(t),i=n[r.ab.NumberSymbols][e];if(void 0===i){if(e===I.CurrencyDecimal)return n[r.ab.NumberSymbols][I.Decimal];if(e===I.CurrencyGroup)return n[r.ab.NumberSymbols][I.Group]}return i}const x=r.mb,A=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function N(t){const e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}class j{}let R=(()=>{class t extends j{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(x(e||this.locale)(t)){case T.Zero:return"zero";case T.One:return"one";case T.Two:return"two";case T.Few:return"few";case T.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(r.u))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();function P(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}let D=(()=>{class t{constructor(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Object(r.pb)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+Object(r.ub)(t.item));this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.s),r.Jb(r.t),r.Jb(r.l),r.Jb(r.E))},t.\u0275dir=r.Eb({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class L{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let M=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){Object(r.V)()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. See https://angular.io/api/common/NgForOf#change-propagation for more information.`),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new L(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new F(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new F(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.Q),r.Jb(r.L),r.Jb(r.s))},t.\u0275dir=r.Eb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class F{constructor(t,e){this.record=t,this.view=e}}let U=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new V,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){q("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){q("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.Q),r.Jb(r.L))},t.\u0275dir=r.Eb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class V{constructor(){this.$implicit=null,this.ngIf=null}}function q(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.ub)(e)}'.`)}let z=(()=>{class t{constructor(t,e,n){this._ngEl=t,this._differs=e,this._renderer=n,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,e){const[n,r]=t.split(".");null!=(e=null!=e&&r?`${e}${r}`:e)?this._renderer.setStyle(this._ngEl.nativeElement,n,e):this._renderer.removeStyle(this._ngEl.nativeElement,n)}_applyChanges(t){t.forEachRemovedItem(t=>this._setStyle(t.key,null)),t.forEachAddedItem(t=>this._setStyle(t.key,t.currentValue)),t.forEachChangedItem(t=>this._setStyle(t.key,t.currentValue))}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.l),r.Jb(r.t),r.Jb(r.E))},t.\u0275dir=r.Eb({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),t})();function B(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${Object(r.ub)(t)}'`)}class W{createSubscription(t,e){return t.subscribe({next:e,error:t=>{throw t}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class H{createSubscription(t,e){return t.then(e,t=>{throw t})}dispose(t){}onDestroy(t){}}const K=new H,G=new W;let J=(()=>{class t{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,e=>this._updateLatestValue(t,e))}_selectStrategy(e){if(Object(r.rb)(e))return K;if(Object(r.qb)(e))return G;throw B(t,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(r.Ub())},t.\u0275pipe=r.Ib({name:"async",type:t,pure:!1}),t})(),Q=(()=>{class t{constructor(t){this._locale=t}transform(e,n,i){if(function(t){return null==t||""===t||t!=t}(e))return null;i=i||this._locale;try{return function(t,e,n){return function(t,e,n,r,i,o,s=!1){let a="",u=!1;if(isFinite(t)){let c=function(t){let e,n,r,i,o,s=Math.abs(t)+"",a=0;for((n=s.indexOf("."))>-1&&(s=s.replace(".","")),(r=s.search(/e/i))>0?(n<0&&(n=r),n+=+s.slice(r+1),s=s.substring(0,r)):n<0&&(n=s.length),r=0;"0"===s.charAt(r);r++);if(r===(o=s.length))e=[0],n=1;else{for(o--;"0"===s.charAt(o);)o--;for(n-=r,e=[],i=0;r<=o;r++,i++)e[i]=Number(s.charAt(r))}return n>22&&(e=e.splice(0,21),a=n-1,n=1),{digits:e,exponent:a,integerLen:n}}(t);s&&(c=function(t){if(0===t.digits[0])return t;const e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===e?t.digits.push(0,0):1===e&&t.digits.push(0),t.integerLen+=2),t}(c));let l=e.minInt,h=e.minFrac,d=e.maxFrac;if(o){const t=o.match(A);if(null===t)throw new Error(o+" is not a valid digit info");const e=t[1],n=t[3],r=t[5];null!=e&&(l=N(e)),null!=n&&(h=N(n)),null!=r?d=N(r):null!=n&&h>d&&(d=h)}!function(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen;const o=Math.min(Math.max(e,i),n);let s=o+t.integerLen,a=r[s];if(s>0){r.splice(Math.max(t.integerLen,s));for(let t=s;t<r.length;t++)r[t]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let t=1;t<s;t++)r[t]=0}if(a>=5)if(s-1<0){for(let e=0;e>s;e--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let u=0!==o;const c=e+t.integerLen,l=r.reduceRight((function(t,e,n,r){return r[n]=(e+=t)<10?e:e-10,u&&(0===r[n]&&n>=c?r.pop():u=!1),e>=10?1:0}),0);l&&(r.unshift(l),t.integerLen++)}(c,h,d);let f=c.digits,p=c.integerLen;const g=c.exponent;let m=[];for(u=f.every(t=>!t);p<l;p++)f.unshift(0);for(;p<0;p++)f.unshift(0);p>0?m=f.splice(p,f.length):(m=f,f=[0]);const y=[];for(f.length>=e.lgSize&&y.unshift(f.splice(-e.lgSize,f.length).join(""));f.length>e.gSize;)y.unshift(f.splice(-e.gSize,f.length).join(""));f.length&&y.unshift(f.join("")),a=y.join(k(n,r)),m.length&&(a+=k(n,i)+m.join("")),g&&(a+=k(n,I.Exponential)+"+"+g)}else a=k(n,I.Infinity);return a=t<0&&!u?e.negPre+a+e.negSuf:e.posPre+a+e.posSuf,a}(t,function(t,e="-"){const n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(";"),i=r[0],o=r[1],s=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],a=s[0],u=s[1]||"";n.posPre=a.substr(0,a.indexOf("#"));for(let l=0;l<u.length;l++){const t=u.charAt(l);"0"===t?n.minFrac=n.maxFrac=l+1:"#"===t?n.maxFrac=l+1:n.posSuf+=t}const c=a.split(",");if(n.gSize=c[1]?c[1].length:0,n.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,o){const t=i.length-n.posPre.length-n.posSuf.length,e=o.indexOf("#");n.negPre=o.substr(0,e).replace(/'/g,""),n.negSuf=o.substr(e+t).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}(function(t,e){return Object(r.jb)(t)[r.ab.NumberFormats][e]}(e,E.Decimal),k(e,I.MinusSign)),e,I.Group,I.Decimal,n)}(function(t){if("string"==typeof t&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if("number"!=typeof t)throw new Error(t+" is not a number");return t}(e),i,n)}catch(o){throw B(t,o.message)}}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.u))},t.\u0275pipe=r.Ib({name:"number",type:t,pure:!0}),t})(),$=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},providers:[{provide:j,useClass:R}]}),t})();function Y(t){return"server"===t}let X=(()=>{class t{}return t.\u0275prov=Object(r.Fb)({token:t,providedIn:"root",factory:()=>new Z(Object(r.Sb)(a),window,Object(r.Sb)(r.m))}),t})();class Z{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportsScrolling()){const e=this.document.getElementById(t)||this.document.getElementsByName(t)[0];e&&this.scrollToElement(e)}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{if(!this.window||!this.window.scrollTo)return!1;const t=tt(this.window.history)||tt(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window.scrollTo}catch(t){return!1}}}function tt(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class et extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new et,o||(o=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=rt||(rt=document.querySelector("base"),rt)?rt.getAttribute("href"):null;return null==e?null:(n=e,nt||(nt=document.createElement("a")),nt.setAttribute("href",n),"/"===nt.pathname.charAt(0)?nt.pathname:"/"+nt.pathname);var n}resetBaseElement(){rt=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return P(document.cookie,t)}}let nt,rt=null;const it=new r.q("TRANSITION_ID"),ot=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=s();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[it,a,r.r],multi:!0}];class st{static init(){Object(r.X)(new st)}addToWindow(t){r.ob.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.ob.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.ob.getAllAngularRootElements=()=>t.getAllRootElements(),r.ob.frameworkStabilizers||(r.ob.frameworkStabilizers=[]),r.ob.frameworkStabilizers.push(t=>{const e=r.ob.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach((function(t){t.whenStable(o)}))})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?s().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const at=new r.q("EventManagerPlugins");let ut=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error("No event manager plugin found for event "+t)}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(at),r.Sb(r.z))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();class ct{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=s().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let lt=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),ht=(()=>{class t extends lt{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>s().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(a))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();const dt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ft=/%COMP%/g;function pt(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?pt(t,i,n):(i=i.replace(ft,t),n.push(i))}return n}function gt(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let mt=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new yt(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.R.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new vt(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case r.R.Native:case r.R.ShadowDom:return new bt(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=pt(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(ut),r.Sb(ht),r.Sb(r.c))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();class yt{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(dt[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=dt[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=dt[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&r.G.DashCase?t.style.setProperty(e,n,i&r.G.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.G.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,gt(n)):this.eventManager.addEventListener(t,e,gt(n))}}class vt extends yt{constructor(t,e,n,r){super(t),this.component=n;const i=pt(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(ft,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(ft,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class bt extends yt{constructor(t,e,n,i){super(t),this.sharedStylesHost=e,this.hostEl=n,this.component=i,this.shadowRoot=i.encapsulation===r.R.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const o=pt(i.id,i.styles,[]);for(let r=0;r<o.length;r++){const t=document.createElement("style");t.textContent=o[r],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let _t=(()=>{class t extends ct{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(a))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();const wt=["alt","control","meta","shift"],Ot={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},St={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ct={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Et=(()=>{class t extends ct{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(wt.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&St.hasOwnProperty(e)&&(e=St[e]))}return Ot[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),wt.forEach(r=>{r!=n&&(0,Ct[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(a))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),Tt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Fb)({factory:function(){return Object(r.Sb)(It)},token:t,providedIn:"root"}),t})(),It=(()=>{class t extends Tt{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case r.I.NONE:return e;case r.I.HTML:return Object(r.db)(e,"HTML")?Object(r.vb)(e):Object(r.bb)(this._doc,String(e));case r.I.STYLE:return Object(r.db)(e,"Style")?Object(r.vb)(e):e;case r.I.SCRIPT:if(Object(r.db)(e,"Script"))return Object(r.vb)(e);throw new Error("unsafe value used in a script context");case r.I.URL:return Object(r.nb)(e),Object(r.db)(e,"URL")?Object(r.vb)(e):Object(r.cb)(String(e));case r.I.RESOURCE_URL:if(Object(r.db)(e,"ResourceURL"))return Object(r.vb)(e);throw new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see http://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return Object(r.eb)(t)}bypassSecurityTrustStyle(t){return Object(r.hb)(t)}bypassSecurityTrustScript(t){return Object(r.gb)(t)}bypassSecurityTrustUrl(t){return Object(r.ib)(t)}bypassSecurityTrustResourceUrl(t){return Object(r.fb)(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(a))},t.\u0275prov=Object(r.Fb)({factory:function(){return t=Object(r.Sb)(r.o),new It(t.get(a));var t},token:t,providedIn:"root"}),t})();const kt=[{provide:r.B,useValue:"browser"},{provide:r.C,useValue:function(){et.makeCurrent(),st.init()},multi:!0},{provide:a,useFactory:function(){return Object(r.tb)(document),document},deps:[]}],xt=Object(r.S)(r.W,"browser",kt),At=[[],{provide:r.Z,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:at,useClass:_t,multi:!0,deps:[a,r.z,r.B]},{provide:at,useClass:Et,multi:!0,deps:[a]},[],{provide:mt,useClass:mt,deps:[ut,ht,r.c]},{provide:r.F,useExisting:mt},{provide:lt,useExisting:ht},{provide:ht,useClass:ht,deps:[a]},{provide:r.M,useClass:r.M,deps:[r.z]},{provide:ut,useClass:ut,deps:[at,r.z]},[]];let Nt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:it,useExisting:r.c},ot]}}}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)(r.Sb(t,12))},providers:At,imports:[$,r.f]}),t})();"undefined"!=typeof window&&window;var jt=n("HDdC"),Rt=n("DH7j"),Pt=n("lJxs"),Dt=n("XoHu"),Lt=n("Cfvw");function Mt(t,e){return new jt.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=Object(Lt.a)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}const Ft=new r.q("NgValueAccessor"),Ut={provide:Ft,useExisting:Object(r.U)(()=>Vt),multi:!0};let Vt=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.E),r.Jb(r.l))},t.\u0275dir=r.Eb({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&r.Vb("change",(function(t){return e.onChange(t.target.checked)}))("blur",(function(){return e.onTouched()}))},features:[r.yb([Ut])]}),t})();const qt={provide:Ft,useExisting:Object(r.U)(()=>Bt),multi:!0},zt=new r.q("CompositionEventMode");let Bt=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=s()?s().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.E),r.Jb(r.l),r.Jb(zt,8))},t.\u0275dir=r.Eb({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.Vb("input",(function(t){return e._handleInput(t.target.value)}))("blur",(function(){return e.onTouched()}))("compositionstart",(function(){return e._compositionStart()}))("compositionend",(function(t){return e._compositionEnd(t.target.value)}))},features:[r.yb([qt])]}),t})(),Wt=(()=>{class t{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Eb({type:t}),t})(),Ht=(()=>{class t extends Wt{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return Kt(e||t)},t.\u0275dir=r.Eb({type:t,features:[r.wb]}),t})();const Kt=r.Qb(Ht);class Gt extends Wt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){}get asyncValidator(){}}class Jt{constructor(t){this._cd=t}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}let Qt=(()=>{class t extends Jt{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Gt,2))},t.\u0275dir=r.Eb({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Bb("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[r.wb]}),t})(),$t=(()=>{class t extends Jt{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Ht,2))},t.\u0275dir=r.Eb({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Bb("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[r.wb]}),t})();function Yt(t){return null==t||0===t.length}function Xt(t){return null!=t&&"number"==typeof t.length}const Zt=new r.q("NgValidators"),te=new r.q("NgAsyncValidators"),ee=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ne{static min(t){return e=>{if(Yt(e.value)||Yt(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(Yt(e.value)||Yt(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return Yt(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return Yt(t.value)||ee.test(t.value)?null:{email:!0}}static minLength(t){return e=>Yt(e.value)||!Xt(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}static maxLength(t){return e=>Xt(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}static pattern(t){if(!t)return ne.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(Yt(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(re);return 0==e.length?null:function(t){return oe(se(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(re);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(Rt.a)(e))return Mt(e,null);if(Object(Dt.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Mt(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return Mt(t=1===t.length&&Object(Rt.a)(t[0])?t[0]:t,null).pipe(Object(Pt.a)(t=>e(...t)))}return Mt(t,null)}(se(t,e).map(ie)).pipe(Object(Pt.a)(oe))}}}function re(t){return null!=t}function ie(t){const e=Object(r.rb)(t)?Object(Lt.a)(t):t;return Object(r.qb)(e),e}function oe(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function se(t,e){return e.map(e=>e(t))}function ae(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}const ue={provide:Ft,useExisting:Object(r.U)(()=>ce),multi:!0};let ce=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.E),r.Jb(r.l))},t.\u0275dir=r.Eb({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&r.Vb("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[r.yb([ue])]}),t})();const le={provide:Ft,useExisting:Object(r.U)(()=>de),multi:!0};let he=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),de=(()=>{class t{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(Gt),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.E),r.Jb(r.l),r.Jb(he),r.Jb(r.r))},t.\u0275dir=r.Eb({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&r.Vb("change",(function(){return e.onChange()}))("blur",(function(){return e.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[r.yb([le])]}),t})();const fe={provide:Ft,useExisting:Object(r.U)(()=>pe),multi:!0};let pe=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.E),r.Jb(r.l))},t.\u0275dir=r.Eb({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&r.Vb("change",(function(t){return e.onChange(t.target.value)}))("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[r.yb([fe])]}),t})();const ge={provide:Ft,useExisting:Object(r.U)(()=>ye),multi:!0};function me(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let ye=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=me(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.E),r.Jb(r.l))},t.\u0275dir=r.Eb({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&r.Vb("change",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[r.yb([ge])]}),t})(),ve=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(me(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.l),r.Jb(r.E),r.Jb(ye,9))},t.\u0275dir=r.Eb({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const be={provide:Ft,useExisting:Object(r.U)(()=>we),multi:!0};function _e(t,e){return null==t?""+e:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let we=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.E),r.Jb(r.l))},t.\u0275dir=r.Eb({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&r.Vb("change",(function(t){return e.onChange(t.target)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[r.yb([be])]}),t})(),Oe=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(_e(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(_e(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.l),r.Jb(r.E),r.Jb(we,9))},t.\u0275dir=r.Eb({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();function Se(t,e){return[...e.path,t]}function Ce(t,e){t.validator=ne.compose([t.validator,e.validator]),t.asyncValidator=ne.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Ee(t,e)})}(t,e),function(t,e){t.registerOnChange((t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Ee(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange(t=>{e.valueAccessor.setDisabledState(t)}),e._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())}),e._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())})}function Ee(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Te(t,e){t.validator=ne.compose([t.validator,e.validator]),t.asyncValidator=ne.composeAsync([t.asyncValidator,e.asyncValidator])}function Ie(t){return null!=t?ne.compose(ae(t)):null}function ke(t){return null!=t?ne.composeAsync(ae(t)):null}function xe(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}const Ae=[Vt,pe,ce,ye,we,de];function Ne(t,e){if(!e)return null;Array.isArray(e);let n=void 0,r=void 0,i=void 0;return e.forEach(t=>{var e;t.constructor===Bt?n=t:(e=t,Ae.some(t=>e.constructor===t)?r=t:i=t)}),i||r||n||null}function je(t){return(Le(t)?t.validators:t)||null}function Re(t){return Array.isArray(t)?Ie(t):t||null}function Pe(t,e){return(Le(e)?e.asyncValidators:t)||null}function De(t){return Array.isArray(t)?ke(t):t||null}function Le(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class Me{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=Re(this._rawValidators),this._composedAsyncValidatorFn=De(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return"VALID"===this.status}get invalid(){return"INVALID"===this.status}get pending(){return"PENDING"==this.status}get disabled(){return"DISABLED"===this.status}get enabled(){return"DISABLED"!==this.status}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=Re(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=De(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status="PENDING",!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status="VALID",this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status="PENDING",this._hasOwnPendingAsyncValidator=!0;const e=ie(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof Ue?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof Ve&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.n,this.statusChanges=new r.n}_calculateStatus(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Le(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class Fe extends Me{constructor(t=null,e,n){super(je(e),Pe(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Ue extends Me{constructor(t,e,n){super(je(e),Pe(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Fe?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Ve extends Me{constructor(t,e,n){super(je(e),Pe(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Fe?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const qe={provide:Gt,useExisting:Object(r.U)(()=>Be)},ze=(()=>Promise.resolve(null))();let Be=(()=>{class t extends Gt{constructor(t,e,n,i){super(),this.control=new Fe,this._registered=!1,this.update=new r.n,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=Ne(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),xe(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?Se(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return Ie(this._rawValidators)}get asyncValidator(){return ke(this._rawAsyncValidators)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ce(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){ze.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;ze.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Ht,9),r.Jb(Zt,10),r.Jb(te,10),r.Jb(Ft,10))},t.\u0275dir=r.Eb({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r.yb([qe]),r.wb,r.xb]}),t})(),We=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Eb({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const He=new r.q("NgModelWithFormControlWarning"),Ke={provide:Ht,useExisting:Object(r.U)(()=>Ge)};let Ge=(()=>{class t extends Ht{constructor(t,e){super(),this._validators=t,this._asyncValidators=e,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new r.n}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return Ce(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){!function(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}(this.directives,t)}addFormGroup(t){const e=this.form.get(t.path);Te(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormGroup(t){}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){const e=this.form.get(t.path);Te(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormArray(t){}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,e=this.directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=this.form.get(t.path);t.control!==e&&(function(t,e){const n=()=>{};e.valueAccessor.registerOnChange(n),e.valueAccessor.registerOnTouched(n),e._rawValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),e._rawAsyncValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),t&&t._clearChangeFns()}(t.control,t),e&&Ce(e,t),t.control=e)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{}),this._oldForm=this.form}_updateValidators(){const t=Ie(this._validators);this.form.validator=ne.compose([this.form.validator,t]);const e=ke(this._asyncValidators);this.form.asyncValidator=ne.composeAsync([this.form.asyncValidator,e])}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Zt,10),r.Jb(te,10))},t.\u0275dir=r.Eb({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&r.Vb("submit",(function(t){return e.onSubmit(t)}))("reset",(function(){return e.onReset()}))},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.yb([Ke]),r.wb,r.xb]}),t})();const Je={provide:Gt,useExisting:Object(r.U)(()=>Qe)};let Qe=(()=>{class t extends Gt{constructor(t,e,n,i,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new r.n,this._ngModelWarningSent=!1,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=Ne(0,i)}set isDisabled(t){}ngOnChanges(e){this._added||this._setUpControl(),xe(e,this.viewModel)&&(function(t,e,n,i){Object(r.V)()&&"never"!==i&&((null!==i&&"once"!==i||e._ngModelWarningSentOnce)&&("always"!==i||n._ngModelWarningSent)||(e._ngModelWarningSentOnce=!0,n._ngModelWarningSent=!0))}(0,t,this,this._ngModelWarningConfig),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Se(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return Ie(this._rawValidators)}get asyncValidator(){return ke(this._rawAsyncValidators)}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Ht,13),r.Jb(Zt,10),r.Jb(te,10),r.Jb(Ft,10),r.Jb(He,8))},t.\u0275dir=r.Eb({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r.yb([Je]),r.wb,r.xb]}),t._ngModelWarningSentOnce=!1,t})(),$e=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)}}),t})(),Ye=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r=null,i=null,o=void 0;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(r=null!=e.validators?e.validators:null,i=null!=e.asyncValidators?e.asyncValidators:null,o=null!=e.updateOn?e.updateOn:void 0):(r=null!=e.validator?e.validator:null,i=null!=e.asyncValidator?e.asyncValidator:null)),new Ue(n,{asyncValidators:i,updateOn:o,validators:r})}control(t,e,n){return new Fe(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new Ve(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof Fe||t instanceof Ue||t instanceof Ve?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),Xe=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},providers:[he],imports:[$e]}),t})(),Ze=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:He,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},providers:[Ye,he],imports:[$e]}),t})();var tn=function(t,e){return(tn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function en(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}tn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var nn=function(){return(nn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function rn(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function on(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function sn(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var an="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function un(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function cn(t,e){return t(e={exports:{}},e.exports),e.exports}var ln=function(t){return t&&t.Math==Math&&t},hn=ln("object"==typeof globalThis&&globalThis)||ln("object"==typeof window&&window)||ln("object"==typeof self&&self)||ln("object"==typeof an&&an)||function(){return this}()||Function("return this")(),dn=function(t){try{return!!t()}catch(t){return!0}},fn=!dn((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),pn={}.propertyIsEnumerable,gn=Object.getOwnPropertyDescriptor,mn={f:gn&&!pn.call({1:2},1)?function(t){var e=gn(this,t);return!!e&&e.enumerable}:pn},yn=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},vn={}.toString,bn=function(t){return vn.call(t).slice(8,-1)},_n="".split,wn=dn((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==bn(t)?_n.call(t,""):Object(t)}:Object,On=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},Sn=function(t){return wn(On(t))},Cn=function(t){return"object"==typeof t?null!==t:"function"==typeof t},En=function(t,e){if(!Cn(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!Cn(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!Cn(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!Cn(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},Tn=function(t){return Object(On(t))},In={}.hasOwnProperty,kn=function(t,e){return In.call(Tn(t),e)},xn=hn.document,An=Cn(xn)&&Cn(xn.createElement),Nn=function(t){return An?xn.createElement(t):{}},jn=!fn&&!dn((function(){return 7!=Object.defineProperty(Nn("div"),"a",{get:function(){return 7}}).a})),Rn=Object.getOwnPropertyDescriptor,Pn={f:fn?Rn:function(t,e){if(t=Sn(t),e=En(e,!0),jn)try{return Rn(t,e)}catch(t){}if(kn(t,e))return yn(!mn.f.call(t,e),t[e])}},Dn=function(t){if(!Cn(t))throw TypeError(String(t)+" is not an object");return t},Ln=Object.defineProperty,Mn={f:fn?Ln:function(t,e,n){if(Dn(t),e=En(e,!0),Dn(n),jn)try{return Ln(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},Fn=fn?function(t,e,n){return Mn.f(t,e,yn(1,n))}:function(t,e,n){return t[e]=n,t},Un=function(t,e){try{Fn(hn,t,e)}catch(n){hn[t]=e}return e},Vn=hn["__core-js_shared__"]||Un("__core-js_shared__",{}),qn=Function.toString;"function"!=typeof Vn.inspectSource&&(Vn.inspectSource=function(t){return qn.call(t)});var zn,Bn,Wn,Hn=Vn.inspectSource,Kn=hn.WeakMap,Gn="function"==typeof Kn&&/native code/.test(Hn(Kn)),Jn=cn((function(t){(t.exports=function(t,e){return Vn[t]||(Vn[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.11.0",mode:"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})})),Qn=0,$n=Math.random(),Yn=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++Qn+$n).toString(36)},Xn=Jn("keys"),Zn=function(t){return Xn[t]||(Xn[t]=Yn(t))},tr={};if(Gn){var er=Vn.state||(Vn.state=new(0,hn.WeakMap)),nr=er.get,rr=er.has,ir=er.set;zn=function(t,e){if(rr.call(er,t))throw new TypeError("Object already initialized");return e.facade=t,ir.call(er,t,e),e},Bn=function(t){return nr.call(er,t)||{}},Wn=function(t){return rr.call(er,t)}}else{var or=Zn("state");tr[or]=!0,zn=function(t,e){if(kn(t,or))throw new TypeError("Object already initialized");return e.facade=t,Fn(t,or,e),e},Bn=function(t){return kn(t,or)?t[or]:{}},Wn=function(t){return kn(t,or)}}var sr,ar,ur={set:zn,get:Bn,has:Wn,enforce:function(t){return Wn(t)?Bn(t):zn(t,{})},getterFor:function(t){return function(e){var n;if(!Cn(e)||(n=Bn(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},cr=cn((function(t){var e=ur.get,n=ur.enforce,r=String(String).split("String");(t.exports=function(t,e,i,o){var s,a=!!o&&!!o.unsafe,u=!!o&&!!o.enumerable,c=!!o&&!!o.noTargetGet;"function"==typeof i&&("string"!=typeof e||kn(i,"name")||Fn(i,"name",e),(s=n(i)).source||(s.source=r.join("string"==typeof e?e:""))),t!==hn?(a?!c&&t[e]&&(u=!0):delete t[e],u?t[e]=i:Fn(t,e,i)):u?t[e]=i:Un(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||Hn(this)}))})),lr=hn,hr=function(t){return"function"==typeof t?t:void 0},dr=function(t,e){return arguments.length<2?hr(lr[t])||hr(hn[t]):lr[t]&&lr[t][e]||hn[t]&&hn[t][e]},fr=Math.ceil,pr=Math.floor,gr=function(t){return isNaN(t=+t)?0:(t>0?pr:fr)(t)},mr=Math.min,yr=function(t){return t>0?mr(gr(t),9007199254740991):0},vr=Math.max,br=Math.min,_r=function(t){return function(e,n,r){var i,o=Sn(e),s=yr(o.length),a=function(t,e){var n=gr(t);return n<0?vr(n+e,0):br(n,e)}(r,s);if(t&&n!=n){for(;s>a;)if((i=o[a++])!=i)return!0}else for(;s>a;a++)if((t||a in o)&&o[a]===n)return t||a||0;return!t&&-1}},wr={includes:_r(!0),indexOf:_r(!1)},Or=wr.indexOf,Sr=function(t,e){var n,r=Sn(t),i=0,o=[];for(n in r)!kn(tr,n)&&kn(r,n)&&o.push(n);for(;e.length>i;)kn(r,n=e[i++])&&(~Or(o,n)||o.push(n));return o},Cr=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Er=Cr.concat("length","prototype"),Tr={f:Object.getOwnPropertyNames||function(t){return Sr(t,Er)}},Ir={f:Object.getOwnPropertySymbols},kr=dr("Reflect","ownKeys")||function(t){var e=Tr.f(Dn(t)),n=Ir.f;return n?e.concat(n(t)):e},xr=function(t,e){for(var n=kr(e),r=Mn.f,i=Pn.f,o=0;o<n.length;o++){var s=n[o];kn(t,s)||r(t,s,i(e,s))}},Ar=/#|\.prototype\./,Nr=function(t,e){var n=Rr[jr(t)];return n==Dr||n!=Pr&&("function"==typeof e?dn(e):!!e)},jr=Nr.normalize=function(t){return String(t).replace(Ar,".").toLowerCase()},Rr=Nr.data={},Pr=Nr.NATIVE="N",Dr=Nr.POLYFILL="P",Lr=Nr,Mr=Pn.f,Fr=function(t,e){var n,r,i,o,s,a=t.target,u=t.global,c=t.stat;if(n=u?hn:c?hn[a]||Un(a,{}):(hn[a]||{}).prototype)for(r in e){if(o=e[r],i=t.noTargetGet?(s=Mr(n,r))&&s.value:n[r],!Lr(u?r:a+(c?".":"#")+r,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;xr(o,i)}(t.sham||i&&i.sham)&&Fn(o,"sham",!0),cr(n,r,o,t)}},Ur="process"==bn(hn.process),Vr=dr("navigator","userAgent")||"",qr=hn.process,zr=qr&&qr.versions,Br=zr&&zr.v8;Br?ar=(sr=Br.split("."))[0]+sr[1]:Vr&&(!(sr=Vr.match(/Edge\/(\d+)/))||sr[1]>=74)&&(sr=Vr.match(/Chrome\/(\d+)/))&&(ar=sr[1]);var Wr,Hr=ar&&+ar,Kr=!!Object.getOwnPropertySymbols&&!dn((function(){return!Symbol.sham&&(Ur?38===Hr:Hr>37&&Hr<41)})),Gr=Kr&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Jr=Jn("wks"),Qr=hn.Symbol,$r=Gr?Qr:Qr&&Qr.withoutSetter||Yn,Yr=function(t){return kn(Jr,t)&&(Kr||"string"==typeof Jr[t])||(Jr[t]=Kr&&kn(Qr,t)?Qr[t]:$r("Symbol."+t)),Jr[t]},Xr=Yr("match"),Zr=function(t){if(function(t){var e;return Cn(t)&&(void 0!==(e=t[Xr])?!!e:"RegExp"==bn(t))}(t))throw TypeError("The method doesn't accept regular expressions");return t},ti=Yr("match"),ei=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[ti]=!1,"/./"[t](e)}catch(t){}}return!1},ni=Pn.f,ri="".startsWith,ii=Math.min,oi=ei("startsWith"),si=!(oi||(Wr=ni(String.prototype,"startsWith"),!Wr||Wr.writable));Fr({target:"String",proto:!0,forced:!si&&!oi},{startsWith:function(t){var e=String(On(this));Zr(t);var n=yr(ii(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return ri?ri.call(e,r,n):e.slice(n,n+r.length)===r}});var ai=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},ui=function(t,e,n){if(ai(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},ci=Function.call,li=function(t,e,n){return ui(ci,hn[t].prototype[e],n)};li("String","startsWith");var hi=Array.isArray||function(t){return"Array"==bn(t)},di=function(t,e,n){var r=En(e);r in t?Mn.f(t,r,yn(0,n)):t[r]=n},fi=Yr("species"),pi=function(t,e){var n;return hi(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!hi(n.prototype)?Cn(n)&&null===(n=n[fi])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},gi=Yr("species"),mi=Yr("isConcatSpreadable"),yi=Hr>=51||!dn((function(){var t=[];return t[mi]=!1,t.concat()[0]!==t})),vi=Hr>=51||!dn((function(){var t=[];return(t.constructor={})[gi]=function(){return{foo:1}},1!==t.concat(Boolean).foo})),bi=function(t){if(!Cn(t))return!1;var e=t[mi];return void 0!==e?!!e:hi(t)};Fr({target:"Array",proto:!0,forced:!yi||!vi},{concat:function(t){var e,n,r,i,o,s=Tn(this),a=pi(s,0),u=0;for(e=-1,r=arguments.length;e<r;e++)if(bi(o=-1===e?s:arguments[e])){if(u+(i=yr(o.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<i;n++,u++)n in o&&di(a,u,o[n])}else{if(u>=9007199254740991)throw TypeError("Maximum allowed index exceeded");di(a,u++,o)}return a.length=u,a}});var _i={};_i[Yr("toStringTag")]="z";var wi="[object z]"===String(_i),Oi=Yr("toStringTag"),Si="Arguments"==bn(function(){return arguments}()),Ci=wi?bn:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Oi))?n:Si?bn(e):"Object"==(r=bn(e))&&"function"==typeof e.callee?"Arguments":r};wi||cr(Object.prototype,"toString",wi?{}.toString:function(){return"[object "+Ci(this)+"]"},{unsafe:!0});var Ei,Ti=Object.keys||function(t){return Sr(t,Cr)},Ii=fn?Object.defineProperties:function(t,e){Dn(t);for(var n,r=Ti(e),i=r.length,o=0;i>o;)Mn.f(t,n=r[o++],e[n]);return t},ki=dr("document","documentElement"),xi=Zn("IE_PROTO"),Ai=function(){},Ni=function(t){return"<script>"+t+"<\/script>"},ji=function(){try{Ei=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;ji=Ei?function(t){t.write(Ni("")),t.close();var e=t.parentWindow.Object;return t=null,e}(Ei):((e=Nn("iframe")).style.display="none",ki.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Ni("document.F=Object")),t.close(),t.F);for(var n=Cr.length;n--;)delete ji.prototype[Cr[n]];return ji()};tr[xi]=!0;var Ri=Object.create||function(t,e){var n;return null!==t?(Ai.prototype=Dn(t),n=new Ai,Ai.prototype=null,n[xi]=t):n=ji(),void 0===e?n:Ii(n,e)},Pi=Tr.f,Di={}.toString,Li="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Mi={f:function(t){return Li&&"[object Window]"==Di.call(t)?function(t){try{return Pi(t)}catch(t){return Li.slice()}}(t):Pi(Sn(t))}},Fi={f:Yr},Ui=Mn.f,Vi=function(t){var e=lr.Symbol||(lr.Symbol={});kn(e,t)||Ui(e,t,{value:Fi.f(t)})},qi=Mn.f,zi=Yr("toStringTag"),Bi=function(t,e,n){t&&!kn(t=n?t:t.prototype,zi)&&qi(t,zi,{configurable:!0,value:e})},Wi=[].push,Hi=function(t){var e=1==t,n=2==t,r=3==t,i=4==t,o=6==t,s=7==t,a=5==t||o;return function(u,c,l,h){for(var d,f,p=Tn(u),g=wn(p),m=ui(c,l,3),y=yr(g.length),v=0,b=h||pi,_=e?b(u,y):n||s?b(u,0):void 0;y>v;v++)if((a||v in g)&&(f=m(d=g[v],v,p),t))if(e)_[v]=f;else if(f)switch(t){case 3:return!0;case 5:return d;case 6:return v;case 2:Wi.call(_,d)}else switch(t){case 4:return!1;case 7:Wi.call(_,d)}return o?-1:r||i?i:_}},Ki=[Hi(0),Hi(1),Hi(2),Hi(3),Hi(4),Hi(5),Hi(6),Hi(7)][0],Gi=Zn("hidden"),Ji=Yr("toPrimitive"),Qi=ur.set,$i=ur.getterFor("Symbol"),Yi=Object.prototype,Xi=hn.Symbol,Zi=dr("JSON","stringify"),to=Pn.f,eo=Mn.f,no=Mi.f,ro=mn.f,io=Jn("symbols"),oo=Jn("op-symbols"),so=Jn("string-to-symbol-registry"),ao=Jn("symbol-to-string-registry"),uo=Jn("wks"),co=hn.QObject,lo=!co||!co.prototype||!co.prototype.findChild,ho=fn&&dn((function(){return 7!=Ri(eo({},"a",{get:function(){return eo(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=to(Yi,e);r&&delete Yi[e],eo(t,e,n),r&&t!==Yi&&eo(Yi,e,r)}:eo,fo=function(t,e){var n=io[t]=Ri(Xi.prototype);return Qi(n,{type:"Symbol",tag:t,description:e}),fn||(n.description=e),n},po=Gr?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof Xi},go=function(t,e,n){t===Yi&&go(oo,e,n),Dn(t);var r=En(e,!0);return Dn(n),kn(io,r)?(n.enumerable?(kn(t,Gi)&&t[Gi][r]&&(t[Gi][r]=!1),n=Ri(n,{enumerable:yn(0,!1)})):(kn(t,Gi)||eo(t,Gi,yn(1,{})),t[Gi][r]=!0),ho(t,r,n)):eo(t,r,n)},mo=function(t,e){Dn(t);var n=Sn(e),r=Ti(n).concat(_o(n));return Ki(r,(function(e){fn&&!yo.call(n,e)||go(t,e,n[e])})),t},yo=function(t){var e=En(t,!0),n=ro.call(this,e);return!(this===Yi&&kn(io,e)&&!kn(oo,e))&&(!(n||!kn(this,e)||!kn(io,e)||kn(this,Gi)&&this[Gi][e])||n)},vo=function(t,e){var n=Sn(t),r=En(e,!0);if(n!==Yi||!kn(io,r)||kn(oo,r)){var i=to(n,r);return!i||!kn(io,r)||kn(n,Gi)&&n[Gi][r]||(i.enumerable=!0),i}},bo=function(t){var e=no(Sn(t)),n=[];return Ki(e,(function(t){kn(io,t)||kn(tr,t)||n.push(t)})),n},_o=function(t){var e=t===Yi,n=no(e?oo:Sn(t)),r=[];return Ki(n,(function(t){!kn(io,t)||e&&!kn(Yi,t)||r.push(io[t])})),r};if(Kr||(cr((Xi=function(){if(this instanceof Xi)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=Yn(t),n=function(t){this===Yi&&n.call(oo,t),kn(this,Gi)&&kn(this[Gi],e)&&(this[Gi][e]=!1),ho(this,e,yn(1,t))};return fn&&lo&&ho(Yi,e,{configurable:!0,set:n}),fo(e,t)}).prototype,"toString",(function(){return $i(this).tag})),cr(Xi,"withoutSetter",(function(t){return fo(Yn(t),t)})),mn.f=yo,Mn.f=go,Pn.f=vo,Tr.f=Mi.f=bo,Ir.f=_o,Fi.f=function(t){return fo(Yr(t),t)},fn&&(eo(Xi.prototype,"description",{configurable:!0,get:function(){return $i(this).description}}),cr(Yi,"propertyIsEnumerable",yo,{unsafe:!0}))),Fr({global:!0,wrap:!0,forced:!Kr,sham:!Kr},{Symbol:Xi}),Ki(Ti(uo),(function(t){Vi(t)})),Fr({target:"Symbol",stat:!0,forced:!Kr},{for:function(t){var e=String(t);if(kn(so,e))return so[e];var n=Xi(e);return so[e]=n,ao[n]=e,n},keyFor:function(t){if(!po(t))throw TypeError(t+" is not a symbol");if(kn(ao,t))return ao[t]},useSetter:function(){lo=!0},useSimple:function(){lo=!1}}),Fr({target:"Object",stat:!0,forced:!Kr,sham:!fn},{create:function(t,e){return void 0===e?Ri(t):mo(Ri(t),e)},defineProperty:go,defineProperties:mo,getOwnPropertyDescriptor:vo}),Fr({target:"Object",stat:!0,forced:!Kr},{getOwnPropertyNames:bo,getOwnPropertySymbols:_o}),Fr({target:"Object",stat:!0,forced:dn((function(){Ir.f(1)}))},{getOwnPropertySymbols:function(t){return Ir.f(Tn(t))}}),Zi){var wo=!Kr||dn((function(){var t=Xi();return"[null]"!=Zi([t])||"{}"!=Zi({a:t})||"{}"!=Zi(Object(t))}));Fr({target:"JSON",stat:!0,forced:wo},{stringify:function(t,e,n){for(var r,i=[t],o=1;arguments.length>o;)i.push(arguments[o++]);if(r=e,(Cn(e)||void 0!==t)&&!po(t))return hi(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!po(e))return e}),i[1]=e,Zi.apply(null,i)}})}Xi.prototype[Ji]||Fn(Xi.prototype,Ji,Xi.prototype.valueOf),Bi(Xi,"Symbol"),tr[Gi]=!0,Vi("asyncIterator");var Oo=Mn.f,So=hn.Symbol;if(fn&&"function"==typeof So&&(!("description"in So.prototype)||void 0!==So().description)){var Co={},Eo=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof Eo?new So(t):void 0===t?So():So(t);return""===t&&(Co[e]=!0),e};xr(Eo,So);var To=Eo.prototype=So.prototype;To.constructor=Eo;var Io=To.toString,ko="Symbol(test)"==String(So("test")),xo=/^Symbol\((.*)\)[^)]+$/;Oo(To,"description",{configurable:!0,get:function(){var t=Cn(this)?this.valueOf():this,e=Io.call(t);if(kn(Co,t))return"";var n=ko?e.slice(7,-1):e.replace(xo,"$1");return""===n?void 0:n}}),Fr({global:!0,forced:!0},{Symbol:Eo})}Vi("hasInstance"),Vi("isConcatSpreadable"),Vi("iterator"),Vi("match"),Vi("matchAll"),Vi("replace"),Vi("search"),Vi("species"),Vi("split"),Vi("toPrimitive"),Vi("toStringTag"),Vi("unscopables"),Bi(hn.JSON,"JSON",!0),Bi(Math,"Math",!0),Fr({global:!0},{Reflect:{}}),Bi(hn.Reflect,"Reflect",!0);var Ao,No,jo,Ro=function(t){return function(e,n){var r,i,o=String(On(e)),s=gr(n),a=o.length;return s<0||s>=a?t?"":void 0:(r=o.charCodeAt(s))<55296||r>56319||s+1===a||(i=o.charCodeAt(s+1))<56320||i>57343?t?o.charAt(s):r:t?o.slice(s,s+2):i-56320+(r-55296<<10)+65536}},Po={codeAt:Ro(!1),charAt:Ro(!0)},Do=!dn((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Lo=Zn("IE_PROTO"),Mo=Object.prototype,Fo=Do?Object.getPrototypeOf:function(t){return t=Tn(t),kn(t,Lo)?t[Lo]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Mo:null},Uo=Yr("iterator"),Vo=!1;[].keys&&("next"in(jo=[].keys())?(No=Fo(Fo(jo)))!==Object.prototype&&(Ao=No):Vo=!0),(null==Ao||dn((function(){var t={};return Ao[Uo].call(t)!==t})))&&(Ao={}),kn(Ao,Uo)||Fn(Ao,Uo,(function(){return this}));var qo={IteratorPrototype:Ao,BUGGY_SAFARI_ITERATORS:Vo},zo={},Bo=qo.IteratorPrototype,Wo=function(){return this},Ho=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return Dn(n),function(t){if(!Cn(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),Ko=qo.IteratorPrototype,Go=qo.BUGGY_SAFARI_ITERATORS,Jo=Yr("iterator"),Qo=function(){return this},$o=function(t,e,n,r,i,o,s){!function(t,e,n){var r=e+" Iterator";t.prototype=Ri(Bo,{next:yn(1,n)}),Bi(t,r,!1),zo[r]=Wo}(n,e,r);var a,u,c,l=function(t){if(t===i&&g)return g;if(!Go&&t in f)return f[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},h=e+" Iterator",d=!1,f=t.prototype,p=f[Jo]||f["@@iterator"]||i&&f[i],g=!Go&&p||l(i),m="Array"==e&&f.entries||p;if(m&&(a=Fo(m.call(new t)),Ko!==Object.prototype&&a.next&&(Fo(a)!==Ko&&(Ho?Ho(a,Ko):"function"!=typeof a[Jo]&&Fn(a,Jo,Qo)),Bi(a,h,!0))),"values"==i&&p&&"values"!==p.name&&(d=!0,g=function(){return p.call(this)}),f[Jo]!==g&&Fn(f,Jo,g),zo[e]=g,i)if(u={values:l("values"),keys:o?g:l("keys"),entries:l("entries")},s)for(c in u)(Go||d||!(c in f))&&cr(f,c,u[c]);else Fr({target:e,proto:!0,forced:Go||d},u);return u},Yo=Po.charAt,Xo=ur.set,Zo=ur.getterFor("String Iterator");$o(String,"String",(function(t){Xo(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=Zo(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=Yo(n,r),e.index+=t.length,{value:t,done:!1})}));var ts=function(t){var e=t.return;if(void 0!==e)return Dn(e.call(t)).value},es=function(t,e,n,r){try{return r?e(Dn(n)[0],n[1]):e(n)}catch(e){throw ts(t),e}},ns=Yr("iterator"),rs=Array.prototype,is=function(t){return void 0!==t&&(zo.Array===t||rs[ns]===t)},os=Yr("iterator"),ss=function(t){if(null!=t)return t[os]||t["@@iterator"]||zo[Ci(t)]},as=Yr("iterator"),us=!1;try{var cs=0,ls={next:function(){return{done:!!cs++}},return:function(){us=!0}};ls[as]=function(){return this},Array.from(ls,(function(){throw 2}))}catch(Jx){}var hs=function(t,e){if(!e&&!us)return!1;var n=!1;try{var r={};r[as]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},ds=!hs((function(t){Array.from(t)}));Fr({target:"Array",stat:!0,forced:ds},{from:function(t){var e,n,r,i,o,s,a=Tn(t),u="function"==typeof this?this:Array,c=arguments.length,l=c>1?arguments[1]:void 0,h=void 0!==l,d=ss(a),f=0;if(h&&(l=ui(l,c>2?arguments[2]:void 0,2)),null==d||u==Array&&is(d))for(n=new u(e=yr(a.length));e>f;f++)s=h?l(a[f],f):a[f],di(n,f,s);else for(o=(i=d.call(a)).next,n=new u;!(r=o.call(i)).done;f++)s=h?es(i,l,[r.value,f],!0):r.value,di(n,f,s);return n.length=f,n}});var fs,ps="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,gs=Mn.f,ms=hn.Int8Array,ys=ms&&ms.prototype,vs=hn.Uint8ClampedArray,bs=vs&&vs.prototype,_s=ms&&Fo(ms),ws=ys&&Fo(ys),Os=Object.prototype,Ss=Os.isPrototypeOf,Cs=Yr("toStringTag"),Es=Yn("TYPED_ARRAY_TAG"),Ts=ps&&!!Ho&&"Opera"!==Ci(hn.opera),Is={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},ks={BigInt64Array:8,BigUint64Array:8};for(fs in Is)hn[fs]||(Ts=!1);if((!Ts||"function"!=typeof _s||_s===Function.prototype)&&(_s=function(){throw TypeError("Incorrect invocation")},Ts))for(fs in Is)hn[fs]&&Ho(hn[fs],_s);if((!Ts||!ws||ws===Os)&&(ws=_s.prototype,Ts))for(fs in Is)hn[fs]&&Ho(hn[fs].prototype,ws);if(Ts&&Fo(bs)!==ws&&Ho(bs,ws),fn&&!kn(ws,Cs))for(fs in gs(ws,Cs,{get:function(){return Cn(this)?this[Es]:void 0}}),Is)hn[fs]&&Fn(hn[fs],Es,fs);var xs=Yr("species"),As=[].slice;!function(t,e,n){if(fn){if(n)for(var r in Is){var i=hn[r];i&&kn(i.prototype,t)&&delete i.prototype[t]}ws[t]&&!n||cr(ws,t,n?e:Ts&&ys[t]||e)}}("slice",(function(t,e){for(var n=As.call(function(t){if(function(t){if(!Cn(t))return!1;var e=Ci(t);return kn(Is,e)||kn(ks,e)}(t))return t;throw TypeError("Target is not a typed array")}(this),t,e),r=function(t,e){var n,r=Dn(t).constructor;return void 0===r||null==(n=Dn(r)[xs])?e:ai(n)}(this,this.constructor),i=0,o=n.length,s=new(function(t){if(Ho){if(Ss.call(_s,t))return t}else for(var e in Is)if(kn(Is,fs)){var n=hn[e];if(n&&(t===n||Ss.call(n,t)))return t}throw TypeError("Target is not a typed array constructor")}(r))(o);o>i;)s[i]=n[i++];return s}),dn((function(){new Int8Array(1).slice()})));var Ns=Yr("unscopables"),js=Array.prototype;null==js[Ns]&&Mn.f(js,Ns,{configurable:!0,value:Ri(null)});var Rs=function(t){js[Ns][t]=!0},Ps=wr.includes;Fr({target:"Array",proto:!0},{includes:function(t){return Ps(this,t,arguments.length>1?arguments[1]:void 0)}}),Rs("includes"),li("Array","includes"),Fr({target:"String",proto:!0,forced:!ei("includes")},{includes:function(t){return!!~String(On(this)).indexOf(Zr(t),arguments.length>1?arguments[1]:void 0)}}),li("String","includes");var Ds=!dn((function(){return Object.isExtensible(Object.preventExtensions({}))})),Ls=cn((function(t){var e=Mn.f,n=Yn("meta"),r=0,i=Object.isExtensible||function(){return!0},o=function(t){e(t,n,{value:{objectID:"O"+ ++r,weakData:{}}})},s=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!Cn(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!kn(t,n)){if(!i(t))return"F";if(!e)return"E";o(t)}return t[n].objectID},getWeakData:function(t,e){if(!kn(t,n)){if(!i(t))return!0;if(!e)return!1;o(t)}return t[n].weakData},onFreeze:function(t){return Ds&&s.REQUIRED&&i(t)&&!kn(t,n)&&o(t),t}};tr[n]=!0})),Ms=function(t,e){this.stopped=t,this.result=e},Fs=function(t,e,n){var r,i,o,s,a,u,c,l=!(!n||!n.AS_ENTRIES),h=!(!n||!n.IS_ITERATOR),d=!(!n||!n.INTERRUPTED),f=ui(e,n&&n.that,1+l+d),p=function(t){return r&&ts(r),new Ms(!0,t)},g=function(t){return l?(Dn(t),d?f(t[0],t[1],p):f(t[0],t[1])):d?f(t,p):f(t)};if(h)r=t;else{if("function"!=typeof(i=ss(t)))throw TypeError("Target is not iterable");if(is(i)){for(o=0,s=yr(t.length);s>o;o++)if((a=g(t[o]))&&a instanceof Ms)return a;return new Ms(!1)}r=i.call(t)}for(u=r.next;!(c=u.call(r)).done;){try{a=g(c.value)}catch(t){throw ts(r),t}if("object"==typeof a&&a&&a instanceof Ms)return a}return new Ms(!1)},Us=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t},Vs=function(t,e,n){for(var r in e)cr(t,r,e[r],n);return t},qs=Yr("species"),zs=Mn.f,Bs=Ls.fastKey,Ws=ur.set,Hs=ur.getterFor;!function(t,e,n){var r=-1!==t.indexOf("Map"),i=-1!==t.indexOf("Weak"),o=r?"set":"add",s=hn[t],a=s&&s.prototype,u=s,c={},l=function(t){var e=a[t];cr(a,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(i&&!Cn(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return i&&!Cn(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(i&&!Cn(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(Lr(t,"function"!=typeof s||!(i||a.forEach&&!dn((function(){(new s).entries().next()})))))u=n.getConstructor(e,t,r,o),Ls.REQUIRED=!0;else if(Lr(t,!0)){var h=new u,d=h[o](i?{}:-0,1)!=h,f=dn((function(){h.has(1)})),p=hs((function(t){new s(t)})),g=!i&&dn((function(){for(var t=new s,e=5;e--;)t[o](e,e);return!t.has(-0)}));p||((u=e((function(e,n){Us(e,u,t);var i=function(t,e,n){var r,i;return Ho&&"function"==typeof(r=e.constructor)&&r!==n&&Cn(i=r.prototype)&&i!==n.prototype&&Ho(t,i),t}(new s,e,u);return null!=n&&Fs(n,i[o],{that:i,AS_ENTRIES:r}),i}))).prototype=a,a.constructor=u),(f||g)&&(l("delete"),l("has"),r&&l("get")),(g||d)&&l(o),i&&a.clear&&delete a.clear}c[t]=u,Fr({global:!0,forced:u!=s},c),Bi(u,t),i||n.setStrong(u,t,r)}("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),{getConstructor:function(t,e,n,r){var i=t((function(t,o){Us(t,i,e),Ws(t,{type:e,index:Ri(null),first:void 0,last:void 0,size:0}),fn||(t.size=0),null!=o&&Fs(o,t[r],{that:t,AS_ENTRIES:n})})),o=Hs(e),s=function(t,e,n){var r,i,s=o(t),u=a(t,e);return u?u.value=n:(s.last=u={index:i=Bs(e,!0),key:e,value:n,previous:r=s.last,next:void 0,removed:!1},s.first||(s.first=u),r&&(r.next=u),fn?s.size++:t.size++,"F"!==i&&(s.index[i]=u)),t},a=function(t,e){var n,r=o(t),i=Bs(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n};return Vs(i.prototype,{clear:function(){for(var t=o(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,fn?t.size=0:this.size=0},delete:function(t){var e=this,n=o(e),r=a(e,t);if(r){var i=r.next,s=r.previous;delete n.index[r.index],r.removed=!0,s&&(s.next=i),i&&(i.previous=s),n.first==r&&(n.first=i),n.last==r&&(n.last=s),fn?n.size--:e.size--}return!!r},forEach:function(t){for(var e,n=o(this),r=ui(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!a(this,t)}}),Vs(i.prototype,n?{get:function(t){var e=a(this,t);return e&&e.value},set:function(t,e){return s(this,0===t?0:t,e)}}:{add:function(t){return s(this,t=0===t?0:t,t)}}),fn&&zs(i.prototype,"size",{get:function(){return o(this).size}}),i},setStrong:function(t,e,n){var r=e+" Iterator",i=Hs(e),o=Hs(r);$o(t,e,(function(t,e){Ws(this,{type:r,target:t,state:i(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),function(t){var e=dr(t);fn&&e&&!e[qs]&&(0,Mn.f)(e,qs,{configurable:!0,get:function(){return this}})}(e)}});var Ks={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Gs=ur.set,Js=ur.getterFor("Array Iterator"),Qs=$o(Array,"Array",(function(t,e){Gs(this,{type:"Array Iterator",target:Sn(t),index:0,kind:e})}),(function(){var t=Js(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");zo.Arguments=zo.Array,Rs("keys"),Rs("values"),Rs("entries");var $s=Yr("iterator"),Ys=Yr("toStringTag"),Xs=Qs.values;for(var Zs in Ks){var ta=hn[Zs],ea=ta&&ta.prototype;if(ea){if(ea[$s]!==Xs)try{Fn(ea,$s,Xs)}catch(Jx){ea[$s]=Xs}if(ea[Ys]||Fn(ea,Ys,Zs),Ks[Zs])for(var na in Qs)if(ea[na]!==Qs[na])try{Fn(ea,na,Qs[na])}catch(Jx){ea[na]=Qs[na]}}}function ra(t){var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){return e.reject(n)}))}))}function ia(t){return new this((function(e,n){if(!t||void 0===t.length)return n(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var i=r.length;function o(t,n){if(n&&("object"==typeof n||"function"==typeof n)){var s=n.then;if("function"==typeof s)return void s.call(n,(function(e){o(t,e)}),(function(n){r[t]={status:"rejected",reason:n},0==--i&&e(r)}))}r[t]={status:"fulfilled",value:n},0==--i&&e(r)}for(var s=0;s<r.length;s++)o(s,r[s])}))}var oa=setTimeout;function sa(t){return Boolean(t&&void 0!==t.length)}function aa(){}function ua(t){if(!(this instanceof ua))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],pa(t,this)}function ca(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,ua._immediateFn((function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void ha(e.promise,t)}la(e.promise,r)}else(1===t._state?la:ha)(e.promise,t._value)}))):t._deferreds.push(e)}function la(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof ua)return t._state=3,t._value=e,void da(t);if("function"==typeof n)return void pa((r=n,i=e,function(){r.apply(i,arguments)}),t)}t._state=1,t._value=e,da(t)}catch(e){ha(t,e)}var r,i}function ha(t,e){t._state=2,t._value=e,da(t)}function da(t){2===t._state&&0===t._deferreds.length&&ua._immediateFn((function(){t._handled||ua._unhandledRejectionFn(t._value)}));for(var e=0,n=t._deferreds.length;e<n;e++)ca(t,t._deferreds[e]);t._deferreds=null}function fa(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function pa(t,e){var n=!1;try{t((function(t){n||(n=!0,la(e,t))}),(function(t){n||(n=!0,ha(e,t))}))}catch(t){if(n)return;n=!0,ha(e,t)}}ua.prototype.catch=function(t){return this.then(null,t)},ua.prototype.then=function(t,e){var n=new this.constructor(aa);return ca(this,new fa(t,e,n)),n},ua.prototype.finally=ra,ua.all=function(t){return new ua((function(e,n){if(!sa(t))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var i=r.length;function o(t,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,(function(e){o(t,e)}),n)}r[t]=s,0==--i&&e(r)}catch(t){n(t)}}for(var s=0;s<r.length;s++)o(s,r[s])}))},ua.allSettled=ia,ua.resolve=function(t){return t&&"object"==typeof t&&t.constructor===ua?t:new ua((function(e){e(t)}))},ua.reject=function(t){return new ua((function(e,n){n(t)}))},ua.race=function(t){return new ua((function(e,n){if(!sa(t))return n(new TypeError("Promise.race accepts an array"));for(var r=0,i=t.length;r<i;r++)ua.resolve(t[r]).then(e,n)}))},ua._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){oa(t,0)},ua._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var ga=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();"function"!=typeof ga.Promise?ga.Promise=ua:ga.Promise.prototype.finally?ga.Promise.allSettled||(ga.Promise.allSettled=ia):ga.Promise.prototype.finally=ra,function(t){function e(){}function n(t,e){if(e=void 0===e?{fatal:!1}:e,-1===i.indexOf((t=void 0===t?"utf-8":t).toLowerCase()))throw new RangeError("Failed to construct 'TextDecoder': The encoding label provided ('"+t+"') is invalid.");if(e.fatal)throw Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}function r(t){for(var e=0,n=Math.min(65536,t.length+1),r=new Uint16Array(n),i=[],o=0;;){var s=e<t.length;if(!s||o>=n-1){if(i.push(String.fromCharCode.apply(null,r.subarray(0,o))),!s)return i.join("");t=t.subarray(e),o=e=0}if(0==(128&(s=t[e++])))r[o++]=s;else if(192==(224&s)){var a=63&t[e++];r[o++]=(31&s)<<6|a}else if(224==(240&s)){a=63&t[e++];var u=63&t[e++];r[o++]=(31&s)<<12|a<<6|u}else 240==(248&s)&&(65535<(s=(7&s)<<18|(a=63&t[e++])<<12|(u=63&t[e++])<<6|63&t[e++])&&(r[o++]=(s-=65536)>>>10&1023|55296,s=56320|1023&s),r[o++]=s)}}if(t.TextEncoder&&t.TextDecoder)return!1;var i=["utf-8","utf8","unicode-1-1-utf-8"];Object.defineProperty(e.prototype,"encoding",{value:"utf-8"}),e.prototype.encode=function(t,e){if((e=void 0===e?{stream:!1}:e).stream)throw Error("Failed to encode: the 'stream' option is unsupported.");e=0;for(var n=t.length,r=0,i=Math.max(32,n+(n>>>1)+7),o=new Uint8Array(i>>>3<<3);e<n;){var s=t.charCodeAt(e++);if(55296<=s&&56319>=s){if(e<n){var a=t.charCodeAt(e);56320==(64512&a)&&(++e,s=((1023&s)<<10)+(1023&a)+65536)}if(55296<=s&&56319>=s)continue}if(r+4>o.length&&(i+=8,i=(i*=1+e/t.length*2)>>>3<<3,(a=new Uint8Array(i)).set(o),o=a),0==(4294967168&s))o[r++]=s;else{if(0==(4294965248&s))o[r++]=s>>>6&31|192;else if(0==(4294901760&s))o[r++]=s>>>12&15|224,o[r++]=s>>>6&63|128;else{if(0!=(4292870144&s))continue;o[r++]=s>>>18&7|240,o[r++]=s>>>12&63|128,o[r++]=s>>>6&63|128}o[r++]=63&s|128}}return o.slice?o.slice(0,r):o.subarray(0,r)},Object.defineProperty(n.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(n.prototype,"fatal",{value:!1}),Object.defineProperty(n.prototype,"ignoreBOM",{value:!1});var o=r;"function"==typeof Buffer&&Buffer.from?o=function(t){return Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf-8")}:"function"==typeof Blob&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&(o=function(t){var e=URL.createObjectURL(new Blob([t],{type:"text/plain;charset=UTF-8"}));try{var n=new XMLHttpRequest;return n.open("GET",e,!1),n.send(),n.responseText}catch(e){return r(t)}finally{URL.revokeObjectURL(e)}}),n.prototype.decode=function(t,e){if((e=void 0===e?{stream:!1}:e).stream)throw Error("Failed to decode: the 'stream' option is unsupported.");return t=t instanceof Uint8Array?t:t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer):new Uint8Array(t),o(t)},t.TextEncoder=e,t.TextDecoder=n}("undefined"!=typeof window?window:an),function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?i(t):e}function s(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=s(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}var u=function(){function e(){t(this,e),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return n(e,[{key:"addEventListener",value:function(t,e,n){t in this.listeners||(this.listeners[t]=[]),this.listeners[t].push({callback:e,options:n})}},{key:"removeEventListener",value:function(t,e){if(t in this.listeners)for(var n=this.listeners[t],r=0,i=n.length;r<i;r++)if(n[r].callback===e)return void n.splice(r,1)}},{key:"dispatchEvent",value:function(t){if(t.type in this.listeners){for(var e=this.listeners[t.type].slice(),n=0,r=e.length;n<r;n++){var i=e[n];try{i.callback.call(this,t)}catch(t){Promise.resolve().then((function(){throw t}))}i.options&&i.options.once&&this.removeEventListener(t.type,i.callback)}return!t.defaultPrevented}}}]),e}(),c=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}(c,e);var s=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=r(t);if(e){var s=r(this).constructor;n=Reflect.construct(i,arguments,s)}else n=i.apply(this,arguments);return o(this,n)}}(c);function c(){var e;return t(this,c),(e=s.call(this)).listeners||u.call(i(e)),Object.defineProperty(i(e),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(i(e),"onabort",{value:null,writable:!0,configurable:!0}),e}return n(c,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(t){"abort"===t.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,t)),a(r(c.prototype),"dispatchEvent",this).call(this,t)}}]),c}(u),l=function(){function e(){t(this,e),Object.defineProperty(this,"signal",{value:new c,writable:!0,configurable:!0})}return n(e,[{key:"abort",value:function(){var t;try{t=new Event("abort")}catch(e){"undefined"!=typeof document?document.createEvent?(t=document.createEvent("Event")).initEvent("abort",!1,!1):(t=document.createEventObject()).type="abort":t={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(t)}},{key:"toString",value:function(){return"[object AbortController]"}}]),e}();"undefined"!=typeof Symbol&&Symbol.toStringTag&&(l.prototype[Symbol.toStringTag]="AbortController",c.prototype[Symbol.toStringTag]="AbortSignal"),function(t){(function(t){return t.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):"function"==typeof t.Request&&!t.Request.prototype.hasOwnProperty("signal")||!t.AbortController})(t)&&(t.AbortController=l,t.AbortSignal=c)}("undefined"!=typeof self?self:an)}();var ma=cn((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){var t=this;this.locked=new Map,this.addToLocked=function(e,n){var r=t.locked.get(e);void 0===r?t.locked.set(e,void 0===n?[]:[n]):void 0!==n&&(r.unshift(n),t.locked.set(e,r))},this.isLocked=function(e){return t.locked.has(e)},this.lock=function(e){return new Promise((function(n,r){t.isLocked(e)?t.addToLocked(e,n):(t.addToLocked(e),n())}))},this.unlock=function(e){var n=t.locked.get(e);if(void 0!==n&&0!==n.length){var r=n.pop();t.locked.set(e,n),void 0!==r&&setTimeout(r,0)}else t.locked.delete(e)}}return t.getInstance=function(){return void 0===t.instance&&(t.instance=new t),t.instance},t}();e.default=function(){return n.getInstance()}}));un(ma);var ya=un(cn((function(t,e){var n=an&&an.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(s,a)}u((r=r.apply(t,e||[])).next())}))},r=an&&an.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var i="browser-tabs-lock-key";function o(t){return new Promise((function(e){return setTimeout(e,t)}))}function s(t){for(var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",n="",r=0;r<t;r++)n+=e[Math.floor(Math.random()*e.length)];return n}var a=function(){function t(){this.acquiredIatSet=new Set,this.id=Date.now().toString()+s(15),this.acquireLock=this.acquireLock.bind(this),this.releaseLock=this.releaseLock.bind(this),this.releaseLock__private__=this.releaseLock__private__.bind(this),this.waitForSomethingToChange=this.waitForSomethingToChange.bind(this),this.refreshLockWhileAcquired=this.refreshLockWhileAcquired.bind(this),void 0===t.waiters&&(t.waiters=[])}return t.prototype.acquireLock=function(e,a){return void 0===a&&(a=5e3),n(this,void 0,void 0,(function(){var n,u,c,l,h,d;return r(this,(function(r){switch(r.label){case 0:n=Date.now()+s(4),u=Date.now()+a,c=i+"-"+e,l=window.localStorage,r.label=1;case 1:return Date.now()<u?[4,o(30)]:[3,8];case 2:return r.sent(),null!==l.getItem(c)?[3,5]:(h=this.id+"-"+e+"-"+n,[4,o(Math.floor(25*Math.random()))]);case 3:return r.sent(),l.setItem(c,JSON.stringify({id:this.id,iat:n,timeoutKey:h,timeAcquired:Date.now(),timeRefreshed:Date.now()})),[4,o(30)];case 4:return r.sent(),null!==(d=l.getItem(c))&&(d=JSON.parse(d)).id===this.id&&d.iat===n?(this.acquiredIatSet.add(n),this.refreshLockWhileAcquired(c,n),[2,!0]):[3,7];case 5:return t.lockCorrector(),[4,this.waitForSomethingToChange(u)];case 6:r.sent(),r.label=7;case 7:return n=Date.now()+s(4),[3,1];case 8:return[2,!1]}}))}))},t.prototype.refreshLockWhileAcquired=function(t,e){return n(this,void 0,void 0,(function(){var i=this;return r(this,(function(o){return setTimeout((function(){return n(i,void 0,void 0,(function(){var n,i;return r(this,(function(r){switch(r.label){case 0:return[4,ma.default().lock(e)];case 1:return r.sent(),this.acquiredIatSet.has(e)?(n=window.localStorage,null===(i=n.getItem(t))?(ma.default().unlock(e),[2]):((i=JSON.parse(i)).timeRefreshed=Date.now(),n.setItem(t,JSON.stringify(i)),ma.default().unlock(e),this.refreshLockWhileAcquired(t,e),[2])):(ma.default().unlock(e),[2])}}))}))}),1e3),[2]}))}))},t.prototype.waitForSomethingToChange=function(e){return n(this,void 0,void 0,(function(){return r(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(n){var r=!1,i=Date.now(),o=!1;function s(){if(o||(window.removeEventListener("storage",s),t.removeFromWaiting(s),clearTimeout(a),o=!0),!r){r=!0;var e=50-(Date.now()-i);e>0?setTimeout(n,e):n()}}window.addEventListener("storage",s),t.addToWaiting(s);var a=setTimeout(s,Math.max(0,e-Date.now()))}))];case 1:return n.sent(),[2]}}))}))},t.addToWaiting=function(e){this.removeFromWaiting(e),void 0!==t.waiters&&t.waiters.push(e)},t.removeFromWaiting=function(e){void 0!==t.waiters&&(t.waiters=t.waiters.filter((function(t){return t!==e})))},t.notifyWaiters=function(){void 0!==t.waiters&&t.waiters.slice().forEach((function(t){return t()}))},t.prototype.releaseLock=function(t){return n(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,this.releaseLock__private__(t)];case 1:return[2,e.sent()]}}))}))},t.prototype.releaseLock__private__=function(e){return n(this,void 0,void 0,(function(){var n,o,s;return r(this,(function(r){switch(r.label){case 0:return n=window.localStorage,null===(s=n.getItem(o=i+"-"+e))?[2]:(s=JSON.parse(s)).id!==this.id?[3,2]:[4,ma.default().lock(s.iat)];case 1:r.sent(),this.acquiredIatSet.delete(s.iat),n.removeItem(o),ma.default().unlock(s.iat),t.notifyWaiters(),r.label=2;case 2:return[2]}}))}))},t.lockCorrector=function(){for(var e=Date.now()-5e3,n=window.localStorage,r=Object.keys(n),o=!1,s=0;s<r.length;s++){var a=r[s];if(a.includes(i)){var u=n.getItem(a);null!==u&&(void 0===(u=JSON.parse(u)).timeRefreshed&&u.timeAcquired<e||void 0!==u.timeRefreshed&&u.timeRefreshed<e)&&(n.removeItem(a),o=!0)}}o&&t.notifyWaiters()},t.waiters=void 0,t}();e.default=a}))),va={timeoutInSeconds:60},ba=["login_required","consent_required","interaction_required","account_selection_required","access_denied"],_a={name:"auth0-spa-js",version:"1.15.0"},wa=function(t){function e(n,r){var i=t.call(this,r)||this;return i.error=n,i.error_description=r,Object.setPrototypeOf(i,e.prototype),i}return en(e,t),e.fromPayload=function(t){return new e(t.error,t.error_description)},e}(Error),Oa=function(t){function e(n,r,i,o){void 0===o&&(o=null);var s=t.call(this,n,r)||this;return s.state=i,s.appState=o,Object.setPrototypeOf(s,e.prototype),s}return en(e,t),e}(wa),Sa=function(t){function e(){var n=t.call(this,"timeout","Timeout")||this;return Object.setPrototypeOf(n,e.prototype),n}return en(e,t),e}(wa),Ca=function(t){function e(n){var r=t.call(this)||this;return r.popup=n,Object.setPrototypeOf(r,e.prototype),r}return en(e,t),e}(Sa),Ea=function(t){function e(n){var r=t.call(this,"cancelled","Popup closed")||this;return r.popup=n,Object.setPrototypeOf(r,e.prototype),r}return en(e,t),e}(wa),Ta=function(t){return new Promise((function(e,n){var r,i=setInterval((function(){t.popup&&t.popup.closed&&(clearInterval(i),clearTimeout(o),window.removeEventListener("message",r,!1),n(new Ea(t.popup)))}),1e3),o=setTimeout((function(){clearInterval(i),n(new Ca(t.popup)),window.removeEventListener("message",r,!1)}),1e3*(t.timeoutInSeconds||60));r=function(s){if(s.data&&"authorization_response"===s.data.type){if(clearTimeout(o),clearInterval(i),window.removeEventListener("message",r,!1),t.popup.close(),s.data.response.error)return n(wa.fromPayload(s.data.response));e(s.data.response)}},window.addEventListener("message",r)}))},Ia=function(){return window.crypto||window.msCrypto},ka=function(){var t=Ia();return t.subtle||t.webkitSubtle},xa=function(){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_~.",e="";return Array.from(Ia().getRandomValues(new Uint8Array(43))).forEach((function(n){return e+=t[n%t.length]})),e},Aa=function(t){return btoa(t)},Na=function(t){return Object.keys(t).filter((function(e){return void 0!==t[e]})).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&")},ja=function(t){return on(void 0,void 0,void 0,(function(){var e;return sn(this,(function(n){switch(n.label){case 0:return e=ka().digest({name:"SHA-256"},(new TextEncoder).encode(t)),window.msCrypto?[2,new Promise((function(t,n){e.oncomplete=function(e){t(e.target.result)},e.onerror=function(t){n(t.error)},e.onabort=function(){n("The digest operation was aborted")}}))]:[4,e];case 1:return[2,n.sent()]}}))}))},Ra=function(t){return function(t){return decodeURIComponent(atob(t).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""))}(t.replace(/_/g,"/").replace(/-/g,"+"))},Pa=function(t){var e=new Uint8Array(t);return function(t){var e={"+":"-","/":"_","=":""};return t.replace(/[+/=]/g,(function(t){return e[t]}))}(window.btoa(String.fromCharCode.apply(String,Array.from(e))))},Da=function(t,e){return on(void 0,void 0,void 0,(function(){var n,r;return sn(this,(function(i){switch(i.label){case 0:return[4,(o=t,s=e,s=s||{},new Promise((function(t,e){var n=new XMLHttpRequest,r=[],i=[],a={},u=function(){return{ok:2==(n.status/100|0),statusText:n.statusText,status:n.status,url:n.responseURL,text:function(){return Promise.resolve(n.responseText)},json:function(){return Promise.resolve(n.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([n.response]))},clone:u,headers:{keys:function(){return r},entries:function(){return i},get:function(t){return a[t.toLowerCase()]},has:function(t){return t.toLowerCase()in a}}}};for(var c in n.open(s.method||"get",o,!0),n.onload=function(){n.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(t,e,n){r.push(e=e.toLowerCase()),i.push([e,n]),a[e]=a[e]?a[e]+","+n:n})),t(u())},n.onerror=e,n.withCredentials="include"==s.credentials,s.headers)n.setRequestHeader(c,s.headers[c]);n.send(s.body||null)})))];case 1:return n=i.sent(),r={ok:n.ok},[4,n.json()];case 2:return[2,(r.json=i.sent(),r)]}var o,s}))}))},La=function(t,e,n){return on(void 0,void 0,void 0,(function(){var r,i;return sn(this,(function(o){return r=new AbortController,e.signal=r.signal,[2,Promise.race([Da(t,e),new Promise((function(t,e){i=setTimeout((function(){r.abort(),e(new Error("Timeout when executing 'fetch'"))}),n)}))]).finally((function(){clearTimeout(i)}))]}))}))},Ma=function(t,e,n,r,i,o){return on(void 0,void 0,void 0,(function(){return sn(this,(function(s){return[2,(a={auth:{audience:e,scope:n},timeout:i,fetchUrl:t,fetchOptions:r},u=o,new Promise((function(t,e){var n=new MessageChannel;n.port1.onmessage=function(n){n.data.error?e(new Error(n.data.error)):t(n.data)},u.postMessage(a,[n.port2])})))];var a,u}))}))},Fa=function(t,e,n,r,i,o){return void 0===o&&(o=1e4),on(void 0,void 0,void 0,(function(){return sn(this,(function(s){return i?[2,Ma(t,e,n,r,o,i)]:[2,La(t,r,o)]}))}))};function Ua(t,e,n,r,i,o){return on(this,void 0,void 0,(function(){var s,a,u,c,l,h,d,f;return sn(this,(function(p){switch(p.label){case 0:s=null,u=0,p.label=1;case 1:if(!(u<3))return[3,6];p.label=2;case 2:return p.trys.push([2,4,,5]),[4,Fa(t,n,r,i,o,e)];case 3:return a=p.sent(),s=null,[3,6];case 4:return c=p.sent(),s=c,[3,5];case 5:return u++,[3,1];case 6:if(s)throw s.message=s.message||"Failed to fetch",s;if(h=(l=a.json).error,d=l.error_description,f=rn(l,["error","error_description"]),!a.ok)throw new wa(h||"request_error",d||"HTTP error. Unable to fetch "+t);return[2,f]}}))}))}function Va(t,e){var n=t.baseUrl,r=t.timeout,i=t.audience,o=t.scope,s=t.auth0Client,a=rn(t,["baseUrl","timeout","audience","scope","auth0Client"]);return on(this,void 0,void 0,(function(){return sn(this,(function(t){switch(t.label){case 0:return[4,Ua(n+"/oauth/token",r,i||"default",o,{method:"POST",body:JSON.stringify(a),headers:{"Content-type":"application/json","Auth0-Client":btoa(JSON.stringify(s||_a))}},e)];case 1:return[2,t.sent()]}}))}))}var qa=function(t){return Array.from(new Set(t))},za=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return qa(t.join(" ").trim().split(/\s+/)).join(" ")},Ba=function(){function t(t,e){void 0===e&&(e=Wa),this.prefix=e,this.client_id=t.client_id,this.scope=t.scope,this.audience=t.audience}return t.prototype.toKey=function(){return this.prefix+"::"+this.client_id+"::"+this.audience+"::"+this.scope},t.fromKey=function(e){var n=e.split("::");return new t({client_id:n[1],scope:n[3],audience:n[2]},n[0])},t}(),Wa="@@auth0spajs@@",Ha=function(t){var e=Math.floor(Date.now()/1e3)+t.expires_in;return{body:t,expiresAt:Math.min(e,t.decodedToken.claims.exp)}},Ka=function(t,e){var n=t.client_id,r=t.audience,i=t.scope;return e.filter((function(t){var e=Ba.fromKey(t),o=e.prefix,s=e.client_id,a=e.audience,u=e.scope,c=u&&u.split(" "),l=u&&i.split(" ").reduce((function(t,e){return t&&c.includes(e)}),!0);return o===Wa&&s===n&&a===r&&l}))[0]},Ga=function(){function t(){}return t.prototype.save=function(t){var e=new Ba({client_id:t.client_id,scope:t.scope,audience:t.audience}),n=Ha(t);window.localStorage.setItem(e.toKey(),JSON.stringify(n))},t.prototype.get=function(t,e){void 0===e&&(e=0);var n=this.readJson(t),r=Math.floor(Date.now()/1e3);if(n){if(!(n.expiresAt-e<r))return n.body;if(n.body.refresh_token){var i=this.stripData(n);return this.writeJson(t.toKey(),i),i.body}localStorage.removeItem(t.toKey())}},t.prototype.clear=function(){for(var t=localStorage.length-1;t>=0;t--)localStorage.key(t).startsWith(Wa)&&localStorage.removeItem(localStorage.key(t))},t.prototype.readJson=function(t){var e,n=Ka(t,Object.keys(window.localStorage)),r=n&&window.localStorage.getItem(n);if(r&&(e=JSON.parse(r)))return e},t.prototype.writeJson=function(t,e){localStorage.setItem(t,JSON.stringify(e))},t.prototype.stripData=function(t){return{body:{refresh_token:t.body.refresh_token},expiresAt:t.expiresAt}},t}(),Ja=function(){var t;this.enclosedCache=(t={},{save:function(e){var n=new Ba({client_id:e.client_id,scope:e.scope,audience:e.audience}),r=Ha(e);t[n.toKey()]=r},get:function(e,n){void 0===n&&(n=0);var r=Ka(e,Object.keys(t)),i=t[r],o=Math.floor(Date.now()/1e3);if(i)return i.expiresAt-n<o?i.body.refresh_token?(i.body={refresh_token:i.body.refresh_token},i.body):void delete t[e.toKey()]:i.body},clear:function(){t={}}})},Qa=function(){function t(t){this.storage=t,this.transaction=this.storage.get("a0.spajs.txs")}return t.prototype.create=function(t){this.transaction=t,this.storage.save("a0.spajs.txs",t,{daysUntilExpire:1})},t.prototype.get=function(){return this.transaction},t.prototype.remove=function(){delete this.transaction,this.storage.remove("a0.spajs.txs")},t}(),$a=function(t){return"number"==typeof t},Ya=["iss","aud","exp","nbf","iat","jti","azp","nonce","auth_time","at_hash","c_hash","acr","amr","sub_jwk","cnf","sip_from_tag","sip_date","sip_callid","sip_cseq_num","sip_via_branch","orig","dest","mky","events","toe","txn","rph","sid","vot","vtm"],Xa=cn((function(t,e){var n=an&&an.__assign||function(){return(n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function r(t,e){if(!e)return"";var n="; "+t;return!0===e?n:n+"="+e}function i(t,e,n){return encodeURIComponent(t).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/\(/g,"%28").replace(/\)/g,"%29")+"="+encodeURIComponent(e).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)+function(t){if("number"==typeof t.expires){var e=new Date;e.setMilliseconds(e.getMilliseconds()+864e5*t.expires),t.expires=e}return r("Expires",t.expires?t.expires.toUTCString():"")+r("Domain",t.domain)+r("Path",t.path)+r("Secure",t.secure)+r("SameSite",t.sameSite)}(n)}function o(t){for(var e={},n=t?t.split("; "):[],r=/(%[\dA-F]{2})+/gi,i=0;i<n.length;i++){var o=n[i].split("="),s=o.slice(1).join("=");'"'===s.charAt(0)&&(s=s.slice(1,-1));try{e[o[0].replace(r,decodeURIComponent)]=s.replace(r,decodeURIComponent)}catch(t){}}return e}function s(){return o(document.cookie)}function a(t,e,r){document.cookie=i(t,e,n({path:"/"},r))}e.__esModule=!0,e.encode=i,e.parse=o,e.getAll=s,e.get=function(t){return s()[t]},e.set=a,e.remove=function(t,e){a(t,"",n(n({},e),{expires:-1}))}}));un(Xa);var Za,tu=Xa.get,eu=Xa.set,nu=Xa.remove,ru={get:function(t){var e=tu(t);if(void 0!==e)return JSON.parse(e)},save:function(t,e,n){var r={};"https:"===window.location.protocol&&(r={secure:!0,sameSite:"none"}),r.expires=n.daysUntilExpire,eu(t,JSON.stringify(e),r)},remove:function(t){nu(t)}},iu={get:function(t){return ru.get(t)||ru.get("_legacy_"+t)},save:function(t,e,n){var r={};"https:"===window.location.protocol&&(r={secure:!0}),r.expires=n.daysUntilExpire,eu("_legacy_"+t,JSON.stringify(e),r),ru.save(t,e,n)},remove:function(t){ru.remove(t),ru.remove("_legacy_"+t)}},ou={get:function(t){if("undefined"!=typeof sessionStorage){var e=sessionStorage.getItem(t);if(void 0!==e)return JSON.parse(e)}},save:function(t,e){sessionStorage.setItem(t,JSON.stringify(e))},remove:function(t){sessionStorage.removeItem(t)}},su=function(t){return Za=Za||function(t,e,n){var r=atob("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Ci8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogICAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uCgogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55CiAgICBwdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuCgogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgKICAgIFJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWQogICAgQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULAogICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NCiAgICBMT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUgogICAgT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUgogICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4KICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovdmFyIGU9ZnVuY3Rpb24oKXtyZXR1cm4oZT1PYmplY3QuYXNzaWdufHxmdW5jdGlvbihlKXtmb3IodmFyIHQscj0xLG49YXJndW1lbnRzLmxlbmd0aDtyPG47cisrKWZvcih2YXIgbyBpbiB0PWFyZ3VtZW50c1tyXSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxvKSYmKGVbb109dFtvXSk7cmV0dXJuIGV9KS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2Z1bmN0aW9uIHQoZSx0LHIsbil7cmV0dXJuIG5ldyhyfHwocj1Qcm9taXNlKSkoKGZ1bmN0aW9uKG8scyl7ZnVuY3Rpb24gYShlKXt0cnl7dShuLm5leHQoZSkpfWNhdGNoKGUpe3MoZSl9fWZ1bmN0aW9uIGkoZSl7dHJ5e3Uobi50aHJvdyhlKSl9Y2F0Y2goZSl7cyhlKX19ZnVuY3Rpb24gdShlKXt2YXIgdDtlLmRvbmU/byhlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiByP3Q6bmV3IHIoKGZ1bmN0aW9uKGUpe2UodCl9KSkpLnRoZW4oYSxpKX11KChuPW4uYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KSl9ZnVuY3Rpb24gcihlLHQpe3ZhciByLG4sbyxzLGE9e2xhYmVsOjAsc2VudDpmdW5jdGlvbigpe2lmKDEmb1swXSl0aHJvdyBvWzFdO3JldHVybiBvWzFdfSx0cnlzOltdLG9wczpbXX07cmV0dXJuIHM9e25leHQ6aSgwKSx0aHJvdzppKDEpLHJldHVybjppKDIpfSwiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYoc1tTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSxzO2Z1bmN0aW9uIGkocyl7cmV0dXJuIGZ1bmN0aW9uKGkpe3JldHVybiBmdW5jdGlvbihzKXtpZihyKXRocm93IG5ldyBUeXBlRXJyb3IoIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy4iKTtmb3IoO2E7KXRyeXtpZihyPTEsbiYmKG89MiZzWzBdP24ucmV0dXJuOnNbMF0/bi50aHJvd3x8KChvPW4ucmV0dXJuKSYmby5jYWxsKG4pLDApOm4ubmV4dCkmJiEobz1vLmNhbGwobixzWzFdKSkuZG9uZSlyZXR1cm4gbztzd2l0Y2gobj0wLG8mJihzPVsyJnNbMF0sby52YWx1ZV0pLHNbMF0pe2Nhc2UgMDpjYXNlIDE6bz1zO2JyZWFrO2Nhc2UgNDpyZXR1cm4gYS5sYWJlbCsrLHt2YWx1ZTpzWzFdLGRvbmU6ITF9O2Nhc2UgNTphLmxhYmVsKyssbj1zWzFdLHM9WzBdO2NvbnRpbnVlO2Nhc2UgNzpzPWEub3BzLnBvcCgpLGEudHJ5cy5wb3AoKTtjb250aW51ZTtkZWZhdWx0OmlmKCEobz1hLnRyeXMsKG89by5sZW5ndGg+MCYmb1tvLmxlbmd0aC0xXSl8fDYhPT1zWzBdJiYyIT09c1swXSkpe2E9MDtjb250aW51ZX1pZigzPT09c1swXSYmKCFvfHxzWzFdPm9bMF0mJnNbMV08b1szXSkpe2EubGFiZWw9c1sxXTticmVha31pZig2PT09c1swXSYmYS5sYWJlbDxvWzFdKXthLmxhYmVsPW9bMV0sbz1zO2JyZWFrfWlmKG8mJmEubGFiZWw8b1syXSl7YS5sYWJlbD1vWzJdLGEub3BzLnB1c2gocyk7YnJlYWt9b1syXSYmYS5vcHMucG9wKCksYS50cnlzLnBvcCgpO2NvbnRpbnVlfXM9dC5jYWxsKGUsYSl9Y2F0Y2goZSl7cz1bNixlXSxuPTB9ZmluYWxseXtyPW89MH1pZig1JnNbMF0pdGhyb3cgc1sxXTtyZXR1cm57dmFsdWU6c1swXT9zWzFdOnZvaWQgMCxkb25lOiEwfX0oW3MsaV0pfX19dmFyIG49e30sbz1mdW5jdGlvbihlLHQpe3JldHVybiBlKyJ8Iit0fTthZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwoZnVuY3Rpb24ocyl7dmFyIGE9cy5kYXRhLGk9YS50aW1lb3V0LHU9YS5hdXRoLGM9YS5mZXRjaFVybCxmPWEuZmV0Y2hPcHRpb25zLGw9cy5wb3J0c1swXTtyZXR1cm4gdCh2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxzLGEsaCxwLGIseSxkLHYsdztyZXR1cm4gcih0aGlzLChmdW5jdGlvbihyKXtzd2l0Y2goci5sYWJlbCl7Y2FzZSAwOmE9KHM9dXx8e30pLmF1ZGllbmNlLGg9cy5zY29wZSxyLmxhYmVsPTE7Y2FzZSAxOmlmKHIudHJ5cy5wdXNoKFsxLDcsLDhdKSwhKHA9SlNPTi5wYXJzZShmLmJvZHkpKS5yZWZyZXNoX3Rva2VuJiYicmVmcmVzaF90b2tlbiI9PT1wLmdyYW50X3R5cGUpe2lmKCEoYj1mdW5jdGlvbihlLHQpe3JldHVybiBuW28oZSx0KV19KGEsaCkpKXRocm93IG5ldyBFcnJvcigiVGhlIHdlYiB3b3JrZXIgaXMgbWlzc2luZyB0aGUgcmVmcmVzaCB0b2tlbiIpO2YuYm9keT1KU09OLnN0cmluZ2lmeShlKGUoe30scCkse3JlZnJlc2hfdG9rZW46Yn0pKX15PXZvaWQgMCwiZnVuY3Rpb24iPT10eXBlb2YgQWJvcnRDb250cm9sbGVyJiYoeT1uZXcgQWJvcnRDb250cm9sbGVyLGYuc2lnbmFsPXkuc2lnbmFsKSxkPXZvaWQgMCxyLmxhYmVsPTI7Y2FzZSAyOnJldHVybiByLnRyeXMucHVzaChbMiw0LCw1XSksWzQsUHJvbWlzZS5yYWNlKFsoZz1pLG5ldyBQcm9taXNlKChmdW5jdGlvbihlKXtyZXR1cm4gc2V0VGltZW91dChlLGcpfSkpKSxmZXRjaChjLGUoe30sZikpXSldO2Nhc2UgMzpyZXR1cm4gZD1yLnNlbnQoKSxbMyw1XTtjYXNlIDQ6cmV0dXJuIHY9ci5zZW50KCksbC5wb3N0TWVzc2FnZSh7ZXJyb3I6di5tZXNzYWdlfSksWzJdO2Nhc2UgNTpyZXR1cm4gZD9bNCxkLmpzb24oKV06KHkmJnkuYWJvcnQoKSxsLnBvc3RNZXNzYWdlKHtlcnJvcjoiVGltZW91dCB3aGVuIGV4ZWN1dGluZyAnZmV0Y2gnIn0pLFsyXSk7Y2FzZSA2OnJldHVybih0PXIuc2VudCgpKS5yZWZyZXNoX3Rva2VuPyhmdW5jdGlvbihlLHQscil7bltvKHQscildPWV9KHQucmVmcmVzaF90b2tlbixhLGgpLGRlbGV0ZSB0LnJlZnJlc2hfdG9rZW4pOmZ1bmN0aW9uKGUsdCl7ZGVsZXRlIG5bbyhlLHQpXX0oYSxoKSxsLnBvc3RNZXNzYWdlKHtvazpkLm9rLGpzb246dH0pLFszLDhdO2Nhc2UgNzpyZXR1cm4gdz1yLnNlbnQoKSxsLnBvc3RNZXNzYWdlKHtvazohMSxqc29uOntlcnJvcl9kZXNjcmlwdGlvbjp3Lm1lc3NhZ2V9fSksWzMsOF07Y2FzZSA4OnJldHVyblsyXX12YXIgZ30pKX0pKX0pKX0oKTsKCg=="),i=r.indexOf("\n",10)+1,o=r.substring(i)+"",s=new Blob([o],{type:"application/javascript"});return URL.createObjectURL(s)}(),new Worker(Za,t)},au={},uu=new ya,cu={memory:function(){return(new Ja).enclosedCache},localstorage:function(){return new Ga}},lu=function(t){return cu[t]},hu=function(){function t(t){var e,n;if(this.options=t,"undefined"!=typeof window&&function(){if(!Ia())throw new Error("For security reasons, `window.crypto` is required to run `auth0-spa-js`.");if(void 0===ka())throw new Error("\n      auth0-spa-js must run on a secure origin. See https://github.com/auth0/auth0-spa-js/blob/master/FAQ.md#why-do-i-get-auth0-spa-js-must-run-on-a-secure-origin for more information.\n    ")}(),this.cacheLocation=t.cacheLocation||"memory",this.cookieStorage=!1===t.legacySameSiteCookie?ru:iu,this.sessionCheckExpiryDays=t.sessionCheckExpiryDays||1,!lu(this.cacheLocation))throw new Error('Invalid cache location "'+this.cacheLocation+'"');var r,i,o=t.useCookiesForTransactions?this.cookieStorage:ou;this.cache=lu(this.cacheLocation)(),this.scope=this.options.scope,this.transactionManager=new Qa(o),this.domainUrl="https://"+this.options.domain,this.tokenIssuer=(i=this.domainUrl,(r=this.options.issuer)?r.startsWith("https://")?r:"https://"+r+"/":i+"/"),this.defaultScope=za("openid",void 0!==(null===(n=null===(e=this.options)||void 0===e?void 0:e.advancedOptions)||void 0===n?void 0:n.defaultScope)?this.options.advancedOptions.defaultScope:"openid profile email"),this.options.useRefreshTokens&&(this.scope=za(this.scope,"offline_access")),"undefined"!=typeof window&&window.Worker&&this.options.useRefreshTokens&&"memory"===this.cacheLocation&&!/Trident.*rv:11\.0/.test(navigator.userAgent)&&(this.worker=new su),this.customOptions=function(t){return rn(t,["advancedOptions","audience","auth0Client","authorizeTimeoutInSeconds","cacheLocation","client_id","domain","issuer","leeway","max_age","redirect_uri","scope","useRefreshTokens"])}(t)}return t.prototype._url=function(t){var e=encodeURIComponent(btoa(JSON.stringify(this.options.auth0Client||_a)));return""+this.domainUrl+t+"&auth0Client="+e},t.prototype._getParams=function(t,e,n,r,i){var o=rn(this.options,["domain","leeway","useRefreshTokens","useCookiesForTransactions","auth0Client","cacheLocation","advancedOptions"]);return nn(nn(nn({},o),t),{scope:za(this.defaultScope,this.scope,t.scope),response_type:"code",response_mode:"query",state:e,nonce:n,redirect_uri:i||this.options.redirect_uri,code_challenge:r,code_challenge_method:"S256"})},t.prototype._authorizeUrl=function(t){return this._url("/authorize?"+Na(t))},t.prototype._verifyIdToken=function(t,e,n){return function(t){if(!t.id_token)throw new Error("ID token is required but missing");var e=function(t){var e=t.split("."),n=e[0],r=e[1],i=e[2];if(3!==e.length||!n||!r||!i)throw new Error("ID token could not be decoded");var o=JSON.parse(Ra(r)),s={__raw:t},a={};return Object.keys(o).forEach((function(t){s[t]=o[t],Ya.includes(t)||(a[t]=o[t])})),{encoded:{header:n,payload:r,signature:i},header:JSON.parse(Ra(n)),claims:s,user:a}}(t.id_token);if(!e.claims.iss)throw new Error("Issuer (iss) claim must be a string present in the ID token");if(e.claims.iss!==t.iss)throw new Error('Issuer (iss) claim mismatch in the ID token; expected "'+t.iss+'", found "'+e.claims.iss+'"');if(!e.user.sub)throw new Error("Subject (sub) claim must be a string present in the ID token");if("RS256"!==e.header.alg)throw new Error('Signature algorithm of "'+e.header.alg+'" is not supported. Expected the ID token to be signed with "RS256".');if(!e.claims.aud||"string"!=typeof e.claims.aud&&!Array.isArray(e.claims.aud))throw new Error("Audience (aud) claim must be a string or array of strings present in the ID token");if(Array.isArray(e.claims.aud)){if(!e.claims.aud.includes(t.aud))throw new Error('Audience (aud) claim mismatch in the ID token; expected "'+t.aud+'" but was not one of "'+e.claims.aud.join(", ")+'"');if(e.claims.aud.length>1){if(!e.claims.azp)throw new Error("Authorized Party (azp) claim must be a string present in the ID token when Audience (aud) claim has multiple values");if(e.claims.azp!==t.aud)throw new Error('Authorized Party (azp) claim mismatch in the ID token; expected "'+t.aud+'", found "'+e.claims.azp+'"')}}else if(e.claims.aud!==t.aud)throw new Error('Audience (aud) claim mismatch in the ID token; expected "'+t.aud+'" but found "'+e.claims.aud+'"');if(t.nonce){if(!e.claims.nonce)throw new Error("Nonce (nonce) claim must be a string present in the ID token");if(e.claims.nonce!==t.nonce)throw new Error('Nonce (nonce) claim mismatch in the ID token; expected "'+t.nonce+'", found "'+e.claims.nonce+'"')}if(t.max_age&&!$a(e.claims.auth_time))throw new Error("Authentication Time (auth_time) claim must be a number present in the ID token when Max Age (max_age) is specified");if(!$a(e.claims.exp))throw new Error("Expiration Time (exp) claim must be a number present in the ID token");if(!$a(e.claims.iat))throw new Error("Issued At (iat) claim must be a number present in the ID token");var n=t.leeway||60,r=new Date(Date.now()),i=new Date(0),o=new Date(0),s=new Date(0);if(s.setUTCSeconds(parseInt(e.claims.auth_time)+t.max_age+n),i.setUTCSeconds(e.claims.exp+n),o.setUTCSeconds(e.claims.nbf-n),r>i)throw new Error("Expiration Time (exp) claim error in the ID token; current time ("+r+") is after expiration time ("+i+")");if($a(e.claims.nbf)&&r<o)throw new Error("Not Before time (nbf) claim in the ID token indicates that this token can't be used just yet. Currrent time ("+r+") is before "+o);if($a(e.claims.auth_time)&&r>s)throw new Error("Authentication Time (auth_time) claim in the ID token indicates that too much time has passed since the last end-user authentication. Currrent time ("+r+") is after last auth at "+s);if(t.organizationId){if(!e.claims.org_id)throw new Error("Organization ID (org_id) claim must be a string present in the ID token");if(t.organizationId!==e.claims.org_id)throw new Error('Organization ID (org_id) claim mismatch in the ID token; expected "'+t.organizationId+'", found "'+e.claims.org_id+'"')}return e}({iss:this.tokenIssuer,aud:this.options.client_id,id_token:t,nonce:e,organizationId:n,leeway:this.options.leeway,max_age:this._parseNumber(this.options.max_age)})},t.prototype._parseNumber=function(t){return"string"!=typeof t?t:parseInt(t,10)||void 0},t.prototype.buildAuthorizeUrl=function(t){return void 0===t&&(t={}),on(this,void 0,void 0,(function(){var e,n,r,i,o,s,a,u,c,l,h,d;return sn(this,(function(f){switch(f.label){case 0:return e=t.redirect_uri,n=t.appState,r=rn(t,["redirect_uri","appState"]),i=Aa(xa()),o=Aa(xa()),s=xa(),[4,ja(s)];case 1:return a=f.sent(),u=Pa(a),c=t.fragment?"#"+t.fragment:"",l=this._getParams(r,i,o,u,e),h=this._authorizeUrl(l),this.transactionManager.create(nn({nonce:o,code_verifier:s,appState:n,scope:l.scope,audience:l.audience||"default",redirect_uri:l.redirect_uri},(d=t.organization||this.options.organization)&&{organizationId:d})),[2,h+c]}}))}))},t.prototype.loginWithPopup=function(t,e){return on(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,h,d,f;return sn(this,(function(p){switch(p.label){case 0:return t=t||{},(e=e||{}).popup||(e.popup=function(t){var e=window.screenX+(window.innerWidth-400)/2,n=window.screenY+(window.innerHeight-600)/2;return window.open("","auth0:authorize:popup","left="+e+",top="+n+",width=400,height=600,resizable,scrollbars=yes,status=1")}()),n=rn(t,[]),r=Aa(xa()),i=Aa(xa()),o=xa(),[4,ja(o)];case 1:return s=p.sent(),a=Pa(s),u=this._getParams(n,r,i,a,this.options.redirect_uri||window.location.origin),c=this._authorizeUrl(nn(nn({},u),{response_mode:"web_message"})),e.popup.location.href=c,[4,Ta(nn(nn({},e),{timeoutInSeconds:e.timeoutInSeconds||this.options.authorizeTimeoutInSeconds||60}))];case 2:if(l=p.sent(),r!==l.state)throw new Error("Invalid state");return[4,Va({audience:u.audience,scope:u.scope,baseUrl:this.domainUrl,client_id:this.options.client_id,code_verifier:o,code:l.code,grant_type:"authorization_code",redirect_uri:u.redirect_uri,auth0Client:this.options.auth0Client},this.worker)];case 3:return h=p.sent(),d=this._verifyIdToken(h.id_token,i,t.organization||this.options.organization),f=nn(nn({},h),{decodedToken:d,scope:u.scope,audience:u.audience||"default",client_id:this.options.client_id}),this.cache.save(f),this.cookieStorage.save("auth0.is.authenticated",!0,{daysUntilExpire:this.sessionCheckExpiryDays}),[2]}}))}))},t.prototype.getUser=function(t){return void 0===t&&(t={}),on(this,void 0,void 0,(function(){var e,n,r;return sn(this,(function(i){return e=t.audience||this.options.audience||"default",n=za(this.defaultScope,this.scope,t.scope),[2,(r=this.cache.get(new Ba({client_id:this.options.client_id,audience:e,scope:n})))&&r.decodedToken&&r.decodedToken.user]}))}))},t.prototype.getIdTokenClaims=function(t){return void 0===t&&(t={}),on(this,void 0,void 0,(function(){var e,n,r;return sn(this,(function(i){return e=t.audience||this.options.audience||"default",n=za(this.defaultScope,this.scope,t.scope),[2,(r=this.cache.get(new Ba({client_id:this.options.client_id,audience:e,scope:n})))&&r.decodedToken&&r.decodedToken.claims]}))}))},t.prototype.loginWithRedirect=function(t){return void 0===t&&(t={}),on(this,void 0,void 0,(function(){var e,n,r;return sn(this,(function(i){switch(i.label){case 0:return e=t.redirectMethod,n=rn(t,["redirectMethod"]),[4,this.buildAuthorizeUrl(n)];case 1:return r=i.sent(),window.location[e||"assign"](r),[2]}}))}))},t.prototype.handleRedirectCallback=function(t){return void 0===t&&(t=window.location.href),on(this,void 0,void 0,(function(){var e,n,r,i,o,s,a,u,c,l,h;return sn(this,(function(d){switch(d.label){case 0:if(0===(e=t.split("?").slice(1)).length)throw new Error("There are no query params available for parsing.");if(n=function(t){t.indexOf("#")>-1&&(t=t.substr(0,t.indexOf("#")));var e=t.split("&"),n={};return e.forEach((function(t){var e=t.split("=");n[e[0]]=decodeURIComponent(e[1])})),nn(nn({},n),{expires_in:parseInt(n.expires_in)})}(e.join("")),r=n.state,i=n.code,o=n.error,s=n.error_description,!(a=this.transactionManager.get())||!a.code_verifier)throw new Error("Invalid state");if(this.transactionManager.remove(),o)throw new Oa(o,s,r,a.appState);return u={audience:a.audience,scope:a.scope,baseUrl:this.domainUrl,client_id:this.options.client_id,code_verifier:a.code_verifier,grant_type:"authorization_code",code:i,auth0Client:this.options.auth0Client},void 0!==a.redirect_uri&&(u.redirect_uri=a.redirect_uri),[4,Va(u,this.worker)];case 1:return c=d.sent(),l=this._verifyIdToken(c.id_token,a.nonce,a.organizationId),h=nn(nn({},c),{decodedToken:l,audience:a.audience,scope:a.scope,client_id:this.options.client_id}),this.cache.save(h),this.cookieStorage.save("auth0.is.authenticated",!0,{daysUntilExpire:this.sessionCheckExpiryDays}),[2,{appState:a.appState}]}}))}))},t.prototype.checkSession=function(t){return on(this,void 0,void 0,(function(){var e;return sn(this,(function(n){switch(n.label){case 0:if(!this.cookieStorage.get("auth0.is.authenticated"))return[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.getTokenSilently(t)];case 2:return n.sent(),[3,4];case 3:if(e=n.sent(),!ba.includes(e.error))throw e;return[3,4];case 4:return[2]}}))}))},t.prototype.getTokenSilently=function(t){return void 0===t&&(t={}),on(this,void 0,void 0,(function(){var e,n,r,i=this;return sn(this,(function(o){return e=nn(nn({audience:this.options.audience,ignoreCache:!1},t),{scope:za(this.defaultScope,this.scope,t.scope)}),n=e.ignoreCache,r=rn(e,["ignoreCache"]),[2,(s=function(){return i._getTokenSilently(nn({ignoreCache:n},r))},a=this.options.client_id+"::"+r.audience+"::"+r.scope,u=au[a],u||(u=s().finally((function(){delete au[a],u=null})),au[a]=u),u)];var s,a,u}))}))},t.prototype._getTokenSilently=function(t){return void 0===t&&(t={}),on(this,void 0,void 0,(function(){var e,n,r,i,o,s,a=this;return sn(this,(function(u){switch(u.label){case 0:return e=t.ignoreCache,n=rn(t,["ignoreCache"]),r=function(){var t=a.cache.get(new Ba({scope:n.scope,audience:n.audience||"default",client_id:a.options.client_id}),60);return t&&t.access_token},!e&&(i=r())?[2,i]:[4,(c=function(){return uu.acquireLock("auth0.lock.getTokenSilently",5e3)},l=10,void 0===l&&(l=3),on(void 0,void 0,void 0,(function(){var t;return sn(this,(function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<l?[4,c()]:[3,4];case 2:if(e.sent())return[2,!0];e.label=3;case 3:return t++,[3,1];case 4:return[2,!1]}}))})))];case 1:if(!u.sent())return[3,10];u.label=2;case 2:return u.trys.push([2,,7,9]),!e&&(i=r())?[2,i]:this.options.useRefreshTokens?[4,this._getTokenUsingRefreshToken(n)]:[3,4];case 3:return s=u.sent(),[3,6];case 4:return[4,this._getTokenFromIFrame(n)];case 5:s=u.sent(),u.label=6;case 6:return this.cache.save(nn({client_id:this.options.client_id},o=s)),this.cookieStorage.save("auth0.is.authenticated",!0,{daysUntilExpire:this.sessionCheckExpiryDays}),[2,o.access_token];case 7:return[4,uu.releaseLock("auth0.lock.getTokenSilently")];case 8:return u.sent(),[7];case 9:return[3,11];case 10:throw new Sa;case 11:return[2]}var c,l}))}))},t.prototype.getTokenWithPopup=function(t,e){return void 0===t&&(t={}),void 0===e&&(e={}),on(this,void 0,void 0,(function(){return sn(this,(function(n){switch(n.label){case 0:return t.audience=t.audience||this.options.audience,t.scope=za(this.defaultScope,this.scope,t.scope),e=nn(nn({},va),e),[4,this.loginWithPopup(t,e)];case 1:return n.sent(),[2,this.cache.get(new Ba({scope:t.scope,audience:t.audience||"default",client_id:this.options.client_id})).access_token]}}))}))},t.prototype.isAuthenticated=function(){return on(this,void 0,void 0,(function(){return sn(this,(function(t){switch(t.label){case 0:return[4,this.getUser()];case 1:return[2,!!t.sent()]}}))}))},t.prototype.buildLogoutUrl=function(t){void 0===t&&(t={}),null!==t.client_id?t.client_id=t.client_id||this.options.client_id:delete t.client_id;var e=t.federated,n=rn(t,["federated"]),r=e?"&federated":"";return this._url("/v2/logout?"+Na(n))+r},t.prototype.logout=function(t){void 0===t&&(t={});var e=t.localOnly,n=rn(t,["localOnly"]);if(e&&n.federated)throw new Error("It is invalid to set both the `federated` and `localOnly` options to `true`");if(this.cache.clear(),this.cookieStorage.remove("auth0.is.authenticated"),!e){var r=this.buildLogoutUrl(n);window.location.assign(r)}},t.prototype._getTokenFromIFrame=function(t){return on(this,void 0,void 0,(function(){var e,n,r,i,o,s,a,u,c,l,h,d,f,p,g;return sn(this,(function(m){switch(m.label){case 0:return e=Aa(xa()),n=Aa(xa()),r=xa(),[4,ja(r)];case 1:i=m.sent(),o=Pa(i),s=this._getParams(t,e,n,o,t.redirect_uri||this.options.redirect_uri||window.location.origin),a=this._authorizeUrl(nn(nn({},s),{prompt:"none",response_mode:"web_message"})),u=t.timeoutInSeconds||this.options.authorizeTimeoutInSeconds,m.label=2;case 2:return m.trys.push([2,5,,6]),[4,(y=a,v=this.domainUrl,b=u,void 0===b&&(b=60),new Promise((function(t,e){var n=window.document.createElement("iframe");n.setAttribute("width","0"),n.setAttribute("height","0"),n.style.display="none";var r,i=function(){window.document.body.contains(n)&&(window.document.body.removeChild(n),window.removeEventListener("message",r,!1))},o=setTimeout((function(){e(new Sa),i()}),1e3*b);r=function(n){if(n.origin==v&&n.data&&"authorization_response"===n.data.type){var s=n.source;s&&s.close(),n.data.response.error?e(wa.fromPayload(n.data.response)):t(n.data.response),clearTimeout(o),window.removeEventListener("message",r,!1),setTimeout(i,2e3)}},window.addEventListener("message",r,!1),window.document.body.appendChild(n),n.setAttribute("src",y)})))];case 3:if(c=m.sent(),e!==c.state)throw new Error("Invalid state");return l=t.scope,h=t.audience,d=rn(t,["scope","audience","redirect_uri","ignoreCache","timeoutInSeconds"]),[4,Va(nn(nn(nn({},this.customOptions),d),{scope:l,audience:h,baseUrl:this.domainUrl,client_id:this.options.client_id,code_verifier:r,code:c.code,grant_type:"authorization_code",redirect_uri:s.redirect_uri,auth0Client:this.options.auth0Client}),this.worker)];case 4:return f=m.sent(),p=this._verifyIdToken(f.id_token,n),[2,nn(nn({},f),{decodedToken:p,scope:s.scope,audience:s.audience||"default"})];case 5:throw"login_required"===(g=m.sent()).error&&this.logout({localOnly:!0}),g;case 6:return[2]}var y,v,b}))}))},t.prototype._getTokenUsingRefreshToken=function(t){return on(this,void 0,void 0,(function(){var e,n,r,i,o,s,a,u,c;return sn(this,(function(l){switch(l.label){case 0:return t.scope=za(this.defaultScope,this.options.scope,t.scope),(e=this.cache.get(new Ba({scope:t.scope,audience:t.audience||"default",client_id:this.options.client_id})))&&e.refresh_token||this.worker?[3,2]:[4,this._getTokenFromIFrame(t)];case 1:return[2,l.sent()];case 2:n=t.redirect_uri||this.options.redirect_uri||window.location.origin,i=t.scope,o=t.audience,s=rn(t,["scope","audience","ignoreCache","timeoutInSeconds"]),a="number"==typeof t.timeoutInSeconds?1e3*t.timeoutInSeconds:null,l.label=3;case 3:return l.trys.push([3,5,,8]),[4,Va(nn(nn(nn(nn(nn({},this.customOptions),s),{audience:o,scope:i,baseUrl:this.domainUrl,client_id:this.options.client_id,grant_type:"refresh_token",refresh_token:e&&e.refresh_token,redirect_uri:n}),a&&{timeout:a}),{auth0Client:this.options.auth0Client}),this.worker)];case 4:return r=l.sent(),[3,8];case 5:return"The web worker is missing the refresh token"===(u=l.sent()).message||u.message&&u.message.indexOf("invalid refresh token")>-1?[4,this._getTokenFromIFrame(t)]:[3,7];case 6:return[2,l.sent()];case 7:throw u;case 8:return c=this._verifyIdToken(r.id_token),[2,nn(nn({},r),{decodedToken:c,scope:t.scope,audience:t.audience||"default"})]}}))}))},t}(),du=n("XNiG"),fu=n("9ppp");class pu extends du.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new fu.a;return this._value}next(t){super.next(this._value=t)}}var gu=n("qgXg"),mu=n("quSY"),yu=n("pxpQ"),vu=n("Ylt2");class bu extends du.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new _u(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new fu.a;if(this.isStopped||this.hasError?o=mu.a.EMPTY:(this.observers.push(t),o=new vu.a(this,t)),r&&t.add(t=new yu.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||gu.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class _u{constructor(t,e){this.time=t,this.value=e}}var wu=n("VRyK"),Ou=n("EY2u");function Su(t){return new jt.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(Lt.a)(n):Object(Ou.b)()).subscribe(e)})}var Cu=n("LRne"),Eu=n("z6cu"),Tu=n("7o/Q");function Iu(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new ku(t,e,n))}}class ku{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new xu(t,this.accumulator,this.seed,this.hasSeed))}}class xu extends Tu.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Au(t,e){return function(n){return n.lift(new Nu(t,e))}}class Nu{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new ju(t,this.predicate,this.thisArg))}}class ju extends Tu.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function Ru(t,e){return n=>n.lift(new Pu(t,e))}class Pu{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Du(t,this.compare,this.keySelector))}}class Du extends Tu.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var Lu=n("zx2A");function Mu(t,e){return"function"==typeof e?n=>n.pipe(Mu((n,r)=>Object(Lt.a)(t(n,r)).pipe(Object(Pt.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new Fu(t))}class Fu{constructor(t){this.project=t}call(t,e){return e.subscribe(new Uu(t,this.project))}}class Uu extends Lu.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new Lu.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(Lu.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}var Vu=n("5+tZ");function qu(t,e){return Object(Vu.b)(t,e,1)}function zu(t){return function(e){const n=new Bu(t),r=e.lift(n);return n.caught=r}}class Bu{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Wu(t,this.selector,this.caught))}}class Wu extends Lu.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new Lu.a(this);this.add(r);const i=Object(Lu.c)(n,r);i!==r&&this.add(i)}}}var Hu=n("vkgz");class Ku{constructor(t){this.notifier=t}call(t,e){const n=new Gu(t),r=Object(Lu.c)(this.notifier,new Lu.a(n));return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}class Gu extends Lu.b{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}class Ju extends Tu.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Qu extends Tu.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var $u=n("SeVD");function Yu(t,e,n,r,i=new Qu(t,n,r)){if(!i.closed)return e instanceof jt.a?e.subscribe(i):Object($u.a)(e)(i)}function Xu(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new Zu(t,n))}}class Zu{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new tc(t,this.observables,this.project))}}class tc extends Ju{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(Yu(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const ec=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function nc(t){return e=>0===t?Object(Ou.b)():e.lift(new rc(t))}class rc{constructor(t){if(this.total=t,this.total<0)throw new ec}call(t,e){return e.subscribe(new ic(t,this.total))}}class ic extends Tu.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}const oc=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();function sc(t=null){return e=>e.lift(new ac(t))}class ac{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new uc(t,this.defaultValue))}}class uc extends Tu.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function cc(t=dc){return e=>e.lift(new lc(t))}class lc{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new hc(t,this.errorFactory))}}class hc extends Tu.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(Jx){t=Jx}this.destination.error(t)}}}function dc(){return new oc}var fc=n("SpAZ");function pc(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Au((e,n)=>t(e,n,r)):fc.a,nc(1),n?sc(e):cc(()=>new oc))}var gc=n("FurV"),mc=n("z+Ro"),yc=n("yCtX");const vc={};class bc{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new _c(t,this.resultSelector))}}class _c extends Ju{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(vc),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(Yu(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===vc?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}var wc=n("bHdf");function Oc(){return Object(wc.a)(1)}function Sc(t){return function(e){return 0===t?Object(Ou.b)():e.lift(new Cc(t))}}class Cc{constructor(t){if(this.total=t,this.total<0)throw new ec}call(t,e){return e.subscribe(new Ec(t,this.total))}}class Ec extends Tu.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function Tc(...t){return Oc()(Object(Cu.a)(...t))}function Ic(...t){const e=t[t.length-1];return Object(mc.a)(e)?(t.pop(),n=>Tc(t,n,e)):e=>Tc(t,e)}class kc{constructor(t){this.callback=t}call(t,e){return e.subscribe(new xc(t,this.callback))}}class xc extends Tu.a{constructor(t,e){super(t),this.add(new mu.a(e))}}class Ac{constructor(t,e){this.id=t,this.url=e}}class Nc extends Ac{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class jc extends Ac{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Rc extends Ac{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Pc extends Ac{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Dc extends Ac{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Lc extends Ac{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mc extends Ac{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Fc extends Ac{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Uc extends Ac{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vc{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class qc{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class zc{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bc{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wc{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hc{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Kc{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Gc{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Jc(t){return new Gc(t)}function Qc(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function $c(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Yc(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Xc(t[i],e[i]))return!1;return!0}function Xc(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function Zc(t){return Array.prototype.concat.apply([],t)}function tl(t){return t.length>0?t[t.length-1]:null}function el(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function nl(t){return Object(r.qb)(t)?t:Object(r.rb)(t)?Object(Lt.a)(Promise.resolve(t)):Object(Cu.a)(t)}function rl(t,e,n){return n?function(t,e){return Yc(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!al(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Xc(t[n],e[n]))}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length)return!!al(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!al(n.segments,i))return!1;for(const e in r.children){if(!n.children[e])return!1;if(!t(n.children[e],r.children[e]))return!1}return!0}{const t=i.slice(0,n.segments.length),o=i.slice(n.segments.length);return!!al(n.segments,t)&&!!n.children.primary&&e(n.children.primary,r,o)}}(e,n,n.segments)}(t.root,e.root)}class il{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Jc(this.queryParams)),this._queryParamMap}toString(){return hl.serialize(this)}}class ol{constructor(t,e){this.segments=t,this.children=e,this.parent=null,el(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return dl(this)}}class sl{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Jc(this.parameters)),this._parameterMap}toString(){return vl(this)}}function al(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function ul(t,e){let n=[];return el(t.children,(t,r)=>{"primary"===r&&(n=n.concat(e(t,r)))}),el(t.children,(t,r)=>{"primary"!==r&&(n=n.concat(e(t,r)))}),n}class cl{}class ll{parse(t){const e=new Sl(t);return new il(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`${"/"+function t(e,n){if(!e.hasChildren())return dl(e);if(n){const n=e.children.primary?t(e.children.primary,!1):"",r=[];return el(e.children,(e,n)=>{"primary"!==n&&r.push(`${n}:${t(e,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=ul(e,(n,r)=>"primary"===r?[t(e.children.primary,!1)]:[`${r}:${t(n,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children.primary?`${dl(e)}/${n[0]}`:`${dl(e)}/(${n.join("//")})`}}(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${pl(e)}=${pl(t)}`).join("&"):`${pl(e)}=${pl(n)}`});return e.length?"?"+e.join("&"):""}(t.queryParams)}${"string"==typeof t.fragment?"#"+encodeURI(t.fragment):""}`}}const hl=new ll;function dl(t){return t.segments.map(t=>vl(t)).join("/")}function fl(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function pl(t){return fl(t).replace(/%3B/gi,";")}function gl(t){return fl(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ml(t){return decodeURIComponent(t)}function yl(t){return ml(t.replace(/\+/g,"%20"))}function vl(t){return`${gl(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${gl(t)}=${gl(e[t])}`).join("")}`;var e}const bl=/^[^\/()?;=#]+/;function _l(t){const e=t.match(bl);return e?e[0]:""}const wl=/^[^=?&#]+/,Ol=/^[^?&#]+/;class Sl{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ol([],{}):new ol([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new ol(t,e)),n}parseSegment(){const t=_l(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new sl(ml(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=_l(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=_l(this.remaining);t&&(n=t,this.capture(n))}t[ml(e)]=ml(n)}parseQueryParam(t){const e=function(t){const e=t.match(wl);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Ol);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=yl(e),i=yl(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=_l(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i="primary");const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new ol([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Cl{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=El(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=El(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Tl(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Tl(t,this._root).map(t=>t.value)}}function El(t,e){if(t===e.value)return e;for(const n of e.children){const e=El(t,n);if(e)return e}return null}function Tl(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Tl(t,n);if(r.length)return r.unshift(e),r}return[]}class Il{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function kl(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class xl extends Cl{constructor(t,e){super(t),this.snapshot=e,Dl(this,t)}toString(){return this.snapshot.toString()}}function Al(t,e){const n=function(t,e){const n=new Rl([],{},{},"",{},"primary",e,null,t.root,-1,{});return new Pl("",new Il(n,[]))}(t,e),r=new pu([new sl("",{})]),i=new pu({}),o=new pu({}),s=new pu({}),a=new pu(""),u=new Nl(r,i,s,a,o,"primary",e,n.root);return u.snapshot=n.root,new xl(new Il(u,[]),n)}class Nl{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(Pt.a)(t=>Jc(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(Pt.a)(t=>Jc(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function jl(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Rl{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Jc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Jc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Pl extends Cl{constructor(t,e){super(e),this.url=t,Dl(this,e)}toString(){return Ll(this._root)}}function Dl(t,e){e.value._routerState=t,e.children.forEach(e=>Dl(t,e))}function Ll(t){const e=t.children.length>0?` { ${t.children.map(Ll).join(", ")} } `:"";return`${t.value}${e}`}function Ml(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Yc(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Yc(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Yc(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Yc(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Fl(t,e){return Yc(t.params,e.params)&&function(t,e){return al(t,e)&&t.every((t,n)=>Yc(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Fl(t.parent,e.parent))}function Ul(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Vl(t){return"object"==typeof t&&null!=t&&t.outlets}function ql(t,e,n,r,i){let o={};return r&&el(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>""+t):""+t}),new il(n.root===t?e:function t(e,n,r){const i={};return el(e.children,(e,o)=>{i[o]=e===n?r:t(e,n,r)}),new ol(e.segments,i)}(n.root,t,e),o,i)}class zl{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Ul(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Vl);if(r&&r!==tl(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Bl{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Wl(t,e,n){if(t||(t=new ol([],{})),0===t.segments.length&&t.hasChildren())return Hl(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(Vl(s))break;const a=""+s,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!Ql(a,u,e))return o;r+=2}else{if(!Ql(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new ol(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new ol(t.segments.slice(r.pathIndex),t.children),Hl(e,0,i)}return r.match&&0===i.length?new ol(t.segments,{}):r.match&&!t.hasChildren()?Kl(t,e,n):r.match?Hl(t,0,i):Kl(t,e,n)}function Hl(t,e,n){if(0===n.length)return new ol(t.segments,{});{const r=function(t){return Vl(t[0])?t[0].outlets:{primary:t}}(n),i={};return el(r,(n,r)=>{null!==n&&(i[r]=Wl(t.children[r],e,n))}),el(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new ol(t.segments,i)}}function Kl(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Vl(o)){const t=Gl(o.outlets);return new ol(r,t)}if(0===i&&Ul(n[0])){r.push(new sl(t.segments[e].path,n[0])),i++;continue}const s=Vl(o)?o.outlets.primary:""+o,a=i<n.length-1?n[i+1]:null;s&&a&&Ul(a)?(r.push(new sl(s,Jl(a))),i+=2):(r.push(new sl(s,{})),i++)}return new ol(r,{})}function Gl(t){const e={};return el(t,(t,n)=>{null!==t&&(e[n]=Kl(new ol([],{}),0,t))}),e}function Jl(t){const e={};return el(t,(t,n)=>e[n]=""+t),e}function Ql(t,e,n){return t==n.path&&Yc(e,n.parameters)}class $l{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Ml(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=kl(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),el(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const r=kl(t),i=t.value.component?n.children:e;el(r,(t,e)=>this.deactivateRouteAndItsChildren(t,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const r=kl(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Hc(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Bc(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Ml(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Yl(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Yl(t){Ml(t.value),t.children.forEach(Yl)}class Xl{constructor(t,e){this.routes=t,this.module=e}}function Zl(t){return"function"==typeof t}function th(t){return t instanceof il}const eh=Symbol("INITIAL_VALUE");function nh(){return Mu(t=>function(...t){let e=void 0,n=void 0;return Object(mc.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(Rt.a)(t[0])&&(t=t[0]),Object(yc.a)(t,n).lift(new bc(e))}(...t.map(t=>t.pipe(nc(1),Ic(eh)))).pipe(Iu((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==eh)return t;if(r===eh&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||th(r))return r}return t},t)},eh),Au(t=>t!==eh),Object(Pt.a)(t=>th(t)?t:!0===t),nc(1)))}class rh{constructor(t){this.segmentGroup=t||null}}class ih{constructor(t){this.urlTree=t}}function oh(t){return new jt.a(e=>e.error(new rh(t)))}function sh(t){return new jt.a(e=>e.error(new ih(t)))}function ah(t){return new jt.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class uh{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.x)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(Object(Pt.a)(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(zu(t=>{if(t instanceof ih)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof rh)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,"primary").pipe(Object(Pt.a)(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(zu(t=>{if(t instanceof rh)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new ol([],{primary:t}):t;return new il(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(Pt.a)(t=>new ol([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return Object(Cu.a)({});const n=[],r=[],i={};return el(t,(t,o)=>{const s=e(o,t).pipe(Object(Pt.a)(t=>i[o]=t));"primary"===o?n.push(s):r.push(s)}),Cu.a.apply(null,n.concat(r)).pipe(Oc(),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Au((e,n)=>t(e,n,r)):fc.a,Sc(1),n?sc(e):cc(()=>new oc))}(),Object(Pt.a)(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(t,e,r,n))}expandSegment(t,e,n,r,i,o){return Object(Cu.a)(...n).pipe(qu(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(zu(t=>{if(t instanceof rh)return Object(Cu.a)(null);throw t}))),pc(t=>!!t),zu((t,n)=>{if(t instanceof oc||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,r,i))return Object(Cu.a)(new ol([],{}));throw new rh(e)}throw t}))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return dh(r)!==o?oh(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):oh(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?sh(i):this.lineralizeSegments(n,i).pipe(Object(Vu.b)(n=>{const i=new ol(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=ch(e,r,i);if(!s)return oh(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?sh(l):this.lineralizeSegments(r,l).pipe(Object(Vu.b)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(Pt.a)(t=>(n._loadedConfig=t,new ol(r,{})))):Object(Cu.a)(new ol(r,{}));const{matched:i,consumedSegments:o,lastChild:s}=ch(e,n,r);if(!i)return oh(e);const a=r.slice(s);return this.getChildConfig(t,n,r).pipe(Object(Vu.b)(t=>{const n=t.module,r=t.routes,{segmentGroup:i,slicedSegments:s}=function(t,e,n,r){return n.length>0&&function(t,e,n){return n.some(n=>hh(t,e,n)&&"primary"!==dh(n))}(t,n,r)?{segmentGroup:lh(new ol(e,function(t,e){const n={};n.primary=e;for(const r of t)""===r.path&&"primary"!==dh(r)&&(n[dh(r)]=new ol([],{}));return n}(r,new ol(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some(n=>hh(t,e,n))}(t,n,r)?{segmentGroup:lh(new ol(t.segments,function(t,e,n,r){const i={};for(const o of n)hh(t,e,o)&&!r[dh(o)]&&(i[dh(o)]=new ol([],{}));return Object.assign(Object.assign({},r),i)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,o,a,r);return 0===s.length&&i.hasChildren()?this.expandChildren(n,r,i).pipe(Object(Pt.a)(t=>new ol(o,t))):0===r.length&&0===s.length?Object(Cu.a)(new ol(o,{})):this.expandSegment(n,i,r,s,"primary",!0).pipe(Object(Pt.a)(t=>new ol(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(Cu.a)(new Xl(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(Cu.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(Vu.b)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(Pt.a)(t=>(e._loadedConfig=t,t))):function(t){return new jt.a(e=>e.error(Qc(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(Cu.a)(new Xl([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(Cu.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&Zl(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!Zl(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return nl(o)});return Object(Cu.a)(i).pipe(nh(),Object(Hu.a)(t=>{if(!th(t))return;const e=Qc(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(Pt.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(Cu.a)(n);if(r.numberOfChildren>1||!r.children.primary)return ah(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new il(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return el(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return el(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new ol(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function ch(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(e.matcher||$c)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function lh(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new ol(t.segments.concat(e.segments),e.children)}return t}function hh(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function dh(t){return t.outlet||"primary"}class fh{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class ph{constructor(t,e){this.component=t,this.route=e}}function gh(t,e,n){const r=t._root;return function t(e,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=kl(n);return e.children.forEach(e=>{!function(e,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,a=n?n.value:null,u=r?r.getContext(e.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const c=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!al(t.url,e.url);case"pathParamsOrQueryParamsChange":return!al(t.url,e.url)||!Yc(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Fl(t,e)||!Yc(t.queryParams,e.queryParams);case"paramsChange":default:return!Fl(t,e)}}(a,s,s.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new fh(i)):(s.data=a.data,s._resolvedData=a._resolvedData),t(e,n,s.component?u?u.children:null:r,i,o),c&&u&&u.outlet&&u.outlet.isActivated&&o.canDeactivateChecks.push(new ph(u.outlet.component,a))}else a&&yh(n,u,o),o.canActivateChecks.push(new fh(i)),t(e,null,s.component?u?u.children:null:r,i,o)}(e,s[e.value.outlet],r,i.concat([e.value]),o),delete s[e.value.outlet]}),el(s,(t,e)=>yh(t,r.getContext(e),o)),o}(r,e?e._root:null,n,[r.value])}function mh(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function yh(t,e,n){const r=kl(t),i=t.value;el(r,(t,r)=>{yh(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new ph(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function vh(t,e){return null!==t&&e&&e(new Wc(t)),Object(Cu.a)(!0)}function bh(t,e){return null!==t&&e&&e(new zc(t)),Object(Cu.a)(!0)}function _h(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(Cu.a)(!0);const i=r.map(r=>Su(()=>{const i=mh(r,e,n);let o;if(function(t){return t&&Zl(t.canActivate)}(i))o=nl(i.canActivate(e,t));else{if(!Zl(i))throw new Error("Invalid CanActivate guard");o=nl(i(e,t))}return o.pipe(pc())}));return Object(Cu.a)(i).pipe(nh())}function wh(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Su(()=>{const i=e.guards.map(i=>{const o=mh(i,e.node,n);let s;if(function(t){return t&&Zl(t.canActivateChild)}(o))s=nl(o.canActivateChild(r,t));else{if(!Zl(o))throw new Error("Invalid CanActivateChild guard");s=nl(o(r,t))}return s.pipe(pc())});return Object(Cu.a)(i).pipe(nh())}));return Object(Cu.a)(i).pipe(nh())}class Oh{}class Sh{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){try{const t=Th(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,"primary"),n=new Rl([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Il(n,e),i=new Pl(this.url,r);return this.inheritParamsAndData(i._root),Object(Cu.a)(i)}catch(Jx){return new jt.a(e=>e.error(Jx))}}inheritParamsAndData(t){const e=t.value,n=jl(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=ul(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};t.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),r=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${r}'.`)}e[t.value.outlet]=t.value})}(n),n.sort((t,e)=>"primary"===t.value.outlet?-1:"primary"===e.value.outlet?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,r){for(const i of t)try{return this.processSegmentAgainstRoute(i,e,n,r)}catch(Jx){if(!(Jx instanceof Oh))throw Jx}if(this.noLeftoversInUrl(e,n,r))return[];throw new Oh}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo)throw new Oh;if((t.outlet||"primary")!==r)throw new Oh;let i,o=[],s=[];if("**"===t.path){const o=n.length>0?tl(n).parameters:{};i=new Rl(n,o,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,xh(t),r,t.component,t,Ch(e),Eh(e)+n.length,Ah(t))}else{const a=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new Oh;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(e.matcher||$c)(n,t,e);if(!r)throw new Oh;const i={};el(r.posParams,(t,e)=>{i[e]=t.path});const o=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(e,t,n);o=a.consumedSegments,s=n.slice(a.lastChild),i=new Rl(o,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,xh(t),r,t.component,t,Ch(e),Eh(e)+o.length,Ah(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=Th(e,o,s,a,this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return[new Il(i,t)]}if(0===a.length&&0===c.length)return[new Il(i,[])];const l=this.processSegment(a,u,c,"primary");return[new Il(i,l)]}}function Ch(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Eh(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Th(t,e,n,r,i){if(n.length>0&&function(t,e,n){return n.some(n=>Ih(t,e,n)&&"primary"!==kh(n))}(t,n,r)){const i=new ol(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&"primary"!==kh(o)){const n=new ol([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[kh(o)]=n}return i}(t,e,r,new ol(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Ih(t,e,n))}(t,n,r)){const o=new ol(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(Ih(t,n,a)&&!i[kh(a)]){const n=new ol([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[kh(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new ol(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function Ih(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function kh(t){return t.outlet||"primary"}function xh(t){return t.data||{}}function Ah(t){return t.resolve||{}}function Nh(t){return function(e){return e.pipe(Mu(e=>{const n=t(e);return n?Object(Lt.a)(n).pipe(Object(Pt.a)(()=>e)):Object(Lt.a)([e])}))}}class jh extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}let Rh=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Db({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Kb(0,"router-outlet")},directives:function(){return[Yh]},encapsulation:2}),t})();function Ph(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Dh(r,Lh(e,r))}}function Dh(t,e){if(!t)throw new Error(`\n      Invalid configuration of route '${e}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(t))throw new Error(`Invalid configuration of route '${e}': Array cannot be specified`);if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&"primary"!==t.outlet)throw new Error(`Invalid configuration of route '${e}': a componentless route without children or loadChildren cannot have a named outlet set`);if(t.redirectTo&&t.children)throw new Error(`Invalid configuration of route '${e}': redirectTo and children cannot be used together`);if(t.redirectTo&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': redirectTo and loadChildren cannot be used together`);if(t.children&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': children and loadChildren cannot be used together`);if(t.redirectTo&&t.component)throw new Error(`Invalid configuration of route '${e}': redirectTo and component cannot be used together`);if(t.path&&t.matcher)throw new Error(`Invalid configuration of route '${e}': path and matcher cannot be used together`);if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(`Invalid configuration of route '${e}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===t.path&&void 0===t.matcher)throw new Error(`Invalid configuration of route '${e}': routes must have either a path or a matcher specified`);if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error(`Invalid configuration of route '${e}': path cannot start with a slash`);if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(`Invalid configuration of route '{path: "${e}", redirectTo: "${t.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error(`Invalid configuration of route '${e}': pathMatch can only be set to 'prefix' or 'full'`);t.children&&Ph(t.children,e)}function Lh(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Mh(t){const e=t.children&&t.children.map(Mh),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=Rh),n}const Fh=new r.q("ROUTES");class Uh{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(Pt.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new Xl(Zc(r.injector.get(Fh)).map(Mh),r)}))}loadModuleFactory(t){return"string"==typeof t?Object(Lt.a)(this.loader.load(t)):nl(t()).pipe(Object(Vu.b)(t=>t instanceof r.v?Object(Cu.a)(t):Object(Lt.a)(this.compiler.compileModuleAsync(t))))}}class Vh{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new qh,this.attachRef=null}}class qh{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Vh,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class zh{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Bh(t){throw t}function Wh(t,e,n){return e.parse("/")}function Hh(t,e){return Object(Cu.a)(null)}let Kh=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new du.a,this.errorHandler=Bh,this.malformedUriErrorHandler=Wh,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Hh,afterPreactivation:Hh},this.urlHandlingStrategy=new zh,this.routeReuseStrategy=new jh,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=o.get(r.x),this.console=o.get(r.Y);const c=o.get(r.z);this.isNgZoneEnabled=c instanceof r.z,this.resetConfig(u),this.currentUrlTree=new il(new ol([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Uh(s,a,t=>this.triggerEvent(new Vc(t)),t=>this.triggerEvent(new qc(t))),this.routerState=Al(this.currentUrlTree,this.rootComponentType),this.transitions=new pu({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Au(t=>0!==t.id),Object(Pt.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Mu(t=>{let n=!1,r=!1;return Object(Cu.a)(t).pipe(Object(Hu.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Mu(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(Cu.a)(t).pipe(Mu(t=>{const n=this.transitions.getValue();return e.next(new Nc(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Ou.a:[t]}),Mu(t=>Promise.resolve(t)),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,function(t){return t.pipe(Mu(t=>function(t,e,n,r,i){return new uh(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(Pt.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e})))))}),Object(Hu.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return function(o){return o.pipe(Object(Vu.b)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){return new Sh(t,e,n,r,i,o).recognize()}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(Pt.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(Hu.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),Object(Hu.a)(t=>{const n=new Dc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new Nc(n,this.serializeUrl(r),i,o);e.next(a);const u=Al(r,this.rootComponentType).snapshot;return Object(Cu.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Ou.a}),Nh(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(Hu.a)(t=>{const e=new Lc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(Pt.a)(t=>Object.assign(Object.assign({},t),{guards:gh(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(Object(Vu.b)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(Cu.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(Lt.a)(t).pipe(Object(Vu.b)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(Cu.a)(!0);const s=o.map(o=>{const s=mh(o,e,i);let a;if(function(t){return t&&Zl(t.canDeactivate)}(s))a=nl(s.canDeactivate(t,e,n,r));else{if(!Zl(s))throw new Error("Invalid CanDeactivate guard");a=nl(s(t,e,n,r))}return a.pipe(pc())});return Object(Cu.a)(s).pipe(nh())}(t.component,t.route,n,e,r)),pc(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(Vu.b)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(Lt.a)(e).pipe(qu(e=>Object(Lt.a)([bh(e.route.parent,r),vh(e.route,r),wh(t,e.path,n),_h(t,e.route,n)]).pipe(Oc(),pc(t=>!0!==t,!0))),pc(t=>!0!==t,!0))}(r,o,t,e):Object(Cu.a)(n)),Object(Pt.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(Hu.a)(t=>{if(th(t.guardsResult)){const e=Qc(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),Object(Hu.a)(t=>{const e=new Mc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Au(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Rc(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Nh(t=>{if(t.guards.canActivateChecks.length)return Object(Cu.a)(t).pipe(Object(Hu.a)(t=>{const e=new Fc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Mu(t=>{let n=!1;return Object(Cu.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,function(t){return t.pipe(Object(Vu.b)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(Cu.a)(t);let o=0;return Object(Lt.a)(n).pipe(qu(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(Cu.a)({});const o={};return Object(Lt.a)(i).pipe(Object(Vu.b)(i=>function(t,e,n,r){const i=mh(t,e,r);return nl(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(Hu.a)(t=>{o[i]=t}))),Sc(1),Object(Vu.b)(()=>Object.keys(o).length===i.length?Object(Cu.a)(o):Ou.a))}(t._resolve,t,e,r).pipe(Object(Pt.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),jl(t,n).resolve),null)))}(t.route,e,r,i)),Object(Hu.a)(()=>o++),Sc(1),Object(Vu.b)(e=>o===n.length?Object(Cu.a)(t):Ou.a))}))}),Object(Hu.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new Rc(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(Hu.a)(t=>{const e=new Uc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Nh(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(Pt.a)(t=>{const e=function(t,e,n){const r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){const i=r.value;i._futureSnapshot=n.value;const o=function(e,n,r){return n.children.map(n=>{for(const i of r.children)if(e.shouldReuseRoute(i.value.snapshot,n.value))return t(e,n,i);return t(e,n)})}(e,n,r);return new Il(i,o)}{const r=e.retrieve(n.value);if(r){const t=r.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(let r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,t),t}{const r=new Nl(new pu((i=n.value).url),new pu(i.params),new pu(i.queryParams),new pu(i.fragment),new pu(i.data),i.outlet,i.component,i),o=n.children.map(n=>t(e,n));return new Il(r,o)}}var i}(t,e._root,n?n._root:void 0);return new xl(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(Hu.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object(Pt.a)(t=>(new $l(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object(Hu.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Rc(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new kc(i))),zu(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=th(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Rc(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);return this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Pc(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(o){t.reject(o)}}var i;return Ou.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Ph(t),this.config=t.map(Mh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:i,fragment:o,preserveQueryParams:s,queryParamsHandling:a,preserveFragment:u}=e;Object(r.V)()&&s&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const c=n||this.routerState.root,l=u?this.currentUrlTree.fragment:o;let h=null;if(a)switch(a){case"merge":h=Object.assign(Object.assign({},this.currentUrlTree.queryParams),i);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=i||null}else h=s?this.currentUrlTree.queryParams:i||null;return null!==h&&(h=this.removeEmptyProps(h)),function(t,e,n,r,i){if(0===n.length)return ql(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new zl(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return el(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new zl(n,e,r)}(n);if(o.toRoot())return ql(e.root,new ol([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new Bl(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Bl(t,t===e.root,0)}const r=Ul(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Bl(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?Hl(s.segmentGroup,s.index,o.commands):Wl(s.segmentGroup,s.index,o.commands);return ql(s.segmentGroup,a,e,r,i)}(c,this.currentUrlTree,t,h,l)}navigateByUrl(t,e={skipLocationChange:!1}){Object(r.V)()&&this.isNgZoneEnabled&&!r.z.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=th(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(i,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(Jx){e=this.malformedUriErrorHandler(Jx,this.urlSerializer,t)}return e}isActive(t,e){if(th(t))return rl(this.currentUrlTree,t,e);const n=this.parseUrl(t);return rl(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new jc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(r.N),r.Sb(cl),r.Sb(qh),r.Sb(O),r.Sb(r.r),r.Sb(r.w),r.Sb(r.i),r.Sb(void 0))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),Gh=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new du.a,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){Object(r.V)()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=t}onClick(){const t={skipLocationChange:Qh(this.skipLocationChange),replaceUrl:Qh(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:Qh(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:Qh(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Kh),r.Jb(Nl),r.Tb("tabindex"),r.Jb(r.E),r.Jb(r.l))},t.\u0275dir=r.Eb({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.Vb("click",(function(){return e.onClick()}))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[r.xb]}),t})(),Jh=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new du.a,this.subscription=t.events.subscribe(t=>{t instanceof jc&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){Object(r.V)()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=t}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:Qh(this.skipLocationChange),replaceUrl:Qh(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:Qh(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:Qh(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Kh),r.Jb(Nl),r.Jb(y))},t.\u0275dir=r.Eb({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.Vb("click",(function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)})),2&t&&(r.Rb("href",e.href,r.lc),r.Ab("target",e.target))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[r.xb]}),t})();function Qh(t){return""===t||!!t}let $h=(()=>{class t{constructor(t,e,n,r,i,o){this.router=t,this.element=e,this.renderer=n,this.cdr=r,this.link=i,this.linkWithHref=o,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=t.events.subscribe(t=>{t instanceof jc&&this.update()})}ngAfterContentInit(){Object(Lt.a)([this.links.changes,this.linksWithHrefs.changes,Object(Cu.a)(null)]).pipe(Object(wc.a)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const e=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(t=>!!t).map(t=>t.onChanges);this.linkInputChangesSubscription=Object(Lt.a)(e).pipe(Object(wc.a)()).subscribe(t=>{this.isActive!==this.isLinkActive(this.router)(t)&&this.update()})}set routerLinkActive(t){const e=Array.isArray(t)?t:t.split(" ");this.classes=e.filter(t=>!!t)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(e=>{t?this.renderer.addClass(this.element.nativeElement,e):this.renderer.removeClass(this.element.nativeElement,e)}))})}isLinkActive(t){return e=>t.isActive(e.urlTree,this.routerLinkActiveOptions.exact)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Kh),r.Jb(r.l),r.Jb(r.E),r.Jb(r.h),r.Jb(Gh,8),r.Jb(Jh,8))},t.\u0275dir=r.Eb({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(t,e,n){var i;1&t&&(r.Cb(n,Gh,!0),r.Cb(n,Jh,!0)),2&t&&(r.hc(i=r.Wb())&&(e.links=i),r.hc(i=r.Wb())&&(e.linksWithHrefs=i))},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[r.xb]}),t})(),Yh=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||"primary",t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Xh(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(qh),r.Jb(r.Q),r.Jb(r.j),r.Tb("name"),r.Jb(r.h))},t.\u0275dir=r.Eb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class Xh{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Nl?this.route:t===qh?this.childContexts:this.parent.get(t,e)}}class Zh{}class td{preload(t,e){return Object(Cu.a)(null)}}let ed=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Uh(e,n,e=>t.triggerEvent(new Vc(e)),e=>t.triggerEvent(new qc(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Au(t=>t instanceof jc),qu(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.x);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(Lt.a)(n).pipe(Object(wc.a)(),Object(Pt.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(Object(Vu.b)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(Kh),r.Sb(r.w),r.Sb(r.i),r.Sb(r.r),r.Sb(Zh))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),nd=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Nc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof jc&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Kc&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Kc(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(Kh),r.Sb(X),r.Sb(void 0))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();const rd=new r.q("ROUTER_CONFIGURATION"),id=new r.q("ROUTER_FORROOT_GUARD"),od=[O,{provide:cl,useClass:ll},{provide:Kh,useFactory:function(t,e,n,r,i,o,a,u={},c,l){const h=new Kh(null,t,e,n,r,i,o,Zc(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),u.errorHandler&&(h.errorHandler=u.errorHandler),u.malformedUriErrorHandler&&(h.malformedUriErrorHandler=u.malformedUriErrorHandler),u.enableTracing){const t=s();h.events.subscribe(e=>{t.logGroup("Router Event: "+e.constructor.name),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return u.onSameUrlNavigation&&(h.onSameUrlNavigation=u.onSameUrlNavigation),u.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=u.paramsInheritanceStrategy),u.urlUpdateStrategy&&(h.urlUpdateStrategy=u.urlUpdateStrategy),u.relativeLinkResolution&&(h.relativeLinkResolution=u.relativeLinkResolution),h},deps:[cl,qh,O,r.r,r.w,r.i,Fh,rd,[class{},new r.A],[class{},new r.A]]},qh,{provide:Nl,useFactory:function(t){return t.routerState.root},deps:[Kh]},{provide:r.w,useClass:r.K},ed,td,class{preload(t,e){return e().pipe(zu(()=>Object(Cu.a)(null)))}},{provide:rd,useValue:{enableTracing:!1}}];function sd(){return new r.y("Router",Kh)}let ad=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[od,hd(e),{provide:id,useFactory:ld,deps:[[Kh,new r.A,new r.J]]},{provide:rd,useValue:n||{}},{provide:y,useFactory:cd,deps:[u,[new r.p(b),new r.A],rd]},{provide:nd,useFactory:ud,deps:[Kh,X,rd]},{provide:Zh,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:td},{provide:r.y,multi:!0,useFactory:sd},[dd,{provide:r.d,multi:!0,useFactory:fd,deps:[dd]},{provide:gd,useFactory:pd,deps:[dd]},{provide:r.b,multi:!0,useExisting:gd}]]}}static forChild(e){return{ngModule:t,providers:[hd(e)]}}}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)(r.Sb(id,8),r.Sb(Kh,8))}}),t})();function ud(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new nd(t,e,n)}function cd(t,e,n={}){return n.useHash?new w(t,e):new _(t,e)}function ld(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function hd(t){return[{provide:r.a,multi:!0,useValue:t},{provide:Fh,multi:!0,useValue:t}]}let dd=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new du.a}appInitializer(){return this.injector.get(l,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Kh),r=this.injector.get(rd);if(this.isLegacyDisabled(r)||this.isLegacyEnabled(r))t(!0);else if("disabled"===r.initialNavigation)n.setUpLocationChangeListener(),t(!0);else{if("enabled"!==r.initialNavigation)throw new Error(`Invalid initialNavigation options: '${r.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?Object(Cu.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()}return e})}bootstrapListener(t){const e=this.injector.get(rd),n=this.injector.get(ed),i=this.injector.get(nd),o=this.injector.get(Kh),s=this.injector.get(r.g);t===s.components[0]&&(this.isLegacyEnabled(e)?o.initialNavigation():this.isLegacyDisabled(e)&&o.setUpLocationChangeListener(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}isLegacyDisabled(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(r.r))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();function fd(t){return t.appInitializer.bind(t)}function pd(t){return t.bootstrapListener.bind(t)}const gd=new r.q("Router Initializer");class md{static createClient(t){const e=t.get();if(!e)throw new Error("Configuration must be specified either through AuthModule.forRoot or through AuthClientConfig.set");const{redirectUri:n,clientId:r,maxAge:i}=e,o=Object(gc.f)(e,["redirectUri","clientId","maxAge","httpInterceptor"]);return new hu(Object.assign(Object.assign({redirect_uri:n||window.location.origin,client_id:r,max_age:i},o),{auth0Client:{name:"@auth0/auth0-angular",version:"1.5.0"}}))}}const yd=new r.q("auth0.client");let vd=(()=>{class t{constructor(t,e){this.location=t;try{this.router=e.get(Kh)}catch(n){}}navigateByUrl(t){this.router?this.router.navigateByUrl(t):this.location.replaceState(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(O),r.Sb(r.r))},t.\u0275prov=Object(r.Fb)({factory:function(){return new t(Object(r.Sb)(O),Object(r.Sb)(r.o))},token:t,providedIn:"root"}),t})(),bd=(()=>{class t{constructor(t){t&&this.set(t)}set(t){this.config=t}get(){return this.config}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(_d,8))},t.\u0275prov=Object(r.Fb)({factory:function(){return new t(Object(r.Sb)(_d,8))},token:t,providedIn:"root"}),t})();const _d=new r.q("auth0-angular.config");let wd=(()=>{class t{constructor(t,e,n,r){this.auth0Client=t,this.configFactory=e,this.location=n,this.navigator=r,this.isLoadingSubject$=new pu(!0),this.errorSubject$=new bu(1),this.refreshState$=new du.a,this.accessToken$=new bu(1),this.ngUnsubscribe$=new du.a,this.isLoading$=this.isLoadingSubject$.asObservable(),this.accessTokenTrigger$=this.accessToken$.pipe(Iu((t,e)=>({previous:t.current,current:e}),{current:null,previous:null}),Au(({previous:t,current:e})=>t!==e)),this.isAuthenticatedTrigger$=this.isLoading$.pipe(Au(t=>!t),Ru(),Mu(()=>Object(wu.a)(Su(()=>this.auth0Client.isAuthenticated()),this.accessTokenTrigger$.pipe(Object(Vu.b)(()=>this.auth0Client.isAuthenticated())),this.refreshState$.pipe(Object(Vu.b)(()=>this.auth0Client.isAuthenticated()))))),this.isAuthenticated$=this.isAuthenticatedTrigger$.pipe(Ru()),this.user$=this.isAuthenticatedTrigger$.pipe(qu(t=>t?this.auth0Client.getUser():Object(Cu.a)(null))),this.idTokenClaims$=this.isAuthenticatedTrigger$.pipe(qu(t=>t?this.auth0Client.getIdTokenClaims():Object(Cu.a)(null))),this.error$=this.errorSubject$.asObservable();const i=t=>function(t,e=Ou.a,n=Ou.a){return Su(()=>t()?e:n)}(()=>t,this.handleRedirectCallback(),Su(()=>this.auth0Client.checkSession()));var o;this.shouldHandleCallback().pipe(Mu(t=>i(t).pipe(zu(t=>{const e=this.configFactory.get();return this.errorSubject$.next(t),this.navigator.navigateByUrl(e.errorPath||"/"),Object(Cu.a)(void 0)}))),Object(Hu.a)(()=>{this.isLoadingSubject$.next(!1)}),(o=this.ngUnsubscribe$,t=>t.lift(new Ku(o)))).subscribe()}ngOnDestroy(){this.ngUnsubscribe$.next(),this.ngUnsubscribe$.complete()}loginWithRedirect(t){return Object(Lt.a)(this.auth0Client.loginWithRedirect(t))}loginWithPopup(t,e){return Object(Lt.a)(this.auth0Client.loginWithPopup(t,e).then(()=>{this.refreshState$.next()}))}logout(t){this.auth0Client.logout(t),(null==t?void 0:t.localOnly)&&this.refreshState$.next()}getAccessTokenSilently(t){return Object(Cu.a)(this.auth0Client).pipe(qu(e=>e.getTokenSilently(t)),Object(Hu.a)(t=>this.accessToken$.next(t)),zu(t=>(this.errorSubject$.next(t),this.refreshState$.next(),Object(Eu.a)(t))))}getAccessTokenWithPopup(t){return Object(Cu.a)(this.auth0Client).pipe(qu(e=>e.getTokenWithPopup(t)),Object(Hu.a)(t=>this.accessToken$.next(t)),zu(t=>(this.errorSubject$.next(t),this.refreshState$.next(),Object(Eu.a)(t))))}handleRedirectCallback(t){return Su(()=>this.auth0Client.handleRedirectCallback(t)).pipe(Xu(this.isLoadingSubject$),Object(Hu.a)(([t,e])=>{var n,r;e||this.refreshState$.next();const i=null!==(r=null===(n=null==t?void 0:t.appState)||void 0===n?void 0:n.target)&&void 0!==r?r:"/";this.navigator.navigateByUrl(i)}),Object(Pt.a)(([t])=>t))}buildAuthorizeUrl(t){return Su(()=>this.auth0Client.buildAuthorizeUrl(t))}buildLogoutUrl(t){return Object(Cu.a)(this.auth0Client.buildLogoutUrl(t))}shouldHandleCallback(){return Object(Cu.a)(this.location.path()).pipe(Object(Pt.a)(t=>(t.includes("code=")||t.includes("error="))&&t.includes("state=")&&!this.configFactory.get().skipRedirectCallback))}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(yd),r.Sb(bd),r.Sb(O),r.Sb(vd))},t.\u0275prov=Object(r.Fb)({factory:function(){return new t(Object(r.Sb)(yd),Object(r.Sb)(bd),Object(r.Sb)(O),Object(r.Sb)(vd))},token:t,providedIn:"root"}),t})(),Od=(()=>{class t{constructor(t){this.auth=t}canLoad(t,e){return this.auth.isAuthenticated$.pipe(nc(1))}canActivate(t,e){return this.redirectIfUnauthenticated(e)}canActivateChild(t,e){return this.redirectIfUnauthenticated(e)}redirectIfUnauthenticated(t){return this.auth.isAuthenticated$.pipe(Object(Hu.a)(e=>{e||this.auth.loginWithRedirect({appState:{target:t.url}})}))}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(wd))},t.\u0275prov=Object(r.Fb)({factory:function(){return new t(Object(r.Sb)(wd))},token:t,providedIn:"root"}),t})(),Sd=(()=>{class t{static forRoot(e){return{ngModule:t,providers:[wd,Od,{provide:_d,useValue:e},{provide:yd,useFactory:md.createClient,deps:[bd]}]}}}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)}}),t})();class Cd{}class Ed{}class Td{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Td?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Td;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Td?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Id{encodeKey(t){return kd(t)}encodeValue(t){return kd(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function kd(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class xd{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Id,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new xd({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat([t]),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function Ad(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function Nd(t){return"undefined"!=typeof Blob&&t instanceof Blob}function jd(t){return"undefined"!=typeof FormData&&t instanceof FormData}class Rd{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new Td),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new xd,this.urlWithParams=e}serializeBody(){return null===this.body?null:Ad(this.body)||Nd(this.body)||jd(this.body)||"string"==typeof this.body?this.body:this.body instanceof xd?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||jd(this.body)?null:Nd(this.body)?this.body.type||null:Ad(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof xd?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,u=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new Rd(e,n,i,{params:u,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}var Pd=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class Dd{constructor(t,e=200,n="OK"){this.headers=t.headers||new Td,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class Ld extends Dd{constructor(t={}){super(t),this.type=Pd.ResponseHeader}clone(t={}){return new Ld({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Md extends Dd{constructor(t={}){super(t),this.type=Pd.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Md({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Fd extends Dd{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?"Http failure during parsing for "+(t.url||"(unknown url)"):`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function Ud(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let Vd=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof Rd)r=t;else{let i=void 0;i=n.headers instanceof Td?n.headers:new Td(n.headers);let o=void 0;n.params&&(o=n.params instanceof xd?n.params:new xd({fromObject:n.params})),r=new Rd(t,e,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Object(Cu.a)(r).pipe(qu(t=>this.handler.handle(t)));if(t instanceof Rd||"events"===n.observe)return i;const o=i.pipe(Au(t=>t instanceof Md));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe(Object(Pt.a)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(Object(Pt.a)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(Object(Pt.a)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(Object(Pt.a)(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new xd).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,Ud(n,e))}post(t,e,n={}){return this.request("POST",t,Ud(n,e))}put(t,e,n={}){return this.request("PUT",t,Ud(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(Cd))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();class qd{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const zd=new r.q("HTTP_INTERCEPTORS");let Bd=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();const Wd=/^\)\]\}',?\n/;class Hd{}let Kd=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),Gd=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new jt.a(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new Td(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new Ld({headers:o,status:e,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(Wd,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new Md({body:u,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new Fd({error:u,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const{url:r}=o(),i=new Fd({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(o()),u=!0);let i={type:Pd.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:Pd.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:Pd.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("load",s),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(Hd))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();const Jd=new r.q("XSRF_COOKIE_NAME"),Qd=new r.q("XSRF_HEADER_NAME");class $d{}let Yd=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=P(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(a),r.Sb(r.B),r.Sb(Jd))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),Xd=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Sb($d),r.Sb(Qd))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),Zd=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(zd,[]);this.chain=t.reduceRight((t,e)=>new qd(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(Ed),r.Sb(r.r))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),tf=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:Xd,useClass:Bd}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:Jd,useValue:e.cookieName}:[],e.headerName?{provide:Qd,useValue:e.headerName}:[]]}}}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},providers:[Xd,{provide:zd,useExisting:Xd,multi:!0},{provide:$d,useClass:Yd},{provide:Jd,useValue:"XSRF-TOKEN"},{provide:Qd,useValue:"X-XSRF-TOKEN"}]}),t})(),ef=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},providers:[Vd,{provide:Cd,useClass:Zd},Gd,{provide:Ed,useExisting:Gd},Kd,{provide:Hd,useExisting:Kd}],imports:[[tf.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})();function nf(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(Jx){o(Jx)}}function a(t){try{u(r.throw(t))}catch(Jx){o(Jx)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}var rf=n("D0XW"),of=n("Y7HM");function sf(t){const{index:e,period:n,subscriber:r}=t;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}var af=n("n6bG");n("8Qeq");class uf{constructor(t){this.notifier=t}call(t,e){const n=new cf(t),r=e.subscribe(n);return r.add(Object(Lu.c)(this.notifier,new Lu.a(n))),r}}class cf extends Lu.b{constructor(){super(...arguments),this.hasValue=!1}_next(t){this.value=t,this.hasValue=!0}notifyNext(){this.emitValue()}notifyComplete(){this.emitValue()}emitValue(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))}}function lf(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new bu(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}class hf{constructor(t){this.total=t}call(t,e){return e.subscribe(new df(t,this.total))}}class df extends Tu.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){++this.count>this.total&&this.destination.next(t)}}n("oB13");const ff=["*"];let pf=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Fb({token:t,factory:function(e){return t.\u0275fac(e)}}),t})(),gf=(()=>{let t=class{constructor(t,e){this._loader=t,this._zone=e,this._map=new Promise(t=>{this._mapResolver=t})}createMap(t,e){return this._zone.runOutsideAngular(()=>this._loader.load().then(()=>{const n=new google.maps.Map(t,e);this._mapResolver(n)}))}setMapOptions(t){return this._zone.runOutsideAngular(()=>{this._map.then(e=>{e.setOptions(t)})})}createMarker(t={},e=!0){return this._zone.runOutsideAngular(()=>this._map.then(n=>(e&&(t.map=n),new google.maps.Marker(t))))}createInfoWindow(t){return this._zone.runOutsideAngular(()=>this._map.then(()=>new google.maps.InfoWindow(t)))}createCircle(t){return this._zone.runOutsideAngular(()=>this._map.then(e=>("string"==typeof t.strokePosition&&(t.strokePosition=google.maps.StrokePosition[t.strokePosition]),t.map=e,new google.maps.Circle(t))))}createRectangle(t){return this._zone.runOutsideAngular(()=>this._map.then(e=>(t.map=e,new google.maps.Rectangle(t))))}createPolyline(t){return this._zone.runOutsideAngular(()=>this.getNativeMap().then(e=>{let n=new google.maps.Polyline(t);return n.setMap(e),n}))}createPolygon(t){return this._zone.runOutsideAngular(()=>this.getNativeMap().then(e=>{let n=new google.maps.Polygon(t);return n.setMap(e),n}))}createDataLayer(t){return this._zone.runOutsideAngular(()=>this._map.then(e=>{let n=new google.maps.Data(t);return n.setMap(e),n}))}createTransitLayer(t){return this._zone.runOutsideAngular(()=>this._map.then(e=>{let n=new google.maps.TransitLayer;return n.setMap(t.visible?e:null),n}))}createBicyclingLayer(t){return this._zone.runOutsideAngular(()=>this._map.then(e=>{let n=new google.maps.BicyclingLayer;return n.setMap(t.visible?e:null),n}))}containsLocation(t,e){return google.maps.geometry.poly.containsLocation(t,e)}subscribeToMapEvent(t){return new jt.a(e=>{this._map.then(n=>{n.addListener(t,t=>{this._zone.run(()=>e.next(t))})})})}clearInstanceListeners(){return this._zone.runOutsideAngular(()=>{this._map.then(t=>{google.maps.event.clearInstanceListeners(t)})})}setCenter(t){return this._zone.runOutsideAngular(()=>this._map.then(e=>e.setCenter(t)))}getZoom(){return this._zone.runOutsideAngular(()=>this._map.then(t=>t.getZoom()))}getBounds(){return this._zone.runOutsideAngular(()=>this._map.then(t=>t.getBounds()))}getMapTypeId(){return this._zone.runOutsideAngular(()=>this._map.then(t=>t.getMapTypeId()))}setZoom(t){return this._zone.runOutsideAngular(()=>this._map.then(e=>e.setZoom(t)))}getCenter(){return this._zone.runOutsideAngular(()=>this._map.then(t=>t.getCenter()))}panTo(t){return this._zone.runOutsideAngular(()=>this._map.then(e=>e.panTo(t)))}panBy(t,e){return this._zone.runOutsideAngular(()=>this._map.then(n=>n.panBy(t,e)))}fitBounds(t,e){return this._zone.runOutsideAngular(()=>this._map.then(n=>n.fitBounds(t,e)))}panToBounds(t,e){return this._zone.runOutsideAngular(()=>this._map.then(n=>n.panToBounds(t,e)))}getNativeMap(){return this._map}triggerMapEvent(t){return this._map.then(e=>google.maps.event.trigger(e,t))}};return t.\u0275fac=function(e){return new(e||t)(r.Sb(pf),r.Sb(r.z))},t.\u0275prov=r.Fb({token:t,factory:function(e){return t.\u0275fac(e)}}),t})(),mf=(()=>{let t=class{constructor(t){this._wrapper=t,this._layers=new Map}addTransitLayer(t,e){const n=this._wrapper.createTransitLayer(e);this._layers.set(t,n)}addBicyclingLayer(t,e){const n=this._wrapper.createBicyclingLayer(e);this._layers.set(t,n)}deleteLayer(t){return this._layers.get(t).then(e=>{e.setMap(null),this._layers.delete(t)})}toggleLayerVisibility(t,e){return this._layers.get(t).then(t=>e.visible?this._wrapper.getNativeMap().then(e=>{t.setMap(e)}):void t.setMap(null))}};return t.\u0275fac=function(e){return new(e||t)(r.Sb(gf))},t.\u0275prov=r.Fb({token:t,factory:function(e){return t.\u0275fac(e)}}),t})(),yf=(()=>{let t=class{constructor(t,e){this._apiWrapper=t,this._zone=e,this._circles=new Map}addCircle(t){this._circles.set(t,this._apiWrapper.createCircle({center:{lat:t.latitude,lng:t.longitude},clickable:t.clickable,draggable:t.draggable,editable:t.editable,fillColor:t.fillColor,fillOpacity:t.fillOpacity,radius:t.radius,strokeColor:t.strokeColor,strokeOpacity:t.strokeOpacity,strokePosition:t.strokePosition,strokeWeight:t.strokeWeight,visible:t.visible,zIndex:t.zIndex}))}removeCircle(t){return this._circles.get(t).then(e=>{e.setMap(null),this._circles.delete(t)})}setOptions(t,e){return this._circles.get(t).then(t=>{"string"==typeof e.strokePosition&&(e.strokePosition=google.maps.StrokePosition[e.strokePosition]),t.setOptions(e)})}getBounds(t){return this._circles.get(t).then(t=>t.getBounds())}getCenter(t){return this._circles.get(t).then(t=>t.getCenter())}getRadius(t){return this._circles.get(t).then(t=>t.getRadius())}setCenter(t){return this._circles.get(t).then(e=>e.setCenter({lat:t.latitude,lng:t.longitude}))}setEditable(t){return this._circles.get(t).then(e=>e.setEditable(t.editable))}setDraggable(t){return this._circles.get(t).then(e=>e.setDraggable(t.draggable))}setVisible(t){return this._circles.get(t).then(e=>e.setVisible(t.visible))}setRadius(t){return this._circles.get(t).then(e=>e.setRadius(t.radius))}getNativeCircle(t){return this._circles.get(t)}createEventObservable(t,e){return new jt.a(n=>{let r=null;return this._circles.get(e).then(e=>{r=e.addListener(t,t=>this._zone.run(()=>n.next(t)))}),()=>{null!==r&&r.remove()}})}};return t.\u0275fac=function(e){return new(e||t)(r.Sb(gf),r.Sb(r.z))},t.\u0275prov=r.Fb({token:t,factory:function(e){return t.\u0275fac(e)}}),t})(),vf=(()=>{let t=class{constructor(t,e){this._wrapper=t,this._zone=e,this._layers=new Map}addDataLayer(t){const e=this._wrapper.createDataLayer({style:t.style}).then(e=>(t.geoJson&&this.getDataFeatures(e,t.geoJson).then(t=>e.features=t),e));this._layers.set(t,e)}deleteDataLayer(t){this._layers.get(t).then(e=>{e.setMap(null),this._layers.delete(t)})}updateGeoJson(t,e){this._layers.get(t).then(t=>{t.forEach((function(e){t.remove(e);var n=t.features.indexOf(e,0);n>-1&&t.features.splice(n,1)})),this.getDataFeatures(t,e).then(e=>t.features=e)})}setDataOptions(t,e){this._layers.get(t).then(t=>{t.setControlPosition(e.controlPosition),t.setControls(e.controls),t.setDrawingMode(e.drawingMode),t.setStyle(e.style)})}createEventObservable(t,e){return new jt.a(n=>{this._layers.get(e).then(e=>{e.addListener(t,t=>this._zone.run(()=>n.next(t)))})})}getDataFeatures(t,e){return new Promise((n,r)=>{if("object"==typeof e)try{n(t.addGeoJson(e))}catch(Jx){r(Jx)}else"string"==typeof e?t.loadGeoJson(e,null,n):r("Impossible to extract features from geoJson: wrong argument type")})}};return t.\u0275fac=function(e){return new(e||t)(r.Sb(gf),r.Sb(r.z))},t.\u0275prov=r.Fb({token:t,factory:function(e){return t.\u0275fac(e)}}),t})();class bf{}let _f=(()=>{let t=class{constructor(t){var e;this._boundsChangeSampleTime$=new pu(200),this._includeInBounds$=new pu(new Map),this.bounds$=Object(Lt.a)(t.load()).pipe(Object(Vu.a)(()=>this._includeInBounds$),(e=this._boundsChangeSampleTime$.pipe(Mu(t=>function(t=0,e,n){let r=-1;return Object(of.a)(e)?r=Number(e)<1?1:Number(e):Object(mc.a)(e)&&(n=e),Object(mc.a)(n)||(n=rf.a),new jt.a(e=>{const i=Object(of.a)(t)?t:+t-n.now();return n.schedule(sf,i,{index:0,period:r,subscriber:e})})}(0,t))),t=>t.lift(new uf(e))),Object(Pt.a)(t=>this._generateBounds(t)),lf(1))}_generateBounds(t){const e=new google.maps.LatLngBounds;return t.forEach(t=>e.extend(t)),e}addToBounds(t){const e=this._createIdentifier(t);if(this._includeInBounds$.value.has(e))return;const n=this._includeInBounds$.value;n.set(e,t),this._includeInBounds$.next(n)}removeFromBounds(t){const e=this._includeInBounds$.value;e.delete(this._createIdentifier(t)),this._includeInBounds$.next(e)}changeFitBoundsChangeSampleTime(t){this._boundsChangeSampleTime$.next(t)}getBounds$(){return this.bounds$}_createIdentifier(t){return`${t.lat}+${t.lng}`}};return t.\u0275fac=function(e){return new(e||t)(r.Sb(pf))},t.\u0275prov=r.Fb({token:t,factory:function(e){return t.\u0275fac(e)}}),t})(),wf=(()=>{let t=class{constructor(t,e){this._mapsWrapper=t,this._zone=e,this._markers=new Map}convertAnimation(t){return nf(this,void 0,void 0,(function*(){return null===t?null:this._mapsWrapper.getNativeMap().then(()=>google.maps.Animation[t])}))}deleteMarker(t){const e=this._markers.get(t);return null==e?Promise.resolve():e.then(e=>this._zone.run(()=>{e.setMap(null),this._markers.delete(t)}))}updateMarkerPosition(t){return this._markers.get(t).then(e=>e.setPosition({lat:t.latitude,lng:t.longitude}))}updateTitle(t){return this._markers.get(t).then(e=>e.setTitle(t.title))}updateLabel(t){return this._markers.get(t).then(e=>{e.setLabel(t.label)})}updateDraggable(t){return this._markers.get(t).then(e=>e.setDraggable(t.draggable))}updateIcon(t){return this._markers.get(t).then(e=>e.setIcon(t.iconUrl))}updateOpacity(t){return this._markers.get(t).then(e=>e.setOpacity(t.opacity))}updateVisible(t){return this._markers.get(t).then(e=>e.setVisible(t.visible))}updateZIndex(t){return this._markers.get(t).then(e=>e.setZIndex(t.zIndex))}updateClickable(t){return this._markers.get(t).then(e=>e.setClickable(t.clickable))}updateAnimation(t){return nf(this,void 0,void 0,(function*(){(yield this._markers.get(t)).setAnimation(yield this.convertAnimation(t.animation))}))}addMarker(t){const e=new Promise(e=>nf(this,void 0,void 0,(function*(){return this._mapsWrapper.createMarker({position:{lat:t.latitude,lng:t.longitude},label:t.label,draggable:t.draggable,icon:t.iconUrl,opacity:t.opacity,visible:t.visible,zIndex:t.zIndex,title:t.title,clickable:t.clickable,animation:yield this.convertAnimation(t.animation)}).then(e)})));this._markers.set(t,e)}getNativeMarker(t){return this._markers.get(t)}createEventObservable(t,e){return new jt.a(n=>{this._markers.get(e).then(e=>{e.addListener(t,t=>this._zone.run(()=>n.next(t)))})})}};return t.\u0275fac=function(e){return new(e||t)(r.Sb(gf),r.Sb(r.z))},t.\u0275prov=r.Fb({token:t,factory:function(e){return t.\u0275fac(e)}}),t})(),Of=(()=>{let t=class{constructor(t,e,n){this._mapsWrapper=t,this._zone=e,this._markerManager=n,this._infoWindows=new Map}deleteInfoWindow(t){const e=this._infoWindows.get(t);return null==e?Promise.resolve():e.then(e=>this._zone.run(()=>{e.close(),this._infoWindows.delete(t)}))}setPosition(t){return this._infoWindows.get(t).then(e=>e.setPosition({lat:t.latitude,lng:t.longitude}))}setZIndex(t){return this._infoWindows.get(t).then(e=>e.setZIndex(t.zIndex))}open(t){return this._infoWindows.get(t).then(e=>null!=t.hostMarker?this._markerManager.getNativeMarker(t.hostMarker).then(t=>this._mapsWrapper.getNativeMap().then(n=>e.open(n,t))):this._mapsWrapper.getNativeMap().then(t=>e.open(t)))}close(t){return this._infoWindows.get(t).then(t=>t.close())}setOptions(t,e){return this._infoWindows.get(t).then(t=>t.setOptions(e))}addInfoWindow(t){const e={content:t.content,maxWidth:t.maxWidth,zIndex:t.zIndex,disableAutoPan:t.disableAutoPan};"number"==typeof t.latitude&&"number"==typeof t.longitude&&(e.position={lat:t.latitude,lng:t.longitude});const n=this._mapsWrapper.createInfoWindow(e);this._infoWindows.set(t,n)}createEventObservable(t,e){return new jt.a(n=>{this._infoWindows.get(e).then(e=>{e.addListener(t,t=>this._zone.run(()=>n.next(t)))})})}};return t.\u0275fac=function(e){return new(e||t)(r.Sb(gf),r.Sb(r.z),r.Sb(wf))},t.\u0275prov=r.Fb({token:t,factory:function(e){return t.\u0275fac(e)}}),t})();var Sf;let Cf=0,Ef=(()=>{let t=Sf=class{constructor(t,e){this._infoWindowManager=t,this._el=e,this.isOpen=!1,this.infoWindowClose=new r.n,this._infoWindowAddedToManager=!1,this._id=(Cf++).toString()}ngOnInit(){this.content=this._el.nativeElement.querySelector(".agm-info-window-content"),this._infoWindowManager.addInfoWindow(this),this._infoWindowAddedToManager=!0,this._updateOpenState(),this._registerEventListeners()}ngOnChanges(t){this._infoWindowAddedToManager&&((t.latitude||t.longitude)&&"number"==typeof this.latitude&&"number"==typeof this.longitude&&this._infoWindowManager.setPosition(this),t.zIndex&&this._infoWindowManager.setZIndex(this),t.isOpen&&this._updateOpenState(),this._setInfoWindowOptions(t))}_registerEventListeners(){this._infoWindowManager.createEventObservable("closeclick",this).subscribe(()=>{this.isOpen=!1,this.infoWindowClose.emit()})}_updateOpenState(){this.isOpen?this.open():this.close()}_setInfoWindowOptions(t){let e={};Object.keys(t).filter(t=>-1!==Sf._infoWindowOptionsInputs.indexOf(t)).forEach(n=>{e[n]=t[n].currentValue}),this._infoWindowManager.setOptions(this,e)}open(){return this._infoWindowManager.open(this)}close(){return this._infoWindowManager.close(this).then(()=>{this.infoWindowClose.emit()})}id(){return this._id}toString(){return"AgmInfoWindow-"+this._id.toString()}ngOnDestroy(){this._infoWindowManager.deleteInfoWindow(this)}};return t.\u0275fac=function(e){return new(e||t)(r.Jb(Of),r.Jb(r.l))},t.\u0275cmp=r.Db({type:t,selectors:[["agm-info-window"]],inputs:{isOpen:"isOpen",latitude:"latitude",longitude:"longitude",disableAutoPan:"disableAutoPan",zIndex:"zIndex",maxWidth:"maxWidth"},outputs:{infoWindowClose:"infoWindowClose"},features:[r.xb],ngContentSelectors:ff,decls:2,vars:0,consts:[[1,"agm-info-window-content"]],template:function(t,e){1&t&&(r.cc(),r.Ob(0,"div",0),r.bc(1),r.Nb())},encapsulation:2}),t._infoWindowOptionsInputs=["disableAutoPan","maxWidth"],t})(),Tf=(()=>{let t=class{constructor(t,e){this._wrapper=t,this._zone=e,this._layers=new Map}addKmlLayer(t){const e=this._wrapper.getNativeMap().then(e=>new google.maps.KmlLayer({clickable:t.clickable,map:e,preserveViewport:t.preserveViewport,screenOverlays:t.screenOverlays,suppressInfoWindows:t.suppressInfoWindows,url:t.url,zIndex:t.zIndex}));this._layers.set(t,e)}setOptions(t,e){this._layers.get(t).then(t=>t.setOptions(e))}deleteKmlLayer(t){this._layers.get(t).then(e=>{e.setMap(null),this._layers.delete(t)})}createEventObservable(t,e){return new jt.a(n=>{this._layers.get(e).then(e=>{e.addListener(t,t=>this._zone.run(()=>n.next(t)))})})}};return t.\u0275fac=function(e){return new(e||t)(r.Sb(gf),r.Sb(r.z))},t.\u0275prov=r.Fb({token:t,factory:function(e){return t.\u0275fac(e)}}),t})();function If(t){const e=["insert_at","remove_at","set_at"];return function t(e,n,r){return r?t(e,n).pipe(Object(Pt.a)(t=>Object(Rt.a)(t)?r(...t):r(t))):new jt.a(t=>{const r=(...e)=>t.next(1===e.length?e[0]:e);let i;try{i=e(r)}catch(o){return void t.error(o)}if(Object(af.a)(n))return()=>n(r,i)})}(n=>e.map(e=>t.addListener(e,(r,i)=>n.apply(t,[{newArr:t.getArray(),evName:e,index:r,previous:i}]))),(t,e)=>e.forEach(t=>t.remove()))}let kf=(()=>{let t=class{constructor(t,e){this._mapsWrapper=t,this._zone=e,this._polygons=new Map}addPolygon(t){const e=this._mapsWrapper.createPolygon({clickable:t.clickable,draggable:t.draggable,editable:t.editable,fillColor:t.fillColor,fillOpacity:t.fillOpacity,geodesic:t.geodesic,paths:t.paths,strokeColor:t.strokeColor,strokeOpacity:t.strokeOpacity,strokeWeight:t.strokeWeight,visible:t.visible,zIndex:t.zIndex});this._polygons.set(t,e)}updatePolygon(t){const e=this._polygons.get(t);return null==e?Promise.resolve():e.then(e=>this._zone.run(()=>{e.setPaths(t.paths)}))}setPolygonOptions(t,e){return this._polygons.get(t).then(t=>{t.setOptions(e)})}deletePolygon(t){const e=this._polygons.get(t);return null==e?Promise.resolve():e.then(e=>this._zone.run(()=>{e.setMap(null),this._polygons.delete(t)}))}getPath(t){return this._polygons.get(t).then(t=>t.getPath().getArray())}getPaths(t){return this._polygons.get(t).then(t=>t.getPaths().getArray().map(t=>t.getArray()))}createEventObservable(t,e){return new jt.a(n=>{this._polygons.get(e).then(e=>{e.addListener(t,t=>this._zone.run(()=>n.next(t)))})})}createPathEventObservable(t){return nf(this,void 0,void 0,(function*(){const e=(yield this._polygons.get(t)).getPaths();return If(e).pipe(Ic({newArr:e.getArray()}),Mu(t=>Object(wu.a)(...t.newArr.map((e,n)=>If(e).pipe(Object(Pt.a)(e=>({parentMVEvent:t,chMVCEvent:e,pathIndex:n}))))).pipe(Ic({parentMVEvent:t,chMVCEvent:null,pathIndex:null}))),t=>t.lift(new hf(1)),Object(Pt.a)(({parentMVEvent:t,chMVCEvent:e,pathIndex:n})=>{let r;return e?(r={newArr:t.newArr.map(t=>t.getArray().map(t=>t.toJSON())),pathIndex:n,eventName:e.evName,index:e.index},e.previous&&(r.previous=e.previous)):(r={newArr:t.newArr.map(t=>t.getArray().map(t=>t.toJSON())),eventName:t.evName,index:t.index},t.previous&&(r.previous=t.previous.getArray())),r}))}))}};return t.\u0275fac=function(e){return new(e||t)(r.Sb(gf),r.Sb(r.z))},t.\u0275prov=r.Fb({token:t,factory:function(e){return t.\u0275fac(e)}}),t})();var xf;let Af=(()=>{let t=xf=class{constructor(t,e){this._mapsWrapper=t,this._zone=e,this._polylines=new Map}static _convertPoints(t){return t._getPoints().map(t=>({lat:t.latitude,lng:t.longitude}))}static _convertPath(t){const e=google.maps.SymbolPath[t];return"number"==typeof e?e:t}static _convertIcons(t){const e=t._getIcons().map(t=>({fixedRotation:t.fixedRotation,offset:t.offset,repeat:t.repeat,icon:{anchor:new google.maps.Point(t.anchorX,t.anchorY),fillColor:t.fillColor,fillOpacity:t.fillOpacity,path:xf._convertPath(t.path),rotation:t.rotation,scale:t.scale,strokeColor:t.strokeColor,strokeOpacity:t.strokeOpacity,strokeWeight:t.strokeWeight}}));return e.forEach(t=>{Object.entries(t).forEach(([e,n])=>{void 0===n&&delete t[e]}),void 0!==t.icon.anchor.x&&void 0!==t.icon.anchor.y||delete t.icon.anchor}),e}addPolyline(t){const e=this._mapsWrapper.getNativeMap().then(()=>[xf._convertPoints(t),xf._convertIcons(t)]).then(([e,n])=>this._mapsWrapper.createPolyline({clickable:t.clickable,draggable:t.draggable,editable:t.editable,geodesic:t.geodesic,strokeColor:t.strokeColor,strokeOpacity:t.strokeOpacity,strokeWeight:t.strokeWeight,visible:t.visible,zIndex:t.zIndex,path:e,icons:n}));this._polylines.set(t,e)}updatePolylinePoints(t){const e=xf._convertPoints(t),n=this._polylines.get(t);return null==n?Promise.resolve():n.then(t=>this._zone.run(()=>{t.setPath(e)}))}updateIconSequences(t){return nf(this,void 0,void 0,(function*(){yield this._mapsWrapper.getNativeMap();const e=xf._convertIcons(t),n=this._polylines.get(t);if(null!=n)return n.then(t=>this._zone.run(()=>t.setOptions({icons:e})))}))}setPolylineOptions(t,e){return this._polylines.get(t).then(t=>{t.setOptions(e)})}deletePolyline(t){const e=this._polylines.get(t);return null==e?Promise.resolve():e.then(e=>this._zone.run(()=>{e.setMap(null),this._polylines.delete(t)}))}getMVCPath(t){return nf(this,void 0,void 0,(function*(){return(yield this._polylines.get(t)).getPath()}))}getPath(t){return nf(this,void 0,void 0,(function*(){return(yield this.getMVCPath(t)).getArray()}))}createEventObservable(t,e){return new jt.a(n=>{this._polylines.get(e).then(e=>{e.addListener(t,t=>this._zone.run(()=>n.next(t)))})})}createPathEventObservable(t){return nf(this,void 0,void 0,(function*(){return If(yield this.getMVCPath(t))}))}};return t.\u0275fac=function(e){return new(e||t)(r.Sb(gf),r.Sb(r.z))},t.\u0275prov=r.Fb({token:t,factory:function(e){return t.\u0275fac(e)}}),t})(),Nf=(()=>{let t=class{constructor(t,e){this._apiWrapper=t,this._zone=e,this._rectangles=new Map}addRectangle(t){this._rectangles.set(t,this._apiWrapper.createRectangle({bounds:{north:t.north,east:t.east,south:t.south,west:t.west},clickable:t.clickable,draggable:t.draggable,editable:t.editable,fillColor:t.fillColor,fillOpacity:t.fillOpacity,strokeColor:t.strokeColor,strokeOpacity:t.strokeOpacity,strokePosition:t.strokePosition,strokeWeight:t.strokeWeight,visible:t.visible,zIndex:t.zIndex}))}removeRectangle(t){return this._rectangles.get(t).then(e=>{e.setMap(null),this._rectangles.delete(t)})}setOptions(t,e){return this._rectangles.get(t).then(t=>t.setOptions(e))}getBounds(t){return this._rectangles.get(t).then(t=>t.getBounds())}setBounds(t){return this._rectangles.get(t).then(e=>e.setBounds({north:t.north,east:t.east,south:t.south,west:t.west}))}setEditable(t){return this._rectangles.get(t).then(e=>e.setEditable(t.editable))}setDraggable(t){return this._rectangles.get(t).then(e=>e.setDraggable(t.draggable))}setVisible(t){return this._rectangles.get(t).then(e=>e.setVisible(t.visible))}createEventObservable(t,e){return jt.a.create(n=>{let r=null;return this._rectangles.get(e).then(e=>{r=e.addListener(t,t=>this._zone.run(()=>n.next(t)))}),()=>{null!==r&&r.remove()}})}};return t.\u0275fac=function(e){return new(e||t)(r.Sb(gf),r.Sb(r.z))},t.\u0275prov=r.Fb({token:t,factory:function(e){return t.\u0275fac(e)}}),t})();var jf;let Rf=(()=>{let t=jf=class{constructor(t,e,n,i,o){this._elem=t,this._mapsWrapper=e,this._platformId=n,this._fitBoundsService=i,this._zone=o,this.longitude=0,this.latitude=0,this.zoom=8,this.draggable=!0,this.disableDoubleClickZoom=!1,this.disableDefaultUI=!1,this.scrollwheel=!0,this.keyboardShortcuts=!0,this.styles=[],this.usePanning=!1,this.fitBounds=!1,this.scaleControl=!1,this.mapTypeControl=!1,this.panControl=!1,this.rotateControl=!1,this.fullscreenControl=!1,this.mapTypeId="roadmap",this.clickableIcons=!0,this.showDefaultInfoWindow=!0,this.gestureHandling="auto",this.tilt=0,this._observableSubscriptions=[],this.mapClick=new r.n,this.mapRightClick=new r.n,this.mapDblClick=new r.n,this.centerChange=new r.n,this.boundsChange=new r.n,this.mapTypeIdChange=new r.n,this.idle=new r.n,this.zoomChange=new r.n,this.mapReady=new r.n,this.tilesLoaded=new r.n}ngOnInit(){if(Y(this._platformId))return;const t=this._elem.nativeElement.querySelector(".agm-map-container-inner");this._initMapInstance(t)}_initMapInstance(t){this._mapsWrapper.createMap(t,{center:{lat:this.latitude||0,lng:this.longitude||0},zoom:this.zoom,minZoom:this.minZoom,maxZoom:this.maxZoom,controlSize:this.controlSize,disableDefaultUI:this.disableDefaultUI,disableDoubleClickZoom:this.disableDoubleClickZoom,scrollwheel:this.scrollwheel,backgroundColor:this.backgroundColor,draggable:this.draggable,draggableCursor:this.draggableCursor,draggingCursor:this.draggingCursor,keyboardShortcuts:this.keyboardShortcuts,styles:this.styles,zoomControl:this.zoomControl,zoomControlOptions:this.zoomControlOptions,streetViewControl:this.streetViewControl,streetViewControlOptions:this.streetViewControlOptions,scaleControl:this.scaleControl,scaleControlOptions:this.scaleControlOptions,mapTypeControl:this.mapTypeControl,mapTypeControlOptions:this.mapTypeControlOptions,panControl:this.panControl,panControlOptions:this.panControlOptions,rotateControl:this.rotateControl,rotateControlOptions:this.rotateControlOptions,fullscreenControl:this.fullscreenControl,fullscreenControlOptions:this.fullscreenControlOptions,mapTypeId:this.mapTypeId,clickableIcons:this.clickableIcons,gestureHandling:this.gestureHandling,tilt:this.tilt,restriction:this.restriction}).then(()=>this._mapsWrapper.getNativeMap()).then(t=>this.mapReady.emit(t)),this._handleMapCenterChange(),this._handleMapZoomChange(),this._handleMapMouseEvents(),this._handleBoundsChange(),this._handleMapTypeIdChange(),this._handleTilesLoadedEvent(),this._handleIdleEvent()}ngOnDestroy(){this._observableSubscriptions.forEach(t=>t.unsubscribe()),this._mapsWrapper.clearInstanceListeners(),this._fitBoundsSubscription&&this._fitBoundsSubscription.unsubscribe()}ngOnChanges(t){this._updateMapOptionsChanges(t),this._updatePosition(t)}_updateMapOptionsChanges(t){let e={};Object.keys(t).filter(t=>-1!==jf._mapOptionsAttributes.indexOf(t)).forEach(n=>{e[n]=t[n].currentValue}),this._mapsWrapper.setMapOptions(e)}triggerResize(t=!0){return new Promise(e=>{setTimeout(()=>this._mapsWrapper.triggerMapEvent("resize").then(()=>{t&&(null!=this.fitBounds?this._fitBounds():this._setCenter()),e()}))})}_updatePosition(t){(null!=t.latitude||null!=t.longitude||t.fitBounds)&&("fitBounds"in t?this._fitBounds():"number"==typeof this.latitude&&"number"==typeof this.longitude&&this._setCenter())}_setCenter(){let t={lat:this.latitude,lng:this.longitude};this.usePanning?this._mapsWrapper.panTo(t):this._mapsWrapper.setCenter(t)}_fitBounds(){switch(this.fitBounds){case!0:this._subscribeToFitBoundsUpdates();break;case!1:this._fitBoundsSubscription&&this._fitBoundsSubscription.unsubscribe();break;default:this._updateBounds(this.fitBounds,this.fitBoundsPadding)}}_subscribeToFitBoundsUpdates(){this._zone.runOutsideAngular(()=>{this._fitBoundsSubscription=this._fitBoundsService.getBounds$().subscribe(t=>{this._zone.run(()=>this._updateBounds(t,this.fitBoundsPadding))})})}_updateBounds(t,e){if(t){if(this._isLatLngBoundsLiteral(t)&&"undefined"!=typeof google&&google&&google.maps&&google.maps.LatLngBounds){const e=new google.maps.LatLngBounds;e.union(t),t=e}this.usePanning?this._mapsWrapper.panToBounds(t,e):this._mapsWrapper.fitBounds(t,e)}}_isLatLngBoundsLiteral(t){return null!=t&&void 0===t.extend}_handleMapCenterChange(){const t=this._mapsWrapper.subscribeToMapEvent("center_changed").subscribe(()=>{this._mapsWrapper.getCenter().then(t=>{this.latitude=t.lat(),this.longitude=t.lng(),this.centerChange.emit({lat:this.latitude,lng:this.longitude})})});this._observableSubscriptions.push(t)}_handleBoundsChange(){const t=this._mapsWrapper.subscribeToMapEvent("bounds_changed").subscribe(()=>{this._mapsWrapper.getBounds().then(t=>{this.boundsChange.emit(t)})});this._observableSubscriptions.push(t)}_handleMapTypeIdChange(){const t=this._mapsWrapper.subscribeToMapEvent("maptypeid_changed").subscribe(()=>{this._mapsWrapper.getMapTypeId().then(t=>{this.mapTypeIdChange.emit(t)})});this._observableSubscriptions.push(t)}_handleMapZoomChange(){const t=this._mapsWrapper.subscribeToMapEvent("zoom_changed").subscribe(()=>{this._mapsWrapper.getZoom().then(t=>{this.zoom=t,this.zoomChange.emit(t)})});this._observableSubscriptions.push(t)}_handleIdleEvent(){const t=this._mapsWrapper.subscribeToMapEvent("idle").subscribe(()=>{this.idle.emit(void 0)});this._observableSubscriptions.push(t)}_handleTilesLoadedEvent(){const t=this._mapsWrapper.subscribeToMapEvent("tilesloaded").subscribe(()=>this.tilesLoaded.emit(void 0));this._observableSubscriptions.push(t)}_handleMapMouseEvents(){[{name:"click",emitter:this.mapClick},{name:"rightclick",emitter:this.mapRightClick},{name:"dblclick",emitter:this.mapDblClick}].forEach(t=>{const e=this._mapsWrapper.subscribeToMapEvent(t.name).subscribe(e=>{let n={coords:{lat:e.latLng.lat(),lng:e.latLng.lng()},placeId:e.placeId};n.placeId&&!this.showDefaultInfoWindow&&e.stop(),t.emitter.emit(n)});this._observableSubscriptions.push(e)})}};return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.l),r.Jb(gf),r.Jb(r.B),r.Jb(_f),r.Jb(r.z))},t.\u0275cmp=r.Db({type:t,selectors:[["agm-map"]],hostVars:2,hostBindings:function(t,e){2&t&&r.Bb("sebm-google-map-container",!0)},inputs:{longitude:"longitude",latitude:"latitude",zoom:"zoom",draggable:["mapDraggable","draggable"],disableDoubleClickZoom:"disableDoubleClickZoom",disableDefaultUI:"disableDefaultUI",scrollwheel:"scrollwheel",keyboardShortcuts:"keyboardShortcuts",styles:"styles",usePanning:"usePanning",fitBounds:"fitBounds",scaleControl:"scaleControl",mapTypeControl:"mapTypeControl",panControl:"panControl",rotateControl:"rotateControl",fullscreenControl:"fullscreenControl",mapTypeId:"mapTypeId",clickableIcons:"clickableIcons",showDefaultInfoWindow:"showDefaultInfoWindow",gestureHandling:"gestureHandling",tilt:"tilt",minZoom:"minZoom",maxZoom:"maxZoom",controlSize:"controlSize",backgroundColor:"backgroundColor",draggableCursor:"draggableCursor",draggingCursor:"draggingCursor",zoomControl:"zoomControl",zoomControlOptions:"zoomControlOptions",streetViewControl:"streetViewControl",streetViewControlOptions:"streetViewControlOptions",fitBoundsPadding:"fitBoundsPadding",scaleControlOptions:"scaleControlOptions",mapTypeControlOptions:"mapTypeControlOptions",panControlOptions:"panControlOptions",rotateControlOptions:"rotateControlOptions",fullscreenControlOptions:"fullscreenControlOptions",restriction:"restriction"},outputs:{mapClick:"mapClick",mapRightClick:"mapRightClick",mapDblClick:"mapDblClick",centerChange:"centerChange",boundsChange:"boundsChange",mapTypeIdChange:"mapTypeIdChange",idle:"idle",zoomChange:"zoomChange",mapReady:"mapReady",tilesLoaded:"tilesLoaded"},features:[r.yb([yf,vf,vf,_f,gf,Of,Tf,mf,wf,kf,Af,Nf]),r.xb],ngContentSelectors:ff,decls:3,vars:0,consts:[[1,"agm-map-container-inner","sebm-google-map-container-inner"],[1,"agm-map-content"]],template:function(t,e){1&t&&(r.cc(),r.Kb(0,"div",0),r.Ob(1,"div",1),r.bc(2),r.Nb())},styles:[".agm-map-container-inner[_ngcontent-%COMP%] {\n      width: inherit;\n      height: inherit;\n    }\n    .agm-map-content[_ngcontent-%COMP%] {\n      display:none;\n    }"]}),t._mapOptionsAttributes=["disableDoubleClickZoom","scrollwheel","draggable","draggableCursor","draggingCursor","keyboardShortcuts","zoomControl","zoomControlOptions","styles","streetViewControl","streetViewControlOptions","zoom","mapTypeControl","mapTypeControlOptions","minZoom","maxZoom","panControl","panControlOptions","rotateControl","rotateControlOptions","fullscreenControl","fullscreenControlOptions","scaleControl","scaleControlOptions","mapTypeId","clickableIcons","gestureHandling","tilt","restriction"],t})();var Pf;let Df=0,Lf=(()=>{let t=Pf=class{constructor(t){this._markerManager=t,this.draggable=!1,this.visible=!0,this.openInfoWindow=!0,this.opacity=1,this.zIndex=1,this.clickable=!0,this.animationChange=new r.n,this.markerClick=new r.n,this.markerDblClick=new r.n,this.markerRightClick=new r.n,this.dragStart=new r.n,this.drag=new r.n,this.dragEnd=new r.n,this.mouseOver=new r.n,this.mouseOut=new r.n,this.infoWindow=new r.D,this._markerAddedToManger=!1,this._observableSubscriptions=[],this._fitBoundsDetails$=new bu(1),this._id=(Df++).toString()}ngAfterContentInit(){this.handleInfoWindowUpdate(),this.infoWindow.changes.subscribe(()=>this.handleInfoWindowUpdate())}handleInfoWindowUpdate(){if(this.infoWindow.length>1)throw new Error("Expected no more than one info window.");this.infoWindow.forEach(t=>{t.hostMarker=this})}ngOnChanges(t){if("string"==typeof this.latitude&&(this.latitude=Number(this.latitude)),"string"==typeof this.longitude&&(this.longitude=Number(this.longitude)),"number"==typeof this.latitude&&"number"==typeof this.longitude){if(!this._markerAddedToManger)return this._markerManager.addMarker(this),this._updateFitBoundsDetails(),this._markerAddedToManger=!0,void this._addEventListeners();(t.latitude||t.longitude)&&(this._markerManager.updateMarkerPosition(this),this._updateFitBoundsDetails()),t.title&&this._markerManager.updateTitle(this),t.label&&this._markerManager.updateLabel(this),t.draggable&&this._markerManager.updateDraggable(this),t.iconUrl&&this._markerManager.updateIcon(this),t.opacity&&this._markerManager.updateOpacity(this),t.visible&&this._markerManager.updateVisible(this),t.zIndex&&this._markerManager.updateZIndex(this),t.clickable&&this._markerManager.updateClickable(this),t.animation&&this._markerManager.updateAnimation(this)}}getFitBoundsDetails$(){return this._fitBoundsDetails$.asObservable()}_updateFitBoundsDetails(){this._fitBoundsDetails$.next({latLng:{lat:this.latitude,lng:this.longitude}})}_addEventListeners(){const t=this._markerManager.createEventObservable("click",this).subscribe(()=>{this.openInfoWindow&&this.infoWindow.forEach(t=>t.open()),this.markerClick.emit(this)});this._observableSubscriptions.push(t);const e=this._markerManager.createEventObservable("dblclick",this).subscribe(()=>{this.markerDblClick.emit(null)});this._observableSubscriptions.push(e);const n=this._markerManager.createEventObservable("rightclick",this).subscribe(()=>{this.markerRightClick.emit(null)});this._observableSubscriptions.push(n);const r=this._markerManager.createEventObservable("dragstart",this).subscribe(t=>{this.dragStart.emit({coords:{lat:t.latLng.lat(),lng:t.latLng.lng()}})});this._observableSubscriptions.push(r);const i=this._markerManager.createEventObservable("drag",this).subscribe(t=>{this.drag.emit({coords:{lat:t.latLng.lat(),lng:t.latLng.lng()}})});this._observableSubscriptions.push(i);const o=this._markerManager.createEventObservable("dragend",this).subscribe(t=>{this.dragEnd.emit({coords:{lat:t.latLng.lat(),lng:t.latLng.lng()}})});this._observableSubscriptions.push(o);const s=this._markerManager.createEventObservable("mouseover",this).subscribe(t=>{this.mouseOver.emit({coords:{lat:t.latLng.lat(),lng:t.latLng.lng()}})});this._observableSubscriptions.push(s);const a=this._markerManager.createEventObservable("mouseout",this).subscribe(t=>{this.mouseOut.emit({coords:{lat:t.latLng.lat(),lng:t.latLng.lng()}})});this._observableSubscriptions.push(a);const u=this._markerManager.createEventObservable("animation_changed",this).subscribe(()=>{this.animationChange.emit(this.animation)});this._observableSubscriptions.push(u)}id(){return this._id}toString(){return"AgmMarker-"+this._id.toString()}ngOnDestroy(){this._markerManager.deleteMarker(this),this._observableSubscriptions.forEach(t=>t.unsubscribe())}};return t.\u0275fac=function(e){return new(e||t)(r.Jb(wf))},t.\u0275dir=r.Eb({type:t,selectors:[["agm-marker"]],contentQueries:function(t,e,n){var i;1&t&&r.Cb(n,Ef,!1),2&t&&r.hc(i=r.Wb())&&(e.infoWindow=i)},inputs:{latitude:"latitude",longitude:"longitude",title:"title",label:"label",draggable:["markerDraggable","draggable"],iconUrl:"iconUrl",openInfoWindow:"openInfoWindow",opacity:"opacity",visible:"visible",zIndex:"zIndex",animation:"animation",clickable:["markerClickable","clickable"]},outputs:{markerClick:"markerClick",dragStart:"dragStart",drag:"drag",dragEnd:"dragEnd",mouseOver:"mouseOver",mouseOut:"mouseOut",animationChange:"animationChange",markerDblClick:"markerDblClick",markerRightClick:"markerRightClick"},features:[r.yb([{provide:bf,useExisting:Object(r.U)(()=>Pf)}]),r.xb]}),t})();class Mf{getNativeWindow(){return window}}class Ff{getNativeDocument(){return document}}const Uf=[Mf,Ff];var Vf=function(t){return t[t.HTTP=1]="HTTP",t[t.HTTPS=2]="HTTPS",t[t.AUTO=3]="AUTO",t}({});const qf=new r.q("angular-google-maps LAZY_MAPS_API_CONFIG");let zf=(()=>{let t=class extends pf{constructor(t=null,e,n,r){super(),this.localeId=r,this._SCRIPT_ID="agmGoogleMapsApiScript",this.callbackName="agmLazyMapsAPILoader",this._config=t||{},this._windowRef=e,this._documentRef=n}load(){const t=this._windowRef.getNativeWindow();if(t.google&&t.google.maps)return Promise.resolve();if(this._scriptLoadingPromise)return this._scriptLoadingPromise;const e=this._documentRef.getNativeDocument().getElementById(this._SCRIPT_ID);if(e)return this._assignScriptLoadingPromise(e),this._scriptLoadingPromise;const n=this._documentRef.getNativeDocument().createElement("script");return n.type="text/javascript",n.async=!0,n.defer=!0,n.id=this._SCRIPT_ID,n.src=this._getScriptSrc(this.callbackName),this._assignScriptLoadingPromise(n),this._documentRef.getNativeDocument().body.appendChild(n),this._scriptLoadingPromise}_assignScriptLoadingPromise(t){this._scriptLoadingPromise=new Promise((e,n)=>{this._windowRef.getNativeWindow()[this.callbackName]=()=>{e()},t.onerror=t=>{n(t)}})}_getScriptSrc(t){let e;switch(this._config&&this._config.protocol||Vf.HTTPS){case Vf.AUTO:e="";break;case Vf.HTTP:e="http:";break;case Vf.HTTPS:e="https:"}const n={v:this._config.apiVersion||"quarterly",callback:t,key:this._config.apiKey,client:this._config.clientId,channel:this._config.channel,libraries:this._config.libraries,region:this._config.region,language:this._config.language||"en-US"!==this.localeId?this.localeId:null};return`${e}//${this._config.hostAndPath||"maps.googleapis.com/maps/api/js"}?${Object.keys(n).filter(t=>null!=n[t]).filter(t=>!Array.isArray(n[t])||Array.isArray(n[t])&&n[t].length>0).map(t=>{let e=n[t];return Array.isArray(e)?{key:t,value:e.join(",")}:{key:t,value:n[t]}}).map(t=>`${t.key}=${t.value}`).join("&")}`}};return t.\u0275fac=function(e){return new(e||t)(r.Sb(qf,8),r.Sb(Mf),r.Sb(Ff),r.Sb(r.u))},t.\u0275prov=r.Fb({token:t,factory:function(e){return t.\u0275fac(e)}}),t})();var Bf;let Wf=(()=>{let t=Bf=class{static forRoot(t){return{ngModule:Bf,providers:[...Uf,{provide:pf,useClass:zf},{provide:qf,useValue:t}]}}};return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)}}),t})();var Hf=n("spgP"),Kf=n("w1tV");class Gf{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new Jf(t,this.predicate))}}class Jf extends Tu.a{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}function Qf(t,e){return e?Mu(()=>t,e):Mu(()=>t)}n("6Uf2");var $f=n("tf+s");const Yf=new r.q("angularfire2.auth.use-emulator"),Xf=new r.q("angularfire2.auth.settings"),Zf=new r.q("angularfire2.auth.tenant-id"),tp=new r.q("angularfire2.auth.langugage-code"),ep=new r.q("angularfire2.auth.use-device-language"),np=new r.q("angularfire.auth.persistence");let rp=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new Hf.d(i),d=Object(Hf.h)(h),f=new du.a,p=Object(Cu.a)(void 0).pipe(Object(yu.b)(h.outsideAngular),Mu(()=>i.runOutsideAngular(()=>n.e(5).then(n.bind(null,"6nsN")))),Object(Pt.a)(()=>Object(Hf.g)(t,i,e)),Object(Pt.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(Hf.f)(t.name+".auth","AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());if(e&&r.useEmulator("http://"+e.join(":")),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n)for(const[t,e]of Object.entries(n))r.settings[t]=e;return l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),lf({bufferSize:1,refCount:!1}));if(Y(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(Cu.a)(null);else{p.pipe(pc()).subscribe();const t=p.pipe(Mu(t=>t.getRedirectResult().then(t=>t,()=>null)),d,lf({bufferSize:1,refCount:!1})),e=t=>new jt.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(Mu(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(Mu(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(Qf(n),Object($f.a)(h.outsideAngular),Object(yu.b)(h.insideAngular)),this.user=t.pipe(Qf(r),Object($f.a)(h.outsideAngular),Object(yu.b)(h.insideAngular)),this.idToken=this.user.pipe(Mu(t=>t?Object(Lt.a)(t.getIdToken()):Object(Cu.a)(null))),this.idTokenResult=this.user.pipe(Mu(t=>t?Object(Lt.a)(t.getIdTokenResult()):Object(Cu.a)(null))),this.credential=Object(wu.a)(t,f,this.authState.pipe(Au(t=>!t))).pipe(Object(Pt.a)(t=>(null==t?void 0:t.user)?t:null),Object($f.a)(h.outsideAngular),Object(yu.b)(h.insideAngular))}return Object(Hf.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>f.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(Hf.c),r.Sb(Hf.b,8),r.Sb(r.B),r.Sb(r.z),r.Sb(Yf,8),r.Sb(Xf,8),r.Sb(Zf,8),r.Sb(tp,8),r.Sb(ep,8),r.Sb(np,8))},t.\u0275prov=r.Fb({factory:function(){return new t(r.Sb(Hf.c),r.Sb(Hf.b,8),r.Sb(r.B),r.Sb(r.z),r.Sb(Yf,8),r.Sb(Xf,8),r.Sb(Zf,8),r.Sb(tp,8),r.Sb(ep,8),r.Sb(np,8))},token:t,providedIn:"any"}),t})(),ip=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},providers:[rp]}),t})();var op=n("Jgta");function sp(t){return null==t}function ap(t){return"function"==typeof t.set}function up(t,e){return ap(e)?e:t.ref(e)}function cp(t,e){if("string"==typeof t)return e.stringCase();if(ap(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function lp(t,e,n="on",r=rf.b){return new jt.a(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(Object(Pt.a)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),Object(Kf.a)())}function hp(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function dp(t,e){const{payload:n,prevKey:r,key:i}=e,o=hp(t,i),s=function(t,e){if(sp(e))return 0;{const n=hp(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function fp(t){return(sp(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function pp(t,e,n){return function(t,e,n){return lp(t,"value","once",n).pipe(Mu(r=>{const i=[Object(Cu.a)(r)];return e.forEach(e=>i.push(lp(t,e,"on",n))),Object(wu.a)(...i).pipe(Iu(dp,[]))}),Ru())}(t,e=fp(e),n)}function gp(t,e,n){const r=(e=fp(e)).map(e=>lp(t,e,"on",n));return Object(wu.a)(...r)}function mp(t,e){return function(n,r){return cp(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function yp(t,e){return function(){return lp(t,"value","on",e)}}const vp=new r.q("angularfire2.realtimeDatabaseURL"),bp=new r.q("angularfire2.database.use-emulator");let _p=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new Hf.d(i),this.keepUnstableUntilFirst=Object(Hf.h)(this.schedulers);const a=o,u=Object(Hf.g)(t,i,e);!op.a.auth&&s&&Object(Hf.j)(),this.database=Object(Hf.f)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>up(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:mp(r,"update"),set:mp(r,"set"),push:t=>r.push(t),remove:(i=r,function(t){return t?cp(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:r=>pp(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>gp(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return lp(t,"value","on",e).pipe(Object(Pt.a)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(Xu(e),Object(Pt.a)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new Gf(r))),Object(Pt.a)(t=>t.actions));var r}(t,gp(t,e).pipe(Iu((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>pp(t,r,n).pipe(Object(Pt.a)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)};var i}(r,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>up(this.database,t));return r=this,{query:n=e,snapshotChanges:()=>yp(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>yp(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,Object(Pt.a)(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(Hf.c),r.Sb(Hf.b,8),r.Sb(vp,8),r.Sb(r.B),r.Sb(r.z),r.Sb(bp,8),r.Sb(Yf,8))},t.\u0275prov=r.Fb({factory:function(){return new t(r.Sb(Hf.c),r.Sb(Hf.b,8),r.Sb(vp,8),r.Sb(r.B),r.Sb(r.z),r.Sb(bp,8),r.Sb(Yf,8))},token:t,providedIn:"any"}),t})(),wp=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},providers:[_p]}),t})(),Op=(()=>{class t{constructor(){this.marcadores=[],this.marcadores.push({lat:38.484202837,lng:-.7677831,titulo:"Explanada de Petrer",draggable:!0})}insertarMarcador(t){this.marcadores.push(t),this.guardarMarcadores()}borrarMarcador(t){this.marcadores.splice(t,1),this.guardarMarcadores()}guardarMarcadores(){localStorage.setItem("marcadores",JSON.stringify(this.marcadores))}cargarMarcadores(){this.marcadores=localStorage.getItem("marcadores")?JSON.parse(localStorage.getItem("marcadores")):[]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Sp=(()=>{class t{constructor(t){this.http=t,this.token="",this.artistas=[],this.releases=[],this.urlBusqueda="https://api.spotify.com/v1/search",this.urlArtista="\thttps://api.spotify.com/v1/artists/"}createToken(){let t=new Td;t=t.append("Content-Type","application/x-www-form-urlencoded");var e=n("r8II");return this.http.post("https://accounts.spotify.com/api/token",e.stringify({client_id:"ad2f9818fba04d479254743b6ef212b2",client_secret:"ff56ddc57168440189e3203ef02b07e1",grant_type:"client_credentials"}),{headers:t}).pipe(Object(Pt.a)(t=>(this.token="Bearer "+t.access_token,this.token)))}getArtistas(t){let e=new Td;return e=e.append("Authorization",this.token),this.http.get(this.urlBusqueda+`?query=${t}&type=artist`,{headers:e}).pipe(Object(Pt.a)(t=>{this.artistas=t.artists.items}))}getNewReleasesS(t){let e=new Td;return e=e.append("Authorization",null!=t&&""!=t?t:this.token),this.http.get("https://api.spotify.com/v1/browse/new-releases",{headers:e}).pipe(Object(Pt.a)(t=>{this.releases=t.albums.items}))}getArtista(t){let e=new Td;return e=e.append("Authorization",this.token),this.http.get(this.urlArtista+""+t,{headers:e}).pipe(Object(Pt.a)(t=>t))}getTop(t){let e=new Td;return e=e.append("Authorization",this.token),this.http.get(this.urlArtista+(t+"/top-tracks?country=US"),{headers:e}).pipe(Object(Pt.a)(t=>t.tracks))}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(Vd))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Cp=(()=>{class t{constructor(t){this.http=t,this.youtubeUrl="https://www.googleapis.com/youtube/v3/videos",this.apikeyYT="AIzaSyAUIyXVQEA2dXfwW7U37yDFcfPsrx5qc4k",this.nextPageToken=""}getVideos(){let t=new xd;return t=t.append("part","snippet"),t=t.set("chart","mostPopular"),t=t.set("maxResults","10"),t=t.set("regionCode","ES"),t=t.set("key",this.apikeyYT),this.nextPageToken&&(t=t.set("pageToken",this.nextPageToken)),this.http.get(this.youtubeUrl,{params:t}).pipe(Object(Pt.a)(t=>{this.nextPageToken=t.nextPageToken;let e=[];for(let n of t.items)e.push(n);return e}))}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(Vd))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Ep=n("zIRd"),Tp=n("qOnz"),Ip=n("/6Yf"),kp=function(t){function e(n,r){var i=t.call(this,xp(n),"Firebase Storage: "+r+" ("+xp(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return Object(gc.c)(e,t),e.prototype._codeEquals=function(t){return xp(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?this._baseMessage+"\n"+this.customData.serverResponse:this._baseMessage},enumerable:!1,configurable:!0}),e}(Tp.c);function xp(t){return"storage/"+t}function Ap(){return new kp("unknown","An unknown error occurred, please check the error payload for server response.")}function Np(){return new kp("canceled","User canceled the upload/download.")}function jp(){return new kp("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Rp(t){return new kp("invalid-argument",t)}function Pp(){return new kp("app-deleted","The Firebase app was deleted.")}function Dp(t){return new kp("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Lp(t,e){return new kp("invalid-format","String does not match format '"+t+"': "+e)}function Mp(t){throw new kp("internal-error","Internal error: "+t)}var Fp={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Up=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function Vp(t,e){switch(t){case Fp.RAW:return new Up(qp(e));case Fp.BASE64:case Fp.BASE64URL:return new Up(zp(t,e));case Fp.DATA_URL:return new Up((n=new Bp(e)).base64?zp(Fp.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(Jx){throw Lp(Fp.DATA_URL,"Malformed data URL.")}return qp(e)}(n.rest),new Bp(e).contentType)}var n;throw Ap()}function qp(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function zp(t,e){switch(t){case Fp.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw Lp(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Fp.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw Lp(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(Jx){throw Lp(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var Bp=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw Lp(Fp.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r=e[1]||null;null!=r&&(this.base64=(n=r).length>=";base64".length&&";base64"===n.substring(n.length-";base64".length),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}}(),Wp={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Hp(t){switch(t){case"running":case"pausing":case"canceling":return Wp.RUNNING;case"paused":return Wp.PAUSED;case"success":return Wp.SUCCESS;case"canceled":return Wp.CANCELED;case"error":default:return Wp.ERROR}}var Kp=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),Gp=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Kp.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=Kp.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=Kp.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw Mp("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw Mp("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw Mp("cannot .getStatus() before sending");try{return this.xhr_.status}catch(Jx){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw Mp("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),Jp=function(){function t(){}return t.prototype.createXhrIo=function(){return new Gp},t}(),Qp=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(Jx){return new t(e,"")}if(""===r.path)return r;throw new kp("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}for(var s=n.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://"+("firebasestorage.googleapis.com"===n?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/([A-Za-z0-9.\\-_]+)/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],u=0;u<a.length;u++){var c=a[u],l=c.regex.exec(e);if(l){var h=l[c.indices.path];h||(h=""),r=new t(l[c.indices.bucket],h),c.postModify(r);break}}if(null==r)throw function(t){return new kp("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),$p=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function Yp(t){return"string"==typeof t||t instanceof String}function Xp(t){return Zp()&&t instanceof Blob}function Zp(){return"undefined"!=typeof Blob}function tg(t,e,n,r){if(r<e)throw Rp("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw Rp("Invalid value for '"+t+"'. Expected "+n+" or less.")}function eg(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null==n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function ng(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}var rg=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());void 0!==a?i(a):i()}catch(Jx){o(Jx)}else null!==s?((r=Ap()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?Pp():Np():new kp("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new ig(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout((function(){o=null,function(e,n){if(n)e(!1,new ig(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===Kp.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new ig(s,n))}else{var a=n.getErrorCode()===Kp.ABORT;e(!1,new ig(!1,null,a))}}))}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(d,u())}),e)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,Object(gc.g)([null,t],e));else{var r;u()||s?l.call.apply(l,Object(gc.g)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var f=!1;function p(t){f||(f=!0,c||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout((function(){s=!0,p(!0)}),r),p}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),ig=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function og(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function sg(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=og();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(Zp())return new Blob(t);throw new kp("unsupported-environment","This browser doesn't seem to support creating Blobs")}var ag=function(){function t(t,e){var n=0,r="";Xp(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(Xp(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(Zp()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(sg.apply(null,r))}var i=e.map((function(t){return Yp(t)?Vp(Fp.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var s=new Uint8Array(o),a=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]})),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}();function ug(t){var e,n;try{e=JSON.parse(t)}catch(Jx){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function cg(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function lg(t,e){return e}var hg=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||lg}}(),dg=null;function fg(){if(dg)return dg;var t=[];t.push(new hg("bucket")),t.push(new hg("generation")),t.push(new hg("metageneration")),t.push(new hg("name","fullPath",!0));var e=new hg("name");e.xform=function(t,e){return function(t){return!Yp(t)||t.length<2?t:cg(t)}(e)},t.push(e);var n=new hg("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new hg("timeCreated")),t.push(new hg("updated")),t.push(new hg("md5Hash",null,!0)),t.push(new hg("cacheControl",null,!0)),t.push(new hg("contentDisposition",null,!0)),t.push(new hg("contentEncoding",null,!0)),t.push(new hg("contentLanguage",null,!0)),t.push(new hg("contentType",null,!0)),t.push(new hg("metadata","customMetadata",!0)),dg=t}function pg(t,e,n){var r=ug(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new Qp(t.bucket,t.fullPath);return e._makeStorageReference(n)}})}(r,t),r}(t,r,n)}function gg(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var mg=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function yg(t){if(!t)throw Ap()}function vg(t,e){return function(n,r){var i=pg(t,r,e);return yg(null!==i),i}}function bg(t){return function(e,n){var r;return(r=401===e.getStatus()?e.getResponseText().includes("Firebase App Check token is invalid")?new kp("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new kp("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new kp("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new kp("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function _g(t){var e=bg(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new kp("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function wg(t,e,n){var r=eg(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new mg(r,"GET",vg(t,n),i);return o.errorHandler=_g(e),o}function Og(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var Sg=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function Cg(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(Jx){yg(!1)}return yg(!!n&&-1!==(e||["active"]).indexOf(n)),n}var Eg=function(){return function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}}}();function Tg(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var Ig=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=fg(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=Og(e,r,i),a={name:s.fullPath},u=eg(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=gg(s,n),h=new mg(u,"POST",(function(t){var e;Cg(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(Jx){yg(!1)}return yg(Yp(e)),e}),t.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=bg(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n,r){var i=function(t,e,n,r){var i=new mg(n,"POST",(function(t){var e=Cg(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Jx){yg(!1)}n||yg(!1);var i=Number(n);return yg(!isNaN(i)),new Sg(i,r.size(),"final"===e)}),t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=bg(e),i}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=262144*this._chunkMultiplier,n=new Sg(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var s;try{s=function(t,e,n,r,i,o,s,a){var u=new Sg(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new kp("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},f=r.slice(h,h+l);if(null===f)throw jp();var p=new mg(n,"POST",(function(t,n){var i,s=Cg(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?vg(e,o)(t,n):null,new Sg(a,c,"final"===s,i)}),e.maxUploadRetryTime);return p.headers=d,p.body=f.uploadData(),p.progressCallback=a||null,p.errorHandler=bg(t),p}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(Jx){return t._error=Jx,void t._transition("error")}var a=t._ref.storage._makeRequest(s,i,o);t._request=a,a.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e,n){var r=wg(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=Og(e,r,i),c=gg(u,n),l=ag.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw jp();var h={name:u.fullPath},d=eg(o,t.host),f=t.maxUploadRetryTime,p=new mg(d,"POST",vg(t,n),f);return p.urlParams=h,p.headers=s,p.body=l.uploadData(),p.errorHandler=bg(e),p}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=Np(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Hp(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new Eg(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(Hp(this._state)){case Wp.SUCCESS:Tg(this._resolve.bind(null,this.snapshot))();break;case Wp.CANCELED:case Wp.ERROR:Tg(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(Hp(this._state)){case Wp.RUNNING:case Wp.PAUSED:t.next&&Tg(t.next.bind(t,this.snapshot))();break;case Wp.SUCCESS:t.complete&&Tg(t.complete.bind(t))();break;case Wp.CANCELED:case Wp.ERROR:t.error&&Tg(t.error.bind(t,this._error))();break;default:t.error&&Tg(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),kg=function(){function t(t,e){this._service=t,this._location=e instanceof Qp?e:Qp.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new Qp(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return cg(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new Qp(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw Dp(t)},t}();function xg(t,e){return Object(gc.b)(this,void 0,void 0,(function(){var n,r;return Object(gc.d)(this,(function(i){switch(i.label){case 0:return null!=e&&"number"==typeof e.maxResults&&tg("options.maxResults",1,1e3,e.maxResults),r=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=eg(e.bucketOnlyServerUrl(),t.host),a=t.maxOperationRetryTime,u=new mg(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=ug(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new Qp(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=t._makeStorageReference(new Qp(e,c[u].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return yg(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=bg(e),u}(t.storage,t._location,"/",(n=e||{}).pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}}))}))}function Ag(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new Qp(t._location.bucket,n);return new kg(t.storage,r)}function Ng(t){return/^[A-Za-z]+:\/\//.test(t)}function jg(t,e){var n=null==e?void 0:e.storageBucket;return null==n?null:Qp.makeFromBucketSpec(n,t)}var Rg=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host="firebasestorage.googleapis.com",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Qp.makeFromBucketSpec(i,this._host):jg(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,this._bucket=null!=this._url?Qp.makeFromBucketSpec(this._url,t):jg(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){tg("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){tg("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return Object(gc.b)(this,void 0,void 0,(function(){var t,e;return Object(gc.d)(this,(function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._getAppCheckToken=function(){return Object(gc.b)(this,void 0,void 0,(function(){var t;return Object(gc.d)(this,(function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new kg(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new $p(Pp());var i=function(t,e,n,r,i,o){var s=ng(t.urlParams),a=t.url+s,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new rg(a,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return r._requests.delete(i)}),(function(){return r._requests.delete(i)})),i},t.prototype.makeRequestWithTokens=function(t){return Object(gc.b)(this,void 0,void 0,(function(){var e;return Object(gc.d)(this,(function(n){switch(n.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=n.sent(),[2,this._makeRequest(t,e[0],e[1])]}}))}))},t}();function Pg(t,e){return function(t,e){if(e&&Ng(e)){if(t instanceof Rg)return new kg(t,e);throw Rp("To use ref(service, url), the first argument must be a Storage instance.")}return function t(e,n){if(e instanceof Rg){var r=e;if(null==r._bucket)throw new kp("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var i=new kg(r,r._bucket);return null!=n?t(i,n):i}if(void 0!==n){if(n.includes(".."))throw Rp('`path` param cannot contain ".."');return Ag(e,n)}return e}(t,e)}(t=Object(Tp.o)(t),e)}var Dg,Lg,Mg=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),Fg=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new Mg(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new Mg(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new Mg(t,i,i._ref))}:{next:e.next?function(t){return e.next(new Mg(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),Ug=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new Vg(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new Vg(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),Vg=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return Ag(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new Fg(function(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Ig(t,new ag(e),n)}(t=Object(Tp.o)(t),e,n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=Fp.RAW),this._throwIfRoot("putString");var r=Vp(e,t),i=Object(gc.a)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new Fg(new Ig(this._delegate,new ag(r.data,!0),i),this)},t.prototype.listAll=function(){var t,e=this;return(t=this._delegate,function(t){var e={prefixes:[],items:[]};return function t(e,n,r){return Object(gc.b)(this,void 0,void 0,(function(){var i,o,s;return Object(gc.d)(this,(function(a){switch(a.label){case 0:return[4,xg(e,{pageToken:r})];case 1:return i=a.sent(),(o=n.prefixes).push.apply(o,i.prefixes),(s=n.items).push.apply(s,i.items),null==i.nextPageToken?[3,3]:[4,t(e,n,i.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}(t,e).then((function(){return e}))}(t=Object(Tp.o)(t))).then((function(t){return new Ug(t,e.storage)}))},t.prototype.list=function(t){var e=this;return function(t,e){return xg(t=Object(Tp.o)(t),e)}(this._delegate,t||void 0).then((function(t){return new Ug(t,e.storage)}))},t.prototype.getMetadata=function(){return t=this._delegate,function(t){return Object(gc.b)(this,void 0,void 0,(function(){var e;return Object(gc.d)(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=wg(t.storage,t._location,fg()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}(t=Object(Tp.o)(t));var t},t.prototype.updateMetadata=function(t){return function(t,e){return function(t,e){return Object(gc.b)(this,void 0,void 0,(function(){var n;return Object(gc.d)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=eg(e.fullServerUrl(),t.host),o=gg(n,r),s=t.maxOperationRetryTime,a=new mg(i,"PATCH",vg(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=_g(e),a}(t.storage,t._location,e,fg()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}}))}))}(t=Object(Tp.o)(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return t=this._delegate,function(t){return Object(gc.b)(this,void 0,void 0,(function(){var e;return Object(gc.d)(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=eg(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new mg(r,"GET",function(t,e){return function(n,r){var i=pg(t,r,e);return yg(null!==i),function(t,e,n){var r=ug(e);if(null===r)return null;if(!Yp(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map((function(e){var r=t.fullPath;return eg("/b/"+o(t.bucket)+"/o/"+o(r),n)+ng({alt:"media",token:e})}))[0]}(i,r,t.host)}}(t,n),i);return o.errorHandler=_g(e),o}(t.storage,t._location,fg()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then((function(t){if(null===t)throw new kp("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}(t=Object(Tp.o)(t));var t},t.prototype.delete=function(){return this._throwIfRoot("delete"),t=this._delegate,function(t){return Object(gc.b)(this,void 0,void 0,(function(){var e;return Object(gc.d)(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=eg(e.fullServerUrl(),t.host),r=new mg(n,"DELETE",(function(t,e){}),t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=_g(e),r}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}(t=Object(Tp.o)(t));var t},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw Dp(t)},t}(),qg=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(Ng(t))throw Rp("ref() expected a child path but got a URL, use refFromURL instead.");return new Vg(Pg(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!Ng(t))throw Rp("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Qp.makeFromUrl(t,this._delegate.host)}catch(Jx){throw Rp("refFromUrl() expected a valid full URL but got an invalid one.")}return new Vg(Pg(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){!function(t,e,n){t.host="http://"+e+":"+n}(this._delegate,t,e)},t}();Lg={TaskState:Wp,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:Fp,Storage:Rg,Reference:Vg},(Dg=Ep.a).INTERNAL.registerComponent(new Ip.a("storage",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new qg(r,new Rg(r,i,o,new Jp,n,Ep.a.SDK_VERSION))}),"PUBLIC").setServiceProps(Lg).setMultipleInstances(!0)),Dg.registerVersion("@firebase/storage","0.5.2");let zg=(()=>{class t{constructor(t){this.af=t,this.CARPETA_IMAGENES="img"}getAllImages(){return this.af.database.ref("img").orderByKey().once("value",(function(){}))}fromStartToEnd(t){return this.af.database.ref("img").orderByKey().startAt(t).limitToLast(9).once("value",(function(){}))}listaUltimasImagenes(){op.a.database().ref().get().then(t=>{t.exists()?console.log(t.val()):console.log("No data available")}).catch(t=>{console.error(t)})}newcharge(t){const e=t.map((t,e)=>{let n=op.a.storage().ref("img/"+t.archivo.name);return n.put(t[e]).then(()=>n.getDownloadURL())});Promise.all(e).then(t=>{console.log(t,"all")}).catch(t=>alert(t.code))}charge_images(t){t.map((t,e)=>{const r=n("je4i");t.nombreArchivo=r.generate();let i=op.a.storage().ref().child(`${this.CARPETA_IMAGENES}/${t.nombreArchivo}`);i.put(t.archivo).on(op.a.storage.TaskEvent.STATE_CHANGED,e=>{switch(t.progreso=e.bytesTransferred/e.totalBytes*100,e.state){case op.a.storage.TaskState.PAUSED:console.log("Upload is paused");break;case op.a.storage.TaskState.RUNNING:console.log("Upload is running")}},(function(t){console.log("Error: ",t)}),()=>{console.log("upload completed successfully"),i.getDownloadURL().then(e=>{t.url=e,this.guardarImagen({nombre:t.nombreArchivo,url:t.url}),t.estaSubiendo=!1})})})}old_charge_images(t){let e=op.a.storage().ref();for(let r of t){r.estaSubiendo=!0;var n=e.child(`${this.CARPETA_IMAGENES}/${r.nombreArchivo}`).put(r.archivo);n.on(op.a.storage.TaskEvent.STATE_CHANGED,t=>{switch(r.progreso=t.bytesTransferred/t.totalBytes*100,t.state){case op.a.storage.TaskState.PAUSED:console.log("Upload is paused");break;case op.a.storage.TaskState.RUNNING:console.log("Upload is running");break;case op.a.storage.TaskState.SUCCESS:console.log("Upload is SUCCESS")}},(function(t){console.log("Error: ",t)}),()=>{console.log("upload completed successfully"),n.snapshot.ref.getDownloadURL().then(t=>{r.url=t,this.guardarImagen({nombre:r.nombreArchivo,url:r.url}),r.estaSubiendo=!1})})}}guardarImagen(t){this.af.list("/"+this.CARPETA_IMAGENES).push(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(_p))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Bg(){return t=>t.lift(new Wg)}class Wg{call(t,e){return e.subscribe(new Hg(t))}}class Hg extends Tu.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var Kg=n("q/0M"),Gg=function(t,e){return(Gg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Jg(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Qg,$g="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Yg=Yg||{},Xg=$g||self;function Zg(){}function tm(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function em(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var nm="closure_uid_"+(1e9*Math.random()>>>0),rm=0;function im(t,e,n){return t.call.apply(t.bind,arguments)}function om(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function sm(t,e,n){return(sm=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?im:om).apply(null,arguments)}function am(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function um(){return Date.now()}function cm(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function lm(){this.j=this.j,this.i=this.i}lm.prototype.j=!1,lm.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,nm)&&t[nm]||(t[nm]=++rm)}(this)},lm.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var hm=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},dm=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function fm(t){return Array.prototype.concat.apply([],arguments)}function pm(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function gm(t){return/^[\s\xa0]*$/.test(t)}var mm,ym=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function vm(t,e){return-1!=t.indexOf(e)}function bm(t,e){return t<e?-1:t>e?1:0}t:{var _m=Xg.navigator;if(_m){var wm=_m.userAgent;if(wm){mm=wm;break t}}mm=""}function Om(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Sm(t){var e={};for(var n in t)e[n]=t[n];return e}var Cm="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Em(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Cm.length;o++)n=Cm[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Tm(t){return Tm[" "](t),t}Tm[" "]=Zg;var Im,km,xm=vm(mm,"Opera"),Am=vm(mm,"Trident")||vm(mm,"MSIE"),Nm=vm(mm,"Edge"),jm=Nm||Am,Rm=vm(mm,"Gecko")&&!(vm(mm.toLowerCase(),"webkit")&&!vm(mm,"Edge"))&&!(vm(mm,"Trident")||vm(mm,"MSIE"))&&!vm(mm,"Edge"),Pm=vm(mm.toLowerCase(),"webkit")&&!vm(mm,"Edge");function Dm(){var t=Xg.document;return t?t.documentMode:void 0}t:{var Lm="",Mm=(km=mm,Rm?/rv:([^\);]+)(\)|;)/.exec(km):Nm?/Edge\/([\d\.]+)/.exec(km):Am?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(km):Pm?/WebKit\/(\S+)/.exec(km):xm?/(?:Version)[ \/]?(\S+)/.exec(km):void 0);if(Mm&&(Lm=Mm?Mm[1]:""),Am){var Fm=Dm();if(null!=Fm&&Fm>parseFloat(Lm)){Im=String(Fm);break t}}Im=Lm}var Um={};function Vm(t){return function(t,e){var n=Um;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=ym(String(Im)).split("."),r=ym(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=bm(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||bm(0==s[2].length,0==a[2].length)||bm(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}var qm=Xg.document&&Am&&(Dm()||parseInt(Im,10))||void 0,zm=!Am||9<=Number(qm),Bm=Am&&!Vm("9"),Wm=function(){if(!Xg.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Xg.addEventListener("test",Zg,e),Xg.removeEventListener("test",Zg,e)}catch(n){}return t}();function Hm(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Km(t,e){if(Hm.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Rm){t:{try{Tm(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Gm[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Hm.prototype.b=function(){this.defaultPrevented=!0},cm(Km,Hm);var Gm={2:"touch",3:"pen",4:"mouse"};Km.prototype.b=function(){Km.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Bm)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Jm="closure_listenable_"+(1e6*Math.random()|0),Qm=0;function $m(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Qm,this.Y=this.Z=!1}function Ym(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Xm(t){this.src=t,this.a={},this.b=0}function Zm(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=hm(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Ym(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function ty(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Xm.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=ty(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new $m(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var ey="closure_lm_"+(1e6*Math.random()|0),ny={};function ry(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=hy(r),e&&e[Jm]?e.wa(n,r,em(i)?!!i.capture:!!i,o):iy(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)ry(t,e[o],n,r,i);return null}return n=hy(n),t&&t[Jm]?t.va(e,n,em(r)?!!r.capture:!!r,i):iy(t,e,n,!1,r,i)}function iy(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=em(i)?!!i.capture:!!i;if(s&&!zm)return null;var a=cy(t);if(a||(t[ey]=a=new Xm(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=uy,e=zm?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Wm||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(sy(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function oy(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Jm])Zm(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(sy(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=cy(e))?(Zm(n,t),0==n.b&&(n.src=null,e[ey]=null)):Ym(t)}}}function sy(t){return t in ny?ny[t]:ny[t]="on"+t}function ay(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&oy(t),n.call(r,e)}function uy(t,e){if(t.Y)return!0;if(!zm){if(!e)t:{e=["window","event"];for(var n=Xg,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return ay(t,e=new Km(e,this))}return ay(t,new Km(e,this))}function cy(t){return(t=t[ey])instanceof Xm?t:null}var ly="__closure_events_fn_"+(1e9*Math.random()>>>0);function hy(t){return"function"==typeof t?t:(t[ly]||(t[ly]=function(e){return t.handleEvent(e)}),t[ly])}function dy(){lm.call(this),this.c=new Xm(this),this.J=this,this.C=null}function fy(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Hm(e,t);else if(e instanceof Hm)e.target=e.target||t;else{var i=e;Em(e=new Hm(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=py(s,r,!0,e)&&i}if(i=py(s=e.a=t,r,!0,e)&&i,i=py(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=py(s=e.a=n[o],r,!1,e)&&i}function py(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&Zm(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}cm(dy,lm),dy.prototype[Jm]=!0,(Qg=dy.prototype).addEventListener=function(t,e,n,r){ry(this,t,e,n,r)},Qg.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=em(i)?!!i.capture:!!i,r=hy(r),e&&e[Jm]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=ty(s=e.a[n],r,i,o))&&(Ym(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):e&&(e=cy(e))&&(n=e.a[n.toString()],e=-1,n&&(e=ty(n,r,i,o)),(r=-1<e?n[e]:null)&&oy(r))}(this,t,e,n,r)},Qg.G=function(){if(dy.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Ym(n[r]);delete e.a[t],e.b--}}this.C=null},Qg.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Qg.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var gy=Xg.JSON.stringify;function my(){this.b=this.a=null}var yy,vy=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())((function(){return new _y}),(function(t){t.reset()}));function by(){var t=Cy,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function _y(){this.next=this.b=this.a=null}function wy(t){Xg.setTimeout((function(){throw t}),0)}function Oy(t,e){yy||function(){var t=Xg.Promise.resolve(void 0);yy=function(){t.then(Ey)}}(),Sy||(yy(),Sy=!0),Cy.add(t,e)}my.prototype.add=function(t,e){var n=vy.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},_y.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},_y.prototype.reset=function(){this.next=this.b=this.a=null};var Sy=!1,Cy=new my;function Ey(){for(var t;t=by();){try{t.a.call(t.b)}catch(n){wy(n)}var e=vy;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Sy=!1}function Ty(t,e){dy.call(this),this.b=t||1,this.a=e||Xg,this.f=sm(this.Za,this),this.g=um()}function Iy(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function ky(t,e,n){if("function"==typeof t)n&&(t=sm(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=sm(t.handleEvent,t)}return 2147483647<Number(e)?-1:Xg.setTimeout(t,e||0)}function xy(t){t.a=ky((function(){t.a=null,t.c&&(t.c=!1,xy(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}cm(Ty,dy),(Qg=Ty.prototype).aa=!1,Qg.M=null,Qg.Za=function(){if(this.aa){var t=um()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),fy(this,"tick"),this.aa&&(Iy(this),this.start()))}},Qg.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=um())},Qg.G=function(){Ty.X.G.call(this),Iy(this),delete this.a};var Ay=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Gg(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:xy(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(Xg.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(lm);function Ny(t){lm.call(this),this.b=t,this.a={}}cm(Ny,lm);var jy=[];function Ry(t,e,n,r){Array.isArray(n)||(n&&(jy[0]=n.toString()),n=jy);for(var i=0;i<n.length;i++){var o=ry(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Py(t){Om(t.a,(function(t,e){this.a.hasOwnProperty(e)&&oy(t)}),t),t.a={}}function Dy(){this.a=!0}function Ly(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return gy(n)}catch(a){return e}}(t,n)+(r?" "+r:"")}))}Ny.prototype.G=function(){Ny.X.G.call(this),Py(this)},Ny.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Dy.prototype.info=function(){};var My={},Fy=null;function Uy(){return Fy=Fy||new dy}function Vy(t){Hm.call(this,My.Fa,t)}function qy(t){var e=Uy();fy(e,new Vy(e,t))}function zy(t,e){Hm.call(this,My.STAT_EVENT,t),this.stat=e}function By(t){var e=Uy();fy(e,new zy(e,t))}function Wy(t){Hm.call(this,My.Ga,t)}function Hy(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Xg.setTimeout((function(){t()}),e)}My.Fa="serverreachability",cm(Vy,Hm),My.STAT_EVENT="statevent",cm(zy,Hm),My.Ga="timingevent",cm(Wy,Hm);var Ky={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Gy={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Jy(){}function Qy(){}Jy.prototype.a=null;var $y,Yy={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Xy(){Hm.call(this,"d")}function Zy(){Hm.call(this,"c")}function tv(){}function ev(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Ny(this),this.P=nv,this.R=new Ty(t=jm?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}cm(Xy,Hm),cm(Zy,Hm),cm(tv,Jy),$y=new tv;var nv=45e3,rv={},iv={};function ov(t,e,n){t.H=1,t.i=Iv(wv(e)),t.j=n,t.I=!0,sv(t,null)}function sv(t,e){t.u=um(),cv(t),t.l=wv(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Vv(n.b,"t",r),t.D=0,t.a=Pb(t.g,t.g.C?e:null),0<t.O&&(t.F=new Ay(sm(t.Ca,t,t.a),t.O)),Ry(t.J,t.a,"readystatechange",t.Xa),e=t.B?Sm(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),qy(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function av(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=uv(t,n);if(i==iv){4==e&&(t.h=4,By(14),r=!1),Ly(t.c,t.f,null,"[Incomplete Response]");break}if(i==rv){t.h=4,By(15),Ly(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Ly(t.c,t.f,i,null),pv(t,i)}4==e&&0==n.length&&(t.h=1,By(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Tb(e),e.F=!0,By(11))):(Ly(t.c,t.f,n,"[Invalid Chunked Response]"),fv(t),dv(t))}function uv(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?iv:(n=Number(e.substring(n,r)),isNaN(n)?rv:(r+=1)+n>e.length?iv:(e=e.substr(r,n),t.D=r+n,e))}function cv(t){t.T=um()+t.P,lv(t,t.P)}function lv(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Hy(sm(t.Va,t),e)}function hv(t){t.o&&(Xg.clearTimeout(t.o),t.o=null)}function dv(t){0==t.g.v||t.A||xb(t.g,t)}function fv(t){hv(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Iy(t.R),Py(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function pv(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Gv(n.b,t)))if(n.I=t.N,!t.C&&Gv(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(hx){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;kb(n),yb(n)}Eb(n),By(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Hy(sm(n.Sa,n),6e3));if(1>=Kv(n.b)&&n.ea){try{n.ea()}catch(hx){}n.ea=void 0}}else Nb(n,11)}else if((t.C||n.a==t)&&kb(n),!gm(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(vm(l,"spdy")||vm(l,"quic")||vm(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(Jv(h,h.b),h.b=null))}if(u.A){var d=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;d&&(u.na=d,Tv(u.B,u.A,d))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=um()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var f=t;if((u=n).la=Rb(u,u.C?u.ga:null,u.fa),f.C){Qv(u.b,f);var p=f,g=u.D;g&&p.setTimeout(g),p.o&&(hv(p),cv(p)),u.a=f}else Cb(u);0<n.g.length&&_b(n)}else"stop"!=i[0]&&"close"!=i[0]||Nb(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Nb(n,7):mb(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);qy(4)}catch(hx){}}function gv(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(tm(t)||"string"==typeof t)dm(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(tm(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(tm(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function mv(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof mv)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function yv(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];vv(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)vv(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function vv(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Qg=ev.prototype).setTimeout=function(t){this.P=t},Qg.Xa=function(t){t=t.target;var e=this.F;e&&3==db(t)?e.f():this.Ca(t)},Qg.Ca=function(t){try{if(t==this.a)t:{var e=db(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!jm&&!this.a.$())){this.A||4!=e||7==n||qy(8==n||0>=r?3:2),hv(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!gm(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,By(12),fv(this),dv(this);break t}Ly(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,pv(this,u)}this.I?(av(this,e,o),jm&&this.b&&3==e&&(Ry(this.J,this.R,"tick",this.Wa),this.R.start())):(Ly(this.c,this.f,o,null),pv(this,o)),4==e&&fv(this),this.b&&!this.A&&(4==e?xb(this.g,this):(this.b=!1,cv(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,By(12)):(this.h=0,By(13)),fv(this),dv(this)}}}catch(c){}},Qg.Wa=function(){if(this.a){var t=db(this.a),e=this.a.$();this.D<e.length&&(hv(this),av(this,t,e),this.b&&4!=t&&cv(this))}},Qg.cancel=function(){this.A=!0,fv(this)},Qg.Va=function(){this.o=null;var t=um();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(qy(3),By(17)),fv(this),this.h=2,dv(this)):lv(this,this.T-t)},(Qg=mv.prototype).K=function(){yv(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Qg.L=function(){return yv(this),this.a.concat()},Qg.get=function(t,e){return vv(this.b,t)?this.b[t]:e},Qg.set=function(t,e){vv(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Qg.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var bv=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function _v(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof _v){this.a=void 0!==e?e:t.a,Ov(this,t.f),this.j=t.j,Sv(this,t.c),Cv(this,t.h),this.g=t.g,e=t.b;var n=new Lv;n.c=e.c,e.a&&(n.a=new mv(e.a),n.b=e.b),Ev(this,n),this.i=t.i}else t&&(n=String(t).match(bv))?(this.a=!!e,Ov(this,n[1]||"",!0),this.j=kv(n[2]||""),Sv(this,n[3]||"",!0),Cv(this,n[4]),this.g=kv(n[5]||"",!0),Ev(this,n[6]||"",!0),this.i=kv(n[7]||"")):(this.a=!!e,this.b=new Lv(null,this.a))}function wv(t){return new _v(t)}function Ov(t,e,n){t.f=n?kv(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Sv(t,e,n){t.c=n?kv(e,!0):e}function Cv(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Ev(t,e,n){e instanceof Lv?(t.b=e,function(t,e){e&&!t.f&&(Mv(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Fv(this,e),Vv(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=xv(e,Pv)),t.b=new Lv(e,t.a))}function Tv(t,e,n){t.b.set(e,n)}function Iv(t){return Tv(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^um()).toString(36)),t}function kv(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function xv(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Av),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Av(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}_v.prototype.toString=function(){var t=[],e=this.f;e&&t.push(xv(e,Nv,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(xv(e,Nv,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(xv(n,"/"==n.charAt(0)?Rv:jv,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",xv(n,Dv)),t.join("")};var Nv=/[#\/\?@]/g,jv=/[#\?:]/g,Rv=/[#\?]/g,Pv=/[#\?@]/g,Dv=/#/g;function Lv(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Mv(t){t.a||(t.a=new mv,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Fv(t,e){Mv(t),e=qv(t,e),vv(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,vv((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&yv(t)))}function Uv(t,e){return Mv(t),e=qv(t,e),vv(t.a.b,e)}function Vv(t,e,n){Fv(t,e),0<n.length&&(t.c=null,t.a.set(qv(t,e),pm(n)),t.b+=n.length)}function qv(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(Qg=Lv.prototype).add=function(t,e){Mv(this),this.c=null,t=qv(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Qg.forEach=function(t,e){Mv(this),this.a.forEach((function(n,r){dm(n,(function(n){t.call(e,n,r,this)}),this)}),this)},Qg.L=function(){Mv(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Qg.K=function(t){Mv(this);var e=[];if("string"==typeof t)Uv(this,t)&&(e=fm(e,this.a.get(qv(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=fm(e,t[n])}return e},Qg.set=function(t,e){return Mv(this),this.c=null,Uv(this,t=qv(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Qg.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Qg.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var zv=function(){return function(t,e){this.b=t,this.a=e}}();function Bv(t){this.g=t||Wv,t=Xg.PerformanceNavigationTiming?0<(t=Xg.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Xg.ia&&Xg.ia.ya&&Xg.ia.ya()&&Xg.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Wv=10;function Hv(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Kv(t){return t.b?1:t.a?t.a.size:0}function Gv(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Jv(t,e){t.a?t.a.add(e):t.b=e}function Qv(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function $v(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Jg(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return pm(t.c)}function Yv(){}function Xv(){this.a=new Yv}function Zv(t,e,n){var r=n||"";try{gv(t,(function(t,n){var i=t;em(t)&&(i=gy(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(Jx){throw e.push(r+"type="+encodeURIComponent("_badmap")),Jx}}function tb(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Bv.prototype.cancel=function(){var t,e;if(this.c=$v(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Jg(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Yv.prototype.stringify=function(t){return Xg.JSON.stringify(t,void 0)},Yv.prototype.parse=function(t){return Xg.JSON.parse(t,void 0)};var eb=Xg.JSON.parse;function nb(t){dy.call(this),this.headers=new mv,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=rb,this.D=this.F=!1}cm(nb,dy);var rb="",ib=/^https?$/i,ob=["POST","PUT"];function sb(t){return"content-type"==t.toLowerCase()}function ab(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,ub(t),lb(t)}function ub(t){t.u||(t.u=!0,fy(t,"complete"),fy(t,"error"))}function cb(t){if(t.b&&void 0!==Yg&&(!t.s[1]||4!=db(t)||2!=t.W()))if(t.l&&4==db(t))ky(t.za,0,t);else if(fy(t,"readystatechange"),4==db(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(bv)[1]||null;if(!o&&Xg.self&&Xg.self.location){var s=Xg.self.location.protocol;o=s.substr(0,s.length-1)}i=!ib.test(o?o.toLowerCase():"")}e=i}if(e)fy(t,"complete"),fy(t,"success");else{t.h=6;try{var a=2<db(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",ub(t)}}finally{lb(t)}}}function lb(t,e){if(t.a){hb(t);var n=t.a,r=t.s[0]?Zg:null;t.a=null,t.s=null,e||fy(t,"ready");try{n.onreadystatechange=r}catch(Jx){}}}function hb(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Xg.clearTimeout(t.m),t.m=null)}function db(t){return t.a?t.a.readyState:0}function fb(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Om(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Tv(t,e,n))}function pb(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function gb(t){this.pa=0,this.g=[],this.c=new Dy,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=pb("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=pb("baseRetryDelayMs",5e3,t),this.Ra=pb("retryDelaySeedMs",1e4,t),this.Ma=pb("forwardChannelMaxRetries",2,t),this.ma=pb("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Bv(t&&t.concurrentRequestLimit),this.ka=new Xv,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function mb(t){if(vb(t),3==t.v){var e=t.R++,n=wv(t.B);Tv(n,"SID",t.J),Tv(n,"RID",e),Tv(n,"TYPE","terminate"),Ob(t,n),(e=new ev(t,t.c,e,void 0)).H=2,e.i=Iv(wv(n)),n=!1,Xg.navigator&&Xg.navigator.sendBeacon&&(n=Xg.navigator.sendBeacon(e.i.toString(),"")),!n&&Xg.Image&&((new Image).src=e.i,n=!0),n||(e.a=Pb(e.g,null),e.a.ba(e.i)),e.u=um(),cv(e)}jb(t)}function yb(t){t.a&&(Tb(t),t.a.cancel(),t.a=null)}function vb(t){yb(t),t.j&&(Xg.clearTimeout(t.j),t.j=null),kb(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Xg.clearTimeout(t.h),t.h=null)}function bb(t,e){t.g.push(new zv(t.Oa++,e)),3==t.v&&_b(t)}function _b(t){Hv(t.b)||t.h||(t.h=!0,Oy(t.Ba,t),t.u=0)}function wb(t,e){var n;n=e?e.f:t.R++;var r=wv(t.B);Tv(r,"SID",t.J),Tv(r,"RID",n),Tv(r,"AID",t.P),Ob(t,r),t.i&&t.l&&fb(r,t.i,t.l),n=new ev(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Sb(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Jv(t.b,n),ov(n,r,e)}function Ob(t,e){t.f&&gv({},(function(t,n){Tv(e,n,t)}))}function Sb(t,e,n){n=Math.min(t.g.length,n);var r=t.f?sm(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{Zv(l,s,"req"+c+"_")}catch(Qn){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Cb(t){t.a||t.j||(t.T=1,Oy(t.Aa,t),t.o=0)}function Eb(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Hy(sm(t.Aa,t),Ab(t,t.o)),t.o++,0))}function Tb(t){null!=t.s&&(Xg.clearTimeout(t.s),t.s=null)}function Ib(t){t.a=new ev(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=wv(t.la);Tv(e,"RID","rpc"),Tv(e,"SID",t.J),Tv(e,"CI",t.H?"0":"1"),Tv(e,"AID",t.P),Ob(t,e),Tv(e,"TYPE","xmlhttp"),t.i&&t.l&&fb(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Iv(wv(e)),n.j=null,n.I=!0,sv(n,t)}function kb(t){null!=t.m&&(Xg.clearTimeout(t.m),t.m=null)}function xb(t,e){var n=null;if(t.a==e){kb(t),Tb(t),t.a=null;var r=2}else{if(!Gv(t.b,e))return;n=e.s,Qv(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=um()-e.u;var i=t.u;fy(r=Uy(),new Wy(r,n,e,i)),_b(t)}else Cb(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Kv(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Hy(sm(t.Ba,t,e),Ab(t,t.u)),t.u++,0)))}(t,e)||2==r&&Eb(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Nb(t,5);break;case 4:Nb(t,10);break;case 3:Nb(t,6);break;default:Nb(t,2)}}function Ab(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Nb(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=sm(t.Ya,t);n||(n=new _v("//www.google.com/images/cleardot.gif"),Xg.location&&"http"==Xg.location.protocol||Ov(n,"https"),Iv(n)),function(t,e){var n=new Dy;if(Xg.Image){var r=new Image;r.onload=am(tb,n,r,"TestLoadImage: loaded",!0,e),r.onerror=am(tb,n,r,"TestLoadImage: error",!1,e),r.onabort=am(tb,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=am(tb,n,r,"TestLoadImage: timeout",!1,e),Xg.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else By(2);t.v=0,t.f&&t.f.ra(e),jb(t),vb(t)}function jb(t){t.v=0,t.I=-1,t.f&&(0==$v(t.b).length&&0==t.g.length||(t.b.c.length=0,pm(t.g),t.g.length=0),t.f.qa())}function Rb(t,e,n){var r=function(t){return t instanceof _v?wv(t):new _v(t,void 0)}(n);if(""!=r.c)e&&Sv(r,e+"."+r.c),Cv(r,r.h);else{var i=Xg.location;r=function(t,e,n,r){var i=new _v(null,void 0);return t&&Ov(i,t),e&&Sv(i,e),n&&Cv(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Om(t.V,(function(t,e){Tv(r,e,t)})),n=t.na,(e=t.A)&&n&&Tv(r,e,n),Tv(r,"VER",t.ha),Ob(t,r),r}function Pb(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new nb(t.Na)).F=t.C,e}function Db(){}function Lb(){if(Am&&!(10<=Number(qm)))throw Error("Environmental error: no available transport.")}function Mb(t,e){dy.call(this),this.a=new gb(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!gm(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!gm(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Vb(this)}function Fb(t){Xy.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Ub(){Zy.call(this),this.status=1}function Vb(t){this.a=t}(Qg=nb.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:$y),this.a.onreadystatechange=sm(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void ab(this,o)}t=n||"";var i=new mv(this.headers);r&&gv(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=sb,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Xg.FormData&&t instanceof Xg.FormData,!(0<=hm(ob,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{hb(this),0<this.o&&((this.D=function(t){return Am&&Vm(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=sm(this.xa,this)):this.m=ky(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){ab(this,o)}},Qg.xa=function(){void 0!==Yg&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,fy(this,"timeout"),this.abort(8))},Qg.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,fy(this,"complete"),fy(this,"abort"),lb(this))},Qg.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),lb(this,!0)),nb.X.G.call(this)},Qg.za=function(){this.j||(this.A||this.l||this.g?cb(this):this.Ua())},Qg.Ua=function(){cb(this)},Qg.W=function(){try{return 2<db(this)?this.a.status:-1}catch(km){return-1}},Qg.$=function(){try{return this.a?this.a.responseText:""}catch(km){return""}},Qg.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),eb(e)}},Qg.ua=function(){return this.h},Qg.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Qg=gb.prototype).ha=8,Qg.v=1,Qg.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new ev(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Em(r=Sm(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Sb(this,n,e),Tv(i=wv(this.B),"RID",t),Tv(i,"CVER",22),this.A&&Tv(i,"X-HTTP-Session-Id",this.A),Ob(this,i),this.i&&r&&fb(i,this.i,r),Jv(this.b,n),this.Ia&&Tv(i,"TYPE","init"),this.da?(Tv(i,"$req",e),Tv(i,"SID","null"),n.U=!0,ov(n,i,null)):ov(n,i,e),this.v=2}}else 3==this.v&&(t?wb(this,t):0==this.g.length||Hv(this.b)||wb(this))},Qg.Aa=function(){if(this.j=null,Ib(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Hy(sm(this.Ta,this),t)}},Qg.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,By(10),yb(this),Ib(this))},Qg.Sa=function(){null!=this.m&&(this.m=null,yb(this),Eb(this),By(19))},Qg.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),By(2)):(this.c.info("Failed to ping google.com"),By(1))},(Qg=Db.prototype).ta=function(){},Qg.sa=function(){},Qg.ra=function(){},Qg.qa=function(){},Qg.Ja=function(){},Lb.prototype.a=function(t,e){return new Mb(t,e)},cm(Mb,dy),Mb.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;By(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Rb(t,null,t.fa),_b(t)},Mb.prototype.close=function(){mb(this.a)},Mb.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,bb(this.a,e)}else this.l?((e={}).__data__=gy(t),bb(this.a,e)):bb(this.a,t)},Mb.prototype.G=function(){this.a.f=null,delete this.f,mb(this.a),delete this.a,Mb.X.G.call(this)},cm(Fb,Xy),cm(Ub,Zy),cm(Vb,Db),Vb.prototype.ta=function(){fy(this.a,"a")},Vb.prototype.sa=function(t){fy(this.a,new Fb(t))},Vb.prototype.ra=function(t){fy(this.a,new Ub(t))},Vb.prototype.qa=function(){fy(this.a,"b")},Lb.prototype.createWebChannel=Lb.prototype.a,Mb.prototype.send=Mb.prototype.h,Mb.prototype.open=Mb.prototype.g,Mb.prototype.close=Mb.prototype.close,Ky.NO_ERROR=0,Ky.TIMEOUT=8,Ky.HTTP_ERROR=6,Gy.COMPLETE="complete",Qy.EventType=Yy,Yy.OPEN="a",Yy.CLOSE="b",Yy.ERROR="c",Yy.MESSAGE="d",dy.prototype.listen=dy.prototype.va,nb.prototype.listenOnce=nb.prototype.wa,nb.prototype.getLastError=nb.prototype.Qa,nb.prototype.getLastErrorCode=nb.prototype.ua,nb.prototype.getStatus=nb.prototype.W,nb.prototype.getResponseJson=nb.prototype.Pa,nb.prototype.getResponseText=nb.prototype.$,nb.prototype.send=nb.prototype.ba;var qb=Ky,zb=Gy,Bb=My,Wb=Qy,Hb=nb,Kb=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Kb.o=-1;var Gb={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Jb=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(gc.c)(e,t),e}(Error),Qb=new Kg.b("@firebase/firestore");function $b(){return Qb.logLevel}function Yb(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Qb.logLevel<=Kg.a.DEBUG){var r=e.map(t_);Qb.debug.apply(Qb,Object(gc.g)(["Firestore (8.6.2): "+t],r))}}function Xb(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Qb.logLevel<=Kg.a.ERROR){var r=e.map(t_);Qb.error.apply(Qb,Object(gc.g)(["Firestore (8.6.2): "+t],r))}}function Zb(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Qb.logLevel<=Kg.a.WARN){var r=e.map(t_);Qb.warn.apply(Qb,Object(gc.g)(["Firestore (8.6.2): "+t],r))}}function t_(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(Jx){return t}}function e_(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.6.2) INTERNAL ASSERTION FAILED: "+t;throw Xb(e),new Error(e)}function n_(t,e){t||e_()}function r_(t,e){return t}function i_(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var o_=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=i_(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function s_(t,e){return t<e?-1:t>e?1:0}function a_(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function u_(t){return t+"\0"}var c_=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Jb(Gb.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Jb(Gb.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Jb(Gb.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Jb(Gb.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?s_(this.nanoseconds,t.nanoseconds):s_(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),l_=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new c_(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function h_(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function d_(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function f_(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var p_=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&e_(),void 0===n?n=t.length-e:n>t.length-e&&e_(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),g_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(gc.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Jb(Gb.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(p_),m_=/^[_a-zA-Z][_a-zA-Z0-9]*$/,y_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(gc.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return m_.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Jb(Gb.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Jb(Gb.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Jb(Gb.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Jb(Gb.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(p_),v_=function(){function t(t){this.fields=t,t.sort(y_.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return a_(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),b_=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return s_(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();b_.EMPTY_BYTE_STRING=new b_("");var __=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function w_(t){if(n_(!!t),"string"==typeof t){var e=0,n=__.exec(t);if(n_(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:O_(t.seconds),nanos:O_(t.nanos)}}function O_(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function S_(t){return"string"==typeof t?b_.fromBase64String(t):b_.fromUint8Array(t)}function C_(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function E_(t){var e=w_(t.mapValue.fields.__local_write_time__.timestampValue);return new c_(e.seconds,e.nanos)}function T_(t){return null==t}function I_(t){return 0===t&&1/t==-1/0}function k_(t){return"number"==typeof t&&Number.isInteger(t)&&!I_(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var x_=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(g_.fromString(e))},t.fromName=function(e){return new t(g_.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===g_.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return g_.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new g_(e.slice()))},t}();function A_(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?C_(t)?4:10:e_()}function N_(t,e){var n=A_(t);if(n!==A_(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return E_(t).isEqual(E_(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=w_(t.timestampValue),r=w_(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return S_(t.bytesValue).isEqual(S_(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return O_(t.geoPointValue.latitude)===O_(e.geoPointValue.latitude)&&O_(t.geoPointValue.longitude)===O_(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return O_(t.integerValue)===O_(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=O_(t.doubleValue),r=O_(e.doubleValue);return n===r?I_(n)===I_(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return a_(t.arrayValue.values||[],e.arrayValue.values||[],N_);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(h_(n)!==h_(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!N_(n[i],r[i])))return!1;return!0}(t,e);default:return e_()}}function j_(t,e){return void 0!==(t.values||[]).find((function(t){return N_(t,e)}))}function R_(t,e){var n=A_(t),r=A_(e);if(n!==r)return s_(n,r);switch(n){case 0:return 0;case 1:return s_(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=O_(t.integerValue||t.doubleValue),r=O_(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return P_(t.timestampValue,e.timestampValue);case 4:return P_(E_(t),E_(e));case 5:return s_(t.stringValue,e.stringValue);case 6:return function(t,e){var n=S_(t),r=S_(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=s_(n[i],r[i]);if(0!==o)return o}return s_(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=s_(O_(t.latitude),O_(e.latitude));return 0!==n?n:s_(O_(t.longitude),O_(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=R_(n[i],r[i]);if(o)return o}return s_(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=s_(r[s],o[s]);if(0!==a)return a;var u=R_(n[r[s]],i[o[s]]);if(0!==u)return u}return s_(r.length,o.length)}(t.mapValue,e.mapValue);default:throw e_()}}function P_(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return s_(t,e);var n=w_(t),r=w_(e),i=s_(n.seconds,r.seconds);return 0!==i?i:s_(n.nanos,r.nanos)}function D_(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=w_(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?S_(e.bytesValue).toBase64():"referenceValue"in e?x_.fromName(e.referenceValue).toString():"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++)r?r=!1:n+=",",n+=t(o[i]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=s+":"+t(e.fields[s])}return n+"}"}(e.mapValue):e_();var n}(t)}function L_(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function M_(t){return!!t&&"integerValue"in t}function F_(t){return!!t&&"arrayValue"in t}function U_(t){return!!t&&"nullValue"in t}function V_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function q_(t){return!!t&&"mapValue"in t}var z_=function(){function t(t){this.overlayMap=new Map,this.partialValue=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){return t.extractNestedValue(this.buildProto(),e)},t.prototype.toProto=function(){return this.field(y_.emptyPath())},t.prototype.set=function(t,e){this.setOverlay(t,e)},t.prototype.setAll=function(t){var e=this;t.forEach((function(t,n){t?e.set(n,t):e.delete(n)}))},t.prototype.delete=function(t){this.setOverlay(t,null)},t.prototype.isEqual=function(t){return N_(this.buildProto(),t.buildProto())},t.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===A_(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.applyOverlay=function(e,n){var r=this,i=!1,o=t.extractNestedValue(this.partialValue,e),s=q_(o)?Object.assign({},o.mapValue.fields):{};return n.forEach((function(t,n){if(t instanceof Map){var o=r.applyOverlay(e.child(n),t);null!=o&&(s[n]=o,i=!0)}else null!==t?(s[n]=t,i=!0):s.hasOwnProperty(n)&&(delete s[n],i=!0)})),i?{mapValue:{fields:s}}:null},t.prototype.buildProto=function(){var t=this.applyOverlay(y_.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},t.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!q_(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.clone=function(){return new t(this.buildProto())},t}();function B_(t){var e=[];return d_(t.fields||{},(function(t,n){var r=new y_([t]);if(q_(n)){var i=B_(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)})),new v_(e)}var W_=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,l_.min(),z_.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,z_.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,z_.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=z_.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=z_.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),H_=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function K_(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new H_(t,e,n,r,i,o,s)}function G_(t){var e=r_(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+D_(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),T_(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=sw(e.startAt)),e.endAt&&(n+="|ub:",n+=sw(e.endAt)),e.h=n}return e.h}function J_(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!uw(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!N_(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!lw(t.startAt,e.startAt)&&lw(t.endAt,e.endAt)}function Q_(t){return x_.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var $_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(gc.c)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Y_(t,n,r):"array-contains"===n?new ew(t,r):"in"===n?new nw(t,r):"not-in"===n?new rw(t,r):"array-contains-any"===n?new iw(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new X_(t,n):new Z_(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(R_(e,this.value)):null!==e&&A_(this.value)===A_(e)&&this.m(R_(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return e_()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Y_=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=x_.fromName(r.referenceValue),i}return Object(gc.c)(e,t),e.prototype.matches=function(t){var e=x_.comparator(t.key,this.key);return this.m(e)},e}($_),X_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=tw(0,n),r}return Object(gc.c)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}($_),Z_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=tw(0,n),r}return Object(gc.c)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}($_);function tw(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return x_.fromName(t.referenceValue)}))}var ew=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(gc.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return F_(e)&&j_(e.arrayValue,this.value)},e}($_),nw=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(gc.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&j_(this.value.arrayValue,e)},e}($_),rw=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(gc.c)(e,t),e.prototype.matches=function(t){if(j_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!j_(this.value.arrayValue,e)},e}($_),iw=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(gc.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!F_(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return j_(e.value.arrayValue,t)}))},e}($_),ow=function(t,e){this.position=t,this.before=e};function sw(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return D_(t)})).join(",")}var aw=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function uw(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function cw(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?x_.comparator(x_.fromName(s.referenceValue),n.key):R_(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function lw(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!N_(t.position[n],e.position[n]))return!1;return!0}var hw=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function dw(t,e,n,r,i,o,s,a){return new hw(t,e,n,r,i,o,s,a)}function fw(t){return new hw(t)}function pw(t){return!T_(t.limit)&&"F"===t.limitType}function gw(t){return!T_(t.limit)&&"L"===t.limitType}function mw(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function yw(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function vw(t){return null!==t.collectionGroup}function bw(t){var e=r_(t);if(null===e.p){e.p=[];var n=yw(e),r=mw(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new aw(n)),e.p.push(new aw(y_.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new aw(y_.keyField(),u))}}}return e.p}function _w(t){var e=r_(t);if(!e.T)if("F"===e.limitType)e.T=K_(e.path,e.collectionGroup,bw(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=bw(e);r<i.length;r++){var o=i[r];n.push(new aw(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new ow(e.endAt.position,!e.endAt.before):null,a=e.startAt?new ow(e.startAt.position,!e.startAt.before):null;e.T=K_(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function ww(t,e,n){return new hw(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ow(t,e){return J_(_w(t),_w(e))&&t.limitType===e.limitType}function Sw(t){return G_(_w(t))+"|lt:"+t.limitType}function Cw(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+D_(e.value);var e})).join(", ")+"]"),T_(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+sw(t.startAt)),t.endAt&&(e+=", endAt: "+sw(t.endAt)),"Target("+e+")"}(_w(t))+"; limitType="+t.limitType+")"}function Ew(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):x_.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!cw(t.startAt,bw(t),e)||t.endAt&&cw(t.endAt,bw(t),e))}(t,e)}function Tw(t){return function(e,n){for(var r=!1,i=0,o=bw(t);i<o.length;i++){var s=o[i],a=Iw(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function Iw(t,e,n){var r=t.field.isKeyField()?x_.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?R_(r,i):e_()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return e_()}}function kw(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:I_(e)?"-0":e}}function xw(t){return{integerValue:""+t}}function Aw(t,e){return k_(e)?xw(e):kw(t,e)}var Nw=function(){this._=void 0};function jw(t,e,n){return t instanceof Dw?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Lw?Mw(t,e):t instanceof Fw?Uw(t,e):function(t,e){var n=Pw(t,e),r=qw(n)+qw(t.A);return M_(n)&&M_(t.A)?xw(r):kw(t.R,r)}(t,e)}function Rw(t,e,n){return t instanceof Lw?Mw(t,e):t instanceof Fw?Uw(t,e):n}function Pw(t,e){return t instanceof Vw?M_(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Dw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(gc.c)(e,t),e}(Nw),Lw=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(gc.c)(e,t),e}(Nw);function Mw(t,e){for(var n=zw(e),r=function(t){n.some((function(e){return N_(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Fw=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(gc.c)(e,t),e}(Nw);function Uw(t,e){for(var n=zw(e),r=function(t){n=n.filter((function(e){return!N_(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Vw=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(gc.c)(e,t),e}(Nw);function qw(t){return O_(t.integerValue||t.doubleValue)}function zw(t){return F_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Bw=function(t,e){this.field=t,this.transform=e},Ww=function(t,e){this.version=t,this.transformResults=e},Hw=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Kw(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Gw=function(){};function Jw(t,e,n){t instanceof Zw?function(t,e,n){var r=t.value.clone(),i=nO(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof tO?function(t,e,n){if(Kw(t.precondition,e)){var r=nO(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(eO(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Qw(t,e,n){t instanceof Zw?function(t,e,n){if(Kw(t.precondition,e)){var r=t.value.clone(),i=rO(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Xw(e),r).setHasLocalMutations()}}(t,e,n):t instanceof tO?function(t,e,n){if(Kw(t.precondition,e)){var r=rO(t.fieldTransforms,n,e),i=e.data;i.setAll(eO(t)),i.setAll(r),e.convertToFoundDocument(Xw(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Kw(t.precondition,e)&&e.convertToNoDocument(l_.min())}(t,e)}function $w(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=Pw(o.transform,s||null);null!=a&&(null==n&&(n=z_.empty()),n.set(o.field,a))}return n||null}function Yw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&a_(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Lw&&e instanceof Lw||t instanceof Fw&&e instanceof Fw?a_(t.elements,e.elements,N_):t instanceof Vw&&e instanceof Vw?N_(t.A,e.A):t instanceof Dw&&e instanceof Dw}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Xw(t){return t.isFoundDocument()?t.version:l_.min()}var Zw=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(gc.c)(e,t),e}(Gw),tO=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(gc.c)(e,t),e}(Gw);function eO(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function nO(t,e,n){var r=new Map;n_(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Rw(s,a,n[i]))}return r}function rO(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,jw(a,u,e))}return r}var iO,oO,sO=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(gc.c)(e,t),e}(Gw),aO=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(gc.c)(e,t),e}(Gw),uO=function(t){this.count=t};function cO(t){switch(t){case Gb.OK:return e_();case Gb.CANCELLED:case Gb.UNKNOWN:case Gb.DEADLINE_EXCEEDED:case Gb.RESOURCE_EXHAUSTED:case Gb.INTERNAL:case Gb.UNAVAILABLE:case Gb.UNAUTHENTICATED:return!1;case Gb.INVALID_ARGUMENT:case Gb.NOT_FOUND:case Gb.ALREADY_EXISTS:case Gb.PERMISSION_DENIED:case Gb.FAILED_PRECONDITION:case Gb.ABORTED:case Gb.OUT_OF_RANGE:case Gb.UNIMPLEMENTED:case Gb.DATA_LOSS:return!0;default:return e_()}}function lO(t){if(void 0===t)return Xb("GRPC error has no .code"),Gb.UNKNOWN;switch(t){case iO.OK:return Gb.OK;case iO.CANCELLED:return Gb.CANCELLED;case iO.UNKNOWN:return Gb.UNKNOWN;case iO.DEADLINE_EXCEEDED:return Gb.DEADLINE_EXCEEDED;case iO.RESOURCE_EXHAUSTED:return Gb.RESOURCE_EXHAUSTED;case iO.INTERNAL:return Gb.INTERNAL;case iO.UNAVAILABLE:return Gb.UNAVAILABLE;case iO.UNAUTHENTICATED:return Gb.UNAUTHENTICATED;case iO.INVALID_ARGUMENT:return Gb.INVALID_ARGUMENT;case iO.NOT_FOUND:return Gb.NOT_FOUND;case iO.ALREADY_EXISTS:return Gb.ALREADY_EXISTS;case iO.PERMISSION_DENIED:return Gb.PERMISSION_DENIED;case iO.FAILED_PRECONDITION:return Gb.FAILED_PRECONDITION;case iO.ABORTED:return Gb.ABORTED;case iO.OUT_OF_RANGE:return Gb.OUT_OF_RANGE;case iO.UNIMPLEMENTED:return Gb.UNIMPLEMENTED;case iO.DATA_LOSS:return Gb.DATA_LOSS;default:return e_()}}(oO=iO||(iO={}))[oO.OK=0]="OK",oO[oO.CANCELLED=1]="CANCELLED",oO[oO.UNKNOWN=2]="UNKNOWN",oO[oO.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oO[oO.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oO[oO.NOT_FOUND=5]="NOT_FOUND",oO[oO.ALREADY_EXISTS=6]="ALREADY_EXISTS",oO[oO.PERMISSION_DENIED=7]="PERMISSION_DENIED",oO[oO.UNAUTHENTICATED=16]="UNAUTHENTICATED",oO[oO.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oO[oO.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oO[oO.ABORTED=10]="ABORTED",oO[oO.OUT_OF_RANGE=11]="OUT_OF_RANGE",oO[oO.UNIMPLEMENTED=12]="UNIMPLEMENTED",oO[oO.INTERNAL=13]="INTERNAL",oO[oO.UNAVAILABLE=14]="UNAVAILABLE",oO[oO.DATA_LOSS=15]="DATA_LOSS";var hO=function(){function t(t,e){this.comparator=t,this.root=e||fO.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,fO.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fO.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new dO(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new dO(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new dO(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new dO(this.root,t,this.comparator,!0)},t}(),dO=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),fO=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw e_();if(this.right.isRed())throw e_();var t=this.left.check();if(t!==this.right.check())throw e_();return t+(this.isRed()?0:1)},t}();fO.EMPTY=null,fO.RED=!0,fO.BLACK=!1,fO.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw e_()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw e_()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw e_()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw e_()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw e_()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new fO(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var pO=function(){function t(t){this.comparator=t,this.data=new hO(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new gO(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new gO(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),gO=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),mO=new hO(x_.comparator);function yO(){return mO}var vO=new hO(x_.comparator);function bO(){return vO}var _O=new hO(x_.comparator);function wO(){return _O}var OO=new pO(x_.comparator);function SO(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=OO,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var CO=new pO(s_);function EO(){return CO}var TO=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,IO.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(l_.min(),r,EO(),yO(),SO())},t}(),IO=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(b_.EMPTY_BYTE_STRING,n,SO(),SO(),SO())},t}(),kO=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},xO=function(t,e){this.targetId=t,this.V=e},AO=function(t,e,n,r){void 0===n&&(n=b_.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},NO=function(){function t(){this.S=0,this.D=PO(),this.C=b_.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.$=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=SO(),e=SO(),n=SO();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:e_()}})),new IO(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=PO()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),jO=function(){function t(t){this.W=t,this.G=new Map,this.H=yO(),this.J=RO(),this.Y=new pO(s_)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.$(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.$(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.$(t.resumeToken));break;default:e_()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Q_(i))if(0===n){var o=new x_(i.path);this.tt(e,o,W_.newNoDocument(o,l_.min()))}else n_(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.at=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&Q_(o.target)){var s=new x_(o.target.path);null!==e.H.get(s)||e.ut(i,s)||e.tt(i,s,W_.newNoDocument(s,t))}r.O&&(n.set(i,r.M()),r.L())}}));var r=SO();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new TO(t,n,this.Y,this.H,r);return this.H=yO(),this.J=RO(),this.Y=new pO(s_),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.ut(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.ut(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new NO,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new pO(s_),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Yb("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new NO),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.ut=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function RO(){return new hO(x_.comparator)}function PO(){return new hO(x_.comparator)}var DO={asc:"ASCENDING",desc:"DESCENDING"},LO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MO=function(t,e){this.databaseId=t,this.I=e};function FO(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function UO(t,e){return t.I?e.toBase64():e.toUint8Array()}function VO(t,e){return FO(t,e.toTimestamp())}function qO(t){return n_(!!t),l_.fromTimestamp(function(t){var e=w_(t);return new c_(e.seconds,e.nanos)}(t))}function zO(t,e){return function(t){return new g_(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function BO(t){var e=g_.fromString(t);return n_(dS(e)),e}function WO(t,e){return zO(t.databaseId,e.path)}function HO(t,e){var n=BO(e);if(n.get(1)!==t.databaseId.projectId)throw new Jb(Gb.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Jb(Gb.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new x_(QO(n))}function KO(t,e){return zO(t.databaseId,e)}function GO(t){var e=BO(t);return 4===e.length?g_.emptyPath():QO(e)}function JO(t){return new g_(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function QO(t){return n_(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function $O(t,e,n){return{name:WO(t,e),fields:n.toProto().mapValue.fields}}function YO(t,e,n){var r=HO(t,e.name),i=qO(e.updateTime),o=new z_({mapValue:{fields:e.fields}}),s=W_.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function XO(t,e){var n;if(e instanceof Zw)n={update:$O(t,e.key,e.value)};else if(e instanceof sO)n={delete:WO(t,e.key)};else if(e instanceof tO)n={update:$O(t,e.key,e.data),updateMask:hS(e.fieldMask)};else{if(!(e instanceof aO))return e_();n={verify:WO(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Dw)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Lw)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Fw)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Vw)return{fieldPath:e.field.canonicalString(),increment:n.A};throw e_()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:VO(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:e_()}(t,e.precondition)),n}function ZO(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Hw.updateTime(qO(t.updateTime)):void 0!==t.exists?Hw.exists(t.exists):Hw.none()}(e.currentDocument):Hw.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;"setToServerValue"in e?(n_("REQUEST_TIME"===e.setToServerValue),n=new Dw):"appendMissingElements"in e?n=new Lw(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Fw(e.removeAllFromArray.values||[]):"increment"in e?n=new Vw(t,e.increment):e_();var r=y_.fromServerFormat(e.fieldPath);return new Bw(r,n)}(t,e)})):[];if(e.update){var i=HO(t,e.update.name),o=new z_({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new v_((t.fieldPaths||[]).map((function(t){return y_.fromServerFormat(t)})))}(e.updateMask);return new tO(i,o,s,n,r)}return new Zw(i,o,n,r)}if(e.delete){var a=HO(t,e.delete);return new sO(a,n)}if(e.verify){var u=HO(t,e.verify);return new aO(u,n)}return e_()}function tS(t,e){return{documents:[KO(t,e.path)]}}function eS(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=KO(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=KO(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(V_(t.value))return{unaryFilter:{field:aS(t.field),op:"IS_NAN"}};if(U_(t.value))return{unaryFilter:{field:aS(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(V_(t.value))return{unaryFilter:{field:aS(t.field),op:"IS_NOT_NAN"}};if(U_(t.value))return{unaryFilter:{field:aS(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:aS(t.field),op:sS(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:aS(t.field),direction:oS(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||T_(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=rS(e.startAt)),e.endAt&&(n.structuredQuery.endAt=rS(e.endAt)),n}function nS(t){var e=GO(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){n_(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=function t(e){return e?void 0!==e.unaryFilter?[lS(e)]:void 0!==e.fieldFilter?[cS(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):e_():[]}(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new aw(uS(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return T_(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=iS(n.startAt));var l=null;return n.endAt&&(l=iS(n.endAt)),dw(e,i,a,s,u,"F",c,l)}function rS(t){return{before:t.before,values:t.position}}function iS(t){return new ow(t.values||[],!!t.before)}function oS(t){return DO[t]}function sS(t){return LO[t]}function aS(t){return{fieldPath:t.canonicalString()}}function uS(t){return y_.fromServerFormat(t.fieldPath)}function cS(t){return $_.create(uS(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return e_()}}(t.fieldFilter.op),t.fieldFilter.value)}function lS(t){switch(t.unaryFilter.op){case"IS_NAN":var e=uS(t.unaryFilter.field);return $_.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=uS(t.unaryFilter.field);return $_.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=uS(t.unaryFilter.field);return $_.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=uS(t.unaryFilter.field);return $_.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return e_()}}function hS(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function dS(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function fS(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=gS(e)),e=pS(t.get(n),e);return gS(e)}function pS(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function gS(t){return t+"\x01\x01"}function mS(t){var e=t.length;if(n_(e>=2),2===e)return n_("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),g_.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&e_(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:e_()}o=s+2}return new g_(r)}var yS=function(t,e){this.seconds=t,this.nanoseconds=e},vS=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};vS.store="owner",vS.key="owner";var bS=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};bS.store="mutationQueues",bS.keyPath="userId";var _S=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};_S.store="mutations",_S.keyPath="batchId",_S.userMutationsIndex="userMutationsIndex",_S.userMutationsKeyPath=["userId","batchId"];var wS=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,fS(e)]},t.key=function(t,e,n){return[t,fS(e),n]},t}();wS.store="documentMutations",wS.PLACEHOLDER=new wS;var OS=function(t,e){this.path=t,this.readTime=e},SS=function(t,e){this.path=t,this.version=e},CS=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};CS.store="remoteDocuments",CS.readTimeIndex="readTimeIndex",CS.readTimeIndexPath="readTime",CS.collectionReadTimeIndex="collectionReadTimeIndex",CS.collectionReadTimeIndexPath=["parentPath","readTime"];var ES=function(t){this.byteSize=t};ES.store="remoteDocumentGlobal",ES.key="remoteDocumentGlobalKey";var TS=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};TS.store="targets",TS.keyPath="targetId",TS.queryTargetsIndexName="queryTargetsIndex",TS.queryTargetsKeyPath=["canonicalId","targetId"];var IS=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};IS.store="targetDocuments",IS.keyPath=["targetId","path"],IS.documentTargetsIndex="documentTargetsIndex",IS.documentTargetsKeyPath=["path","targetId"];var kS=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};kS.key="targetGlobalKey",kS.store="targetGlobal";var xS=function(t,e){this.collectionId=t,this.parent=e};xS.store="collectionParents",xS.keyPath=["collectionId","parent"];var AS=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};AS.store="clientMetadata",AS.keyPath="clientId";var NS=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};NS.store="bundles",NS.keyPath="bundleId";var jS=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};jS.store="namedQueries",jS.keyPath="name";var RS=Object(gc.g)(Object(gc.g)([],Object(gc.g)(Object(gc.g)([],Object(gc.g)(Object(gc.g)([],Object(gc.g)(Object(gc.g)([],[bS.store,_S.store,wS.store,CS.store,TS.store,vS.store,kS.store,IS.store]),[AS.store])),[ES.store])),[xS.store])),[NS.store,jS.store]),PS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",DS=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),LS=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},MS=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&e_(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),FS=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new LS,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new qS(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=KS(e.target.error);n.ft.reject(new qS(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new qS(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Yb("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new BS(e)},t}(),US=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Object(Tp.p)())&&Xb("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Yb("SimpleDb","Removing database:",t),WS(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Object(Tp.p)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Object(gc.b)(this,void 0,void 0,(function(){var e,n=this;return Object(gc.d)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Yb("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new qS(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Jb(Gb.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new qS(t,n))},i.onupgradeneeded=function(t){Yb("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next((function(){Yb("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(gc.b)(this,void 0,void 0,(function(){var i,o,s,a,u;return Object(gc.d)(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(gc.d)(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=FS.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),MS.reject(t)})).toPromise(),u={},s.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return Yb("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),VS=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return WS(this.Pt.delete())},t}(),qS=function(t){function e(e,n){var r=this;return(r=t.call(this,Gb.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(gc.c)(e,t),e}(Jb);function zS(t){return"IndexedDbTransactionError"===t.name}var BS=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Yb("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Yb("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),WS(n)},t.prototype.add=function(t){return Yb("SimpleDb","ADD",this.store.name,t,t),WS(this.store.add(t))},t.prototype.get=function(t){var e=this;return WS(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Yb("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Yb("SimpleDb","DELETE",this.store.name,t),WS(this.store.delete(t))},t.prototype.count=function(){return Yb("SimpleDb","COUNT",this.store.name),WS(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ft=function(t,e){Yb("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.Ot=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.$t=function(t){var e=this.cursor({});return new MS((function(n,r){e.onerror=function(t){var e=KS(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new MS((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new VS(i),s=e(i.primaryKey,i.value,o);if(s instanceof MS){var a=s.catch((function(t){return o.done(),MS.reject(t)}));n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return MS.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function WS(t){return new MS((function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=KS(t.target.error);n(e)}}))}var HS=!1;function KS(t){var e=US._t(Object(Tp.p)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Jb("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return HS||(HS=!0,setTimeout((function(){throw r}),0)),r}}return t}var GS=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(gc.c)(e,t),e}(DS);function JS(t,e){var n=r_(t);return US.It(n.Mt,e)}var QS=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Jw(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Qw(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Qw(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(l_.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),SO())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&a_(this.mutations,t.mutations,(function(t,e){return Yw(t,e)}))&&a_(this.baseMutations,t.baseMutations,(function(t,e){return Yw(t,e)}))},t}(),$S=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){n_(e.mutations.length===r.length);for(var i=wO(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),YS=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=l_.min()),void 0===o&&(o=l_.min()),void 0===s&&(s=b_.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),XS=function(t){this.Lt=t};function ZS(t,e){if(e.document)return YO(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=x_.fromSegments(e.noDocument.path),r=iC(e.noDocument.readTime),i=W_.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=x_.fromSegments(e.unknownDocument.path);return r=iC(e.unknownDocument.version),W_.newUnknownDocument(o,r)}return e_()}function tC(t,e,n){var r=eC(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:WO(t,e.key),fields:e.data.toProto().mapValue.fields,updateTime:FO(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new CS(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=rC(e.version);return s=e.hasCommittedMutations,new CS(null,new OS(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=rC(e.version);return new CS(new SS(c,l),null,null,!0,r,i)}return e_()}function eC(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function nC(t){var e=new c_(t[0],t[1]);return l_.fromTimestamp(e)}function rC(t){var e=t.toTimestamp();return new yS(e.seconds,e.nanoseconds)}function iC(t){var e=new c_(t.seconds,t.nanoseconds);return l_.fromTimestamp(e)}function oC(t,e){for(var n=(e.baseMutations||[]).map((function(e){return ZO(t.Lt,e)})),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map((function(e){return ZO(t.Lt,e)})),o=c_.fromMillis(e.localWriteTimeMs);return new QS(e.batchId,o,n,i)}function sC(t){var e,n,r=iC(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?iC(t.lastLimboFreeSnapshotVersion):l_.min();return void 0!==t.query.documents?(n_(1===(n=t.query).documents.length),e=_w(fw(GO(n.documents[0])))):e=function(t){return _w(nS(t))}(t.query),new YS(e,t.targetId,0,t.lastListenSequenceNumber,r,i,b_.fromBase64String(t.resumeToken))}function aC(t,e){var n,r=rC(e.snapshotVersion),i=rC(e.lastLimboFreeSnapshotVersion);n=Q_(e.target)?tS(t.Lt,e.target):eS(t.Lt,e.target);var o=e.resumeToken.toBase64();return new TS(e.targetId,G_(e.target),r,o,e.sequenceNumber,i,n)}function uC(t){var e=nS({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?ww(e,e.limit,"L"):e}var cC=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return lC(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:iC(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return lC(t).put({bundleId:(n=e).id,createTime:rC(qO(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return hC(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:uC(e.bundledQuery),readTime:iC(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return hC(t).put(function(t){return{name:t.name,readTime:rC(qO(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function lC(t){return JS(t,NS.store)}function hC(t){return JS(t,jS.store)}var dC=function(){function t(){this.Bt=new fC}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),MS.resolve()},t.prototype.getCollectionParents=function(t,e){return MS.resolve(this.Bt.getEntries(e))},t}(),fC=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new pO(g_.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new pO(g_.comparator)).toArray()},t}(),pC=function(){function t(){this.qt=new fC}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:fS(i)};return gC(t).put(o)}return MS.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[u_(e),""],!1,!0);return gC(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(mS(o.parent))}return n}))},t}();function gC(t){return JS(t,xS.store)}var mC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},yC=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function vC(t,e,n){var r=t.store(_S.store),i=t.store(wS.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Ot({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){n_(1===a)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=wS.key(e,d.key.path,n.batchId);o.push(i.delete(f)),c.push(d.key)}return MS.waitFor(o).next((function(){return c}))}function bC(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw e_();e=t.noDocument}return JSON.stringify(e).length}yC.DEFAULT_COLLECTION_PERCENTILE=10,yC.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yC.DEFAULT=new yC(41943040,yC.DEFAULT_COLLECTION_PERCENTILE,yC.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yC.DISABLED=new yC(-1,0,0);var _C=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return n_(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return OC(t).Ot({index:_S.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=SC(t),s=OC(t);return s.add({}).next((function(a){n_("number"==typeof a);for(var u=new QS(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return XO(t.Lt,e)})),i=n.mutations.map((function(e){return XO(t.Lt,e)}));return new _S(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new pO((function(t,e){return s_(t.canonicalString(),e.canonicalString())})),d=0,f=r;d<f.length;d++){var p=f[d],g=wS.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,wS.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Qt[a]=u.keys()})),MS.waitFor(l).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return OC(t).get(e).next((function(t){return t?(n_(t.userId===n.userId),oC(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?MS.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return OC(t).Ot({index:_S.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(n_(e.batchId>=r),o=oC(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return OC(t).Ot({index:_S.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return OC(t).Nt(_S.userMutationsIndex,n).next((function(t){return t.map((function(t){return oC(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=wS.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return SC(t).Ot({range:i},(function(r,i,s){var a=r[0],u=r[2],c=mS(r[1]);if(a===n.userId&&e.path.isEqual(c))return OC(t).get(u).next((function(t){if(!t)throw e_();n_(t.userId===n.userId),o.push(oC(n.R,t))}));s.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new pO(s_),i=[];return e.forEach((function(e){var o=wS.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=SC(t).Ot({range:s},(function(t,i,o){var s=t[0],a=t[2],u=mS(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()}));i.push(a)})),MS.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=wS.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new pO(s_);return SC(t).Ot({range:s},(function(t,e,o){var s=t[0],u=t[2],c=mS(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()})).next((function(){return n.Wt(t,a)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(OC(t).get(e).next((function(t){if(null===t)throw e_();n_(t.userId===n.userId),r.push(oC(n.R,t))})))})),MS.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return vC(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),MS.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return MS.resolve();var r=IDBKeyRange.lowerBound(wS.prefixForUser(e.userId)),i=[];return SC(t).Ot({range:r},(function(t,n,r){if(t[0]===e.userId){var o=mS(t[1]);i.push(o)}else r.done()})).next((function(){n_(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return wC(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return CC(t).get(this.userId).next((function(t){return t||new bS(e.userId,-1,"")}))},t}();function wC(t,e,n){var r=wS.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return SC(t).Ot({range:o,kt:!0},(function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()})).next((function(){return s}))}function OC(t){return JS(t,_S.store)}function SC(t){return JS(t,wS.store)}function CC(t){return JS(t,bS.store)}var EC=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),TC=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new EC(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return l_.fromTimestamp(new c_(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return IC(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return n_(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return IC(t).Ot((function(s,a){var u=sC(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return MS.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return IC(t).Ot((function(t,n){var r=sC(n);e(r)}))},t.prototype.Xt=function(t){return kC(t).get(kS.key).next((function(t){return n_(null!==t),t}))},t.prototype.Zt=function(t,e){return kC(t).put(kS.key,e)},t.prototype.te=function(t,e){return IC(t).put(aC(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=G_(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return IC(t).Ot({range:r,index:TS.queryTargetsIndexName},(function(t,n,r){var o=sC(n);J_(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=xC(t);return e.forEach((function(e){var s=fS(e.path);i.push(o.put(new IS(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))})),MS.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=xC(t);return MS.forEach(e,(function(e){var o=fS(e.path);return MS.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=xC(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=xC(t),i=SO();return r.Ot({range:n,kt:!0},(function(t,e,n){var r=mS(t[1]),o=new x_(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=fS(e.path),r=IDBKeyRange.bound([n],[u_(n)],!1,!0),i=0;return xC(t).Ot({index:IS.documentTargetsIndex,kt:!0,range:r},(function(t,e,n){0!==t[0]&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return IC(t).get(e).next((function(t){return t?sC(t):null}))},t}();function IC(t){return JS(t,TS.store)}function kC(t){return JS(t,kS.store)}function xC(t){return JS(t,IS.store)}function AC(t){return Object(gc.b)(this,void 0,void 0,(function(){return Object(gc.d)(this,(function(e){if(t.code!==Gb.FAILED_PRECONDITION||t.message!==PS)throw t;return Yb("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function NC(t,e){var n=t[1],r=e[1],i=s_(t[0],e[0]);return 0===i?s_(n,r):i}var jC=function(){function t(t){this.ne=t,this.buffer=new pO(NC),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();NC(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),RC=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ae(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ae=function(t){var e=this,n=this.oe?3e5:6e4;Yb("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return Object(gc.b)(e,void 0,void 0,(function(){var e;return Object(gc.d)(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return zS(e=n.sent())?(Yb("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,AC(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ae(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),PC=function(){function t(t,e){this.ue=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ue.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return MS.resolve(Kb.o);var r=new jC(e);return this.ue.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ue.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ue.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ue.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Yb("LruGarbageCollector","Garbage collection skipped; disabled"),MS.resolve(mC)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Yb("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),mC):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ue.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(Yb("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),$b()<=Kg.a.DEBUG&&Yb("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),MS.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),DC=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new PC(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return LC(t,n)},t.prototype.removeReference=function(t,e,n){return LC(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return LC(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return CC(t).$t((function(r){return wC(t,r,e).next((function(t){return t&&(n=!0),MS.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(s,a){if(a<=e){var u=n._e(t,s).next((function(e){if(!e)return o++,r.getEntry(t,s).next((function(){return r.removeEntry(s),xC(t).delete([0,fS(s.path)])}))}));i.push(u)}})).next((function(){return MS.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return LC(t,e)},t.prototype.we=function(t,e){var n,r=xC(t),i=Kb.o;return r.Ot({index:IS.documentTargetsIndex},(function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Kb.o&&e(new x_(mS(n)),i),i=s,n=o):i=Kb.o})).next((function(){i!==Kb.o&&e(new x_(mS(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function LC(t,e){return xC(t).put(function(t,e){return new IS(0,fS(t.path),e)}(e,t.currentSequenceNumber))}var MC=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){d_(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}}))},t.prototype.isEmpty=function(){return f_(this.inner)},t}(),FC=function(){function t(){this.changes=new MC((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:l_.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:W_.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?MS.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),UC=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return zC(t).put(BC(e),n)},t.prototype.removeEntry=function(t,e){var n=zC(t),r=BC(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return zC(t).get(BC(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return zC(t).get(BC(e)).next((function(t){return{document:n.ye(e,t),size:bC(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=yO();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=yO(),i=new hO(x_.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,bC(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return MS.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return zC(t).Ot({range:r},(function(t,e,r){for(var s=x_.fromSegments(t);o&&x_.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=yO(),o=e.path.length+1,s={};if(n.isEqual(l_.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=eC(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=CS.collectionReadTimeIndex}return zC(t).Ot(s,(function(t,n,s){if(t.length===o){var a=ZS(r.R,n);e.path.isPrefixOf(a.key.path)?Ew(e,a)&&(i=i.insert(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new VC(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return qC(t).get(ES.key).next((function(t){return n_(!!t),t}))},t.prototype.me=function(t,e){return qC(t).put(ES.key,e)},t.prototype.ye=function(t,e){if(e){var n=ZS(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(l_.min()))return n}return W_.newInvalidDocument(t)},t}(),VC=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new MC((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Object(gc.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new pO((function(t,e){return s_(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=tC(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=bC(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=tC(e.Ie.R,W_.newNoDocument(o,l_.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),MS.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(FC);function qC(t){return JS(t,ES.store)}function zC(t){return JS(t,CS.store)}function BC(t){return t.path.toArray()}var WC=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;n_(n<r&&n>=0&&r<=11);var o=new FS("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(vS.store)}(t),function(t){t.createObjectStore(bS.store,{keyPath:bS.keyPath}),t.createObjectStore(_S.store,{keyPath:_S.keyPath,autoIncrement:!0}).createIndex(_S.userMutationsIndex,_S.userMutationsKeyPath,{unique:!0}),t.createObjectStore(wS.store)}(t),HC(t),function(t){t.createObjectStore(CS.store)}(t));var s=MS.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(IS.store),t.deleteObjectStore(TS.store),t.deleteObjectStore(kS.store)}(t),HC(t)),s=s.next((function(){return function(t){var e=t.store(kS.store),n=new kS(0,0,l_.min().toTimestamp(),0);return e.put(kS.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(_S.store).Nt().next((function(n){t.deleteObjectStore(_S.store),t.createObjectStore(_S.store,{keyPath:_S.keyPath,autoIncrement:!0}).createIndex(_S.userMutationsIndex,_S.userMutationsKeyPath,{unique:!0});var r=e.store(_S.store),i=n.map((function(t){return r.put(t)}));return MS.waitFor(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(AS.store,{keyPath:AS.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Re(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(ES.store)}(t),i.be(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ve(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(CS.store);e.createIndex(CS.readTimeIndex,CS.readTimeIndexPath,{unique:!1}),e.createIndex(CS.collectionReadTimeIndex,CS.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(NS.store,{keyPath:NS.keyPath})}(t),function(t){t.createObjectStore(jS.store,{keyPath:jS.keyPath})}(t)}))),s},t.prototype.be=function(t){var e=0;return t.store(CS.store).Ot((function(t,n){e+=bC(n)})).next((function(){var n=new ES(e);return t.store(ES.store).put(ES.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(bS.store),r=t.store(_S.store);return n.Nt().next((function(n){return MS.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(_S.userMutationsIndex,i).next((function(r){return MS.forEach(r,(function(r){n_(r.userId===n.userId);var i=oC(e.R,r);return vC(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(IS.store),n=t.store(CS.store);return t.store(kS.store).get(kS.key).next((function(t){var r=[];return n.Ot((function(n,i){var o=new g_(n),s=function(t){return[0,fS(t)]}(o);r.push(e.get(s).next((function(n){return n?MS.resolve():function(n){return e.put(new IS(0,fS(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return MS.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(xS.store,{keyPath:xS.keyPath});var n=e.store(xS.store),r=new fC,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:fS(i)})}};return e.store(CS.store).Ot({kt:!0},(function(t,e){var n=new g_(t);return i(n.popLast())})).next((function(){return e.store(wS.store).Ot({kt:!0},(function(t,e){var n=mS(t[1]);return i(n.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(TS.store);return n.Ot((function(t,r){var i=sC(r),o=aC(e.R,i);return n.put(o)}))},t}();function HC(t){t.createObjectStore(IS.store,{keyPath:IS.keyPath}).createIndex(IS.documentTargetsIndex,IS.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(TS.store,{keyPath:TS.keyPath}).createIndex(TS.queryTargetsIndexName,TS.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(kS.store)}var KC="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",GC=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Jb(Gb.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new DC(this,i),this.Le=n+"main",this.R=new XS(u),this.Be=new US(this.Le,11,new WC(this.R)),this.qe=new TC(this.referenceDelegate,this.R),this.Ut=new pC,this.Ue=function(t,e){return new UC(t,e)}(this.R,this.Ut),this.Qe=new cC,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&Xb("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Jb(Gb.FAILED_PRECONDITION,KC);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new Kb(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(gc.b)(e,void 0,void 0,(function(){return Object(gc.d)(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return Object(gc.b)(e,void 0,void 0,(function(){return Object(gc.d)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return Object(gc.b)(e,void 0,void 0,(function(){return Object(gc.d)(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return QC(e).put(new AS(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(zS(e))return Yb("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Yb("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return JC(t).get(vS.key).next((function(t){return MS.resolve(e.tn(t))}))},t.prototype.en=function(t){return QC(t).delete(this.clientId)},t.prototype.nn=function(){return Object(gc.b)(this,void 0,void 0,(function(){var t,e,n,r=this;return Object(gc.d)(this,(function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=JS(t,AS.store);return e.Nt().next((function(t){var n=r.rn(t,18e5),i=t.filter((function(t){return-1===n.indexOf(t)}));return MS.forEach(i,(function(t){return e.delete(t.clientId)})).next((function(){return i}))}))})).catch((function(){return[]}))]);case 1:if(t=i.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)this.Ke.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?MS.resolve(!0):JC(t).get(vS.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Jb(Gb.FAILED_PRECONDITION,KC);return!1}}return!(!e.networkEnabled||!e.inForeground)||QC(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))}))}))})).next((function(t){return e.isPrimary!==t&&Yb("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return Object(gc.b)(this,void 0,void 0,(function(){var t=this;return Object(gc.d)(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.an(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.un(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[vS.store,AS.store],(function(e){var n=new GS(e,Kb.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return QC(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return _C.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Yb("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",RS,(function(o){return r=new GS(o,i.Ne?i.Ne.next():Kb.o),"readwrite-primary"===e?i.Je(r).next((function(t){return!!t||i.Ye(r)})).next((function(e){if(!e)throw Xb("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable((function(){return i.Me(!1)})),new Jb(Gb.FAILED_PRECONDITION,PS);return n(r)})).next((function(t){return i.Ze(r).next((function(){return t}))})):i.dn(r).next((function(){return n(r)}))})).then((function(t){return r.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return JC(t).get(vS.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Jb(Gb.FAILED_PRECONDITION,KC)}))},t.prototype.Ze=function(t){var e=new vS(this.clientId,this.allowTabSynchronization,Date.now());return JC(t).put(vS.key,e)},t.yt=function(){return US.yt()},t.prototype.Xe=function(t){var e=this,n=JC(t);return n.get(vS.key).next((function(t){return e.tn(t)?(Yb("IndexedDbPersistence","Releasing primary lease."),n.delete(vS.key)):MS.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Xb("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.un=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.an(),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return Yb("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Xb("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.an=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Xb("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function JC(t){return JS(t,vS.store)}function QC(t){return JS(t,AS.store)}function $C(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var YC=function(t,e){this.progress=t,this.wn=e},XC=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return x_.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):vw(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new x_(e)).next((function(t){var e=bO();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=bO();return this.Ut.getCollectionParents(t,i).next((function(s){return MS.forEach(s,(function(s){var a=function(t,e){return new hw(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return o.Rn(t,i=e,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=W_.newInvalidDocument(c),r=r.insert(c,l)),Qw(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){Ew(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=SO(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof tO&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),ZC=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=SO(),i=SO(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),tE=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(l_.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var s=i.Cn(e,o);return(pw(e)||gw(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):($b()<=Kg.a.DEBUG&&Yb("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Cw(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return s.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new pO(Tw(t));return e.forEach((function(e,r){Ew(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return $b()<=Kg.a.DEBUG&&Yb("QueryEngine","Using full collection scan to execute query:",Cw(e)),this.Sn.getDocumentsMatchingQuery(t,e,l_.min())},t}(),eE=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new hO(s_),this.kn=new MC((function(t){return G_(t)}),J_),this.On=l_.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new XC(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},t}();function nE(t,e,n,r){return new eE(t,e,n,r)}function rE(t,e){return Object(gc.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(gc.d)(this,(function(s){switch(s.label){case 0:return n=r_(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new XC(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],s=SO(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var d=0,f=e;d<f.length;d++){var p=f[d];r.push(p.batchId);for(var g=0,m=p.mutations;g<m.length;g++)s=s.add(m[g].key)}return i.pn(t,s).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function iE(t,e){var n=r_(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=MS.resolve();return o.forEach((function(t){s=s.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);n_(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),s.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function oE(t){var e=r_(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function sE(t,e){var n=r_(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach((function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return n_(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}}));var a=yO();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),s.push(aE(t,o,e.documentUpdates,r,void 0).next((function(t){a=t}))),!r.isEqual(l_.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));s.push(u)}return MS.waitFor(s).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,a)})).next((function(){return a}))})).then((function(t){return n.Fn=i,t}))}function aE(t,e,n,r,i){var o=SO();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=yO();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(l_.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Yb("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}function uE(t,e){var n=r_(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function cE(t,e){var n=r_(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?MS.resolve(r=i):n.qe.allocateTargetId(t).next((function(i){return r=new YS(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function lE(t,e,n){return Object(gc.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(gc.d)(this,(function(a){switch(a.label){case 0:r=r_(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!zS(s=a.sent()))throw s;return Yb("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}}))}))}function hE(t,e,n){var r=r_(t),i=l_.min(),o=SO();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=r_(t),i=r.kn.get(n);return void 0!==i?MS.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,_w(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:l_.min(),n?o:SO())})).next((function(t){return{documents:t,Bn:o}}))}))}function dE(t,e){var n=r_(t),r=r_(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function fE(t){var e=r_(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=r_(t),i=yO(),o=eC(n),s=zC(e),a=IDBKeyRange.lowerBound(o,!0);return s.Ot({index:CS.readTimeIndex,range:a},(function(t,e){var n=ZS(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:nC(o)}}))}(e.$n,t,e.On)})).then((function(t){var n=t.wn;return e.On=t.readTime,n}))}function pE(t){return Object(gc.b)(this,void 0,void 0,(function(){var e;return Object(gc.d)(this,(function(n){return[2,(e=r_(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=zC(t),n=l_.min();return e.Ot({index:CS.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=nC(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.On=t}))]}))}))}function gE(t,e,n,r){return Object(gc.b)(this,void 0,void 0,(function(){var i,o,s,a,u,c,l,h,d,f;return Object(gc.d)(this,(function(p){switch(p.label){case 0:for(i=r_(t),o=SO(),s=yO(),a=wO(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Qn(l.metadata.readTime));return d=i.$n.newChangeBuffer({trackRemovals:!0}),[4,cE(i,function(t){return _w(fw(g_.fromString("__bundle__/docs/"+t)))}(r))];case 1:return f=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return aE(t,d,s,l_.min(),a).next((function(e){return d.apply(t),e})).next((function(e){return i.qe.removeMatchingKeysForTargetId(t,f.targetId).next((function(){return i.qe.addMatchingKeys(t,o,f.targetId)})).next((function(){return i.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}function mE(t,e,n){return void 0===n&&(n=SO()),Object(gc.b)(this,void 0,void 0,(function(){var r,i;return Object(gc.d)(this,(function(o){switch(o.label){case 0:return[4,cE(t,_w(uC(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=r_(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=qO(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var s=r.withResumeToken(b_.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next((function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.Qe.saveNamedQuery(t,e)}))}))]}}))}))}var yE=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return MS.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:qO(n.createTime)}),MS.resolve()},t.prototype.getNamedQuery=function(t,e){return MS.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:uC(t.bundledQuery),readTime:qO(t.readTime)}}(e)),MS.resolve()},t}(),vE=function(){function t(){this.Wn=new pO(bE.Gn),this.zn=new pO(bE.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new bE(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new bE(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new x_(new g_([])),r=new bE(n,t),i=new bE(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new x_(new g_([])),n=new bE(e,t),r=new bE(e,t+1),i=SO();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new bE(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),bE=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return x_.comparator(t.key,e.key)||s_(t.ns,e.ns)},t.Hn=function(t,e){return s_(t.ns,e.ns)||x_.comparator(t.key,e.key)},t}(),_E=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new pO(bE.Gn)}return t.prototype.checkEmpty=function(t){return MS.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new QS(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new bE(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return MS.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return MS.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return MS.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return MS.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return MS.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new bE(e,0),i=new bE(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),MS.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new pO(s_);return e.forEach((function(t){var e=new bE(t,0),i=new bE(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),MS.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;x_.isDocumentKey(i)||(i=i.child(""));var o=new bE(new x_(i),0),s=new pO(s_);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)}),o),MS.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;n_(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return MS.forEach(e.mutations,(function(i){var o=new bE(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new bE(e,0),r=this.rs.firstAfterOrEqual(n);return MS.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return MS.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),wE=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new hO(x_.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return MS.resolve(n?n.document.clone():W_.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=yO();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():W_.newInvalidDocument(t))})),MS.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=yO(),i=new x_(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||Ew(e,u)&&(r=r.insert(u.key,u.clone()))}return MS.resolve(r)},t.prototype.fs=function(t,e){return MS.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new OE(this)},t.prototype.getSize=function(t){return MS.resolve(this.size)},t}(),OE=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(gc.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),MS.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(FC),SE=function(){function t(t){this.persistence=t,this.ds=new MC((function(t){return G_(t)}),J_),this.lastRemoteSnapshotVersion=l_.min(),this.highestTargetId=0,this.ws=0,this._s=new vE,this.targetCount=0,this.ys=EC.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),MS.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return MS.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return MS.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),MS.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),MS.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new EC(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,MS.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),MS.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,MS.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)})),MS.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return MS.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return MS.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),MS.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),MS.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),MS.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return MS.resolve(n)},t.prototype.containsKey=function(t,e){return MS.resolve(this._s.containsKey(e))},t}(),CE=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Kb(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new SE(this),this.Ut=new dC,this.Ue=function(t,e){return new wE(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new XS(e),this.Qe=new yE(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new _E(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;Yb("MemoryPersistence","Starting transaction:",t);var i=new EE(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return MS.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),EE=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(gc.c)(e,t),e}(DS),TE=function(){function t(t){this.persistence=t,this.As=new vE,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw e_()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),MS.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),MS.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),MS.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return MS.forEach(this.vs,(function(r){var i=x_.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return MS.or([function(){return MS.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),IE=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function kE(t,e){return"firestore_clients_"+t+"_"+e}function xE(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function AE(t,e){return"firestore_targets_"+t+"_"+e}IE.UNAUTHENTICATED=new IE(null),IE.GOOGLE_CREDENTIALS=new IE("google-credentials-uid"),IE.FIRST_PARTY=new IE("first-party-uid");var NE=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Jb(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Xb("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),jE=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Jb(i.error.code,i.error.message)),o?new t(e,i.state,r):(Xb("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),RE=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=EO(),s=0;i&&s<r.activeTargetIds.length;++s)i=k_(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Xb("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),PE=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Xb("SharedClientState","Failed to parse online state: "+e),null)},t}(),DE=function(){function t(){this.activeTargetIds=EO()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),LE=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new hO(s_),this.started=!1,this.Os=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=kE(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new DE),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(gc.b)(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(gc.d)(this,(function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(kE(this.persistenceKey,r)))&&(o=RE.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.Os;u<c.length;u++)this.Fs(c[u]);return this.Os=[],this.window.addEventListener("pagehide",(function(){return l.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(AE(this.persistenceKey,t));if(n){var r=jE.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(AE(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Yb("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Yb("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Yb("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Yb("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void Xb("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return Object(gc.b)(e,void 0,void 0,(function(){var t,e,r,i,o,s;return Object(gc.d)(this,(function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=Kb.o;if(null!=t)try{var n=JSON.parse(t);n_("number"==typeof n),e=n}catch(t){Xb("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Kb.o&&this.sequenceNumberHandler(s);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new NE(this.currentUser,t,e,n),i=xE(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=xE(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=AE(this.persistenceKey,t),i=new jE(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return RE.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return NE.Vs(new IE(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return jE.Vs(r,e)},t.prototype.js=function(t){return PE.Vs(t)},t.prototype.ii=function(t){return Object(gc.b)(this,void 0,void 0,(function(){return Object(gc.d)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ai(t.batchId,t.state,t.error)]:(Yb("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ui(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.syncEngine.hi(s,a).then((function(){n.ks=r}))},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=EO();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),ME=function(){function t(){this.li=new DE,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new DE,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),FE=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),UE=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Yb("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Yb("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),VE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},qE=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),zE=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(gc.c)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise((function(i,o){var s=new Hb;s.listenOnce(zb.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case qb.NO_ERROR:var e=s.getResponseJson();Yb("Connection","XHR received:",JSON.stringify(e)),i(e);break;case qb.TIMEOUT:Yb("Connection",'RPC "'+t+'" timed out'),o(new Jb(Gb.DEADLINE_EXCEEDED,"Request time out"));break;case qb.HTTP_ERROR:var n=s.getStatus();if(Yb("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Gb).indexOf(e)>=0?e:Gb.UNKNOWN}(r.status);o(new Jb(a,r.message))}else o(new Jb(Gb.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Jb(Gb.UNAVAILABLE,"Connection failed."));break;default:e_()}}finally{Yb("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.$i=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Lb,i=Uy(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(o.initMessageHeaders,e),Object(Tp.w)()||Object(Tp.z)()||Object(Tp.t)()||Object(Tp.v)()||Object(Tp.A)()||Object(Tp.s)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Yb("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new qE({Ei:function(t){c?Yb("Connection","Not sending because WebChannel is closed:",t):(u||(Yb("Connection","Opening WebChannel transport."),a.open(),u=!0),Yb("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return h(a,Wb.EventType.OPEN,(function(){c||Yb("Connection","WebChannel transport opened.")})),h(a,Wb.EventType.CLOSE,(function(){c||(c=!0,Yb("Connection","WebChannel transport closed"),l.Vi())})),h(a,Wb.EventType.ERROR,(function(t){c||(c=!0,Zb("Connection","WebChannel transport errored:",t),l.Vi(new Jb(Gb.UNAVAILABLE,"The operation could not be completed")))})),h(a,Wb.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];n_(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Yb("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=iO[t];if(void 0!==e)return lO(e)}(i),s=r.message;void 0===o&&(o=Gb.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new Jb(o,s)),a.close()}else Yb("Connection","WebChannel received:",n),l.Si(n)}})),h(i,Bb.STAT_EVENT,(function(t){10===t.stat?Yb("Connection","Detected buffering proxy"):11===t.stat&&Yb("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Pi()}),0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Yb("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then((function(t){return Yb("RestConnection","Received: ",t),t}),(function(e){throw Zb("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.6.2",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+VE[t]},t}());function BE(){return"undefined"!=typeof window?window:null}function WE(){return"undefined"!=typeof document?document:null}function HE(t){return new MO(t,!0)}var KE=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&Yb("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Qi=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),GE=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new KE(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(gc.b)(this,void 0,void 0,(function(){return Object(gc.d)(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ar(),this.stream.send(t)},t.prototype.rr=function(){return Object(gc.b)(this,void 0,void 0,(function(){return Object(gc.d)(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ar=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(gc.b)(this,void 0,void 0,(function(){return Object(gc.d)(this,(function(n){switch(n.label){case 0:return this.ar(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Gb.RESOURCE_EXHAUSTED?(Xb(e.toString()),Xb("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===Gb.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ur(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ur=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new Jb(Gb.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return Object(gc.b)(t,void 0,void 0,(function(){return Object(gc.d)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return Yb("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(Yb("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),JE=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return Object(gc.c)(e,t),e.prototype.wr=function(t){return this.Hi.$i("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:e_()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(n_(void 0===e||"string"==typeof e),b_.fromBase64String(e||"")):(n_(void 0===e||e instanceof Uint8Array),b_.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Gb.UNKNOWN:lO(t.code);return new Jb(e,t.message||"")}(a);n=new AO(r,i,o,s||null)}else if("documentChange"in e){i=HO(t,(r=e.documentChange).document.name),o=qO(r.document.updateTime);var a=new z_({mapValue:{fields:r.document.fields}}),u=(s=W_.newFoundDocument(i,o,a),r.targetIds||[]);n=new kO(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=HO(t,(r=e.documentDelete).document),o=r.readTime?qO(r.readTime):l_.min(),a=W_.newNoDocument(i,o),n=new kO([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=HO(t,(r=e.documentRemove).document),n=new kO([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return e_();var c=e.filter;i=new uO(r=c.count||0),n=new xO(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return l_.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?l_.min():e.readTime?qO(e.readTime):l_.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=JO(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Q_(r)?{documents:tS(t,r)}:{query:eS(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=UO(t,e.resumeToken):e.snapshotVersion.compareTo(l_.min())>0&&(n.readTime=FO(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return e_()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=JO(this.R),e.removeTarget=t,this.cr(e)},e}(GE),QE=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return Object(gc.c)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ur=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.$i("Write",t)},e.prototype.onMessage=function(t){if(n_(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(n_(void 0!==e),t.map((function(t){return function(t,e){var n=qO(t.updateTime?t.updateTime:e);return n.isEqual(l_.min())&&(n=qO(e)),new Ww(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=qO(t.commitTime);return this.listener.Tr(n,e)}return n_(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=JO(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return XO(e.R,t)}))};this.cr(n)},e}(GE),$E=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(gc.c)(e,t),e.prototype.br=function(){if(this.Rr)throw new Jb(Gb.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Gb.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Jb(Gb.UNKNOWN,t.toString())}))},e.prototype.Oi=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Oi(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Gb.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Jb(Gb.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),YE=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Xb(e),this.Vr=!1):Yb("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),XE=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return Object(gc.b)(o,void 0,void 0,(function(){return Object(gc.d)(this,(function(t){switch(t.label){case 0:return aT(this)?(Yb("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(gc.b)(this,void 0,void 0,(function(){var e;return Object(gc.d)(this,(function(n){switch(n.label){case 0:return(e=r_(t)).$r.add(4),[4,tT(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,ZE(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new YE(n,r)};function ZE(t){return Object(gc.b)(this,void 0,void 0,(function(){var e,n;return Object(gc.d)(this,(function(r){switch(r.label){case 0:if(!aT(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function tT(t){return Object(gc.b)(this,void 0,void 0,(function(){var e,n;return Object(gc.d)(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function eT(t,e){var n=r_(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),sT(n)?oT(n):OT(n).er()&&rT(n,e))}function nT(t,e){var n=r_(t),r=OT(n);n.Or.delete(e),r.er()&&iT(n,e),0===n.Or.size&&(r.er()?r.ir():aT(n)&&n.Br.set("Unknown"))}function rT(t,e){t.qr.U(e.targetId),OT(t).mr(e)}function iT(t,e){t.qr.U(e),OT(t).yr(e)}function oT(t){t.qr=new jO({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.Or.get(e)||null}}),OT(t).start(),t.Br.Sr()}function sT(t){return aT(t)&&!OT(t).tr()&&t.Or.size>0}function aT(t){return 0===r_(t).$r.size}function uT(t){t.qr=void 0}function cT(t){return Object(gc.b)(this,void 0,void 0,(function(){return Object(gc.d)(this,(function(e){return t.Or.forEach((function(e,n){rT(t,e)})),[2]}))}))}function lT(t,e){return Object(gc.b)(this,void 0,void 0,(function(){return Object(gc.d)(this,(function(n){return uT(t),sT(t)?(t.Br.Nr(e),oT(t)):t.Br.set("Unknown"),[2]}))}))}function hT(t,e,n){return Object(gc.b)(this,void 0,void 0,(function(){var r,i,o;return Object(gc.d)(this,(function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof AO&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(gc.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(gc.d)(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Or.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Or.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Yb("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,dT(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof kO?t.qr.X(e):e instanceof xO?t.qr.rt(e):t.qr.et(e),n.isEqual(l_.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,oE(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.at(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Or.get(r);i&&t.Or.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.Or.get(e);if(n){t.Or.set(e,n.withResumeToken(b_.EMPTY_BYTE_STRING,n.snapshotVersion)),iT(t,e);var r=new YS(n.target,e,1,n.sequenceNumber);rT(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Yb("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,dT(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function dT(t,e,n){return Object(gc.b)(this,void 0,void 0,(function(){var r=this;return Object(gc.d)(this,(function(i){switch(i.label){case 0:if(!zS(e))throw e;return t.$r.add(1),[4,tT(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return oE(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return Object(gc.b)(r,void 0,void 0,(function(){return Object(gc.d)(this,(function(e){switch(e.label){case 0:return Yb("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.$r.delete(1),[4,ZE(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function fT(t,e){return e().catch((function(n){return dT(t,n,e)}))}function pT(t){return Object(gc.b)(this,void 0,void 0,(function(){var e,n,r,i,o;return Object(gc.d)(this,(function(s){switch(s.label){case 0:e=r_(t),n=ST(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return aT(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,uE(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=ST(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,dT(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return gT(e)&&mT(e),[2]}}))}))}function gT(t){return aT(t)&&!ST(t).tr()&&t.kr.length>0}function mT(t){ST(t).start()}function yT(t){return Object(gc.b)(this,void 0,void 0,(function(){return Object(gc.d)(this,(function(e){return ST(t).Ar(),[2]}))}))}function vT(t){return Object(gc.b)(this,void 0,void 0,(function(){var e,n,r;return Object(gc.d)(this,(function(i){for(e=ST(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]}))}))}function bT(t,e,n){return Object(gc.b)(this,void 0,void 0,(function(){var r,i;return Object(gc.d)(this,(function(o){switch(o.label){case 0:return r=t.kr.shift(),i=$S.from(r,e,n),[4,fT(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,pT(t)];case 2:return o.sent(),[2]}}))}))}function _T(t,e){return Object(gc.b)(this,void 0,void 0,(function(){return Object(gc.d)(this,(function(n){switch(n.label){case 0:return e&&ST(t).pr?[4,function(t,e){return Object(gc.b)(this,void 0,void 0,(function(){var n,r;return Object(gc.d)(this,(function(i){switch(i.label){case 0:return cO(r=e.code)&&r!==Gb.ABORTED?(n=t.kr.shift(),ST(t).sr(),[4,fT(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,pT(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return gT(t)&&mT(t),[2]}}))}))}function wT(t,e){return Object(gc.b)(this,void 0,void 0,(function(){var n;return Object(gc.d)(this,(function(r){switch(r.label){case 0:return n=r_(t),e?(n.$r.delete(2),[4,ZE(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.$r.add(2),[4,tT(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function OT(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=r_(t);return r.br(),new JE(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:cT.bind(null,t),Ri:lT.bind(null,t),_r:hT.bind(null,t)}),t.Mr.push((function(n){return Object(gc.b)(e,void 0,void 0,(function(){return Object(gc.d)(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),sT(t)?oT(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),uT(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function ST(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=r_(t);return r.br(),new QE(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:yT.bind(null,t),Ri:_T.bind(null,t),Ir:vT.bind(null,t),Tr:bT.bind(null,t)}),t.Mr.push((function(n){return Object(gc.b)(e,void 0,void 0,(function(){return Object(gc.d)(this,(function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,pT(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(Yb("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Qr}var CT=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new LS,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Jb(Gb.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function ET(t,e){if(Xb("AsyncQueue",e+": "+t),zS(t))return new Jb(Gb.UNAVAILABLE,e+": "+t);throw t}var TT=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||x_.comparator(e.key,n.key)}:function(t,e){return x_.comparator(t.key,e.key)},this.keyedMap=bO(),this.sortedSet=new hO(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),IT=function(){function t(){this.Kr=new hO(x_.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):e_():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),kT=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,TT.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ow(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),xT=function(){this.Wr=void 0,this.listeners=[]},AT=function(){this.queries=new MC((function(t){return Sw(t)}),Ow),this.onlineState="Unknown",this.Gr=new Set};function NT(t,e){return Object(gc.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Object(gc.d)(this,(function(c){switch(c.label){case 0:if(n=r_(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new xT),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=ET(a,"Initialization of query '"+Cw(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&DT(n),[2]}}))}))}function jT(t,e){return Object(gc.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(gc.d)(this,(function(a){return n=r_(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function RT(t,e){for(var n=r_(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&DT(n)}function PT(t,e,n){var r=r_(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function DT(t){t.Gr.forEach((function(t){t.next()}))}var LT=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new kT(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=kT.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),MT=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),FT=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return HO(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?YO(this.R,t.document,!1):W_.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return qO(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new FT(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||SO()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(gc.b)(this,void 0,void 0,(function(){var t,e,n,r,i;return Object(gc.d)(this,(function(o){switch(o.label){case 0:return[4,gE(this.localStore,new FT(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,mE(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new YC(Object.assign({},this.progress),t))]}}))}))}}();var UT=function(t){this.key=t},VT=function(t){this.key=t},qT=function(){function t(t,e){this.query=t,this.ao=e,this.uo=null,this.current=!1,this.ho=SO(),this.mutatedKeys=SO(),this.lo=Tw(t),this.fo=new TT(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.ao},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new IT,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=pw(this.query)&&i.size===this.query.limit?i.last():null,c=gw(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=Ew(n.query,e)?e:null,d=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?d!==f&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=f?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),pw(this.query)||gw(this.query))for(;s.size>this.query.limit;){var l=pw(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return e_()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.uo;return this.uo=a,0!==o.length||u?{snapshot:new kT(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new IT,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.ao.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.ao=e.ao.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.ao=e.ao.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=SO(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new VT(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new UT(t))})),n},t.prototype.Ao=function(t){this.ao=t.Bn,this.ho=SO();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return kT.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.uo)},t}(),zT=function(t,e,n){this.query=t,this.targetId=e,this.view=n},BT=function(t){this.key=t,this.bo=!1},WT=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new MC((function(t){return Sw(t)}),Ow),this.Vo=new Map,this.So=new Set,this.Do=new hO(x_.comparator),this.Co=new Map,this.No=new vE,this.xo={},this.Fo=new Map,this.ko=EC.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),t}();function HT(t,e){return Object(gc.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(gc.d)(this,(function(a){switch(a.label){case 0:return n=_I(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,cE(n.localStore,_w(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,KT(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&eT(n.remoteStore,o),a.label=4;case 4:return[2,r]}}))}))}function KT(t,e,n,r){return Object(gc.b)(this,void 0,void 0,(function(){var i,o,s,a,u,c;return Object(gc.d)(this,(function(l){switch(l.label){case 0:return t.$o=function(e,n,r){return function(t,e,n,r){return Object(gc.b)(this,void 0,void 0,(function(){var i,o,s;return Object(gc.d)(this,(function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,hE(t.localStore,e.query,!1).then((function(t){return e.view._o(t.documents,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(oI(t,e.targetId,s.To),s.snapshot)]}}))}))}(t,e,n,r)},[4,hE(t.localStore,e,!0)];case 1:return i=l.sent(),o=new qT(e,i.Bn),s=o._o(i.documents),a=IO.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),oI(t,n,u.To),c=new zT(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}}))}))}function GT(t,e){return Object(gc.b)(this,void 0,void 0,(function(){var n,r,i;return Object(gc.d)(this,(function(o){switch(o.label){case 0:return n=r_(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!Ow(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,lE(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),nT(n.remoteStore,r.targetId),rI(n,r.targetId)})).catch(AC)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return rI(n,r.targetId),[4,lE(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function JT(t,e,n){return Object(gc.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(gc.d)(this,(function(a){switch(a.label){case 0:r=wI(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=r_(t),i=c_.now(),o=e.reduce((function(t,e){return t.add(e.key)}),SO());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=$w(c,n.get(c.key));null!=l&&s.push(new tO(c.key,l,B_(l.toProto().mapValue),Hw.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new hO(s_)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,uI(r,i.changes)];case 3:return a.sent(),[4,pT(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=ET(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function QT(t,e){return Object(gc.b)(this,void 0,void 0,(function(){var n,r;return Object(gc.d)(this,(function(i){switch(i.label){case 0:n=r_(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,sE(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(n_(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?n_(r.bo):t.removedDocuments.size>0&&(n_(r.bo),r.bo=!1))})),[4,uI(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,AC(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function $T(t,e,n){var r=r_(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=r_(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&DT(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function YT(t,e,n){return Object(gc.b)(this,void 0,void 0,(function(){var r,i,o,s,a,u;return Object(gc.d)(this,(function(c){switch(c.label){case 0:return(r=r_(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new hO(x_.comparator)).insert(o,W_.newNoDocument(o,l_.min())),a=SO().add(o),u=new TO(l_.min(),new Map,new pO(s_),s,a),[4,QT(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),aI(r),[3,4];case 2:return[4,lE(r.localStore,e,!1).then((function(){return rI(r,e,n)})).catch(AC)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function XT(t,e){return Object(gc.b)(this,void 0,void 0,(function(){var n,r,i;return Object(gc.d)(this,(function(o){switch(o.label){case 0:n=r_(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,iE(n.localStore,e)];case 2:return i=o.sent(),nI(n,r,null),eI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,uI(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,AC(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function ZT(t,e,n){return Object(gc.b)(this,void 0,void 0,(function(){var r,i;return Object(gc.d)(this,(function(o){switch(o.label){case 0:r=r_(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=r_(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return n_(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),nI(r,e,n),eI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,uI(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,AC(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function tI(t,e){return Object(gc.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(gc.d)(this,(function(a){switch(a.label){case 0:aT((n=r_(t)).remoteStore)||Yb("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=r_(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=ET(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function eI(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function nI(t,e,n){var r=r_(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function rI(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||iI(t,e)}))}function iI(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(nT(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),aI(t))}function oI(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof UT?(t.No.addReference(o.key,e),sI(t,o)):o instanceof VT?(Yb("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||iI(t,o.key)):e_()}}function sI(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Yb("SyncEngine","New document in limbo: "+n),t.So.add(r),aI(t))}function aI(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new x_(g_.fromString(e)),r=t.ko.next();t.Co.set(r,new BT(n)),t.Do=t.Do.insert(n,r),eT(t.remoteStore,new YS(_w(fw(n.path)),r,2,Kb.o))}}function uI(t,e,n){return Object(gc.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(gc.d)(this,(function(a){switch(a.label){case 0:return r=r_(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,a){s.push(r.$o(a,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=ZC.Pn(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return Object(gc.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return Object(gc.d)(this,(function(l){switch(l.label){case 0:n=r_(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return MS.forEach(e,(function(e){return MS.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return MS.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return l.sent(),[3,4];case 3:if(!zS(r=l.sent()))throw r;return Yb("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}}))}))}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function cI(t,e){return Object(gc.b)(this,void 0,void 0,(function(){var n,r;return Object(gc.d)(this,(function(i){switch(i.label){case 0:return(n=r_(t)).currentUser.isEqual(e)?[3,3]:(Yb("SyncEngine","User change. New user:",e.toKey()),[4,rE(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach((function(t){t.forEach((function(t){t.reject(new Jb(Gb.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,uI(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function lI(t,e){var n=r_(t),r=n.Co.get(e);if(r&&r.bo)return SO().add(r.key);var i=SO(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function hI(t,e){return Object(gc.b)(this,void 0,void 0,(function(){var n,r,i;return Object(gc.d)(this,(function(o){switch(o.label){case 0:return[4,hE((n=r_(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&oI(n,e.targetId,i.To),i)]}}))}))}function dI(t){return Object(gc.b)(this,void 0,void 0,(function(){var e;return Object(gc.d)(this,(function(n){return[2,fE((e=r_(t)).localStore).then((function(t){return uI(e,t)}))]}))}))}function fI(t,e,n,r){return Object(gc.b)(this,void 0,void 0,(function(){var i,o;return Object(gc.d)(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=r_(t),r=r_(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):MS.resolve(null)}))}))}((i=r_(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,pT(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(nI(i,e,r||null),eI(i,e),function(t,e){r_(r_(t)._n).Gt(e)}(i.localStore,e)):e_(),s.label=4;case 4:return[4,uI(i,o)];case 5:return s.sent(),[3,7];case 6:Yb("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function pI(t,e){return Object(gc.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Object(gc.d)(this,(function(c){switch(c.label){case 0:return _I(n=r_(t)),wI(n),!0!==e||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,gI(n,r.toArray())]);case 1:return i=c.sent(),n.Oo=!0,[4,wT(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)eT(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.Oo?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then((function(){return rI(n,e),lE(n.localStore,e,!0)})),nT(n.remoteStore,e)})),[4,u]);case 4:return c.sent(),[4,gI(n,a)];case 5:return c.sent(),function(t){var e=r_(t);e.Co.forEach((function(t,n){nT(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new hO(x_.comparator)}(n),n.Oo=!1,[4,wT(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}}))}))}function gI(t,e,n){return Object(gc.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,h,d,f,p;return Object(gc.d)(this,(function(g){switch(g.label){case 0:n=r_(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,cE(n.localStore,_w(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(d=n.Po.get(h[l]),[4,hI(n,d)]):[3,6];case 4:(f=g.sent()).snapshot&&i.push(f.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,dE(n.localStore,a)];case 8:return p=g.sent(),[4,cE(n.localStore,p)];case 9:return u=g.sent(),[4,KT(n,mI(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function mI(t){return dw(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function yI(t){var e=r_(t);return r_(r_(e.localStore).persistence).fn()}function vI(t,e,n,r){return Object(gc.b)(this,void 0,void 0,(function(){var i,o,s;return Object(gc.d)(this,(function(a){switch(a.label){case 0:return(i=r_(t)).Oo?(Yb("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,fE(i.localStore)];case 3:return o=a.sent(),s=TO.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,uI(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,lE(i.localStore,e,!0)];case 6:return a.sent(),rI(i,e,r),[3,8];case 7:e_(),a.label=8;case 8:return[2]}}))}))}function bI(t,e,n){return Object(gc.b)(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,h;return Object(gc.d)(this,(function(d){switch(d.label){case 0:if(!(r=_I(t)).Oo)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(Yb("SyncEngine","Adding an already active target "+s),[3,5]):[4,dE(r.localStore,s)]:[3,6];case 2:return a=d.sent(),[4,cE(r.localStore,a)];case 3:return u=d.sent(),[4,KT(r,mI(a),u.targetId,!1)];case 4:d.sent(),eT(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(gc.d)(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,lE(r.localStore,t,!1).then((function(){nT(r.remoteStore,t),rI(r,t)})).catch(AC)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,h=n,d.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function _I(t){var e=r_(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=QT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=YT.bind(null,e),e.vo._r=RT.bind(null,e.eventManager),e.vo.Mo=PT.bind(null,e.eventManager),e}function wI(t){var e=r_(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZT.bind(null,e),e}var OI=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(gc.b)(this,void 0,void 0,(function(){return Object(gc.d)(this,(function(e){switch(e.label){case 0:return this.R=HE(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return nE(this.persistence,new tE,t.initialUser,this.R)},t.prototype.qo=function(t){return new CE(TE.bs,this.R)},t.prototype.Bo=function(t){return new ME},t.prototype.terminate=function(){return Object(gc.b)(this,void 0,void 0,(function(){return Object(gc.d)(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),SI=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(gc.c)(e,t),e.prototype.initialize=function(e){return Object(gc.b)(this,void 0,void 0,(function(){return Object(gc.d)(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,pE(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,wI(this.Ko.syncEngine)];case 4:return n.sent(),[4,pT(this.Ko.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Qo=function(t){return nE(this.persistence,new tE,t.initialUser,this.R)},e.prototype.Uo=function(t){return new RC(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=$C(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?yC.withCacheSize(this.cacheSizeBytes):yC.DEFAULT;return new GC(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,BE(),WE(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new ME},e}(OI),CI=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(gc.c)(e,t),e.prototype.initialize=function(e){return Object(gc.b)(this,void 0,void 0,(function(){var n,r=this;return Object(gc.d)(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof LE?(this.sharedClientState.syncEngine={ai:fI.bind(null,n),ui:vI.bind(null,n),hi:bI.bind(null,n),fn:yI.bind(null,n),ci:dI.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return Object(gc.b)(r,void 0,void 0,(function(){return Object(gc.d)(this,(function(e){switch(e.label){case 0:return[4,pI(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=BE();if(!LE.yt(e))throw new Jb(Gb.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=$C(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new LE(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(SI),EI=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(gc.b)(this,void 0,void 0,(function(){var n=this;return Object(gc.d)(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return $T(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=cI.bind(null,this.syncEngine),[4,wT(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new AT},t.prototype.createDatastore=function(t){var e=HE(t.databaseInfo.databaseId),n=new zE(t.databaseInfo);return function(t,e,n){return new $E(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return $T(s.syncEngine,t,0)},o=UE.yt()?new UE:new FE,new XE(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new WT(t,e,n,r,i,o);return s&&(a.Oo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(gc.b)(this,void 0,void 0,(function(){var e;return Object(gc.d)(this,(function(n){switch(n.label){case 0:return e=r_(t),Yb("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,tT(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}(),TI=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),II=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new LS,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(gc.b)(this,void 0,void 0,(function(){return Object(gc.d)(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return Object(gc.b)(this,void 0,void 0,(function(){return Object(gc.d)(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return Object(gc.b)(this,void 0,void 0,(function(){var t,e,n,r;return Object(gc.d)(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new MT(JSON.parse(r),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return Object(gc.b)(this,void 0,void 0,(function(){var t,e;return Object(gc.d)(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return Object(gc.b)(this,void 0,void 0,(function(){var e;return Object(gc.d)(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(gc.b)(this,void 0,void 0,(function(){var t,e;return Object(gc.d)(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(gc.b)(this,void 0,void 0,(function(){var e,n=this;return Object(gc.d)(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Jb(Gb.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(gc.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Object(gc.d)(this,(function(u){switch(u.label){case 0:return n=r_(t),r=JO(n.R)+"/documents",i={documents:e.map((function(t){return WO(n.R,t)}))},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){n_(!!e.found);var n=HO(t,e.found.name),r=qO(e.found.updateTime),i=new z_({mapValue:{fields:e.found.fields}});return W_.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){n_(!!e.missing),n_(!!e.readTime);var n=HO(t,e.missing),r=qO(e.readTime);return W_.newNoDocument(n,r)}(t,e):e_()}(n.R,t);s.set(e.key.toString(),e)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());n_(!!e),a.push(e)})),a)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new sO(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(gc.b)(this,void 0,void 0,(function(){var t,e=this;return Object(gc.d)(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=x_.fromPath(n);e.mutations.push(new aO(r,e.precondition(r)))})),[4,function(t,e){return Object(gc.b)(this,void 0,void 0,(function(){var n,r,i;return Object(gc.d)(this,(function(o){switch(o.label){case 0:return n=r_(t),r=JO(n.R)+"/documents",i={writes:e.map((function(t){return XO(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw e_();e=l_.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Jb(Gb.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Hw.updateTime(e):Hw.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(l_.min()))throw new Jb(Gb.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Hw.updateTime(e)}return Hw.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),kI=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new KE(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return Object(gc.b)(t,void 0,void 0,(function(){var t,e,n=this;return Object(gc.d)(this,(function(r){return t=new II(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!T_(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!cO(e)}return!1},t}(),xI=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=IE.UNAUTHENTICATED,this.clientId=o_.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return Object(gc.b)(r,void 0,void 0,(function(){return Object(gc.d)(this,(function(e){switch(e.label){case 0:return Yb("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return Object(gc.b)(this,void 0,void 0,(function(){return Object(gc.d)(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Jb(Gb.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new LS;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return Object(gc.b)(t,void 0,void 0,(function(){var t,n;return Object(gc.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=ET(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function AI(t,e){return Object(gc.b)(this,void 0,void 0,(function(){var n,r,i=this;return Object(gc.d)(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Yb("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return Object(gc.b)(i,void 0,void 0,(function(){return Object(gc.d)(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,rE(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function NI(t,e){return Object(gc.b)(this,void 0,void 0,(function(){var n,r;return Object(gc.d)(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,jI(t)];case 1:return n=i.sent(),Yb("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return Object(gc.b)(this,void 0,void 0,(function(){var n,r;return Object(gc.d)(this,(function(i){switch(i.label){case 0:return(n=r_(t)).asyncQueue.verifyOperationInProgress(),Yb("RemoteStore","RemoteStore received new credentials"),r=aT(n),n.$r.add(3),[4,tT(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.$r.delete(3),[4,ZE(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function jI(t){return Object(gc.b)(this,void 0,void 0,(function(){return Object(gc.d)(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Yb("FirestoreClient","Using default OfflineComponentProvider"),[4,AI(t,new OI)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function RI(t){return Object(gc.b)(this,void 0,void 0,(function(){return Object(gc.d)(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Yb("FirestoreClient","Using default OnlineComponentProvider"),[4,NI(t,new EI)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function PI(t){return jI(t).then((function(t){return t.persistence}))}function DI(t){return jI(t).then((function(t){return t.localStore}))}function LI(t){return RI(t).then((function(t){return t.remoteStore}))}function MI(t){return RI(t).then((function(t){return t.syncEngine}))}function FI(t){return Object(gc.b)(this,void 0,void 0,(function(){var e,n;return Object(gc.d)(this,(function(r){switch(r.label){case 0:return[4,RI(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=HT.bind(null,e.syncEngine),n.onUnlisten=GT.bind(null,e.syncEngine),n)]}}))}))}function UI(t,e,n){var r=this;void 0===n&&(n={});var i=new LS;return t.asyncQueue.enqueueAndForget((function(){return Object(gc.b)(r,void 0,void 0,(function(){var r;return Object(gc.d)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new TI({next:function(o){e.enqueueAndForget((function(){return jT(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Jb(Gb.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Jb(Gb.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new LT(fw(n.path),o,{includeMetadataChanges:!0,so:!0});return NT(t,s)},[4,FI(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function VI(t,e,n){var r=this;void 0===n&&(n={});var i=new LS;return t.asyncQueue.enqueueAndForget((function(){return Object(gc.b)(r,void 0,void 0,(function(){var r;return Object(gc.d)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new TI({next:function(n){e.enqueueAndForget((function(){return jT(t,s)})),n.fromCache&&"server"===r.source?i.reject(new Jb(Gb.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new LT(n,o,{includeMetadataChanges:!0,so:!0});return NT(t,s)},[4,FI(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var qI=function(t,e,n,r,i,o,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s},zI=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),BI=new Map,WI=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},HI=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(IE.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),KI=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),GI=function(){function t(t){var e=this;this.currentUser=IE.UNAUTHENTICATED,this.oc=new LS,this.cc=0,this.changeListener=function(){return Promise.resolve()},this.ac=!1,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.hc(),e.oc.resolve(),e.ac&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){Yb("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.lc(),e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):e.ac&&(Yb("FirebaseCredentialsProvider","Auth not yet detected"),e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)})))}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(Yb("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(n_("string"==typeof n.accessToken),new WI(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){this.ac=!0,this.asyncQueue=t,this.changeListener=e},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.hc=function(){var t=this.auth&&this.auth.getUid();return n_(null===t||"string"==typeof t),new IE(t)},t.prototype.lc=function(){var t=this;this.ac&&(this.ac=!1,this.asyncQueue.enqueueRetryable((function(){return Object(gc.b)(t,void 0,void 0,(function(){return Object(gc.d)(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,this.changeListener(this.currentUser)];case 2:return t.sent(),this.ac=!0,[2]}}))}))})))},t}(),JI=function(){function t(t,e,n){this.fc=t,this.dc=e,this.wc=n,this.type="FirstParty",this.user=IE.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.dc},e=this.fc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.wc&&(t["X-Goog-Iam-Authorization-Token"]=this.wc),t},enumerable:!1,configurable:!0}),t}(),QI=function(){function t(t,e,n){this.fc=t,this.dc=e,this.wc=n}return t.prototype.getToken=function(){return Promise.resolve(new JI(this.fc,this.dc,this.wc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(IE.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function $I(t,e,n){if(!n)throw new Jb(Gb.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function YI(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Jb(Gb.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function XI(t,e,n,r){if(!0===e&&!0===r)throw new Jb(Gb.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function ZI(t){if(!x_.isDocumentKey(t))throw new Jb(Gb.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function tk(t){if(x_.isDocumentKey(t))throw new Jb(Gb.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function ek(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":e_()}function nk(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Jb(Gb.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=ek(t);throw new Jb(Gb.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function rk(t,e){if(e<=0)throw new Jb(Gb.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var ik=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Jb(Gb.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Jb(Gb.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,XI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),ok=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ik({}),this._settingsFrozen=!1,t instanceof zI?(this._databaseId=t,this._credentials=new HI):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Jb(Gb.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zI(t.options.projectId)}(t),this._credentials=new GI(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Jb(Gb.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Jb(Gb.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ik(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new HI;switch(t.type){case"gapi":var e=t.client;return n_(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new QI(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Jb(Gb.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=BI.get(this))&&(Yb("ComponentProvider","Removing Datastore"),BI.delete(this),t.terminate()),Promise.resolve();var t},t}(),sk=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new uk(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),ak=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),uk=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,fw(r))||this)._path=r,i.type="collection",i}return Object(gc.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new sk(this.firestore,null,new x_(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(ak);function ck(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(Tp.o)(t),$I("collection","path",e),t instanceof ok)return tk(n=g_.fromString.apply(g_,Object(gc.g)([e],r))),new uk(t,null,n);if(!(t instanceof sk||t instanceof uk))throw new Jb(Gb.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return tk(n=g_.fromString.apply(g_,Object(gc.g)([t.path],r)).child(g_.fromString(e))),new uk(t.firestore,null,n)}function lk(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(Tp.o)(t),1===arguments.length&&(e=o_.u()),$I("doc","path",e),t instanceof ok)return ZI(n=g_.fromString.apply(g_,Object(gc.g)([e],r))),new sk(t,null,new x_(n));if(!(t instanceof sk||t instanceof uk))throw new Jb(Gb.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return ZI(n=t._path.child(g_.fromString.apply(g_,Object(gc.g)([e],r)))),new sk(t.firestore,t instanceof uk?t.converter:null,new x_(n))}function hk(t,e){return t=Object(Tp.o)(t),e=Object(Tp.o)(e),(t instanceof sk||t instanceof uk)&&(e instanceof sk||e instanceof uk)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function dk(t,e){return t=Object(Tp.o)(t),e=Object(Tp.o)(e),t instanceof ak&&e instanceof ak&&t.firestore===e.firestore&&Ow(t._query,e._query)&&t.converter===e.converter}var fk=function(){function t(){var t=this;this._c=Promise.resolve(),this.mc=[],this.yc=!1,this.gc=[],this.Ec=null,this.Tc=!1,this.Ic=[],this.Zi=new KE(this,"async_queue_retry"),this.Ac=function(){var e=WE();e&&Yb("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=WE();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ac)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.yc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Rc(),this.bc(t)},t.prototype.enterRestrictedMode=function(){if(!this.yc){this.yc=!0;var t=WE();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ac)}},t.prototype.enqueue=function(t){return this.Rc(),this.yc?new Promise((function(t){})):this.bc(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.mc.push(t),e.vc()}))},t.prototype.vc=function(){return Object(gc.b)(this,void 0,void 0,(function(){var t,e=this;return Object(gc.d)(this,(function(n){switch(n.label){case 0:if(0===this.mc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.mc[0]()];case 2:return n.sent(),this.mc.shift(),this.Zi.reset(),[3,4];case 3:if(!zS(t=n.sent()))throw t;return Yb("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.mc.length>0&&this.Zi.ji((function(){return e.vc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.bc=function(t){var e=this,n=this._c.then((function(){return e.Tc=!0,t().catch((function(t){throw e.Ec=t,e.Tc=!1,Xb("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.Tc=!1,t}))}));return this._c=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Rc(),this.Ic.indexOf(t)>-1&&(e=0);var i=CT.createAndSchedule(this,t,e,n,(function(t){return r.Pc(t)}));return this.gc.push(i),i},t.prototype.Rc=function(){this.Ec&&e_()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Vc=function(){return Object(gc.b)(this,void 0,void 0,(function(){var t;return Object(gc.d)(this,(function(e){switch(e.label){case 0:return[4,t=this._c];case 1:e.sent(),e.label=2;case 2:if(t!==this._c)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Sc=function(t){for(var e=0,n=this.gc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Dc=function(t){var e=this;return this.Vc().then((function(){e.gc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.gc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Vc()}))},t.prototype.Cc=function(t){this.Ic.push(t)},t.prototype.Pc=function(t){var e=this.gc.indexOf(t);this.gc.splice(e,1)},t}();function pk(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new LS,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var gk=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new fk,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(gc.c)(e,t),e.prototype._terminate=function(){return this._firestoreClient||yk(this),this._firestoreClient.terminate()},e}(ok);function mk(t){return t._firestoreClient||yk(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function yk(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new qI(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new xI(t._credentials,t._queue,r)}function vk(t,e,n){var r=this,i=new LS;return t.asyncQueue.enqueue((function(){return Object(gc.b)(r,void 0,void 0,(function(){var r;return Object(gc.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,AI(t,n)];case 1:return o.sent(),[4,NI(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Gb.FAILED_PRECONDITION||t.code===Gb.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function bk(t){if(t._initialized||t._terminated)throw new Jb(Gb.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var _k=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Jb(Gb.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new y_(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),wk=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(b_.fromBase64String(e))}catch(e){throw new Jb(Gb.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(b_.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Ok=function(t){this._methodName=t},Sk=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Jb(Gb.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Jb(Gb.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return s_(this._lat,t._lat)||s_(this._long,t._long)},t}(),Ck=/^__.*__$/,Ek=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new tO(t,this.data,this.fieldMask,e,this.fieldTransforms):new Zw(t,this.data,e,this.fieldTransforms)},t}(),Tk=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new tO(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function Ik(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw e_()}}var kk=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Nc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"xc",{get:function(){return this.settings.xc},enumerable:!1,configurable:!0}),t.prototype.Fc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Fc({path:n,Oc:!1});return r.$c(t),r},t.prototype.Mc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Fc({path:n,Oc:!1});return r.Nc(),r},t.prototype.Lc=function(t){return this.Fc({path:void 0,Oc:!0})},t.prototype.Bc=function(t){return Jk(t,this.settings.methodName,this.settings.qc||!1,this.path,this.settings.Uc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Nc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Bc("Document fields must not be empty");if(Ik(this.xc)&&Ck.test(t))throw this.Bc('Document fields cannot begin and end with "__"')},t}(),xk=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||HE(t)}return t.prototype.Qc=function(t,e,n,r){return void 0===r&&(r=!1),new kk({xc:t,methodName:e,Uc:n,path:y_.emptyPath(),Oc:!1,qc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Ak(t){var e=t._freezeSettings(),n=HE(t._databaseId);return new xk(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Nk(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Qc(o.merge||o.mergeFields?2:0,e,n,i);Wk("Data must be an object, but it was:",s,r);var a,u,c=zk(r,s);if(o.merge)a=new v_(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,d=o.mergeFields;h<d.length;h++){var f=Hk(e,d[h],n);if(!s.contains(f))throw new Jb(Gb.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");Qk(l,f)||l.push(f)}a=new v_(l),u=s.fieldTransforms.filter((function(t){return a.covers(t.field)}))}else a=null,u=s.fieldTransforms;return new Ek(new z_(c),a,u)}var jk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(gc.c)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.xc)throw t.Bc(1===t.xc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Ok);function Rk(t,e,n){return new kk({xc:3,Uc:e.settings.Uc,methodName:t._methodName,Oc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Pk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(gc.c)(e,t),e.prototype._toFieldTransform=function(t){return new Bw(t.path,new Dw)},e.prototype.isEqual=function(t){return t instanceof e},e}(Ok),Dk=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Object(gc.c)(e,t),e.prototype._toFieldTransform=function(t){var e=Rk(this,t,!0),n=this.Kc.map((function(t){return qk(t,e)})),r=new Lw(n);return new Bw(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Ok),Lk=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Object(gc.c)(e,t),e.prototype._toFieldTransform=function(t){var e=Rk(this,t,!0),n=this.Kc.map((function(t){return qk(t,e)})),r=new Fw(n);return new Bw(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Ok),Mk=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return Object(gc.c)(e,t),e.prototype._toFieldTransform=function(t){var e=new Vw(t.R,Aw(t.R,this.jc));return new Bw(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Ok);function Fk(t,e,n,r){var i=t.Qc(1,e,n);Wk("Data must be an object, but it was:",i,r);var o=[],s=z_.empty();d_(r,(function(t,r){var a=Gk(e,t,n);r=Object(Tp.o)(r);var u=i.Mc(a);if(r instanceof jk)o.push(a);else{var c=qk(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new v_(o);return new Tk(s,a,i.fieldTransforms)}function Uk(t,e,n,r,i,o){var s=t.Qc(1,e,n),a=[Hk(e,r,n)],u=[i];if(o.length%2!=0)throw new Jb(Gb.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Hk(e,o[c])),u.push(o[c+1]);for(var l=[],h=z_.empty(),d=a.length-1;d>=0;--d)if(!Qk(l,a[d])){var f=a[d],p=u[d];p=Object(Tp.o)(p);var g=s.Mc(f);if(p instanceof jk)l.push(f);else{var m=qk(p,g);null!=m&&(l.push(f),h.set(f,m))}}var y=new v_(l);return new Tk(h,y,s.fieldTransforms)}function Vk(t,e,n,r){return void 0===r&&(r=!1),qk(n,t.Qc(r?4:3,e))}function qk(t,e){if(Bk(t=Object(Tp.o)(t)))return Wk("Unsupported field value:",e,t),zk(t,e);if(t instanceof Ok)return function(t,e){if(!Ik(e.xc))throw e.Bc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Bc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Oc&&4!==e.xc)throw e.Bc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=qk(o[i],e.Lc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(Tp.o)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Aw(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=c_.fromDate(t);return{timestampValue:FO(e.R,n)}}if(t instanceof c_)return n=new c_(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:FO(e.R,n)};if(t instanceof Sk)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof wk)return{bytesValue:UO(e.R,t._byteString)};if(t instanceof sk){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Bc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:zO(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Bc("Unsupported field value: "+ek(t))}(t,e)}function zk(t,e){var n={};return f_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):d_(t,(function(t,r){var i=qk(r,e.kc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Bk(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof c_||t instanceof Sk||t instanceof wk||t instanceof sk||t instanceof Ok)}function Wk(t,e,n){if(!Bk(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=ek(n);throw e.Bc("an object"===r?t+" a custom object":t+" "+r)}}function Hk(t,e,n){if((e=Object(Tp.o)(e))instanceof _k)return e._internalPath;if("string"==typeof e)return Gk(t,e);throw Jk("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Kk=new RegExp("[~\\*/\\[\\]]");function Gk(t,e,n){if(e.search(Kk)>=0)throw Jk("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(_k.bind.apply(_k,Object(gc.g)([void 0],e.split(".")))))._internalPath}catch(r){throw Jk("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Jk(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Jb(Gb.INVALID_ARGUMENT,(a+=". ")+t+u)}function Qk(t,e){return t.some((function(t){return t.isEqual(e)}))}var $k=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new sk(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Yk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Xk("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Yk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(gc.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}($k);function Xk(t,e){return"string"==typeof e?Gk(t,e):e instanceof _k?e._internalPath:e._delegate._internalPath}var Zk=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),tx=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(gc.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new ex(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Xk("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}($k),ex=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(gc.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(tx),nx=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Zk(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new ex(n._firestore,n._userDataWriter,r.key,r,new Zk(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Jb(Gb.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new ex(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Zk(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new ex(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Zk(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:rx(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function rx(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return e_()}}function ix(t,e){return t instanceof tx&&e instanceof tx?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof nx&&e instanceof nx&&t._firestore===e._firestore&&dk(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function ox(t){if(gw(t)&&0===t.explicitOrderBy.length)throw new Jb(Gb.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var sx=function(){};function ax(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var ux=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Wc=e,i.Gc=n,i.zc=r,i.type="where",i}return Object(gc.c)(e,t),e.prototype._apply=function(t){var e=Ak(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Jb(Gb.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){gx(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(px(r,t,l[c]));a={arrayValue:{values:u}}}else a=px(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||gx(s,o),a=Vk(n,"where",s,"in"===o||"not-in"===o);var h=$_.create(i,o,a);return function(t,e){if(e.g()){var n=yw(t);if(null!==n&&!n.isEqual(e.field))throw new Jb(Gb.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=mw(t);null!==r&&mx(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Jb(Gb.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Wc,this.Gc,this.zc);return new ak(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new hw(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(sx),cx=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Wc=e,r.Hc=n,r.type="orderBy",r}return Object(gc.c)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Jb(Gb.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Jb(Gb.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new aw(e,n);return function(t,e){if(null===mw(t)){var n=yw(t);null!==n&&mx(0,n,e.field)}}(t,r),r}(t._query,this.Wc,this.Hc);return new ak(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new hw(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(sx),lx=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return Object(gc.c)(e,t),e.prototype._apply=function(t){return new ak(t.firestore,t.converter,ww(t._query,this.Jc,this.Yc))},e}(sx),hx=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Xc=n,i.Zc=r,i}return Object(gc.c)(e,t),e.prototype._apply=function(t){var e=fx(t,this.type,this.Xc,this.Zc);return new ak(t.firestore,t.converter,function(t,e){return new hw(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(sx),dx=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Xc=n,i.Zc=r,i}return Object(gc.c)(e,t),e.prototype._apply=function(t){var e=fx(t,this.type,this.Xc,this.Zc);return new ak(t.firestore,t.converter,function(t,e){return new hw(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(sx);function fx(t,e,n,r){if(n[0]=Object(Tp.o)(n[0]),n[0]instanceof $k)return function(t,e,n,r,i){if(!r)throw new Jb(Gb.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=bw(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(L_(e,r.key));else{var c=r.data.field(u.field);if(C_(c))throw new Jb(Gb.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Jb(Gb.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new ow(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Ak(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Jb(Gb.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Jb(Gb.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!vw(t)&&-1!==c.indexOf("/"))throw new Jb(Gb.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(g_.fromString(c));if(!x_.isDocumentKey(l))throw new Jb(Gb.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new x_(l);a.push(L_(e,h))}else{var d=Vk(n,r,c);a.push(d)}}return new ow(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function px(t,e,n){if("string"==typeof(n=Object(Tp.o)(n))){if(""===n)throw new Jb(Gb.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!vw(e)&&-1!==n.indexOf("/"))throw new Jb(Gb.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(g_.fromString(n));if(!x_.isDocumentKey(r))throw new Jb(Gb.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return L_(t,new x_(r))}if(n instanceof sk)return L_(t,n._key);throw new Jb(Gb.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+ek(n)+".")}function gx(t,e){if(!Array.isArray(t)||0===t.length)throw new Jb(Gb.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Jb(Gb.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function mx(t,e,n){if(!n.isEqual(e))throw new Jb(Gb.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var yx=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),A_(t)){case 0:return null;case 1:return t.booleanValue;case 2:return O_(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(S_(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw e_()}},t.prototype.convertObject=function(t,e){var n=this,r={};return d_(t.fields||{},(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new Sk(O_(t.latitude),O_(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=function t(e){var n=e.mapValue.fields.__previous_value__;return C_(n)?t(n):n}(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(E_(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=w_(t);return new c_(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=g_.fromString(t);n_(dS(n));var r=new zI(n.get(1),n.get(3)),i=new x_(n.popFirst(5));return r.isEqual(e)||Xb("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function vx(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var bx=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(gc.c)(e,t),e.prototype.convertBytes=function(t){return new wk(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new sk(this.firestore,null,e)},e}(yx),_x=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Ak(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=wx(t,this._firestore),i=vx(r.converter,e,n),o=Nk(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Hw.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=wx(t,this._firestore);return o="string"==typeof(e=Object(Tp.o)(e))||e instanceof _k?Uk(this._dataReader,"WriteBatch.update",s._key,e,n,r):Fk(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Hw.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=wx(t,this._firestore);return this._mutations=this._mutations.concat(new sO(e._key,Hw.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Jb(Gb.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function wx(t,e){if((t=Object(Tp.o)(t)).firestore!==e)throw new Jb(Gb.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Ox=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(gc.c)(e,t),e.prototype.convertBytes=function(t){return new wk(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new sk(this.firestore,null,e)},e}(yx);function Sx(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=nk(t,sk);var o=nk(t.firestore,gk),s=Ak(o);return Ex(o,[("string"==typeof(e=Object(Tp.o)(e))||e instanceof _k?Uk(s,"updateDoc",t._key,e,n,r):Fk(s,"updateDoc",t._key,e)).toMutation(t._key,Hw.exists(!0))])}function Cx(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Object(Tp.o)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||pk(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(pk(i[a])){var d=i[a];i[a]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[a+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[a+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof sk)c=nk(t.firestore,gk),l=fw(t._key.path),u={next:function(e){i[a]&&i[a](Tx(c,t,e))},error:i[a+1],complete:i[a+2]};else{var f=nk(t,ak);c=nk(f.firestore,gk),l=f._query;var p=new Ox(c);u={next:function(t){i[a]&&i[a](new nx(c,p,f,t))},error:i[a+1],complete:i[a+2]},ox(t._query)}return function(t,e,n,r){var i=this,o=new TI(r),s=new LT(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return Object(gc.b)(i,void 0,void 0,(function(){var e;return Object(gc.d)(this,(function(n){switch(n.label){case 0:return e=NT,[4,FI(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return Object(gc.b)(i,void 0,void 0,(function(){var e;return Object(gc.d)(this,(function(n){switch(n.label){case 0:return e=jT,[4,FI(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(mk(c),l,h,u)}function Ex(t,e){return function(t,e){var n=this,r=new LS;return t.asyncQueue.enqueueAndForget((function(){return Object(gc.b)(n,void 0,void 0,(function(){var n;return Object(gc.d)(this,(function(i){switch(i.label){case 0:return n=JT,[4,MI(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(mk(t),e)}function Tx(t,e,n){var r=n.docs.get(e._key),i=new Ox(t);return new tx(t,i,e._key,r,new Zk(n.hasPendingWrites,n.fromCache),e.converter)}var Ix=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(gc.c)(e,t),e.prototype.get=function(e){var n=this,r=wx(e,this._firestore),i=new Ox(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new tx(n._firestore,i,r._key,t._document,new Zk(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Ak(t)}return t.prototype.get=function(t){var e=this,n=wx(t,this._firestore),r=new bx(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return e_();var i=t[0];if(i.isFoundDocument())return new $k(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new $k(e._firestore,r,n._key,null,n.converter);throw e_()}))},t.prototype.set=function(t,e,n){var r=wx(t,this._firestore),i=vx(r.converter,e,n),o=Nk(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=wx(t,this._firestore);return o="string"==typeof(e=Object(Tp.o)(e))||e instanceof _k?Uk(this._dataReader,"Transaction.update",s._key,e,n,r):Fk(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=wx(t,this._firestore);return this._transaction.delete(e._key),this},t}());function kx(){if("undefined"==typeof Uint8Array)throw new Jb(Gb.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function xx(){if("undefined"==typeof atob)throw new Jb(Gb.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Ax=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return xx(),new t(wk.fromBase64String(e))},t.fromUint8Array=function(e){return kx(),new t(wk.fromUint8Array(e))},t.prototype.toBase64=function(){return xx(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return kx(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),Nx=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){bk(t=nk(t,gk));var n=mk(t),r=t._freezeSettings(),i=new EI;return vk(n,i,new SI(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){bk(t=nk(t,gk));var e=mk(t),n=t._freezeSettings(),r=new EI;return vk(e,r,new CI(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Jb(Gb.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new LS;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return Object(gc.b)(e,void 0,void 0,(function(){var e;return Object(gc.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(gc.b)(this,void 0,void 0,(function(){return Object(gc.d)(this,(function(e){switch(e.label){case 0:return US.yt()?[4,US.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}}))}))}($C(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),jx=function(){function t(t,e,n){var r=this;this._delegate=e,this.ta=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof zI||(this.ea=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=nk(t,ok))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&Zb("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=Object(Tp.j)(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Jb(Gb.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new KI(new WI(o,new IE(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Object(gc.b)(e,void 0,void 0,(function(){var e,n;return Object(gc.d)(this,(function(r){switch(r.label){case 0:return[4,PI(t)];case 1:return e=r.sent(),[4,LI(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=r_(t);return e.$r.delete(0),ZE(e)}(n))]}}))}))}))}(mk(nk(this._delegate,gk)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Object(gc.b)(e,void 0,void 0,(function(){var e,n;return Object(gc.d)(this,(function(r){switch(r.label){case 0:return[4,PI(t)];case 1:return e=r.sent(),[4,LI(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(gc.b)(this,void 0,void 0,(function(){var e;return Object(gc.d)(this,(function(n){switch(n.label){case 0:return(e=r_(t)).$r.add(0),[4,tT(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(mk(nk(this._delegate,gk)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&XI("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.ta.enableMultiTabIndexedDbPersistence(this):this.ta.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.ta.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.ea&&(this.ea._removeServiceInstance("firestore"),this.ea._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new LS;return t.asyncQueue.enqueueAndForget((function(){return Object(gc.b)(e,void 0,void 0,(function(){var e;return Object(gc.d)(this,(function(r){switch(r.label){case 0:return e=tI,[4,MI(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(mk(nk(this._delegate,gk)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new TI(e);return t.asyncQueue.enqueueAndForget((function(){return Object(gc.b)(n,void 0,void 0,(function(){var e;return Object(gc.d)(this,(function(n){switch(n.label){case 0:return e=function(t,e){r_(t).Gr.add(e),e.next()},[4,FI(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return Object(gc.b)(n,void 0,void 0,(function(){var e;return Object(gc.d)(this,(function(n){switch(n.label){case 0:return e=function(t,e){r_(t).Gr.delete(e)},[4,FI(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(mk(t=nk(t,gk)),pk(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.ea)throw new Jb(Gb.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.ea},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Kx(this,ck(this._delegate,t))}catch(t){throw Fx(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Mx(this,lk(this._delegate,t))}catch(t){throw Fx(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Bx(this,function(t,e){if(t=nk(t,ok),$I("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Jb(Gb.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new ak(t,null,function(t){return new hw(g_.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Fx(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new LS;return t.asyncQueue.enqueueAndForget((function(){return Object(gc.b)(n,void 0,void 0,(function(){var n;return Object(gc.d)(this,(function(i){switch(i.label){case 0:return[4,function(t){return RI(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new kI(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(mk(t),(function(n){return e(new Ix(t,n))}))}(this._delegate,(function(n){return t(new Px(e,n))}))},t.prototype.batch=function(){var t=this;return mk(this._delegate),new Dx(new _x(this._delegate,(function(e){return Ex(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new Jb(Gb.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Jb(Gb.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Rx=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(gc.c)(e,t),e.prototype.convertBytes=function(t){return new Ax(new wk(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Mx.na(e,this.firestore,null)},e}(yx),Px=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Rx(t)}return t.prototype.get=function(t){var e=this,n=Gx(t);return this._delegate.get(n).then((function(t){return new qx(e._firestore,new tx(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=Gx(t);return n?(YI("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Gx(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(gc.g)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Gx(t);return this._delegate.delete(e),this},t}(),Dx=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Gx(t);return n?(YI("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Gx(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(gc.g)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Gx(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),Lx=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new ex(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new zx(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.sa=function(e,n){var r=t.ia,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Rx(e),n),i.set(n,o)),o},t}();Lx.ia=new WeakMap;var Mx=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Rx(t)}return t.ra=function(e,n,r){if(e.length%2!=0)throw new Jb(Gb.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new sk(n._delegate,r,new x_(e)))},t.na=function(e,n,r){return new t(n,new sk(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Kx(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Kx(this.firestore,ck(this._delegate,t))}catch(t){throw Fx(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(Tp.o)(t))instanceof sk&&hk(this._delegate,t)},t.prototype.set=function(t,e){e=YI("DocumentReference.set",e);try{return function(t,e,n){t=nk(t,sk);var r=nk(t.firestore,gk),i=vx(t.converter,e,n);return Ex(r,[Nk(Ak(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Hw.none())])}(this._delegate,t,e)}catch(t){throw Fx(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Sx(this._delegate,t):Sx.apply(void 0,Object(gc.g)([this._delegate,t,e],n))}catch(t){throw Fx(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return Ex(nk((t=this._delegate).firestore,gk),[new sO(t._key,Hw.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Ux(e),i=Vx(e,(function(e){return new qx(t.firestore,new tx(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return Cx(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=nk(t,sk);var e=nk(t.firestore,gk),n=mk(e),r=new Ox(e);return function(t,e){var n=this,r=new LS;return t.asyncQueue.enqueueAndForget((function(){return Object(gc.b)(n,void 0,void 0,(function(){var n;return Object(gc.d)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(gc.b)(this,void 0,void 0,(function(){var r,i;return Object(gc.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=r_(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Jb(Gb.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=ET(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,DI(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new tx(e,r,t._key,n,new Zk(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=nk(t,sk);var e=nk(t.firestore,gk);return UI(mk(e),t._key,{source:"server"}).then((function(n){return Tx(e,t,n)}))}(this._delegate):function(t){t=nk(t,sk);var e=nk(t.firestore,gk);return UI(mk(e),t._key).then((function(n){return Tx(e,t,n)}))}(this._delegate)).then((function(t){return new qx(e.firestore,new tx(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Lx.sa(this.firestore,e):null))},t}();function Fx(t,e,n){return t.message=t.message.replace(e,n),t}function Ux(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!pk(r))return r}return{}}function Vx(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=pk(t[0])?t[0]:pk(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var qx=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Mx(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return ix(this._delegate,t._delegate)},t}(),zx=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(gc.c)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(qx),Bx=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Rx(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,ax(this._delegate,function(t,e,n){var r=e,i=Xk("where",t);return new ux(i,r,n)}(e,n,r)))}catch(e){throw Fx(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,ax(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Xk("orderBy",t);return new cx(r,n)}(e,n)))}catch(e){throw Fx(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,ax(this._delegate,function(t){return rk("limit",t),new lx("limit",t,"F")}(e)))}catch(e){throw Fx(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,ax(this._delegate,function(t){return rk("limitToLast",t),new lx("limitToLast",t,"L")}(e)))}catch(e){throw Fx(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,ax(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new hx("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw Fx(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,ax(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new hx("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw Fx(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,ax(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new dx("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw Fx(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,ax(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new dx("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw Fx(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return dk(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=nk(t,ak);var e=nk(t.firestore,gk),n=mk(e),r=new Ox(e);return function(t,e){var n=this,r=new LS;return t.asyncQueue.enqueueAndForget((function(){return Object(gc.b)(n,void 0,void 0,(function(){var n;return Object(gc.d)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(gc.b)(this,void 0,void 0,(function(){var r,i,o,s,a;return Object(gc.d)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,hE(t,e,!0)];case 1:return a=u.sent(),r=new qT(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=ET(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,DI(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new nx(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=nk(t,ak);var e=nk(t.firestore,gk),n=mk(e),r=new Ox(e);return VI(n,t._query,{source:"server"}).then((function(n){return new nx(e,r,t,n)}))}(this._delegate):function(t){t=nk(t,ak);var e=nk(t.firestore,gk),n=mk(e),r=new Ox(e);return ox(t._query),VI(n,t._query).then((function(n){return new nx(e,r,t,n)}))}(this._delegate)).then((function(t){return new Hx(e.firestore,new nx(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Ux(e),i=Vx(e,(function(e){return new Hx(t.firestore,new nx(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return Cx(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Lx.sa(this.firestore,e):null))},t}(),Wx=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new zx(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),Hx=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Bx(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new zx(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new Wx(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new zx(n._firestore,r))}))},t.prototype.isEqual=function(t){return ix(this._delegate,t._delegate)},t}(),Kx=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(gc.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Mx(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Mx(this.firestore,void 0===t?lk(this._delegate):lk(this._delegate,t))}catch(t){throw Fx(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=nk(t.firestore,gk),r=lk(t),i=vx(t.converter,e);return Ex(n,[Nk(Ak(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Hw.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new Mx(e.firestore,t)}))},e.prototype.isEqual=function(t){return hk(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?Lx.sa(this.firestore,t):null))},e}(Bx);function Gx(t){return nk(t,sk)}var Jx,Qx=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(_k.bind.apply(_k,Object(gc.g)([void 0],t)))}return t.documentId=function(){return new t(y_.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(Tp.o)(t))instanceof _k&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),$x=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Pk("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new jk("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Dk("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Lk("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Mk("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),Yx={Firestore:jx,GeoPoint:Sk,Timestamp:c_,Blob:Ax,Transaction:Px,WriteBatch:Dx,DocumentReference:Mx,DocumentSnapshot:qx,Query:Bx,QueryDocumentSnapshot:zx,QuerySnapshot:Hx,CollectionReference:Kx,FieldPath:Qx,FieldValue:$x,setLogLevel:function(t){Qb.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function Xx(t,e){return function(t,e=rf.b){return new jt.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function Zx(t,e){return Xx(t,e).pipe(Object(Pt.a)(t=>({payload:t,type:"query"})))}function tA(t,e){return Zx(t,e).pipe(Ic(void 0),Bg(),Object(Pt.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function eA(t,e,n){return tA(t,n).pipe(Iu((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return nA(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return nA(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return nA(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),Ru(),Object(Pt.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function nA(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function rA(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(function(t,e){t.INTERNAL.registerComponent(new Ip.a("firestore",(function(t){return function(t,e){return new jx(t,new gk(t,e),new Nx)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Yx)))})(Jx=Ep.a),Jx.registerVersion("@firebase/firestore","2.3.1");class iA{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=tA(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(Pt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(Ic(void 0),Bg(),Au(([t,e])=>e.length>0||!t),Object(Pt.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Iu((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=rA(t);return eA(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Zx(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Pt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(Lt.a)(this.query.get(t)).pipe(Object(yu.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new oA(this.ref.doc(t),this.afs)}}class oA{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=hA(n,e);return new iA(r,i,this.afs)}snapshotChanges(){return Xx(this.ref,this.afs.schedulers.outsideAngular).pipe(Ic(void 0),Bg(),Object(Pt.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(Pt.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(Lt.a)(this.ref.get(t)).pipe(Object(yu.b)(this.afs.schedulers.insideAngular))}}class sA{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?tA(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Pt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Au(t=>t.length>0),this.afs.keepUnstableUntilFirst):tA(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Iu((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=rA(t);return eA(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Zx(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Pt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(Lt.a)(this.query.get(t)).pipe(Object(yu.b)(this.afs.schedulers.insideAngular))}}const aA=new r.q("angularfire2.enableFirestorePersistence"),uA=new r.q("angularfire2.firestore.persistenceSettings"),cA=new r.q("angularfire2.firestore.settings"),lA=new r.q("angularfire2.firestore.use-emulator");function hA(t,e=(t=>t)){return{query:e(t),ref:t}}let dA=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new Hf.d(o),this.keepUnstableUntilFirst=Object(Hf.h)(this.schedulers);const c=Object(Hf.g)(t,o,e);!op.a.auth&&u&&Object(Hf.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(Hf.f)(c.name+".firestore","AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!Y(i)){const e=()=>{try{return Object(Lt.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(Jx){return"undefined"!=typeof console&&console.warn(Jx),Object(Cu.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(Cu.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=hA(n,e),o=this.schedulers.ngZone.run(()=>r);return new iA(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new sA(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new oA(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(Hf.c),r.Sb(Hf.b,8),r.Sb(aA,8),r.Sb(cA,8),r.Sb(r.B),r.Sb(r.z),r.Sb(uA,8),r.Sb(lA,8),r.Sb(Yf,8))},t.\u0275prov=r.Fb({factory:function(){return new t(r.Sb(Hf.c),r.Sb(Hf.b,8),r.Sb(aA,8),r.Sb(cA,8),r.Sb(r.B),r.Sb(r.z),r.Sb(uA,8),r.Sb(lA,8),r.Sb(Yf,8))},token:t,providedIn:"any"}),t})(),fA=(()=>{class t{constructor(t,e,n,r){this.afs=t,this.afAuth=e,this.router=n,this.ngZone=r,this.afAuth.authState.subscribe(t=>{t?(this.userData=t,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user",null),JSON.parse(localStorage.getItem("user")))})}SignIn(t,e){return this.afAuth.signInWithEmailAndPassword(t,e).then(t=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(t.user)}).catch(t=>{window.alert(t.message)})}SignUp(t,e){return this.afAuth.createUserWithEmailAndPassword(t,e).then(t=>{this.SendVerificationMail(),this.SetUserData(t.user)}).catch(t=>{window.alert(t.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(t=>{window.alert(t)})}get isLoggedInAndVerified(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}get isLoggedIn(){return null!==JSON.parse(localStorage.getItem("user"))}GoogleAuth(){return this.AuthLogin(new op.a.auth.GoogleAuthProvider)}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(t=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(t.user)}).catch(t=>{window.alert(t)})}SetUserData(t){return this.afs.doc("users/"+t.uid).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(dA),r.Sb(rp),r.Sb(Kh),r.Sb(r.z))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),pA=(()=>{class t{constructor(t,e){this.authService=t,this.router=e}canActivate(t,e){return!0!==this.authService.isLoggedIn&&this.router.navigate(["sign-in"]),!0}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(fA),r.Sb(Kh))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),gA=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Db({type:t,selectors:[["app-home"]],decls:2,vars:0,consts:[[1,"container"]],template:function(t,e){1&t&&(r.Ob(0,"div",0),r.pc(1," home works\n"),r.Nb())},encapsulation:2}),t})();function mA(t,e){if(1&t&&(r.Ob(0,"div",1),r.Ob(1,"h1"),r.pc(2),r.Nb(),r.Ob(3,"h3"),r.pc(4,"Ahora est\xe1s logeado, aunque lamentablemente no hay ninguna funcionalidad extra."),r.Nb(),r.Kb(5,"br"),r.Ob(6,"table",2),r.Ob(7,"thead",3),r.Ob(8,"tr"),r.Kb(9,"th"),r.Ob(10,"th"),r.pc(11,"Tus datos"),r.Nb(),r.Nb(),r.Nb(),r.Ob(12,"tbody"),r.Ob(13,"tr"),r.Ob(14,"td"),r.pc(15,"Nombre: "),r.Nb(),r.Ob(16,"td"),r.pc(17),r.Nb(),r.Nb(),r.Ob(18,"tr"),r.Ob(19,"td"),r.pc(20,"Email: "),r.Nb(),r.Ob(21,"td"),r.pc(22),r.Nb(),r.Nb(),r.Ob(23,"tr"),r.Ob(24,"td"),r.pc(25,"Nick: "),r.Nb(),r.Ob(26,"td"),r.pc(27),r.Nb(),r.Nb(),r.Ob(28,"tr"),r.Ob(29,"td"),r.pc(30,"Imagen de perfil: "),r.Nb(),r.Ob(31,"td"),r.Kb(32,"img",4),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb()),2&t){const t=e.ngIf;r.zb(2),r.rc("\xa1Hola ",t.given_name,"!"),r.zb(15),r.qc(t.name),r.zb(5),r.qc(t.email),r.zb(5),r.qc(t.nickname),r.zb(5),r.dc("src",t.picture,r.lc)}}let yA=(()=>{class t{constructor(t){this.auth=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(wd))},t.\u0275cmp=r.Db({type:t,selectors:[["app-autenticado"]],decls:2,vars:3,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"table"],[1,"table-dark"],["alt","",3,"src"]],template:function(t,e){1&t&&(r.nc(0,mA,33,5,"div",0),r.Yb(1,"async")),2&t&&r.dc("ngIf",r.Zb(1,1,null==e.auth?null:e.auth.user$))},directives:[U],pipes:[J],encapsulation:2}),t})(),vA=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Db({type:t,selectors:[["app-chat"]],decls:2,vars:0,template:function(t,e){1&t&&(r.Ob(0,"p"),r.pc(1,"chat works!"),r.Nb())},encapsulation:2}),t})(),bA=(()=>{class t{transform(t,e=0){return t&&t.length>e?t[e].url:"assets/img/noimage.png"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=r.Ib({name:"sinfoto",type:t,pure:!0}),t})(),_A=(()=>{class t{constructor(t){this.domSanitazer=t}transform(t,e){return this.domSanitazer.bypassSecurityTrustResourceUrl(e+t)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Tt))},t.\u0275pipe=r.Ib({name:"domseguro",type:t,pure:!0}),t})();const wA=function(t){return{active:t}};function OA(t,e){if(1&t&&(r.Ob(0,"div",13),r.Kb(1,"img",14),r.Yb(2,"sinfoto"),r.Ob(3,"div",15),r.Ob(4,"h2",16),r.pc(5),r.Nb(),r.Kb(6,"iframe",17),r.Yb(7,"domseguro"),r.Nb(),r.Nb()),2&t){const t=e.$implicit;r.dc("ngClass",r.gc(9,wA,e.first)),r.zb(1),r.dc("src",r.Zb(2,4,t.images),r.lc),r.zb(4),r.qc(t.name),r.zb(1),r.dc("src",r.ac(7,6,t.uri,"https://embed.spotify.com/?uri="),r.kc)}}function SA(t,e){if(1&t&&(r.Ob(0,"div",5),r.Ob(1,"div",6),r.nc(2,OA,8,11,"div",7),r.Nb(),r.Ob(3,"button",8),r.Kb(4,"span",9),r.Ob(5,"span",10),r.pc(6,"Previous"),r.Nb(),r.Nb(),r.Ob(7,"button",11),r.Kb(8,"span",12),r.Ob(9,"span",10),r.pc(10,"Next"),r.Nb(),r.Nb(),r.Nb()),2&t){const t=r.Xb();r.zb(2),r.dc("ngForOf",t._spotifyService.releases)}}function CA(t,e){1&t&&(r.Ob(0,"div",0),r.Ob(1,"div",18),r.Ob(2,"h2"),r.pc(3,"CARGANDO DATOS..."),r.Nb(),r.Nb(),r.Nb())}let EA=(()=>{class t{constructor(t){this._spotifyService=t,this.termino="","undefined"!=typeof Storage?this.getTokenStorageAndReleases():this.getTokenAndReleasesWithoutStorage()}getNewReleases(t){return this._spotifyService.getNewReleasesS(t)}createToken(){return this._spotifyService.createToken()}createTokenStorage(){return this._spotifyService.createToken()}getTokenStorageAndReleases(){this.token=sessionStorage.getItem("tokenSpotify"),console.log(this.token),null==this.token||""==this.token||"null"==this.token?(console.log("ESTAMOS EN NULL"),this.createTokenStorage().subscribe(t=>{this.token=t,console.log(this.token),sessionStorage.setItem("tokenSpotify",this.token),this.getNewReleases(this.token).subscribe(()=>{})})):(console.log("ELSE BLOCK"),console.log(this.token),this.getNewReleases(this.token).subscribe(()=>{}))}getTokenAndReleasesWithoutStorage(){this.createToken().subscribe(()=>this.getNewReleases().subscribe(()=>{}))}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Sp))},t.\u0275cmp=r.Db({type:t,selectors:[["app-spoti"]],decls:10,vars:2,consts:[[1,"container","main-container"],[1,"imgContiner"],["src","/assets/img/banner-ico.png",1,"flexibleImg","spotiLogo"],["id","carouselExampleControls","class","carousel slide","data-bs-ride","carousel",4,"ngIf","ngIfElse"],["charginData",""],["id","carouselExampleControls","data-bs-ride","carousel",1,"carousel","slide"],[1,"carousel-inner"],["class","carousel-item",3,"ngClass",4,"ngFor","ngForOf"],["type","button","data-bs-target","#carouselExampleControls","data-bs-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],["type","button","data-bs-target","#carouselExampleControls","data-bs-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"],[1,"carousel-item",3,"ngClass"],["alt","imagen del slide 1",1,"d-block","carousel-img",3,"src"],[1,"carousel-caption","d-md-block"],[1,"carouselName"],["width","300","height","80","frameborder","0",3,"src"],["role","alert",1,"alert","alert-info"]],template:function(t,e){if(1&t&&(r.Ob(0,"div",0),r.Ob(1,"h1"),r.Ob(2,"div",1),r.Kb(3,"img",2),r.pc(4," Api Spotify - "),r.Ob(5,"small"),r.pc(6,"Top Lanzamientos"),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.nc(7,SA,11,1,"div",3),r.nc(8,CA,4,0,"ng-template",null,4,r.oc)),2&t){const t=r.ic(9);r.zb(7),r.dc("ngIf",e._spotifyService.releases.length>17)("ngIfElse",t)}},directives:[U,M,D],pipes:[bA,_A],encapsulation:2}),t})(),TA=(()=>{class t{constructor(t){this.domSanitizer=t}transform(t){return console.log(this.domSanitizer.bypassSecurityTrustResourceUrl("https://www.youtube.com/embed/"+t)),this.domSanitizer.bypassSecurityTrustResourceUrl("https://www.youtube.com/embed/"+t)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Tt))},t.\u0275pipe=r.Ib({name:"videoYoutube",type:t,pure:!0}),t})();function IA(t,e){if(1&t){const t=r.Pb();r.Ob(0,"div",8),r.Ob(1,"div",9),r.Kb(2,"img",10),r.Ob(3,"div",11),r.Ob(4,"h5",12),r.pc(5),r.Nb(),r.Ob(6,"button",13),r.Vb("click",(function(){r.jc(t);const n=e.$implicit;return r.Xb(2).verVideo(n)})),r.pc(7,"Ver video"),r.Nb(),r.Nb(),r.Nb(),r.Nb()}if(2&t){const t=e.$implicit;r.zb(2),r.dc("src",t.snippet.thumbnails.high.url,r.lc)("alt",t.snippet.title),r.zb(3),r.qc(t.snippet.title)}}function kA(t,e){if(1&t&&(r.Ob(0,"div",6),r.nc(1,IA,8,3,"div",7),r.Nb()),2&t){const t=r.Xb();r.zb(1),r.dc("ngForOf",t.videos)}}function xA(t,e){if(1&t){const t=r.Pb();r.Ob(0,"div",14),r.Ob(1,"div",15),r.Ob(2,"h5",16),r.pc(3),r.Nb(),r.Nb(),r.Ob(4,"div",17),r.Kb(5,"iframe",18),r.Yb(6,"videoYoutube"),r.Nb(),r.Ob(7,"div",19),r.Ob(8,"button",20),r.Vb("click",(function(){return r.jc(t),r.Xb().cerrarModal()})),r.pc(9,"Cerrar Video"),r.Nb(),r.Nb(),r.Nb()}if(2&t){const t=r.Xb();r.zb(3),r.qc(t.videoSel.snippet.title),r.zb(2),r.dc("src",r.Zb(6,2,t.videoSel.id),r.kc)}}let AA=(()=>{class t{constructor(t){this._yts=t,this.videos=[],this._yts.getVideos().subscribe(t=>{this.videos=t})}verVideo(t){this.videoSel=t}cerrarModal(){this.videoSel=null}cargarMas(){this._yts.getVideos().subscribe(t=>{this.videos.push.apply(this.videos,t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Cp))},t.\u0275cmp=r.Db({type:t,selectors:[["app-youtube"]],decls:10,vars:2,consts:[[1,"container","main-container"],["class","row row-cols-1 row-cols-md-3 g-4",4,"ngIf"],["type","button",1,"btn","btn-outline-primary","w-100","mt-2","mb-5",3,"click"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true","data-bs-backdrop","static","data-bs-keyboard","false",1,"modal","fade","c-black"],[1,"modal-dialog"],["class","modal-content",4,"ngIf"],[1,"row","row-cols-1","row-cols-md-3","g-4"],["class","col",4,"ngFor","ngForOf"],[1,"col"],[1,"card","text-white","bg-dark"],[1,"card-img-top",3,"src","alt"],[1,"card-body"],[1,"card-title"],["data-bs-toggle","modal","data-bs-target","#exampleModal","type","button",1,"btn","btn-outline-primary","w-100",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],["width","100%","height","315","title","YouTube video player","frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","",3,"src"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"]],template:function(t,e){1&t&&(r.Ob(0,"div",0),r.Ob(1,"h1"),r.pc(2,"Api YuTube - Tendencias Espa\xf1a"),r.Nb(),r.Kb(3,"hr"),r.nc(4,kA,2,1,"div",1),r.Ob(5,"button",2),r.Vb("click",(function(){return e.cargarMas()})),r.pc(6,"Cargar m\xe1s"),r.Nb(),r.Nb(),r.Ob(7,"div",3),r.Ob(8,"div",4),r.nc(9,xA,10,4,"div",5),r.Nb(),r.Nb()),2&t&&(r.zb(4),r.dc("ngIf",e.videos.length>0),r.zb(5),r.dc("ngIf",e.videoSel))},directives:[U,M],pipes:[TA],encapsulation:2}),t})();function NA(t,e){if(1&t&&(r.Ob(0,"p"),r.pc(1),r.Nb()),2&t){const t=r.Xb().$implicit;r.zb(1),r.qc(t.desc)}}function jA(t,e){if(1&t){const t=r.Pb();r.Ob(0,"agm-marker",4),r.Vb("markerClick",(function(){r.jc(t);const n=e.$implicit,i=e.index;return r.Xb().clickMarcador(n,i)}))("dragEnd",(function(n){r.jc(t);const i=e.$implicit;return r.Xb().dragEndMarcador(i,n)})),r.Ob(1,"agm-info-window",5),r.Ob(2,"strong"),r.pc(3),r.Nb(),r.nc(4,NA,2,1,"p",6),r.Ob(5,"p",7),r.Ob(6,"a",8),r.Vb("click",(function(){r.jc(t);const n=e.index,i=r.Xb();return i._ms.borrarMarcador(n),i.marcadorSel=null})),r.pc(7," Borrar marcador "),r.Nb(),r.Nb(),r.Nb(),r.Nb()}if(2&t){const t=e.$implicit;r.dc("latitude",t.lat)("longitude",t.lng)("title",t.titulo)("markerDraggable",t.draggable),r.zb(1),r.dc("disableAutoPan",!0),r.zb(2),r.qc(t.titulo),r.zb(1),r.dc("ngIf",t.desc)}}function RA(t,e){1&t&&(r.Ob(0,"div",9),r.Ob(1,"div",10),r.pc(2," Haga click en el mapa para crear un marcador o seleccione uno. "),r.Nb(),r.Nb())}function PA(t,e){if(1&t){const t=r.Pb();r.Ob(0,"div",9),r.Ob(1,"h5"),r.pc(2,"Marcador"),r.Nb(),r.Kb(3,"hr"),r.Ob(4,"div",11),r.Ob(5,"label",12),r.pc(6,"Titulo"),r.Nb(),r.Ob(7,"input",13),r.Vb("ngModelChange",(function(e){return r.jc(t),r.Xb().marcadorSel.titulo=e})),r.Nb(),r.Nb(),r.Ob(8,"div",11),r.Ob(9,"label",12),r.pc(10,"Descripci\xf3n"),r.Nb(),r.Ob(11,"textarea",14),r.Vb("ngModelChange",(function(e){return r.jc(t),r.Xb().marcadorSel.desc=e})),r.pc(12,"        "),r.Nb(),r.Nb(),r.Ob(13,"div",11),r.Ob(14,"label",12),r.pc(15,"Draggable"),r.Nb(),r.Ob(16,"select",15),r.Vb("ngModelChange",(function(e){return r.jc(t),r.Xb().draggable=e}))("change",(function(){return r.jc(t),r.Xb().cambiarDraggable()})),r.Ob(17,"option",16),r.pc(18,"True"),r.Nb(),r.Ob(19,"option",17),r.pc(20,"False"),r.Nb(),r.Nb(),r.Nb(),r.Kb(21,"br"),r.Ob(22,"button",18),r.Vb("click",(function(){return r.jc(t),r.Xb()._ms.guardarMarcadores()})),r.pc(23," Guardar "),r.Nb(),r.Nb()}if(2&t){const t=r.Xb();r.zb(7),r.dc("ngModel",t.marcadorSel.titulo),r.zb(4),r.dc("ngModel",t.marcadorSel.desc),r.zb(5),r.dc("ngModel",t.draggable)}}let DA=(()=>{class t{constructor(t){this._ms=t,this.lat=38.48420283763195,this.lng=-.7677831619109627,this.zoom=15,this.marcadorSel=null,this.draggable="1",this._ms.cargarMarcadores()}clickMapa(t){this._ms.insertarMarcador({lat:t.coords.lat,lng:t.coords.lng,titulo:"sin titulo",draggable:!0})}clickMarcador(t,e){this.marcadorSel=t,this.draggable=this.marcadorSel.draggable?"1":"0"}dragEndMarcador(t,e){let n=e.coords.lng;t.lat=e.coords.lat,t.lng=n,this._ms.guardarMarcadores()}cambiarDraggable(){this.marcadorSel.draggable="1"==this.draggable}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Op))},t.\u0275cmp=r.Db({type:t,selectors:[["app-maps"]],decls:5,vars:6,consts:[[1,""],[3,"latitude","longitude","zoom","mapClick"],[3,"latitude","longitude","title","markerDraggable","markerClick","dragEnd",4,"ngFor","ngForOf"],["class","container mt-2",4,"ngIf"],[3,"latitude","longitude","title","markerDraggable","markerClick","dragEnd"],[3,"disableAutoPan"],[4,"ngIf"],[1,"puntero"],[1,"text-danger",3,"click"],[1,"container","mt-2"],[1,"alert","alert-info"],[1,"form-group"],["for",""],["type","text","name","titulo",1,"form-control",3,"ngModel","ngModelChange"],["rows","5","name","desc",1,"form-control",3,"ngModel","ngModelChange"],["name","draggable",1,"form-control",3,"ngModel","ngModelChange","change"],["value","1"],["value","0"],["type","button",1,"btn","btn-outline-primary","w-100",3,"click"]],template:function(t,e){1&t&&(r.Ob(0,"div",0),r.Ob(1,"agm-map",1),r.Vb("mapClick",(function(t){return e.clickMapa(t)})),r.nc(2,jA,8,7,"agm-marker",2),r.Nb(),r.Nb(),r.nc(3,RA,3,0,"div",3),r.nc(4,PA,24,3,"div",3)),2&t&&(r.zb(1),r.dc("latitude",e.lat)("longitude",e.lng)("zoom",e.zoom),r.zb(1),r.dc("ngForOf",e._ms.marcadores),r.zb(1),r.dc("ngIf",!e.marcadorSel),r.zb(1),r.dc("ngIf",e.marcadorSel))},directives:[Rf,M,U,Lf,Ef,Bt,Qt,Be,ye,ve,Oe],encapsulation:2}),t})();class LA{constructor(t){this.url="",this.estaSubiendo=!1,this.progreso=0,this.archivo=t,this.nombreArchivo=t.name}}let MA=(()=>{class t{constructor(t){this.elemento=t,this.archivos=[],this.archivoSobre=new r.n}onDragEnter(t){this.archivoSobre.emit(!0)}onDragLeave(t){this.archivoSobre.emit(!1)}onDragOver(t){this._getTransferencia(t).dropEffect="copy",this._prevenirYdetener(t),this.archivoSobre.emit(!0)}onDrop(t){let e=this._getTransferencia(t);e&&(console.log(this.archivos),0!=this.archivos.length&&this.limpiarArchivos(),console.log(this.archivos),this._agregarArchivos(e.files),this.archivoSobre.emit(!1),this._prevenirYdetener(t),console.log(this.archivos))}_getTransferencia(t){return t.dataTransfer?t.dataTransfer:t.originalEvent.dataTransfer}_prevenirYdetener(t){t.preventDefault(),t.stopPropagation()}_archivoPuedeSerCargado(t){return!(this._archivoYaFueDroppeado(t.name)||!this._esImagen(t.type))}_archivoYaFueDroppeado(t){for(let e in this.archivos)if(this.archivos[e].archivo.name===t)return console.log("Archivo ya existe en la lista",t),!0;return!1}_esImagen(t){return""!=t&&null!=t&&t.startsWith("image")}_agregarArchivos(t){for(let e in Object.getOwnPropertyNames(t)){let n=t[e];if(this._archivoPuedeSerCargado(n)){let t=new LA(n);this.archivos.push(t)}}}limpiarArchivos(){for(let e of this.archivos)if(100!=e.progreso)return;let t=this.archivos.length;for(let e=0;e<t;e++)this.archivos.pop()}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.l))},t.\u0275dir=r.Eb({type:t,selectors:[["","NgDropFiles",""]],hostBindings:function(t,e){1&t&&r.Vb("dragenter",(function(t){return e.onDragEnter(t)}))("dragleave",(function(t){return e.onDragLeave(t)}))("dragover",(function(t){return e.onDragOver(t)}))("drop",(function(t){return e.onDrop(t)}))},inputs:{archivos:"archivos"},outputs:{archivoSobre:"archivoSobre"}}),t})();const FA=function(t){return{"text-green":t}},UA=function(t){return{width:t}};function VA(t,e){if(1&t&&(r.Ob(0,"tr"),r.Ob(1,"td",12),r.Ob(2,"strong"),r.pc(3),r.Nb(),r.Nb(),r.Ob(4,"td"),r.pc(5),r.Yb(6,"number"),r.Nb(),r.Ob(7,"td"),r.Ob(8,"div",13),r.Kb(9,"div",14),r.Nb(),r.Nb(),r.Nb()),2&t){const t=e.$implicit;r.zb(1),r.dc("ngClass",r.gc(7,FA,t.estaSubiendo)),r.zb(2),r.qc(t.nombreArchivo),r.zb(2),r.rc("",r.ac(6,4,t.archivo.size/1024/1024,"0.2"),"MB"),r.zb(4),r.dc("ngStyle",r.gc(9,UA,t.progreso+"%"))}}function qA(t,e){if(1&t&&(r.Ob(0,"table",9),r.Ob(1,"thead",10),r.Ob(2,"tr"),r.Ob(3,"th"),r.pc(4,"Nombre"),r.Nb(),r.Ob(5,"th"),r.pc(6,"Tama\xf1o"),r.Nb(),r.Ob(7,"th"),r.pc(8,"Progreso"),r.Nb(),r.Nb(),r.Nb(),r.Ob(9,"tbody"),r.nc(10,VA,10,11,"tr",11),r.Nb(),r.Nb()),2&t){const t=r.Xb(2);r.zb(10),r.dc("ngForOf",t.archivos)}}const zA=function(t){return{"file-over":t}};function BA(t,e){if(1&t){const t=r.Pb();r.Ob(0,"div",3),r.Ob(1,"div",3),r.Ob(2,"h3"),r.pc(3,"Seleccione y arrastre los archivos que desea subir"),r.Nb(),r.Ob(4,"div",4),r.Vb("archivoSobre",(function(e){return r.jc(t),r.Xb().archivoSobreDropZone(e)})),r.Ob(5,"h4"),r.pc(6,"Suelte los archivos aqu\xed"),r.Nb(),r.Kb(7,"img",5),r.Nb(),r.Nb(),r.Ob(8,"div",6),r.Ob(9,"button",7),r.Vb("click",(function(){return r.jc(t),r.Xb().cargarImagenesFirebase()})),r.pc(10," Subir "),r.Nb(),r.nc(11,qA,11,1,"table",8),r.Nb(),r.Nb()}if(2&t){const t=r.Xb();r.zb(4),r.dc("ngClass",r.gc(4,zA,t.estaSobreDropZone))("archivos",t.archivos),r.zb(5),r.dc("disabled",0==t.archivos.length),r.zb(2),r.dc("ngIf",t.archivos.length>0)}}const WA=function(){return["/forgot-password"]};function HA(t,e){if(1&t){const t=r.Pb();r.Ob(0,"div",15),r.Ob(1,"div",16),r.Ob(2,"button",17),r.Vb("click",(function(){return r.jc(t),r.Xb().authService.GoogleAuth()})),r.Kb(3,"i",18),r.pc(4," Log in with Google "),r.Nb(),r.Nb(),r.Nb(),r.Kb(5,"br"),r.Ob(6,"div",15),r.Ob(7,"div",16),r.Ob(8,"div",19),r.Kb(9,"input",20,21),r.Nb(),r.Ob(11,"div",22),r.Kb(12,"input",23,24),r.Ob(14,"a",25),r.pc(15,"Forgot Password?"),r.Nb(),r.Nb(),r.Ob(16,"div",19),r.Ob(17,"button",26),r.Vb("click",(function(){r.jc(t);const e=r.ic(10),n=r.ic(13);return r.Xb().authService.SignIn(e.value,n.value)})),r.pc(18,"Enter"),r.Nb(),r.Nb(),r.Nb(),r.Ob(19,"div",16),r.Ob(20,"div",19),r.Ob(21,"button",27),r.Vb("click",(function(){return r.jc(t),r.Xb().authService.GoogleAuth()})),r.Kb(22,"i",18),r.pc(23," Log in with Google "),r.Nb(),r.Nb(),r.Ob(24,"div",28),r.Ob(25,"button",29),r.pc(26," Don't have an account? Sign Up "),r.Nb(),r.Nb(),r.Nb(),r.Nb()}2&t&&(r.zb(14),r.dc("routerLink",r.fc(2,WA)),r.zb(11),r.dc("routerLink","/register-user"))}let KA=(()=>{class t{constructor(t,e){this._cargaImagenes=t,this.authService=e,this.estaSobreDropZone=!1,this.archivos=[],this.isLogged=e.isLoggedIn,console.log(this.isLogged)}ngOnInit(){}archivoSobreDropZone(t){this.estaSobreDropZone=t}cargarImagenesFirebase(){this._cargaImagenes.charge_images(this.archivos)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(zg),r.Jb(fA))},t.\u0275cmp=r.Db({type:t,selectors:[["app-gestor-archivos"]],decls:4,vars:2,consts:[[1,"row","main-container","text-center"],["class","row",4,"ngIf","ngIfElse"],["loggin",""],[1,"row"],["NgDropFiles","",1,"well","drop-zone",3,"ngClass","archivos","archivoSobre"],["src","/assets/img/drop-image.png"],[1,"col-md-12","mt-4","mb-3"],["type","button",1,"btn","btn-success","ms-3",3,"disabled","click"],["class","table table-dark table-striped",4,"ngIf"],[1,"table","table-dark","table-striped"],[1,"table-dark"],[4,"ngFor","ngForOf"],[3,"ngClass"],[1,"progress"],["role","progressbar",1,"progress-bar",2,"width","25%",3,"ngStyle"],[1,"card","text-white","bg-dark","text-center","centered","w26rem"],[1,"card-body"],["type","button",1,"btn","btn-outline-primary","w-100",3,"click"],[1,"fab","fa-google-plus-g"],[1,"formGroup"],["type","text","placeholder","Email Address","required","",1,"formControl","w-75","py-1","mb-1"],["userName",""],[1,"formGroup","mb-2"],["type","password","placeholder","Password","required","",1,"formControl","w-75","py-1","mb-1"],["userPassword",""],[1,"d-block",3,"routerLink"],["type","button",1,"btn","btn-primary","w-75",3,"click"],["type","button",1,"btn","googleBtn",3,"click"],[1,"redirectToLogin"],["type","button",1,"btn","btn-outline-info","w-100",3,"routerLink"]],template:function(t,e){if(1&t&&(r.Ob(0,"div",0),r.nc(1,BA,12,6,"div",1),r.nc(2,HA,27,3,"ng-template",null,2,r.oc),r.Nb()),2&t){const t=r.ic(3);r.zb(1),r.dc("ngIf",e.isLogged)("ngIfElse",t)}},directives:[U,MA,D,M,z,Jh,Gh],pipes:[Q],encapsulation:2}),t})();const GA=function(t){return["/spotify/search/",t]};function JA(t,e){if(1&t&&(r.Ob(0,"div",9),r.Kb(1,"img",10),r.Yb(2,"sinfoto"),r.Ob(3,"p"),r.pc(4),r.Nb(),r.Kb(5,"hr"),r.Nb()),2&t){const t=e.$implicit;r.dc("routerLink",r.gc(5,GA,t.id)),r.zb(1),r.dc("src",r.Zb(2,3,t.images),r.lc),r.zb(3),r.qc(t.name)}}let QA=(()=>{class t{constructor(t){this._spotifyService=t,this.termino=""}ngOnInit(){}buscarArtista(){this._spotifyService.getArtistas(this.termino).subscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Sp))},t.\u0275cmp=r.Db({type:t,selectors:[["app-search"]],decls:15,vars:2,consts:[[1,"container","main-container"],[1,"imgContiner"],["src","/assets/img/banner-ico.png",1,"flexibleImg","spotiLogo"],[1,"container","top-30"],[1,"row"],[1,"col-md-3"],["name","termino","type","text","placeholder","Buscar por artista",1,"form-control",3,"ngModel","ngModelChange","keyup"],[1,"col-md-9"],["class","col-md-3 text-center puntero","routerLinkActive","router-link-active",3,"routerLink",4,"ngFor","ngForOf"],["routerLinkActive","router-link-active",1,"col-md-3","text-center","puntero",3,"routerLink"],["alt","",1,"img-fluid","img-thumbnail",3,"src"]],template:function(t,e){1&t&&(r.Ob(0,"div",0),r.Ob(1,"h1"),r.Ob(2,"div",1),r.Kb(3,"img",2),r.pc(4," Api Spotify - "),r.Ob(5,"small"),r.pc(6,"Buscador"),r.Nb(),r.Nb(),r.Nb(),r.Ob(7,"div",3),r.Ob(8,"div",4),r.Ob(9,"div",5),r.Ob(10,"input",6),r.Vb("ngModelChange",(function(t){return e.termino=t}))("keyup",(function(){return e.buscarArtista()})),r.Nb(),r.Kb(11,"hr"),r.Nb(),r.Ob(12,"div",7),r.Ob(13,"div",4),r.nc(14,JA,6,7,"div",8),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb()),2&t&&(r.zb(10),r.dc("ngModel",e.termino),r.zb(4),r.dc("ngForOf",e._spotifyService.artistas))},directives:[Bt,Qt,Be,M,$h,Gh],pipes:[bA],encapsulation:2}),t})();function $A(t,e){if(1&t&&r.Kb(0,"audio",17),2&t){const t=r.Xb().$implicit;r.dc("src",t.preview_url,r.lc)}}function YA(t,e){if(1&t&&(r.Kb(0,"iframe",18),r.Yb(1,"domseguro")),2&t){const t=r.Xb().$implicit;r.dc("src",r.ac(1,1,t.uri,"https://embed.spotify.com/?uri="),r.kc)}}function XA(t,e){if(1&t&&(r.Ob(0,"tr"),r.Ob(1,"td"),r.pc(2),r.Nb(),r.Ob(3,"td"),r.Kb(4,"img",14),r.Yb(5,"sinfoto"),r.Nb(),r.Ob(6,"td"),r.pc(7),r.Nb(),r.Ob(8,"td"),r.pc(9),r.Nb(),r.Ob(10,"td"),r.nc(11,$A,1,1,"audio",15),r.nc(12,YA,2,4,"ng-template",null,16,r.oc),r.Nb(),r.Nb()),2&t){const t=e.$implicit,n=e.index,i=r.ic(13);r.zb(2),r.qc(n+1),r.zb(2),r.dc("src",r.Zb(5,6,null==t.album?null:t.album.images),r.lc),r.zb(3),r.qc(t.name),r.zb(2),r.rc("",t.popularity,"%"),r.zb(2),r.dc("ngIf",t.preview_url)("ngIfElse",i)}}function ZA(t,e){if(1&t&&(r.Ob(0,"div",9),r.Ob(1,"h3"),r.pc(2,"Top tracks"),r.Nb(),r.Kb(3,"hr"),r.Ob(4,"div",2),r.Ob(5,"div",10),r.Ob(6,"div",11),r.Ob(7,"table",12),r.Ob(8,"thead"),r.Ob(9,"tr"),r.Ob(10,"th"),r.pc(11,"#"),r.Nb(),r.Ob(12,"th"),r.pc(13,"Foto"),r.Nb(),r.Ob(14,"th"),r.pc(15,"Canci\xf3n"),r.Nb(),r.Ob(16,"th"),r.pc(17,"Popularidad"),r.Nb(),r.Ob(18,"th"),r.pc(19,"Preview"),r.Nb(),r.Nb(),r.Nb(),r.Ob(20,"tbody"),r.nc(21,XA,14,8,"tr",13),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb()),2&t){const t=r.Xb(2);r.zb(21),r.dc("ngForOf",t.pistas)}}const tN=function(){return["/spotify/search"]};function eN(t,e){if(1&t&&(r.Ob(0,"div",1),r.Ob(1,"div",2),r.Ob(2,"div",3),r.Kb(3,"img",4),r.Yb(4,"sinfoto"),r.Nb(),r.Ob(5,"div",5),r.Ob(6,"h1"),r.pc(7),r.Ob(8,"small"),r.pc(9),r.Nb(),r.Nb(),r.Kb(10,"hr"),r.Ob(11,"a",6),r.pc(12,"Abrir p\xe1gina Spotify"),r.Nb(),r.Ob(13,"a",7),r.pc(14,"Regresar"),r.Nb(),r.Nb(),r.Nb(),r.nc(15,ZA,22,1,"div",8),r.Nb()),2&t){const t=r.Xb();r.zb(3),r.dc("src",r.Zb(4,6,t.artista.images),r.lc),r.zb(4),r.rc("",t.artista.name," "),r.zb(2),r.rc("Popularidad ",t.artista.popularity,"%"),r.zb(2),r.dc("href",null==t.artista.external_urls?null:t.artista.external_urls.spotify,r.lc),r.zb(2),r.dc("routerLink",r.fc(8,tN)),r.zb(2),r.dc("ngIf",t.pistas)}}let nN=(()=>{class t{constructor(t,e){this.activatedRoute=t,this._spotifyService=e}ngOnInit(){this.activatedRoute.params.pipe(Object(Pt.a)(t=>t.id)).subscribe(t=>{this._spotifyService.getArtista(t).subscribe(t=>{this.artista=t}),this._spotifyService.getTop(t).subscribe(t=>{this.pistas=t})})}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Nl),r.Jb(Sp))},t.\u0275cmp=r.Db({type:t,selectors:[["app-artist"]],decls:1,vars:1,consts:[["class","main-container container animated fadeIn fast",4,"ngIf"],[1,"main-container","container","animated","fadeIn","fast"],[1,"row"],[1,"col-md-3","text-center"],["alt","",1,"img-circle","img-thumbnail",3,"src"],[1,"col-md-9"],[1,"btn","btn-outline-success","m-right-10",3,"href"],["routerLinkActive","router-link-active",1,"btn","btn-outline-danger",3,"routerLink"],["class","container  text-center",4,"ngIf"],[1,"container","text-center"],[1,"col-md-12"],[1,"table-responsive"],[1,"table","table-dark","table-hover"],[4,"ngFor","ngForOf"],["alt","",1,"img-fluid","img-50",3,"src"],["controls","",3,"src",4,"ngIf","ngIfElse"],["pistaUri",""],["controls","",3,"src"],["width","300","height","80","frameborder","0",3,"src"]],template:function(t,e){1&t&&r.nc(0,eN,16,9,"div",0),2&t&&r.dc("ngIf",e.artista)},directives:[U,Jh,$h,M],pipes:[bA,_A],encapsulation:2}),t})();function rN(t,e){1&t&&(r.Ob(0,"div",3),r.Ob(1,"div",4),r.pc(2," No hay im\xe1genes subidas "),r.Nb(),r.Nb())}function iN(t,e){if(1&t&&(r.Ob(0,"div",7),r.Kb(1,"img",8),r.Ob(2,"div",9),r.Ob(3,"h4",10),r.pc(4),r.Nb(),r.Nb(),r.Nb()),2&t){const t=e.$implicit,n=e.index;r.zb(1),r.dc("src",t[n].url,r.lc),r.zb(3),r.rc(" ",t[n].nombre,"")}}function oN(t,e){if(1&t&&(r.Ob(0,"div",5),r.nc(1,iN,5,2,"div",6),r.Nb()),2&t){const t=r.Xb();r.zb(1),r.dc("ngForOf",t.images)}}let sN=(()=>{class t{constructor(t){this._cargaImagenes=t,this.files=[],this.images=[],this.cargadas=0,this.startAt=0,t.getAllImages().then(t=>{this.files=t.val();let e=[];null!=this.files&&(Object.keys(this.files).map((t,n=0)=>{e.push({[n]:this.files[t]}),n++}),this.images=e,this.cargadas+=this.images.length)})}cargarMasImagenes(){this.startAt=this.cargadas,this._cargaImagenes.fromStartToEnd(this.startAt.toString()).then(t=>{this.files=t.val();let e=[];if(null==this.files)return;let n=!0,r=0;Object.keys(this.files).map((t,i=this.startAt)=>{n&&(r=this.startAt,n=!1),e.push({[r]:this.files[t]}),r++}),this.images=this.images.concat(e),this.cargadas+=this.images.length})}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(zg))},t.\u0275cmp=r.Db({type:t,selectors:[["app-fotos"]],decls:3,vars:2,consts:[[1,"row"],["class","main-container",4,"ngIf"],["class","card-columns",4,"ngIf"],[1,"main-container"],["role","alert",1,"alert","alert-warning"],[1,"card-columns"],["class","card  text-white bg-dark",4,"ngFor","ngForOf"],[1,"card","text-white","bg-dark"],["alt","",1,"card-img-top","img-fluid",3,"src"],[1,"card-body"],[1,"card-title"]],template:function(t,e){1&t&&(r.Ob(0,"div",0),r.nc(1,rN,3,0,"div",1),r.nc(2,oN,2,1,"div",2),r.Nb()),2&t&&(r.zb(1),r.dc("ngIf",0==e.images.length),r.zb(1),r.dc("ngIf",e.images.length==e.cargadas))},directives:[U,M],encapsulation:2}),t})();function aN(t,e){if(1&t&&(r.Mb(0),r.Ob(1,"span",13),r.pc(2),r.Nb(),r.Lb()),2&t){const t=r.Xb();r.zb(2),r.qc(t.errorMessage)}}function uN(t,e){1&t&&(r.Ob(0,"span",14),r.pc(1," Username isrequired. "),r.Nb())}function cN(t,e){1&t&&(r.Ob(0,"span",14),r.pc(1," Password is required. "),r.Nb())}const lN=function(){return["/forgot-password"]};function hN(t,e){if(1&t&&(r.Ob(0,"ul",7),r.Ob(1,"li",8),r.Ob(2,"h3"),r.Kb(3,"img",9),r.pc(4),r.Nb(),r.Nb(),r.Ob(5,"li",8),r.pc(6,"User ID: "),r.Ob(7,"strong"),r.pc(8),r.Nb(),r.Nb(),r.Ob(9,"li",8),r.pc(10,"Email: "),r.Ob(11,"strong"),r.pc(12),r.Nb(),r.Nb(),r.Ob(13,"li",8),r.pc(14,"Email Verified: "),r.Ob(15,"strong"),r.pc(16),r.Nb(),r.Nb(),r.Nb()),2&t){const t=e.ngIf;r.zb(3),r.ec("src",t.photoURL?t.photoURL:"/assets/dummy-user.png",r.lc),r.ec("alt",t.displayName),r.zb(1),r.rc(" ",t.displayName?t.displayName:"User"," "),r.zb(4),r.qc(t.uid),r.zb(4),r.qc(t.email),r.zb(4),r.qc(t.emailVerified)}}function dN(t,e){if(1&t&&(r.Ob(0,"div",9),r.Ob(1,"p",10),r.pc(2,"We have sent a confirmation email to "),r.Ob(3,"strong"),r.pc(4),r.Nb(),r.pc(5,"."),r.Nb(),r.Ob(6,"p",10),r.pc(7,"Please check your email and click on the link to verfiy your email address."),r.Nb(),r.Nb()),2&t){const t=e.ngIf;r.zb(4),r.qc(t.email)}}const fN=[{path:"home",component:gA},{path:"perfil",component:yA,canActivate:[Od]},{path:"login",component:(()=>{class t{constructor(t,e,n,r){this.afAuth=t,this.router=e,this.fb=n,this.ngZone=r,this.errorMessage="",this.loginForm=this.fb.group({email:["",ne.required],password:["",ne.required]})}ngOnInit(){this.afAuth.user.subscribe(t=>{t&&this.ngZone.run(()=>{this.router.navigate(["/fotos/subir-imagen"])})})}createUser(){this.afAuth.createUserWithEmailAndPassword(this.loginForm.value.email,this.loginForm.value.password).then(()=>{this.router.navigate(["/fotos/subir-imagen"])}).catch(t=>{this.errorMessage=t.message})}signIn(){this.afAuth.signInWithEmailAndPassword(this.loginForm.value.email,this.loginForm.value.password).then(()=>{this.router.navigate(["/fotos/subir-imagen"])}).catch(t=>{this.errorMessage=t.message})}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(rp),r.Jb(Kh),r.Jb(Ye),r.Jb(r.z))},t.\u0275cmp=r.Db({type:t,selectors:[["app-login-firebase"]],decls:20,vars:4,consts:[[1,"example-container"],[1,"center"],[4,"ngIf"],[3,"formGroup"],[1,"form-group"],["for","title"],["type","text","id","username","placeholder","Username","name","username","formControlName","username",1,"form-control"],["style","color:Red;",4,"ngIf"],["for","description"],["id","password","type","password","placeholder","Password","formControlName","password",1,"form-control"],[1,"buttons-container","center"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-success",3,"click"],[1,"error"],[2,"color","Red"]],template:function(t,e){1&t&&(r.Ob(0,"div",0),r.Ob(1,"span",1),r.pc(2,"ToDo App"),r.Nb(),r.nc(3,aN,3,1,"ng-container",2),r.Ob(4,"form",3),r.Ob(5,"div",4),r.Ob(6,"label",5),r.pc(7,"Username*"),r.Nb(),r.Kb(8,"input",6),r.nc(9,uN,2,0,"span",7),r.Nb(),r.Ob(10,"div",4),r.Ob(11,"label",8),r.pc(12,"Password*"),r.Nb(),r.Kb(13,"input",9),r.nc(14,cN,2,0,"span",7),r.Nb(),r.Ob(15,"div",10),r.Ob(16,"button",11),r.Vb("click",(function(){return e.signIn()})),r.pc(17," Log in "),r.Nb(),r.Ob(18,"button",12),r.Vb("click",(function(){return e.createUser()})),r.pc(19," Create Account "),r.Nb(),r.Nb(),r.Nb(),r.Nb()),2&t&&(r.zb(3),r.dc("ngIf",e.errorMessage),r.zb(1),r.dc("formGroup",e.loginForm),r.zb(5),r.dc("ngIf",e.loginForm.controls.username.touched&&(null==e.loginForm.controls.username.errors?null:e.loginForm.controls.username.errors.required)),r.zb(5),r.dc("ngIf",e.loginForm.controls.password.touched&&(null==e.loginForm.controls.password.errors?null:e.loginForm.controls.password.errors.required)))},directives:[U,We,$t,Ge,Bt,Qt,Qe],styles:[".example-container[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;display:flex;flex\u2013direction:column;justify\u2013content:center;align\u2013items:center;overflow:hidden}.example-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:25%}.error[_ngcontent-%COMP%]{color:red}.center[_ngcontent-%COMP%]{text\u2013align:center}.buttons-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin\u2013left:5px}"]}),t})()},{path:"sign-in",component:(()=>{class t{constructor(t){this.authService=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(fA))},t.\u0275cmp=r.Db({type:t,selectors:[["app-sign-in"]],decls:28,vars:3,consts:[[1,"main-container"],[1,"card","text-white","bg-dark","text-center","centered","w26rem"],[1,"card-body"],["type","button",1,"btn","btn-outline-primary","w-100",3,"click"],[1,"fab","fa-google-plus-g"],[1,"formGroup"],["type","text","placeholder","Email Address","required","",1,"formControl","w-75","py-1","mb-1"],["userName",""],[1,"formGroup","mb-2"],["type","password","placeholder","Password","required","",1,"formControl","w-75","py-1","mb-1"],["userPassword",""],[1,"d-block",3,"routerLink"],["type","button",1,"btn","btn-primary","w-75",3,"click"],["type","button",1,"btn","googleBtn",3,"click"],[1,"redirectToLogin"],["type","button",1,"btn","btn-outline-info","w-100",3,"routerLink"]],template:function(t,e){if(1&t){const t=r.Pb();r.Ob(0,"div",0),r.Ob(1,"div",1),r.Ob(2,"div",2),r.Ob(3,"button",3),r.Vb("click",(function(){return e.authService.GoogleAuth()})),r.Kb(4,"i",4),r.pc(5," Log in with Google "),r.Nb(),r.Nb(),r.Nb(),r.Kb(6,"br"),r.Ob(7,"div",1),r.Ob(8,"div",2),r.Ob(9,"div",5),r.Kb(10,"input",6,7),r.Nb(),r.Ob(12,"div",8),r.Kb(13,"input",9,10),r.Ob(15,"a",11),r.pc(16,"Forgot Password?"),r.Nb(),r.Nb(),r.Ob(17,"div",5),r.Ob(18,"button",12),r.Vb("click",(function(){r.jc(t);const n=r.ic(11),i=r.ic(14);return e.authService.SignIn(n.value,i.value)})),r.pc(19,"Enter"),r.Nb(),r.Nb(),r.Nb(),r.Ob(20,"div",2),r.Ob(21,"div",5),r.Ob(22,"button",13),r.Vb("click",(function(){return e.authService.GoogleAuth()})),r.Kb(23,"i",4),r.pc(24," Log in with Google "),r.Nb(),r.Nb(),r.Ob(25,"div",14),r.Ob(26,"button",15),r.pc(27," Don't have an account? Sign Up "),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb()}2&t&&(r.zb(15),r.dc("routerLink",r.fc(2,lN)),r.zb(11),r.dc("routerLink","/register-user"))},directives:[Jh,Gh],styles:[""]}),t})()},{path:"register-user",component:(()=>{class t{constructor(t){this.authService=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(fA))},t.\u0275cmp=r.Db({type:t,selectors:[["app-sign-up"]],decls:26,vars:1,consts:[[1,"main-container"],[1,"card","text-white","bg-dark","text-center","centered","w26rem"],[1,"card-body"],["type","button",1,"btn","btn-outline-primary","w-100",3,"click"],[1,"fab","fa-google-plus-g"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl","w-75","py-1","mb-1"],["userEmail",""],[1,"formGroup","mb-2"],["type","password","placeholder","Password","required","",1,"formControl","w-75","py-1","mb-1"],["userPwd",""],["type","button",1,"btn","btn-primary","w-75",3,"click"],["type","button",1,"btn","googleBtn",3,"click"],[1,"redirectToLogin"],["type","button",1,"btn","btn-outline-success","w-100",3,"routerLink"]],template:function(t,e){if(1&t){const t=r.Pb();r.Ob(0,"div",0),r.Ob(1,"div",1),r.Ob(2,"div",2),r.Ob(3,"button",3),r.Vb("click",(function(){return e.authService.GoogleAuth()})),r.Kb(4,"i",4),r.pc(5," Continue with Google "),r.Nb(),r.Nb(),r.Nb(),r.Kb(6,"br"),r.Ob(7,"div",1),r.Ob(8,"div",2),r.Ob(9,"div",5),r.Kb(10,"input",6,7),r.Nb(),r.Ob(12,"div",8),r.Kb(13,"input",9,10),r.Nb(),r.Ob(15,"div",5),r.Ob(16,"button",11),r.Vb("click",(function(){r.jc(t);const n=r.ic(11),i=r.ic(14);return e.authService.SignUp(n.value,i.value)})),r.pc(17,"Sign Up"),r.Nb(),r.Nb(),r.Nb(),r.Ob(18,"div",2),r.Ob(19,"div",5),r.Ob(20,"button",12),r.Vb("click",(function(){return e.authService.GoogleAuth()})),r.Kb(21,"i",4),r.pc(22," Log in with Google "),r.Nb(),r.Nb(),r.Ob(23,"div",13),r.Ob(24,"button",14),r.pc(25," Already have an account? Sign In "),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb()}2&t&&(r.zb(24),r.dc("routerLink","/sign-in"))},directives:[Gh],styles:[""]}),t})()},{path:"dashboard",component:(()=>{class t{constructor(t){this.authService=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(fA))},t.\u0275cmp=r.Db({type:t,selectors:[["app-dashboard"]],decls:10,vars:2,consts:[[1,"main-container"],[1,"card","text-white","bg-dark","text-center","centered","w40rem"],[1,"card-body"],[1,"h2"],["class","list-group list-group-flush",4,"ngIf"],[1,"redirectToLogin"],["type","button",1,"btn","btn-outline-info","w-100",3,"routerLink"],[1,"list-group","list-group-flush"],[1,"list-group-item","bg-dark","text-white","border-light"],[1,"align-self-start","mr-5","img-thumbnail","rounded-circle",3,"src","alt"]],template:function(t,e){1&t&&(r.Ob(0,"div",0),r.Ob(1,"div",1),r.Ob(2,"div",2),r.Ob(3,"h1",3),r.pc(4,"User Profile"),r.Nb(),r.nc(5,hN,17,6,"ul",4),r.Nb(),r.Ob(6,"div",2),r.Ob(7,"div",5),r.Ob(8,"button",6),r.pc(9," Go back? Log In "),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb()),2&t&&(r.zb(5),r.dc("ngIf",e.authService.userData),r.zb(3),r.dc("routerLink","/sign-in"))},directives:[U,Gh],styles:[""]}),t})(),canActivate:[pA]},{path:"forgot-password",component:(()=>{class t{constructor(t){this.authService=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(fA))},t.\u0275cmp=r.Db({type:t,selectors:[["app-forgot-password"]],decls:17,vars:1,consts:[[1,"main-container"],[1,"card","text-white","bg-dark","text-center","centered","w26rem"],[1,"card-body"],[1,"text-center"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl","w-75","py-1","mb-1"],["passwordResetEmail",""],["type","button",1,"btn","btn-primary","w-75",3,"click"],[1,"redirectToLogin"],["type","button",1,"btn","btn-outline-info","w-100",3,"routerLink"]],template:function(t,e){if(1&t){const t=r.Pb();r.Ob(0,"div",0),r.Ob(1,"div",1),r.Ob(2,"div",2),r.Ob(3,"h3"),r.pc(4,"Reset Password"),r.Nb(),r.Ob(5,"p",3),r.pc(6,"Please enter your email address to request a password reset."),r.Nb(),r.Ob(7,"div",4),r.Kb(8,"input",5,6),r.Nb(),r.Ob(10,"div",4),r.Ob(11,"button",7),r.Vb("click",(function(){r.jc(t);const n=r.ic(9);return e.authService.ForgotPassword(n.value)})),r.pc(12,"Reset Password"),r.Nb(),r.Nb(),r.Nb(),r.Ob(13,"div",2),r.Ob(14,"div",8),r.Ob(15,"button",9),r.pc(16," Go back? Log In "),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb()}2&t&&(r.zb(15),r.dc("routerLink","/sign-in"))},directives:[Gh],styles:[""]}),t})()},{path:"verify-email-address",component:(()=>{class t{constructor(t){this.authService=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(fA))},t.\u0275cmp=r.Db({type:t,selectors:[["app-verify-email"]],decls:13,vars:2,consts:[[1,"main-container"],[1,"card","text-white","bg-dark","text-center","centered","w40rem"],[1,"card-body"],["class","formGroup",4,"ngIf"],[1,"formGroup","mb-5"],["type","button",1,"btn","btn-primary","w-75",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["type","button",1,"btn","btn-outline-info","w-100",3,"routerLink"],[1,"formGroup"],[1,"text-center"]],template:function(t,e){1&t&&(r.Ob(0,"div",0),r.Ob(1,"div",1),r.Ob(2,"div",2),r.Ob(3,"h3"),r.pc(4,"Thank You for Registering"),r.Nb(),r.nc(5,dN,8,1,"div",3),r.Ob(6,"div",4),r.Ob(7,"button",5),r.Vb("click",(function(){return e.authService.SendVerificationMail()})),r.Kb(8,"i",6),r.pc(9," Resend Verification Email "),r.Nb(),r.Nb(),r.Ob(10,"div",7),r.Ob(11,"button",8),r.pc(12," Go back? Log In "),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb()),2&t&&(r.zb(5),r.dc("ngIf",e.authService.userData),r.zb(6),r.dc("routerLink","/sign-in"))},directives:[U,Gh],styles:[""]}),t})()},{path:"chat",component:vA},{path:"spotify",component:EA},{path:"spotify/search",component:QA},{path:"spotify/search/:id",component:nN},{path:"youtube",component:AA},{path:"maps",component:DA},{path:"fotos/subir-imagen",component:KA},{path:"fotos",component:sN},{path:"**",pathMatch:"full",redirectTo:"home"}];let pN=(()=>{class t{constructor(){}}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},imports:[[ad.forRoot(fN)],ad]}),t})();function gN(t,e){if(1&t){const t=r.Pb();r.Mb(0),r.Ob(1,"button",2),r.Vb("click",(function(){r.jc(t);const e=r.Xb();return e.auth.logout({returnTo:e.document.location.origin})})),r.pc(2," Log out "),r.Nb(),r.Lb()}}function mN(t,e){if(1&t){const t=r.Pb();r.Ob(0,"button",3),r.Vb("click",(function(){return r.jc(t),r.Xb().loginWithRedirect()})),r.pc(1,"Login con Auth0"),r.Nb()}}let yN=(()=>{class t{constructor(t,e){this.document=t,this.auth=e}loginWithRedirect(){this.auth.loginWithRedirect({redirect_uri:"http://localhost:4200/perfil/",appState:{target:"/perfil"}})}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(a),r.Jb(wd))},t.\u0275cmp=r.Db({type:t,selectors:[["app-auth-button"]],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["loggedOut",""],[1,"btn","btn-outline-danger","w-100",3,"click"],[1,"btn","btn-outline-primary","w-100",3,"click"]],template:function(t,e){if(1&t&&(r.nc(0,gN,3,0,"ng-container",0),r.Yb(1,"async"),r.nc(2,mN,2,0,"ng-template",null,1,r.oc)),2&t){const t=r.ic(3);r.dc("ngIf",r.Zb(1,2,e.auth.isAuthenticated$))("ngIfElse",t)}},directives:[U],pipes:[J],encapsulation:2}),t})();const vN=function(){return["perfil"]};function bN(t,e){1&t&&(r.Ob(0,"li",7),r.Ob(1,"a",8),r.pc(2,"Mi perfil"),r.Nb(),r.Nb()),2&t&&(r.zb(1),r.dc("routerLink",r.fc(1,vN)))}const _N=function(){return["home"]},wN=function(){return["chat"]},ON=function(){return["spotify"]},SN=function(){return["spotify/search"]},CN=function(){return["youtube"]},EN=function(){return["maps"]},TN=function(){return["fotos"]},IN=function(){return["fotos/subir-imagen"]};let kN=(()=>{class t{constructor(t){this.auth=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(wd))},t.\u0275cmp=r.Db({type:t,selectors:[["app-navbar"]],decls:47,vars:22,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark"],[1,"container-fluid"],["routerLinkActive","router-link-active",1,"navbar-brand",3,"routerLink"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-link"],["routerLinkActive","router-link-active",1,"nav-link",3,"routerLink"],[1,"nav-link","dropdown"],["routerLinkActive","router-link-active","id","navbarDropdown","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle",3,"routerLink"],["aria-labelledby","navbarDropdown",1,"dropdown-menu"],["routerLinkActive","router-link-active",1,"dropdown-item",3,"routerLink"],["class","nav-link",4,"ngIf"],[1,"justify-content-end","col-md-2"],[1,"nav","justify-content-end","w-100"],[1,"nav-item","w-100"],[1,"navbar-text"],["type","button",1,"btn","btn-outline-primary","w-100","mb-1",3,"routerLink"],[1,"fa","fa-plus"]],template:function(t,e){1&t&&(r.Ob(0,"nav",0),r.Ob(1,"div",1),r.Ob(2,"a",2),r.pc(3,"Qui\xe9n soy"),r.Nb(),r.Ob(4,"button",3),r.Kb(5,"span",4),r.Nb(),r.Ob(6,"div",5),r.Ob(7,"ul",6),r.Ob(8,"li",7),r.Ob(9,"a",8),r.pc(10,"Chat"),r.Nb(),r.Nb(),r.Ob(11,"li",9),r.Ob(12,"a",10),r.pc(13," Api Spotify "),r.Nb(),r.Ob(14,"ul",11),r.Ob(15,"li"),r.Ob(16,"a",12),r.pc(17,"Home"),r.Nb(),r.Nb(),r.Ob(18,"li"),r.Ob(19,"a",12),r.pc(20,"Search"),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Ob(21,"li",7),r.Ob(22,"a",8),r.pc(23,"Api YouTube"),r.Nb(),r.Nb(),r.Ob(24,"li",7),r.Ob(25,"a",8),r.pc(26,"Api Maps"),r.Nb(),r.Nb(),r.Ob(27,"li",9),r.Ob(28,"a",10),r.pc(29," Gestor im\xe1genes "),r.Nb(),r.Ob(30,"ul",11),r.Ob(31,"li"),r.Ob(32,"a",12),r.pc(33,"Subir im\xe1gen"),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.nc(34,bN,3,2,"li",13),r.Yb(35,"async"),r.Nb(),r.Nb(),r.Ob(36,"div",14),r.Ob(37,"ul",15),r.Ob(38,"li",16),r.Ob(39,"span",17),r.Ob(40,"button",18),r.Kb(41,"i",19),r.pc(42," Login with Firebase Auth "),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Ob(43,"ul",15),r.Ob(44,"li",16),r.Ob(45,"span",17),r.Kb(46,"app-auth-button"),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb()),2&t&&(r.zb(2),r.dc("routerLink",r.fc(13,_N)),r.zb(7),r.dc("routerLink",r.fc(14,wN)),r.zb(3),r.dc("routerLink",r.fc(15,ON)),r.zb(4),r.dc("routerLink",r.fc(16,ON)),r.zb(3),r.dc("routerLink",r.fc(17,SN)),r.zb(3),r.dc("routerLink",r.fc(18,CN)),r.zb(3),r.dc("routerLink",r.fc(19,EN)),r.zb(3),r.dc("routerLink",r.fc(20,TN)),r.zb(4),r.dc("routerLink",r.fc(21,IN)),r.zb(2),r.dc("ngIf",r.Zb(35,11,e.auth.isAuthenticated$)),r.zb(6),r.dc("routerLink","/sign-in"))},directives:[Jh,$h,U,Gh,yN],pipes:[J],encapsulation:2}),t})(),xN=(()=>{class t{constructor(){this.title="personalApp"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Db({type:t,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,""]],template:function(t,e){1&t&&(r.Kb(0,"app-navbar"),r.Ob(1,"div",0),r.Kb(2,"router-outlet"),r.Nb())},directives:[kN,Yh],styles:[""]}),t})(),AN=(()=>{class t{}return t.\u0275mod=r.Hb({type:t,bootstrap:[xN]}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},providers:[Op,Sp,Cp,zg,fA],imports:[[Nt,pN,Sd.forRoot({domain:"dev-e6zo41pu.eu.auth0.com",clientId:"8j2enBqcYFwrHRZpx67vmTneFr4M7PRk"}),ef,Xe,Wf.forRoot({apiKey:"AIzaSyDThwGxJqFsSN-etU1MGnLsXBc66dIRYsU"}),Hf.a.initializeApp(i),wp,$,ip,Ze]]}),t})();Object(r.T)(),xt().bootstrapModule(AN).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return u}));var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.a)return t.subscribe(e);let n;try{n=Object(o.a)(t)(e)}catch(r){e.error(r)}return n}}},[[0,0]]]);