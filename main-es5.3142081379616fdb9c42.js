!function(){function t(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e(t,e){return r(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||s(t,e)||n()}function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(t){if(Array.isArray(t))return t}function i(t){return function(t){if(Array.isArray(t))return u(t)}(t)||o(t)||s(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function a(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=s(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function s(t,e){if(t){if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e,n){return(c=b()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&v(i,n.prototype),i}).apply(null,arguments)}function l(t,e,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),t}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=b();return function(){var n,r=_(t);if(e){var i=_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}function g(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?m(t):e}function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return a}));var r=n("FurV"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Set}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:"[DEFAULT]",optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(n)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(n)return null;throw o}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(l){}try{for(var i=Object(r.h)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),s=a[1],u=this.normalizeInstanceIdentifier(a[0]);try{var c=this.getOrInitializeService({instanceIdentifier:u});s.resolve(c)}catch(l){}}}catch(h){e={error:h}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,(function(){var t;return Object(r.d)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.g)(Object(r.g)([],Object(r.e)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),Object(r.e)(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t="[DEFAULT]"),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.instanceIdentifier,o=t.options,a=void 0===o?{}:o,s=this.normalizeInstanceIdentifier(void 0===i?"[DEFAULT]":i);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var u=this.getOrInitializeService({instanceIdentifier:s,options:a});try{for(var c=Object(r.h)(this.instancesDeferred.entries()),l=c.next();!l.done;l=c.next()){var h=Object(r.e)(l.value,2),f=h[1];s===this.normalizeInstanceIdentifier(h[0])&&f.resolve(u)}}catch(d){e={error:d}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return this.invokeOnInitCallbacks(u,s),u},t.prototype.onInit=function(t){var e=this;return this.onInitCallbacks.add(t),function(){e.onInitCallbacks.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i;try{for(var o=Object(r.h)(this.onInitCallbacks),a=o.next();!a.done;a=o.next()){var s=a.value;try{s(t,e)}catch(u){}}}catch(c){n={error:c}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,"[DEFAULT]"===e?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),s=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){p(n,t);var e=y(n);function n(t,r){var i;return h(this,n),(i=e.call(this,t,r)).scheduler=t,i.work=r,i.pending=!1,i}return d(n,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}},{key:"requestAsyncId",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return setInterval(t.flush.bind(t,this),n)}},{key:"recycleAsyncId",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}},{key:"execute",value:function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}},{key:"_execute",value:function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}},{key:"_unsubscribe",value:function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}]),n}(function(t){p(n,t);var e=y(n);function n(t,r){return h(this,n),e.call(this)}return d(n,[{key:"schedule",value:function(t){return this}}]),n}(n("quSY").a))},"3RSX":function(t,e,n){"use strict";var r=n("Qfp6");t.exports=function(t){return!(!t||"string"!=typeof t||t.length<6||new RegExp("[^"+r.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(t))}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return c}));var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function a(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof e?function(o){return o.pipe(a((function(n,o){return Object(i.a)(t(n,o)).pipe(Object(r.a)((function(t,r){return e(n,t,o,r)})))}),n))}:("number"==typeof e&&(n=e),function(e){return e.lift(new s(t,n))})}var s=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;h(this,t),this.project=e,this.concurrent=n}return d(t,[{key:"call",value:function(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}]),t}(),u=function(t){p(n,t);var e=y(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return h(this,n),(i=e.call(this,t)).project=r,i.concurrent=o,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return d(n,[{key:"_next",value:function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}},{key:"_tryNext",value:function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}},{key:"_innerSub",value:function(t){var e=new o.a(this),n=this.destination;n.add(e);var r=Object(o.c)(t,e);r!==e&&n.add(r)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(t){this.destination.next(t)}},{key:"notifyComplete",value:function(){var t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),n}(o.b),c=a},"5R+2":function(t,e){t.exports=function(t,e,n){for(var r=(2<<Math.log(e.length-1)/Math.LN2)-1,i=-~(1.6*r*n/e.length),o="";;)for(var a=t(i),s=i;s--;)if((o+=e[a[s]&r]||"").length===+n)return o}},"6MUB":function(t,e,n){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,i){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map((function(i){var o=encodeURIComponent(r(i))+n;return Array.isArray(t[i])?t[i].map((function(t){return o+encodeURIComponent(r(t))})).join(e):o+encodeURIComponent(r(t[i]))})).join(e):i?encodeURIComponent(r(i))+n+encodeURIComponent(r(t)):""}},"6Uf2":function(t,e,n){"use strict";(function(t){var e=n("zIRd"),r=n("/6Yf"),i=n("qOnz"),o=n("FurV"),a=n("q/0M"),s="";function u(t){s=t}var c,l=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(i.I)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(i.C)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),h=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(i.i)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),f=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new l(e)}}catch(n){}return new h},d=f("localStorage"),p=f("sessionStorage"),v=new a.b("@firebase/database"),y=(c=1,function(){return c++}),g=function(t){var e=Object(i.H)(t),n=new i.d;n.update(e);var r=n.digest();return i.g.encodeByteArray(r)},m=function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r="",o=0;o<e.length;o++){var a=e[o];Array.isArray(a)||a&&"object"==typeof a&&"number"==typeof a.length?r+=t.apply(null,a):r+="object"==typeof a?Object(i.I)(a):a,r+=" "}return r},b=null,_=!0,w=function(t,e){Object(i.e)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(v.logLevel=a.a.VERBOSE,b=v.log.bind(v),e&&p.set("logging_enabled",!0)):"function"==typeof t?b=t:(b=null,p.remove("logging_enabled"))},k=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===_&&(_=!1,null===b&&!0===p.get("logging_enabled")&&w(!0)),b){var n=m.apply(null,t);b(n)}},O=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];k.apply(void 0,Object(o.g)([t],Object(o.e)(e)))}},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+m.apply(void 0,Object(o.g)([],Object(o.e)(t)));v.error(n)},S=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+m.apply(void 0,Object(o.g)([],Object(o.e)(t)));throw v.error(n),new Error(n)},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+m.apply(void 0,Object(o.g)([],Object(o.e)(t)));v.warn(n)},T=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},I="[MIN_NAME]",x="[MAX_NAME]",N=function(t,e){if(t===e)return 0;if(t===I||e===x)return-1;if(e===I||t===x)return 1;var n=F(t),r=F(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},A=function(t,e){return t===e?0:t<e?-1:1},j=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(i.I)(e))},P=function t(e){if("object"!=typeof e||null===e)return Object(i.I)(e);var n=[];for(var r in e)n.push(r);n.sort();for(var o="{",a=0;a<n.length;a++)0!==a&&(o+=","),o+=Object(i.I)(n[a]),o+=":",o+=t(e[n[a]]);return o+"}"},R=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function D(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var L=function(t){var e,n,r,o,a;Object(i.e)(!T(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(o=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-o)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(e?1:0),s.reverse();var u=s.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(u.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},M=new RegExp("^-?(0*)\\d{1,10}$"),F=function(t){if(M.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},U=function(t){try{t()}catch(e){setTimeout((function(){throw E("Exception was thrown by user callback.",e.stack||""),e}),Math.floor(0))}},q=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},V=function(){function t(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then((function(t){return n.appCheck=t}))}return t.prototype.getToken=function(t){var e=this;return this.appCheck?this.appCheck.getToken(t):new Promise((function(n,r){setTimeout((function(){e.appCheck?e.getToken(t).then(n,r):n(null)}),0)}))},t.prototype.addTokenChangeListener=function(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then((function(e){return e.addTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){E('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},t}(),z=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((function(t){return r.auth_=t}))}return t.prototype.getToken=function(t){var e=this;return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(k("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):new Promise((function(n,r){setTimeout((function(){e.auth_?e.getToken(t).then(n,r):n(null)}),0)}))},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';E(t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),B=function(){function t(t){this.accessToken=t}return t.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},t.prototype.addTokenChangeListener=function(t){t(this.accessToken)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.OWNER="owner",t}(),W=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,H=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=d.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&d.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}();function K(t,e,n){var r;if(Object(i.e)("string"==typeof e,"typeof type must == string"),Object(i.e)("object"==typeof n,"typeof params must == object"),"websocket"===e)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if("long_polling"!==e)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var o=[];return D(n,(function(t,e){o.push(t+"="+e)})),r+o.join("&")}var G=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(i.i)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(i.l)(this.counters_)},t}(),J={},Q={};function Y(t){var e=t.toString();return J[e]||(J[e]=new G),J[e]}var X=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&U((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),Z=function(){function t(t,e,n,r,i,o,a){var s=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=O(t),this.stats_=Y(e),this.urlFn=function(t){return s.appCheckToken&&(t.ac=s.appCheckToken),K(e,"long_polling",t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new X(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if(Object(i.y)()||"complete"===document.readyState)t();else{var e=!1,n=function n(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new $((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(o.e)(t,5),i=r[0],a=r[1],s=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===i)n.id=a,n.password=s;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(o.e)(t,2),i=r[0],a=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),n.appCheckToken&&(t.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&W.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(i.y)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(i.I)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(i.h)(e),r=R(n,1840),o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(i.y)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(i.I)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),$=function(){function t(e,n,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(i.y)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=y(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(a='<script>document.domain="'+document.domain+'";<\/script>');var s="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(u){k("frame writing exception"),u.stack&&k(u.stack),k(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||k("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;Object(i.y)()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){k("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},t}(),tt=null;"undefined"!=typeof MozWebSocket?tt=MozWebSocket:"undefined"!=typeof WebSocket&&(tt=WebSocket);var et=function(){function t(e,n,r,i,o,a,s){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=O(this.connId),this.stats_=Y(n),this.connURL=t.connectionURL_(n,a,s,i),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n,r){var o={v:"5"};return!Object(i.y)()&&"undefined"!=typeof location&&location.hostname&&W.test(location.hostname)&&(o.r="f"),e&&(o.s=e),n&&(o.ls=n),r&&(o.ac=r),K(t,"websocket",o)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,d.set("previous_websocket_failure",!0);try{if(Object(i.y)()){var r={headers:{"User-Agent":"Firebase/5/"+s+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}};this.nodeAdmin?r.headers.Authorization=this.authToken||"":r.headers["X-Firebase-AppCheck"]=this.appCheckToken||"";var o=process.env,a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(r.proxy={origin:a}),this.mySock=new tt(this.connURL,[],r)}else this.mySock=new tt(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(c){this.log_("Error instantiating WebSocket.");var u=c.message||c.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==tt&&!t.forceDisallow_},t.previouslyFailed=function(){return d.isInMemoryStorage||!0===d.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){d.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(i.C)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(i.e)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(i.I)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=R(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),nt=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Z,et]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=et&&et.isAvailable(),a=i&&!et.previouslyFailed();if(e.webSocketOnly&&(i||E("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),a=!0),a)this.transports_=[et];else{var s=this.transports_=[];try{for(var u=Object(o.h)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&s.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),rt=function(){function t(t,e,n,r,i,o,a,s,u,c){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=s,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=O("c:"+this.id+":"),this.transportManager_=new nt(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=q((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=j("t",t),n=j("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=j("t",t),n=j("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=j("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?C("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):C("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&E("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),q((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):q((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(d.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),it=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.refreshAppCheckToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),ot=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(i.e)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(o.g)([],Object(o.e)(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(i.e)(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),at=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(i.w)()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return Object(o.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(i.e)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(ot),st=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function ut(){return new st("")}function ct(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function lt(t){return t.pieces_.length-t.pieceNum_}function ht(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new st(t.pieces_,e)}function ft(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function dt(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function pt(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new st(e,0)}function vt(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof st)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new st(n,0)}function yt(t){return t.pieceNum_>=t.pieces_.length}function gt(t,e){var n=ct(t),r=ct(e);if(null===n)return e;if(n===r)return gt(ht(t),ht(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function mt(t,e){for(var n=dt(t,0),r=dt(e,0),i=0;i<n.length&&i<r.length;i++){var o=N(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function bt(t,e){if(lt(t)!==lt(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function _t(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(lt(t)>lt(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var wt=function(t,e){this.errorPrefix_=e,this.parts_=dt(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(i.G)(this.parts_[n]);kt(this)};function kt(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ot(t))}function Ot(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var Ct,St,Et=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return Object(o.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(i.e)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(ot),Tt=function(t){function e(n,r,o,a,s,u,c,l){var h=t.call(this)||this;if(h.repoInfo_=n,h.applicationId_=r,h.onDataUpdate_=o,h.onConnectStatus_=a,h.onServerInfoUpdate_=s,h.authTokenProvider_=u,h.appCheckTokenProvider_=c,h.authOverride_=l,h.id=e.nextPersistentConnectionId_++,h.log_=O("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=1e3,h.maxReconnectDelay_=3e5,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.appCheckToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.invalidAppCheckTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,l&&!Object(i.y)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Et.getInstance().on("visible",h.onVisible_,h),-1===n.host.indexOf("fblocal")&&at.getInstance().on("online",h.onOnline_,h),h}return Object(o.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,o={r:r,a:t,b:e};this.log_(Object(i.I)(o)),Object(i.e)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this;this.initConnection_();var n=new i.a,r={p:t._path.toString(),q:t._queryObject},o={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;var a=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[a];void 0!==t&&o===t&&(delete e.outstandingGets_[a],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+a+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(a),n.promise},e.prototype.listen=function(t,e,n,r){this.initConnection_();var o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),Object(i.e)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Object(i.e)(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(a).set(o,s),this.connected_&&this.sendListen_(s)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var a={p:i};t.tag&&(a.q=r._queryObject,a.t=t.tag),a.h=t.hashFn(),this.sendRequest("q",a,(function(a){var s=a.d,u=a.s;e.warnOnListenWarnings_(s,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,s))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(i.i)(t,"w")){var n=Object(i.F)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',o=e._path.toString();E("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+o+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(i.q)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(i.B)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},e.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(e){var n=e.s,r=e.d||"error";"ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,r)}))},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Object(i.e)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){this.initConnection_();var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(i.I)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):C("Unrecognized action received from server: "+Object(i.I)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(i.e)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r,a,s,u,c,l,h,f,d,p,v,y=this;return Object(o.d)(this,(function(g){switch(g.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+e.nextConnectionId_++,s=this.lastSessionId,u=!1,c=null,this.realtime_={close:l=function(){c?c.close():(u=!0,r())},sendRequest:function(t){Object(i.e)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)}},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,g.label=1;case 1:return g.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)])];case 2:return f=o.e.apply(void 0,[g.sent(),2]),d=f[0],p=f[1],u?k("getToken() completed but was canceled"):(k("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=p&&p.token,c=new rt(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,(function(t){E(t+" ("+y.repoInfo_.toString()+")"),y.interrupt("server_kill")}),s)),[3,4];case 3:return v=g.sent(),this.log_("Failed to get token: "+v),u||(this.repoInfo_.nodeAdmin&&E(v),l()),[3,4];case 4:return[2]}}))}))},e.prototype.interrupt=function(t){k("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){k("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(i.u)(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return P(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new st(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){k("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onAppCheckRevoked_=function(t,e){k("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=Object(o.h)(this.listens.values()),a=i.next();!a.done;a=i.next()){var s=a.value;try{for(var u=(n=void 0,Object(o.h)(s.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(d){t={error:d}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(i.y)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+s.replace(/\./g,"-")]=1,Object(i.w)()?t["framework.cordova"]=1:Object(i.z)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=at.getInstance().currentlyOnline();return Object(i.u)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(it),It=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),xt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new It(I,t),r=new It(I,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return It.MIN},t}(),Nt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return Ct},set:function(t){Ct=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return N(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(i.f)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return It.MIN},e.prototype.maxPost=function(){return new It(x,Ct)},e.prototype.makePost=function(t,e){return Object(i.e)("string"==typeof t,"KeyIndex indexValue must always be a string."),new It(t,Ct)},e.prototype.toString=function(){return".key"},e}(xt),At=new Nt,jt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Pt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Dt.EMPTY_NODE,this.right=null!=o?o:Dt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Dt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Dt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Rt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Pt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Dt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Pt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Pt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new jt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new jt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new jt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new jt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Rt,t}();function Lt(t,e){return N(t.name,e.name)}function Mt(t,e){return N(t,e)}var Ft,Ut,qt,Vt,zt,Bt=function(t){return"number"==typeof t?"number:"+L(t):"string:"+t},Wt=function(t){if(t.isLeafNode()){var e=t.val();Object(i.e)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(i.i)(e,".sv"),"Priority must be a string or number.")}else Object(i.e)(t===St||t.isEmpty(),"priority of unexpected type.");Object(i.e)(t===St||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Ht=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(i.e)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Wt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Ft},set:function(t){Ft=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return yt(e)?this:".priority"===ct(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=ct(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(i.e)(".priority"!==r||1===lt(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(ht(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Bt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?L(this.value_):this.value_,this.lazyHash_=g(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(i.e)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(n),a=t.VALUE_TYPE_ORDER.indexOf(r);return Object(i.e)(o>=0,"Unknown leaf type: "+n),Object(i.e)(a>=0,"Unknown leaf type: "+r),o===a?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-o},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Kt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?N(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return It.MIN},e.prototype.maxPost=function(){return new It(x,new Ht("[PRIORITY-POST]",qt))},e.prototype.makePost=function(t,e){var n=Ut(t);return new It(e,new Ht("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(xt)),Gt=Math.log(2),Jt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Gt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Qt=function(t,e,n,r){t.sort(e);var i=function(e){for(var r=null,i=null,o=t.length,a=function(e,r){var i=o-e,a=o;o-=e;var u=function e(r,i){var o,a,s=i-r;if(0===s)return null;if(1===s)return o=t[r],a=n?n(o):o,new Pt(a,o.node,Pt.BLACK,null,null);var u=parseInt(s/2,10)+r,c=e(r,u),l=e(u+1,i);return o=t[u],a=n?n(o):o,new Pt(a,o.node,Pt.BLACK,c,l)}(i+1,a),c=t[i],l=n?n(c):c;s(new Pt(l,c.node,r,null,u))},s=function(t){r?(r.left=t,r=t):(i=t,r=t)},u=0;u<e.count;++u){var c=e.nextBitIsOne(),l=Math.pow(2,e.count-(u+1));c?a(l,Pt.BLACK):(a(l,Pt.BLACK),a(l,Pt.RED))}return i}(new Jt(t.length));return new Dt(r||e,i)},Yt={},Xt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(i.e)(Yt&&Kt,"ChildrenNode.ts has not been loaded"),Vt=Vt||new t({".priority":Yt},{".priority":Kt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(i.F)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Dt?e:null},t.prototype.hasIndex=function(t){return Object(i.i)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(i.e)(e!==At,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,a=[],s=!1,u=n.getIterator(It.Wrap),c=u.getNext();c;)s=s||e.isDefinedOn(c.node),a.push(c),c=u.getNext();r=s?Qt(a,e.getCompare()):Yt;var l=e.toString(),h=Object(o.a)({},this.indexSet_);h[l]=e;var f=Object(o.a)({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(i.D)(this.indexes_,(function(t,o){var a=Object(i.F)(r.indexSet_,o);if(Object(i.e)(a,"Missing index implementation for "+o),t===Yt){if(a.isDefinedOn(e.node)){for(var s=[],u=n.getIterator(It.Wrap),c=u.getNext();c;)c.name!==e.name&&s.push(c),c=u.getNext();return s.push(e),Qt(s,a.getCompare())}return Yt}var l=n.get(e.name),h=t;return l&&(h=h.remove(new It(e.name,l))),h.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(i.D)(this.indexes_,(function(t){if(t===Yt)return t;var r=n.get(e.name);return r?t.remove(new It(e.name,r)):t})),this.indexSet_)},t}(),Zt=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Wt(this.priorityNode_),this.children_.isEmpty()&&Object(i.e)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return zt||(zt=new t(new Dt(Mt),null,Xt.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||zt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?zt:e},t.prototype.getChild=function(t){var e=ct(t);return null===e?this:this.getImmediateChild(e).getChild(ht(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(i.e)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new It(e,n),o=void 0,a=void 0;n.isEmpty()?(o=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(e,n),a=this.indexMap_.addToIndexes(r,this.children_));var s=o.isEmpty()?zt:this.priorityNode_;return new t(o,s,a)},t.prototype.updateChild=function(t,e){var n=ct(t);if(null===n)return e;Object(i.e)(".priority"!==ct(t)||1===lt(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(ht(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Kt,(function(a,s){n[a]=s.val(e),r++,o&&t.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1})),!e&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Bt(this.getPriority().val())+":"),this.forEachChild(Kt,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":g(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new It(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new It(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new It(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,It.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,It.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===$t?-1:0},t.prototype.withIndex=function(e){if(e===At||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===At||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Kt),r=e.getIterator(Kt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===At?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),$t=new(function(t){function e(){return t.call(this,new Dt(Mt),Zt.EMPTY_NODE,Xt.Default)||this}return Object(o.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Zt.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Zt));function te(t,e){if(void 0===e&&(e=null),null===t)return Zt.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(i.e)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Ht(t,te(e));if(t instanceof Array){var n=Zt.EMPTY_NODE;return D(t,(function(e,r){if(Object(i.i)(t,e)&&"."!==e.substring(0,1)){var o=te(r);!o.isLeafNode()&&o.isEmpty()||(n=n.updateImmediateChild(e,o))}})),n.updatePriority(te(e))}var r=[],o=!1;if(D(t,(function(t,e){if("."!==t.substring(0,1)){var n=te(e);n.isEmpty()||(o=o||!n.getPriority().isEmpty(),r.push(new It(t,n)))}})),0===r.length)return Zt.EMPTY_NODE;var a=Qt(r,Lt,(function(t){return t.name}),Mt);if(o){var s=Qt(r,Kt.getCompare());return new Zt(a,te(e),new Xt({".priority":s},{".priority":Kt}))}return new Zt(a,te(e),Xt.Default)}Object.defineProperties(It,{MIN:{value:new It(I,Zt.EMPTY_NODE)},MAX:{value:new It(x,$t)}}),Nt.__EMPTY_NODE=Zt.EMPTY_NODE,Ht.__childrenNodeConstructor=Zt,St=$t,qt=$t,Ut=te;var ee,ne,re=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(i.e)(!yt(e)&&".priority"!==ct(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(o.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?N(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=te(t),r=Zt.EMPTY_NODE.updateChild(this.indexPath_,n);return new It(e,r)},e.prototype.maxPost=function(){var t=Zt.EMPTY_NODE.updateChild(this.indexPath_,$t);return new It(x,t)},e.prototype.toString=function(){return dt(this.indexPath_,0).join("/")},e}(xt),ie=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?N(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return It.MIN},e.prototype.maxPost=function(){return It.MAX},e.prototype.makePost=function(t,e){var n=te(t);return new It(e,n)},e.prototype.toString=function(){return".value"},e}(xt)),oe="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ae=(ee=0,ne=[],function(t){var e,n=t===ee;ee=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=oe.charAt(t%64),t=Math.floor(t/64);Object(i.e)(0===t,"Cannot push at time == 0");var o=r.join("");if(n){for(e=11;e>=0&&63===ne[e];e--)ne[e]=0;ne[e]++}else for(e=0;e<12;e++)ne[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)o+=oe.charAt(ne[e]);return Object(i.e)(20===o.length,"nextPushId: Length should be 20."),o}),se=function(t){if("2147483647"===t)return"-";var e=F(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return x;var o=oe.charAt(oe.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},ue=function(t){if("-2147483648"===t)return I;var e=F(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=oe.charAt(oe.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function ce(t){return{type:"value",snapshotNode:t}}function le(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function he(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function fe(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var de=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,o,a){Object(i.e)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=a&&(n.isEmpty()?t.hasChild(e)?a.trackChildChange(he(e,s)):Object(i.e)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?a.trackChildChange(le(e,n)):a.trackChildChange(fe(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Kt,(function(t,r){e.hasChild(t)||n.trackChildChange(he(t,r))})),e.isLeafNode()||e.forEachChild(Kt,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(fe(e,r,i))}else n.trackChildChange(le(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Zt.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),pe=function(){function t(e){this.indexedFilter_=new de(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new It(e,n))||(n=Zt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Zt.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Zt.EMPTY_NODE);var i=this;return e.forEachChild(Kt,(function(t,e){i.matches(new It(t,e))||(r=r.updateImmediateChild(t,Zt.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),ve=function(){function t(t){this.rangedFilter_=new pe(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new It(e,n))||(n=Zt.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Zt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Zt.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Zt.EMPTY_NODE);var s=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)a=i.getNext(),!h&&c(s,a)<=0&&(h=!0),h&&o<this.limit_&&c(a,u)<=0?o++:r=r.updateImmediateChild(a.name,Zt.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,o){var a;if(this.reverse_){var s=this.index_.getCompare();a=function(t,e){return s(e,t)}}else a=this.index_.getCompare();var u=t;Object(i.e)(u.numChildren()===this.limit_,"");var c=new It(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===e||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:a(d,c);if(h&&!n.isEmpty()&&p>=0)return null!=o&&o.trackChildChange(fe(e,n,f)),u.updateImmediateChild(e,n);null!=o&&o.trackChildChange(he(e,f));var v=u.updateImmediateChild(e,Zt.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=o&&o.trackChildChange(le(d.name,d.node)),v.updateImmediateChild(d.name,d.node)):v}return n.isEmpty()?t:h&&a(l,c)>=0?(null!=o&&(o.trackChildChange(he(l.name,l.node)),o.trackChildChange(le(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,Zt.EMPTY_NODE)):t},t}(),ye=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Kt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(i.e)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(i.e)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:I},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(i.e)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(i.e)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:x},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(i.e)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Kt},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function ge(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function me(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function be(t,e){var n=t.copy();return n.index_=e,n}function _e(t){var e,n={};return t.isDefault()||(t.index_===Kt?e="$priority":t.index_===ie?e="$value":t.index_===At?e="$key":(Object(i.e)(t.index_ instanceof re,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Object(i.I)(e),t.startSet_&&(n.startAt=Object(i.I)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Object(i.I)(t.indexStartName_))),t.endSet_&&(n.endAt=Object(i.I)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Object(i.I)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function we(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Kt&&(e.i=t.index_.toString()),e}var ke=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.repoInfo_=e,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=O("p:rest:"),o.listens_={},o}return Object(o.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(i.e)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,o){var a=this,s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=_e(t._queryParams);this.restRequest_(s+".json",l,(function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&a.onDataUpdate_(s,n,!1,r),Object(i.F)(a.listens_,u)===c&&o(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=_e(t._queryParams),r=t._path.toString(),o=new i.a;return this.restRequest_(r+".json",n,(function(t,n){var i=n;404===t&&(i=null,t=null),null===t?(e.onDataUpdate_(r,i,!1,null),o.resolve(i)):o.reject(new Error(i))})),o.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;return void 0===e&&(e={}),e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(a){var s=Object(o.e)(a,2),u=s[0],c=s[1];u&&u.accessToken&&(e.auth=u.accessToken),c&&c.token&&(e.ac=c.token);var l=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(i.E)(e);r.log_("Sending REST request for "+l);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(n&&4===h.readyState){r.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);var t=null;if(h.status>=200&&h.status<300){try{t=Object(i.C)(h.responseText)}catch(e){E("Failed to parse JSON response for "+l+": "+h.responseText)}n(null,t)}else 401!==h.status&&404!==h.status&&E("Got unsuccessful REST response for "+l+" Status: "+h.status),n(h.status);n=null}},h.open("GET",l,!0),h.send()}))},e}(it),Oe=function(){function t(){this.rootNode_=Zt.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();function Ce(){return{value:null,children:new Map}}function Se(t,e,n){if(yt(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=ct(e);t.children.has(r)||t.children.set(r,Ce()),Se(t.children.get(r),e=ht(e),n)}}function Ee(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach((function(t,n){e(n,t)}))}(t,(function(t,r){Ee(r,new st(e.toString()+"/"+t),n)}))}var Te=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(o.a)({},t);return this.last_&&D(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),Ie=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Te(t);var n=1e4+2e4*Math.random();q(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;D(e,(function(e,o){o>0&&Object(i.i)(t.statsToReport_,e)&&(n[e]=o,r=!0)})),r&&this.server_.reportStats(n),q(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),xe=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function Ne(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Ae,je=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=xe.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(yt(this.path)){if(null!=this.affectedTree.value)return Object(i.e)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new st(e));return new t(ut(),n,this.revert)}return Object(i.e)(ct(this.path)===e,"operationForChild called for unrelated child."),new t(ht(this.path),this.affectedTree,this.revert)},t}(),Pe=function(){function t(t,e){this.source=t,this.path=e,this.type=xe.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return yt(this.path)?new t(this.source,ut()):new t(this.source,ht(this.path))},t}(),Re=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=xe.OVERWRITE}return t.prototype.operationForChild=function(e){return yt(this.path)?new t(this.source,ut(),this.snap.getImmediateChild(e)):new t(this.source,ht(this.path),this.snap)},t}(),De=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=xe.MERGE}return t.prototype.operationForChild=function(e){if(yt(this.path)){var n=this.children.subtree(new st(e));return n.isEmpty()?null:n.value?new Re(this.source,ut(),n.value):new t(this.source,ut(),n)}return Object(i.e)(ct(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,ht(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Le=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(yt(t))return this.isFullyInitialized()&&!this.filtered_;var e=ct(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Me=function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()};function Fe(t,e,n,r,o,a){var s=r.filter((function(t){return t.type===n}));s.sort((function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Object(i.f)("Should only compare child_ events.");var r=new It(e.childName,e.snapshotNode),o=new It(n.childName,n.snapshotNode);return t.index_.compare(r,o)}(t,e,n)})),s.forEach((function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,a);o.forEach((function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))}))}))}function Ue(t,e){return{eventCache:t,serverCache:e}}function qe(t,e,n,r){return Ue(new Le(e,n,r),t.serverCache)}function Ve(t,e,n,r){return Ue(t.eventCache,new Le(e,n,r))}function ze(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Be(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var We=function(){function t(t,e){void 0===e&&(Ae||(Ae=new Dt(A)),e=Ae),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return D(e,(function(t,e){n=n.set(new st(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:ut(),value:this.value};if(yt(t))return null;var n=ct(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(ht(t),e);return null!=i?{path:vt(new st(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(yt(e))return this;var n=ct(e),r=this.children.get(n);return null!==r?r.subtree(ht(e)):new t(null)},t.prototype.set=function(e,n){if(yt(e))return new t(n,this.children);var r=ct(e),i=(this.children.get(r)||new t(null)).set(ht(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(yt(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=ct(e),r=this.children.get(n);if(r){var i=r.remove(ht(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(yt(t))return this.value;var e=ct(t),n=this.children.get(e);return n?n.get(ht(t)):null},t.prototype.setTree=function(e,n){if(yt(e))return n;var r,i=ct(e),o=(this.children.get(i)||new t(null)).setTree(ht(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(ut(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(vt(t,r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,ut(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(yt(t))return null;var i=ct(t),o=this.children.get(i);return o?o.findOnPath_(ht(t),vt(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,ut(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(yt(e))return this;this.value&&r(n,this.value);var i=ct(e),o=this.children.get(i);return o?o.foreachOnPath_(ht(e),vt(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(ut(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(vt(t,n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t}(),He=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new We(null))},t}();function Ke(t,e,n){if(yt(e))return new He(new We(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,a=gt(i,e);return o=o.updateChild(a,n),new He(t.writeTree_.set(i,o))}var s=new We(n),u=t.writeTree_.setTree(e,s);return new He(u)}function Ge(t,e,n){var r=t;return D(n,(function(t,n){r=Ke(r,vt(e,t),n)})),r}function Je(t,e){if(yt(e))return He.empty();var n=t.writeTree_.setTree(e,new We(null));return new He(n)}function Qe(t,e){return null!=Ye(t,e)}function Ye(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(gt(n.path,e)):null}function Xe(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Kt,(function(t,n){e.push(new It(t,n))})):t.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new It(t,n.value))})),e}function Ze(t,e){if(yt(e))return t;var n=Ye(t,e);return new He(null!=n?new We(n):t.writeTree_.subtree(e))}function $e(t){return t.writeTree_.isEmpty()}function tn(t,e){return function t(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var o=null;return n.children.inorderTraversal((function(n,a){".priority"===n?(Object(i.e)(null!==a.value,"Priority writes must always be leaf nodes"),o=a.value):r=t(vt(e,n),a,r)})),r.getChild(e).isEmpty()||null===o||(r=r.updateChild(vt(e,".priority"),o)),r}(ut(),t.writeTree_,e)}function en(t,e){return dn(e,t)}function nn(t,e){if(t.snap)return _t(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&_t(vt(t.path,n),e))return!0;return!1}function rn(t){return t.visible}function on(t,e,n){for(var r=He.empty(),o=0;o<t.length;++o){var a=t[o];if(e(a)){var s=a.path,u=void 0;if(a.snap)_t(n,s)?r=Ke(r,u=gt(n,s),a.snap):_t(s,n)&&(u=gt(s,n),r=Ke(r,ut(),a.snap.getChild(u)));else{if(!a.children)throw Object(i.f)("WriteRecord should have .snap or .children");if(_t(n,s))r=Ge(r,u=gt(n,s),a.children);else if(_t(s,n))if(yt(u=gt(s,n)))r=Ge(r,ut(),a.children);else{var c=Object(i.F)(a.children,ct(u));if(c){var l=c.getChild(ht(u));r=Ke(r,ut(),l)}}}}}return r}function an(t,e,n,r,i){if(r||i){var o=Ze(t.visibleWrites,e);return!i&&$e(o)?n:i||null!=n||Qe(o,ut())?tn(on(t.allWrites,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(_t(t.path,e)||_t(e,t.path))}),e),n||Zt.EMPTY_NODE):null}var a=Ye(t.visibleWrites,e);if(null!=a)return a;var s=Ze(t.visibleWrites,e);return $e(s)?n:null!=n||Qe(s,ut())?tn(s,n||Zt.EMPTY_NODE):null}function sn(t,e,n,r){return an(t.writeTree,t.treePath,e,n,r)}function un(t,e){return function(t,e,n){var r=Zt.EMPTY_NODE,i=Ye(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Kt,(function(t,e){r=r.updateImmediateChild(t,e)})),r;if(n){var o=Ze(t.visibleWrites,e);return n.forEachChild(Kt,(function(t,e){var n=tn(Ze(o,new st(t)),e);r=r.updateImmediateChild(t,n)})),Xe(o).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}return Xe(Ze(t.visibleWrites,e)).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}(t.writeTree,t.treePath,e)}function cn(t,e,n,r){return function(t,e,n,r,o){Object(i.e)(r||o,"Either existingEventSnap or existingServerSnap must exist");var a=vt(e,n);if(Qe(t.visibleWrites,a))return null;var s=Ze(t.visibleWrites,a);return $e(s)?o.getChild(n):tn(s,o.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function ln(t,e){return function(t,e){return Ye(t.visibleWrites,e)}(t.writeTree,vt(t.treePath,e))}function hn(t,e,n){return function(t,e,n,r){var i=vt(e,n),o=Ye(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?tn(Ze(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function fn(t,e){return dn(vt(t.treePath,e),t.writeTree)}function dn(t,e){return{treePath:t,writeTree:e}}var pn=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(i.e)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(i.e)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var o=r.type;if("child_added"===e&&"child_removed"===o)this.changeMap.set(n,fe(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===o)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===o)this.changeMap.set(n,he(n,r.oldSnap));else if("child_changed"===e&&"child_added"===o)this.changeMap.set(n,le(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==o)throw Object(i.f)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,fe(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),vn=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),yn=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Le(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return hn(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Be(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,a){var s,u=Ze(t.visibleWrites,e),c=Ye(u,ut());if(null!=c)s=c;else{if(null==n)return[];s=tn(u,n)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=a.getCompare(),f=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),d=f.getNext();d&&l.length<1;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(t.writeTree,t.treePath,e,n,0,i,o)}(this.writes_,r,e,0,n,t);return 0===i.length?null:i[0]},t}();function gn(t,e,n,r,o,a){var s=e.eventCache;if(null!=ln(r,n))return e;var u=void 0,c=void 0;if(yt(n))if(Object(i.e)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=Be(e),h=un(r,l instanceof Zt?l:Zt.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),h,a)}else{var f=sn(r,Be(e));u=t.filter.updateFullNode(e.eventCache.getNode(),f,a)}else{var d=ct(n);if(".priority"===d){Object(i.e)(1===lt(n),"Can't have a priority with additional path components");var p=s.getNode(),v=cn(r,n,p,c=e.serverCache.getNode());u=null!=v?t.filter.updatePriority(p,v):s.getNode()}else{var y=ht(n),g=void 0;if(s.isCompleteForChild(d)){c=e.serverCache.getNode();var m=cn(r,n,s.getNode(),c);g=null!=m?s.getNode().getImmediateChild(d).updateChild(y,m):s.getNode().getImmediateChild(d)}else g=hn(r,d,e.serverCache);u=null!=g?t.filter.updateChild(s.getNode(),d,g,y,o,a):s.getNode()}}return qe(e,u,s.isFullyInitialized()||yt(n),t.filter.filtersNodes())}function mn(t,e,n,r,i,o,a,s){var u,c=e.serverCache,l=a?t.filter:t.filter.getIndexedFilter();if(yt(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=ct(n);if(!c.isCompleteForPath(n)&&lt(n)>1)return e;var d=ht(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,vn,null)}var v=Ve(e,u,c.isFullyInitialized()||yt(n),l.filtersNodes());return gn(t,v,n,i,new yn(i,v,o),s)}function bn(t,e,n,r,i,o,a){var s,u,c=e.eventCache,l=new yn(i,e,o);if(yt(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,a),s=qe(e,u,!0,t.filter.filtersNodes());else{var h=ct(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),s=qe(e,u,c.isFullyInitialized(),c.isFiltered());else{var f=ht(n),d=c.getNode().getImmediateChild(h),p=void 0;if(yt(f))p=r;else{var v=l.getCompleteChild(h);p=null!=v?".priority"===ft(f)&&v.getChild(pt(f)).isEmpty()?v:v.updateChild(f,r):Zt.EMPTY_NODE}s=d.equals(p)?e:qe(e,t.filter.updateChild(c.getNode(),h,p,f,l,a),c.isFullyInitialized(),t.filter.filtersNodes())}}return s}function _n(t,e){return t.eventCache.isCompleteForChild(e)}function wn(t,e,n){return n.foreach((function(t,n){e=e.updateChild(t,n)})),e}function kn(t,e,n,r,i,o,a,s){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=yt(n)?r:new We(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=wn(0,e.serverCache.getNode().getImmediateChild(n),r);c=mn(t,c,new st(n),u,i,o,a,s)}})),u.children.inorderTraversal((function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=wn(0,e.serverCache.getNode().getImmediateChild(n),r);c=mn(t,c,new st(n),h,i,o,a,s)}})),c}var On,Cn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new de(r.getIndex()),o=(n=r).loadsAllData()?new de(n.getIndex()):n.hasLimit()?new ve(n):new pe(n);this.processor_=function(t){return{filter:t}}(o);var a=e.serverCache,s=e.eventCache,u=i.updateFullNode(Zt.EMPTY_NODE,a.getNode(),null),c=o.updateFullNode(Zt.EMPTY_NODE,s.getNode(),null),l=new Le(u,a.isFullyInitialized(),i.filtersNodes()),h=new Le(c,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=Ue(h,l),this.eventGenerator_=new Me(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function Sn(t,e){var n=Be(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!yt(e)&&!n.getImmediateChild(ct(e)).isEmpty())?n.getChild(e):null}function En(t){return 0===t.eventRegistrations_.length}function Tn(t,e,n){var r=[];if(n){Object(i.e)(null==e,"A cancel should cancel all event registrations.");var o=t.query._path;t.eventRegistrations_.forEach((function(t){var e=t.createCancelEvent(n,o);e&&r.push(e)}))}if(e){for(var a=[],s=0;s<t.eventRegistrations_.length;++s){var u=t.eventRegistrations_[s];if(u.matches(e)){if(e.hasAnyCallback()){a=a.concat(t.eventRegistrations_.slice(s+1));break}}else a.push(u)}t.eventRegistrations_=a}else t.eventRegistrations_=[];return r}function In(t,e,n,r){e.type===xe.MERGE&&null!==e.source.queryId&&(Object(i.e)(Be(t.viewCache_),"We should always have a full cache before handling merges"),Object(i.e)(ze(t.viewCache_),"Missing event cache, even though we have a server cache"));var o,a,s=t.viewCache_,u=function(t,e,n,r,o){var a,s,u=new pn;if(n.type===xe.OVERWRITE){var c=n;c.source.fromUser?a=bn(t,e,c.path,c.snap,r,o,u):(Object(i.e)(c.source.fromServer,"Unknown source."),s=c.source.tagged||e.serverCache.isFiltered()&&!yt(c.path),a=mn(t,e,c.path,c.snap,r,o,s,u))}else if(n.type===xe.MERGE){var l=n;l.source.fromUser?a=function(t,e,n,r,i,o,a){var s=e;return r.foreach((function(r,u){var c=vt(n,r);_n(e,ct(c))&&(s=bn(t,s,c,u,i,o,a))})),r.foreach((function(r,u){var c=vt(n,r);_n(e,ct(c))||(s=bn(t,s,c,u,i,o,a))})),s}(t,e,l.path,l.children,r,o,u):(Object(i.e)(l.source.fromServer,"Unknown source."),s=l.source.tagged||e.serverCache.isFiltered(),a=kn(t,e,l.path,l.children,r,o,s,u))}else if(n.type===xe.ACK_USER_WRITE){var h=n;a=h.revert?function(t,e,n,r,o,a){var s;if(null!=ln(r,n))return e;var u=new yn(r,e,o),c=e.eventCache.getNode(),l=void 0;if(yt(n)||".priority"===ct(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=sn(r,Be(e));else{var f=e.serverCache.getNode();Object(i.e)(f instanceof Zt,"serverChildren would be complete if leaf node"),h=un(r,f)}l=t.filter.updateFullNode(c,h=h,a)}else{var d=ct(n),p=hn(r,d,e.serverCache);null==p&&e.serverCache.isCompleteForChild(d)&&(p=c.getImmediateChild(d)),(l=null!=p?t.filter.updateChild(c,d,p,ht(n),u,a):e.eventCache.getNode().hasChild(d)?t.filter.updateChild(c,d,Zt.EMPTY_NODE,ht(n),u,a):c).isEmpty()&&e.serverCache.isFullyInitialized()&&(s=sn(r,Be(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,s,a))}return s=e.serverCache.isFullyInitialized()||null!=ln(r,ut()),qe(e,l,s,t.filter.filtersNodes())}(t,e,h.path,r,o,u):function(t,e,n,r,i,o,a){if(null!=ln(i,n))return e;var s=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(yt(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return mn(t,e,n,u.getNode().getChild(n),i,o,s,a);if(yt(n)){var c=new We(null);return u.getNode().forEachChild(At,(function(t,e){c=c.set(new st(t),e)})),kn(t,e,n,c,i,o,s,a)}return e}var l=new We(null);return r.foreach((function(t,e){var r=vt(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))})),kn(t,e,n,l,i,o,s,a)}(t,e,h.path,h.affectedTree,r,o,u)}else{if(n.type!==xe.LISTEN_COMPLETE)throw Object(i.f)("Unknown operation type: "+n.type);a=function(t,e,n,r,i){var o=e.serverCache;return gn(t,Ve(e,o.getNode(),o.isFullyInitialized()||yt(n),o.isFiltered()),n,r,vn,i)}(t,e,n.path,r,u)}var f=u.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=ze(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(ce(ze(e)))}}(e,a,f),{viewCache:a,changes:f}}(t.processor_,s,e,n,r);return o=t.processor_,a=u.viewCache,Object(i.e)(a.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),Object(i.e)(a.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),Object(i.e)(u.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,xn(t,u.changes,u.viewCache.eventCache.getNode(),null)}function xn(t,e,n,r){return function(t,e,n,r){var i=[],o=[];return e.forEach((function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})})),Fe(t,i,"child_removed",e,r,n),Fe(t,i,"child_added",e,r,n),Fe(t,i,"child_moved",o,r,n),Fe(t,i,"child_changed",e,r,n),Fe(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}var Nn,An=function(){this.views=new Map};function jn(t,e,n,r){var a,s,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return Object(i.e)(null!=c,"SyncTree gave us an op for an invalid query."),In(c,e,n,r)}var l=[];try{for(var h=Object(o.h)(t.views.values()),f=h.next();!f.done;f=h.next())l=l.concat(In(c=f.value,e,n,r))}catch(d){a={error:d}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}return l}function Pn(t,e,n,r,i){var o=t.views.get(e._queryIdentifier);if(!o){var a=sn(n,i?r:null),s=!1;a?s=!0:r instanceof Zt?(a=un(n,r),s=!1):(a=Zt.EMPTY_NODE,s=!1);var u=Ue(new Le(a,s,!1),new Le(r,i,!1));return new Cn(e,u)}return o}function Rn(t){var e,n,r=[];try{for(var i=Object(o.h)(t.views.values()),a=i.next();!a.done;a=i.next()){var s=a.value;s.query._queryParams.loadsAllData()||r.push(s)}}catch(u){e={error:u}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Dn(t,e){var n,r,i=null;try{for(var a=Object(o.h)(t.views.values()),s=a.next();!s.done;s=a.next())i=i||Sn(s.value,e)}catch(u){n={error:u}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return i}function Ln(t,e){return e._queryParams.loadsAllData()?Un(t):t.views.get(e._queryIdentifier)}function Mn(t,e){return null!=Ln(t,e)}function Fn(t){return null!=Un(t)}function Un(t){var e,n;try{for(var r=Object(o.h)(t.views.values()),i=r.next();!i.done;i=r.next()){var a=i.value;if(a.query._queryParams.loadsAllData())return a}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var qn=1,Vn=function(t){this.listenProvider_=t,this.syncPointTree_=new We(null),this.pendingWriteTree_={visibleWrites:He.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function zn(t,e,n,r,o){return function(t,e,n,r,o){Object(i.e)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:o}),o&&(t.visibleWrites=Ke(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,o),o?Jn(t,new Re({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Bn(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex((function(t){return t.writeId===e}));Object(i.e)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var o=r.visible,a=!1,s=t.allWrites.length-1;o&&s>=0;){var u=t.allWrites[s];u.visible&&(s>=n&&nn(u,r.path)?o=!1:_t(r.path,u.path)&&(a=!0)),s--}return!!o&&(a?(function(t){t.visibleWrites=on(t.allWrites,rn,ut()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=Je(t.visibleWrites,r.path):D(r.children,(function(e){t.visibleWrites=Je(t.visibleWrites,vt(r.path,e))})),!0))}(t.pendingWriteTree_,e)){var o=new We(null);return null!=r.snap?o=o.set(ut(),!0):D(r.children,(function(t){o=o.set(new st(t),!0)})),Jn(t,new je(r.path,o,n))}return[]}function Wn(t,e,n){return Jn(t,new Re({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Hn(t,e,n,r){var a=e._path,s=t.syncPointTree_.get(a),u=[];if(s&&("default"===e._queryIdentifier||Mn(s,e))){var c=function(t,e,n,r){var a,s,u=e._queryIdentifier,c=[],l=[],h=Fn(t);if("default"===u)try{for(var f=Object(o.h)(t.views.entries()),d=f.next();!d.done;d=f.next()){var p,v=Object(o.e)(d.value,2),y=v[0];l=l.concat(Tn(p=v[1],n,r)),En(p)&&(t.views.delete(y),p.query._queryParams.loadsAllData()||c.push(p.query))}}catch(g){a={error:g}}finally{try{d&&!d.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}else(p=t.views.get(u))&&(l=l.concat(Tn(p,n,r)),En(p)&&(t.views.delete(u),p.query._queryParams.loadsAllData()||c.push(p.query)));return h&&!Fn(t)&&c.push(new(Object(i.e)(On,"Reference.ts has not been loaded"),On)(e._repo,e._path)),{removed:c,events:l}}(s,e,n,r);0===s.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(a));var l=c.removed;u=c.events;var h=-1!==l.findIndex((function(t){return t._queryParams.loadsAllData()})),f=t.syncPointTree_.findOnPath(a,(function(t,e){return Fn(e)}));if(h&&!f){var d=t.syncPointTree_.subtree(a);if(!d.isEmpty())for(var p=function(t){return t.fold((function(t,e,n){if(e&&Fn(e))return[Un(e)];var r=[];return e&&(r=Rn(e)),D(n,(function(t,e){r=r.concat(e)})),r}))}(d),v=0;v<p.length;++v){var y=p[v],g=y.query,m=Qn(t,y);t.listenProvider_.startListening(er(g),Yn(t,g),m.hashFn,m.onComplete)}}!f&&l.length>0&&!r&&(h?t.listenProvider_.stopListening(er(e),null):l.forEach((function(e){var n=t.queryToTagMap.get(Xn(e));t.listenProvider_.stopListening(er(e),n)}))),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=Xn(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,l)}return u}function Kn(t,e,n){var r=e._path,o=null,a=!1;t.syncPointTree_.foreachOnPath(r,(function(t,e){var n=gt(t,r);o=o||Dn(e,n),a=a||Fn(e)}));var s,u=t.syncPointTree_.get(r);u?(a=a||Fn(u),o=o||Dn(u,ut())):(u=new An,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=o?s=!0:(s=!1,o=Zt.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=Dn(e,ut());n&&(o=o.updateImmediateChild(t,n))})));var c=Mn(u,e);if(!c&&!e._queryParams.loadsAllData()){var l=Xn(e);Object(i.e)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=qn++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var f=function(t,e,n,r,i,o){var a=Pn(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,a),function(t,e){t.eventRegistrations_.push(e)}(a,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Kt,(function(t,e){r.push(le(t,e))})),n.isFullyInitialized()&&r.push(ce(n.getNode())),xn(t,r,n.getNode(),e)}(a,n)}(u,e,n,en(t.pendingWriteTree_,r),o,s);if(!c&&!a){var d=Ln(u,e);f=f.concat(function(t,e,n){var r=e._path,o=Yn(t,e),a=Qn(t,n),s=t.listenProvider_.startListening(er(e),o,a.hashFn,a.onComplete),u=t.syncPointTree_.subtree(r);if(o)Object(i.e)(!Fn(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold((function(t,e,n){if(!yt(t)&&e&&Fn(e))return[Un(e).query];var r=[];return e&&(r=r.concat(Rn(e).map((function(t){return t.query})))),D(n,(function(t,e){r=r.concat(e)})),r})),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(er(h),Yn(t,h))}return s}(t,e,d))}return f}function Gn(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(function(t,n){var r=Dn(n,gt(t,e));if(r)return r}));return an(r,e,i,n,!0)}function Jn(t,e){return function t(e,n,r,i){if(yt(e.path))return function t(e,n,r,i){var o=n.get(ut());null==r&&null!=o&&(r=Dn(o,ut()));var a=[];return n.children.inorderTraversal((function(n,o){var s=r?r.getImmediateChild(n):null,u=fn(i,n),c=e.operationForChild(n);c&&(a=a.concat(t(c,o,s,u)))})),o&&(a=a.concat(jn(o,e,i,r))),a}(e,n,r,i);var o=n.get(ut());null==r&&null!=o&&(r=Dn(o,ut()));var a=[],s=ct(e.path),u=e.operationForChild(s),c=n.children.get(s);if(c&&u){var l=r?r.getImmediateChild(s):null,h=fn(i,s);a=a.concat(t(u,c,l,h))}return o&&(a=a.concat(jn(o,e,i,r))),a}(e,t.syncPointTree_,null,en(t.pendingWriteTree_,ut()))}function Qn(t,e){var n=e.query,r=Yn(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||Zt.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=Zn(t,n);if(r){var i=$n(r),o=i.path,a=i.queryId,s=gt(o,e);return tr(t,o,new Pe(Ne(a),s))}return[]}(t,n._path,r):function(t,e){return Jn(t,new Pe({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Hn(t,n,null,i)}}}function Yn(t,e){var n=Xn(e);return t.queryToTagMap.get(n)}function Xn(t){return t._path.toString()+"$"+t._queryIdentifier}function Zn(t,e){return t.tagToQueryMap.get(e)}function $n(t){var e=t.indexOf("$");return Object(i.e)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new st(t.substr(0,e))}}function tr(t,e,n){var r=t.syncPointTree_.get(e);return Object(i.e)(r,"Missing sync point for query tag that we're tracking"),jn(r,n,en(t.pendingWriteTree_,e),null)}function er(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Object(i.e)(Nn,"Reference.ts has not been loaded"),Nn)(t._repo,t._path):t}var nr=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),rr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=vt(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return Gn(this.syncTree_,this.path_)},t}(),ir=function(t,e,n){return t&&"object"==typeof t?(Object(i.e)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?or(t[".sv"],e,n):"object"==typeof t[".sv"]?ar(t[".sv"],e):void Object(i.e)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},or=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(i.e)(!1,"Unexpected server value: "+t)}},ar=function(t,e,n){t.hasOwnProperty("increment")||Object(i.e)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(i.e)(!1,"Unexpected increment value: "+r);var o=e.node();if(Object(i.e)(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;var a=o.getValue();return"number"!=typeof a?r:a+r},sr=function(t,e,n,r){return cr(e,new rr(n,t),r)},ur=function(t,e,n){return cr(t,new nr(e),n)};function cr(t,e,n){var r,i=t.getPriority().val(),o=ir(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var a=t,s=ir(a.getValue(),e,n);return s!==a.getValue()||o!==a.getPriority().val()?new Ht(s,te(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Ht(o))),u.forEachChild(Kt,(function(t,i){var o=cr(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}var lr=function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n};function hr(t,e){for(var n=e instanceof st?e:new st(e),r=t,o=ct(n);null!==o;){var a=Object(i.F)(r.node.children,o)||{children:{},childCount:0};r=new lr(o,r,a),o=ct(n=ht(n))}return r}function fr(t){return t.node.value}function dr(t,e){t.node.value=e,function t(e){null!==e.parent&&function(e,n,r){var o=function(t){return void 0===fr(t)&&!pr(t)}(r),a=Object(i.i)(e.node.children,n);o&&a?(delete e.node.children[n],e.node.childCount--,t(e)):o||a||(e.node.children[n]=r.node,e.node.childCount++,t(e))}(e.parent,e.name,e)}(t)}function pr(t){return t.node.childCount>0}function vr(t,e){D(t.node.children,(function(n,r){e(new lr(n,t,r))}))}function yr(t){return new st(null===t.parent?t.name:yr(t.parent)+"/"+t.name)}var gr=/[\[\].#$\/\u0000-\u001F\u007F]/,mr=/[\[\].#$\u0000-\u001F\u007F]/,br=function(t){return"string"==typeof t&&0!==t.length&&!gr.test(t)},_r=function(t){return"string"==typeof t&&0!==t.length&&!mr.test(t)},wr=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!T(t)||t&&"object"==typeof t&&Object(i.i)(t,".sv")},kr=function(t,e,n,r){r&&void 0===e||Or(Object(i.n)(t,"value"),e,n)},Or=function t(e,n,r){var o=r instanceof st?new wt(r,e):r;if(void 0===n)throw new Error(e+"contains undefined "+Ot(o));if("function"==typeof n)throw new Error(e+"contains a function "+Ot(o)+" with contents = "+n.toString());if(T(n))throw new Error(e+"contains "+n.toString()+" "+Ot(o));if("string"==typeof n&&n.length>10485760/3&&Object(i.G)(n)>10485760)throw new Error(e+"contains a string greater than 10485760 utf8 bytes "+Ot(o)+" ('"+n.substring(0,50)+"...')");if(n&&"object"==typeof n){var a=!1,s=!1;if(D(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(s=!0,!br(n)))throw new Error(e+" contains an invalid key ("+n+") "+Ot(o)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var u,c;!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Object(i.G)(e),kt(t)}(o,n),t(e,r,o),c=(u=o).parts_.pop(),u.byteLength_-=Object(i.G)(c),u.parts_.length>0&&(u.byteLength_-=1)})),a&&s)throw new Error(e+' contains ".value" child '+Ot(o)+" in addition to actual children.")}},Cr=function(t,e,n,r){if(!r||void 0!==e){var o=Object(i.n)(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");var a=[];D(e,(function(t,e){var r=new st(t);if(Or(o,e,vt(n,r)),".priority"===ft(r)&&!wr(e))throw new Error(o+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=dt(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!br(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(mt);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&_t(a,r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(o,a)}},Sr=function(t,e,n){if(!n||void 0!==e){if(T(e))throw new Error(Object(i.n)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!wr(e))throw new Error(Object(i.n)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Er=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(i.n)(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Tr=function(t,e,n,r){if(!(r&&void 0===n||br(n)))throw new Error(Object(i.n)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Ir=function(t,e,n,r){if(!(r&&void 0===n||_r(n)))throw new Error(Object(i.n)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},xr=function(t,e){if(".info"===ct(e))throw new Error(t+" failed = Can't modify data under /.info/")},Nr=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!br(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),_r(t)}(n))throw new Error(Object(i.n)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Ar=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(i.n)(t,e)+"must be a boolean.")},jr=function(){this.eventLists_=[],this.recursionDepth_=0};function Pr(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||bt(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Rr(t,e,n){Pr(t,n),Lr(t,(function(t){return bt(t,e)}))}function Dr(t,e,n){Pr(t,n),Lr(t,(function(t){return _t(t,e)||_t(e,t)}))}function Lr(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(Mr(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Mr(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();b&&k("event: "+n.toString()),U(r)}}}var Fr=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new jr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ce(),this.transactionQueueTree_=new lr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function Ur(t){var e=t.infoData_.getNode(new st(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function qr(t){return(e=(e={timestamp:Ur(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function Vr(t,e,n,r,o){t.dataUpdateCount++;var a=new st(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var s=[];if(o)if(r){var u=Object(i.D)(n,(function(t){return te(t)}));s=function(t,e,n,r){var i=Zn(t,r);if(i){var o=$n(i),a=o.path,s=o.queryId,u=gt(a,e),c=We.fromObject(n);return tr(t,a,new De(Ne(s),u,c))}return[]}(t.serverSyncTree_,a,u,o)}else{var c=te(n);s=function(t,e,n,r){var i=Zn(t,r);if(null!=i){var o=$n(i),a=o.path,s=o.queryId,u=gt(a,e);return tr(t,a,new Re(Ne(s),u,n))}return[]}(t.serverSyncTree_,a,c,o)}else if(r){var l=Object(i.D)(n,(function(t){return te(t)}));s=function(t,e,n){var r=We.fromObject(n);return Jn(t,new De({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,a,l)}else{var h=te(n);s=Wn(t.serverSyncTree_,a,h)}var f=a;s.length>0&&(f=$r(t,a)),Dr(t.eventQueue_,f,s)}function zr(t,e){Br(t,"connected",e),!1===e&&function(t){Qr(t,"onDisconnectEvents");var e=qr(t),n=Ce();Ee(t.onDisconnect_,ut(),(function(r,i){var o=sr(r,i,t.serverSyncTree_,e);Se(n,r,o)}));var r=[];Ee(n,ut(),(function(e,n){r=r.concat(Wn(t.serverSyncTree_,e,n));var i=ri(t,e);$r(t,i)})),t.onDisconnect_=Ce(),Dr(t.eventQueue_,ut(),r)}(t)}function Br(t,e,n){var r=new st("/.info/"+e),i=te(n);t.infoData_.updateSnapshot(r,i);var o=Wn(t.infoSyncTree_,r,i);Dr(t.eventQueue_,r,o)}function Wr(t){return t.nextWriteId_++}function Hr(t,e,n,r,i){Qr(t,"set",{path:e.toString(),value:n,priority:r});var o=qr(t),a=te(n,r),s=Gn(t.serverSyncTree_,e),u=ur(a,s,o),c=Wr(t),l=zn(t.serverSyncTree_,e,u,c,!0);Pr(t.eventQueue_,l),t.server_.put(e.toString(),a.val(!0),(function(n,r){var o="ok"===n;o||E("set at "+e+" failed: "+n);var a=Bn(t.serverSyncTree_,c,!o);Dr(t.eventQueue_,e,a),Yr(0,i,n,r)}));var h=ri(t,e);$r(t,h),Dr(t.eventQueue_,h,[])}function Kr(t,e,n,r){var i=te(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(function(n,o){"ok"===n&&Se(t.onDisconnect_,e,i),Yr(0,r,n,o)}))}function Gr(t,e,n){var r;r=".info"===ct(e._path)?Hn(t.infoSyncTree_,e,n):Hn(t.serverSyncTree_,e,n),Rr(t.eventQueue_,e._path,r)}function Jr(t){t.persistentConnection_&&t.persistentConnection_.interrupt("repo_interrupt")}function Qr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),k.apply(void 0,Object(o.g)([r],Object(o.e)(e)))}function Yr(t,e,n,r){e&&U((function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}}))}function Xr(t,e,n){return Gn(t.serverSyncTree_,e,n)||Zt.EMPTY_NODE}function Zr(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||ni(t,e),fr(e)){var n=ei(t,e);Object(i.e)(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return 0===t.status}))&&function(t,e,n){for(var r=n.map((function(t){return t.currentWriteId})),o=Xr(t,e,r),a=o,s=o.hash(),u=0;u<n.length;u++){var c=n[u];Object(i.e)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=gt(e,c.path);a=a.updateChild(l,c.currentOutputSnapshotRaw)}var h=a.val(!0),f=e;t.server_.put(f.toString(),h,(function(r){Qr(t,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=function(e){n[e].status=2,i=i.concat(Bn(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push((function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)})),n[e].unwatcher()},s=0;s<n.length;s++)a(s);for(ni(t,hr(t.transactionQueueTree_,e)),Zr(t,t.transactionQueueTree_),Dr(t.eventQueue_,e,i),s=0;s<o.length;s++)U(o[s])}else{if("datastale"===r)for(s=0;s<n.length;s++)n[s].status=3===n[s].status?4:0;else for(E("transaction at "+f.toString()+" failed: "+r),s=0;s<n.length;s++)n[s].status=4,n[s].abortReason=r;$r(t,e)}}),s)}(t,yr(e),n)}else pr(e)&&vr(e,(function(e){Zr(t,e)}))}function $r(t,e){var n=ti(t,e),r=yr(n);return function(t,e,n){if(0!==e.length){for(var r=[],o=[],a=e.filter((function(t){return 0===t.status})).map((function(t){return t.currentWriteId})),s=function(s){var u,c=e[s],l=gt(n,c.path),h=!1;if(Object(i.e)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,o=o.concat(Bn(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,u="maxretry",o=o.concat(Bn(t.serverSyncTree_,c.currentWriteId,!0));else{var f=Xr(t,c.path,a);c.currentInputSnapshot=f;var d=e[s].update(f.val());if(void 0!==d){Or("transaction failed: Data returned ",d,c.path);var p=te(d);"object"==typeof d&&null!=d&&Object(i.i)(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=c.currentWriteId,y=qr(t),g=ur(p,f,y);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=g,c.currentWriteId=Wr(t),a.splice(a.indexOf(v),1),o=(o=o.concat(zn(t.serverSyncTree_,c.path,g,c.currentWriteId,c.applyLocally))).concat(Bn(t.serverSyncTree_,v,!0))}else h=!0,u="nodata",o=o.concat(Bn(t.serverSyncTree_,c.currentWriteId,!0))}Dr(t.eventQueue_,n,o),o=[],h&&(e[s].status=2,setTimeout(e[s].unwatcher,Math.floor(0)),e[s].onComplete&&r.push("nodata"===u?function(){return e[s].onComplete(null,!1,e[s].currentInputSnapshot)}:function(){return e[s].onComplete(new Error(u),!1,null)}))},u=0;u<e.length;u++)s(u);for(ni(t,t.transactionQueueTree_),u=0;u<r.length;u++)U(r[u]);Zr(t,t.transactionQueueTree_)}}(t,ei(t,n),r),r}function ti(t,e){var n,r=t.transactionQueueTree_;for(n=ct(e);null!==n&&void 0===fr(r);)r=hr(r,n),n=ct(e=ht(e));return r}function ei(t,e){var n=[];return function t(e,n,r){var i=fr(n);if(i)for(var o=0;o<i.length;o++)r.push(i[o]);vr(n,(function(n){t(e,n,r)}))}(t,e,n),n.sort((function(t,e){return t.order-e.order})),n}function ni(t,e){var n=fr(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,dr(e,n.length>0?n:void 0)}vr(e,(function(e){ni(t,e)}))}function ri(t,e){var n=yr(ti(t,e)),r=hr(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,(function(e){ii(t,e)})),ii(t,r),function t(e,n,r,i){r&&!i&&n(e),vr(e,(function(e){t(e,n,!0,i)})),r&&i&&n(e)}(r,(function(e){ii(t,e)})),n}function ii(t,e){var n=fr(e);if(n){for(var r=[],o=[],a=-1,s=0;s<n.length;s++)3===n[s].status||(1===n[s].status?(Object(i.e)(a===s-1,"All SENT items should be at beginning of queue."),a=s,n[s].status=3,n[s].abortReason="set"):(Object(i.e)(0===n[s].status,"Unexpected transaction status in abort"),n[s].unwatcher(),o=o.concat(Bn(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));for(-1===a?dr(e,void 0):n.length=a+1,Dr(t.eventQueue_,yr(e),o),s=0;s<r.length;s++)U(r[s])}}var oi=function(t,e){var n=ai(t),r=n.namespace;return"firebase.com"===n.domain&&S(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||S("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&E("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new H(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new st(n.pathString)}},ai=function(t){var e="",n="",r="",i="",a="",s=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,f)));var d=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Object(o.h)(t.split("&")),a=i.next();!a.done;a=i.next()){var s=a.value;if(0!==s.length){var u=s.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):E("Invalid query segment '"+s+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(s="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var v=e.indexOf(".");r=e.substring(0,v).toLowerCase(),n=e.substring(v+1),a=r}"ns"in d&&(a=d.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:s,scheme:u,pathString:i,namespace:a}},si=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(i.I)(this.snapshot.exportVal())},t}(),ui=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),ci=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return Object(i.e)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),li=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t,e,n,r=new i.a;return t=this._repo,e=this._path,n=r.wrapCallback((function(){})),t.server_.onDisconnectCancel(e.toString(),(function(r,i){"ok"===r&&function t(e,n){if(yt(n))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var r=e.value;return e.value=null,r.forEachChild(Kt,(function(t,n){Se(e,new st(t),n)})),t(e,n)}if(e.children.size>0){var i=ct(n);return n=ht(n),e.children.has(i)&&t(e.children.get(i),n)&&e.children.delete(i),0===e.children.size}return!0}(t.onDisconnect_,e),Yr(0,n,r,i)})),r.promise},t.prototype.remove=function(){xr("OnDisconnect.remove",this._path);var t=new i.a;return Kr(this._repo,this._path,null,t.wrapCallback((function(){}))),t.promise},t.prototype.set=function(t){xr("OnDisconnect.set",this._path),kr("OnDisconnect.set",t,this._path,!1);var e=new i.a;return Kr(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},t.prototype.setWithPriority=function(t,e){xr("OnDisconnect.setWithPriority",this._path),kr("OnDisconnect.setWithPriority",t,this._path,!1),Sr("OnDisconnect.setWithPriority",e,!1);var n=new i.a;return function(t,e,n,r,i){var o=te(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),(function(n,r){"ok"===n&&Se(t.onDisconnect_,e,o),Yr(0,i,n,r)}))}(this._repo,this._path,t,e,n.wrapCallback((function(){}))),n.promise},t.prototype.update=function(t){xr("OnDisconnect.update",this._path),Cr("OnDisconnect.update",t,this._path,!1);var e=new i.a;return function(t,e,n,r){if(Object(i.u)(n))return k("onDisconnect().update() called with empty data.  Don't do anything."),void Yr(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,(function(i,o){"ok"===i&&D(n,(function(n,r){var i=te(r);Se(t.onDisconnect_,vt(e,n),i)})),Yr(0,r,i,o)}))}(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},t}(),hi=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return yt(this._path)?null:ft(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new vi(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=we(this._queryParams),e=P(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return we(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=Object(i.o)(e))instanceof t))return!1;var n=this._repo===e._repo,r=bt(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function fi(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function di(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===At){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==I)throw new Error(r);if("string"!=typeof e)throw new Error(o)}if(t.hasEnd()){if(t.getIndexEndName()!==x)throw new Error(r);if("string"!=typeof n)throw new Error(o)}}else if(t.getIndex()===Kt){if(null!=e&&!wr(e)||null!=n&&!wr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(i.e)(t.getIndex()instanceof re||t.getIndex()===ie,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function pi(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var vi=function(t){function e(e,n){return t.call(this,e,n,new ye,!1)||this}return Object(o.c)(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=pt(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(hi),yi=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new st(e),r=bi(this.ref,e);return new t(this._node.getChild(n),r,Kt)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return e(new t(i,bi(n.ref,r),Kt))}))},t.prototype.hasChild=function(t){var e=new st(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function gi(t,e){return(t=Object(i.o)(t))._checkNotDeleted("ref"),void 0!==e?bi(t._root,e):t._root}function mi(t,e){(t=Object(i.o)(t))._checkNotDeleted("refFromURL");var n=oi(e,t._repo.repoInfo_.nodeAdmin);Nr("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||S("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),gi(t,n.path.toString())}function bi(t,e){var n;return null===ct((t=Object(i.o)(t))._path)?((n=e)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Ir("child","path",n,!1)):Ir("child","path",e,!1),new vi(t._repo,vt(t._path,e))}function _i(t,e){t=Object(i.o)(t),xr("push",t._path),kr("push",e,t._path,!0);var n,r=Ur(t._repo),o=ae(r),a=bi(t,o),s=bi(t,o);return n=null!=e?ki(s,e).then((function(){return s})):Promise.resolve(s),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}function wi(t){return xr("remove",t._path),ki(t,null)}function ki(t,e){t=Object(i.o)(t),xr("set",t._path),kr("set",e,t._path,!1);var n=new i.a;return Hr(t._repo,t._path,e,null,n.wrapCallback((function(){}))),n.promise}function Oi(t,e){t=Object(i.o)(t),xr("setPriority",t._path),Sr("setPriority",e,!1);var n=new i.a;return Hr(t._repo,vt(t._path,".priority"),e,null,n.wrapCallback((function(){}))),n.promise}function Ci(t,e,n){if(xr("setWithPriority",t._path),kr("setWithPriority",e,t._path,!1),Sr("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new i.a;return Hr(t._repo,t._path,e,n,r.wrapCallback((function(){}))),r.promise}function Si(t,e){Cr("update",e,t._path,!1);var n=new i.a;return function(t,e,n,r){Qr(t,"update",{path:e.toString(),value:n});var o=!0,a=qr(t),s={};if(D(n,(function(n,r){o=!1,s[n]=sr(vt(e,n),te(r),t.serverSyncTree_,a)})),o)k("update() called with empty data.  Don't do anything."),Yr(0,r,"ok",void 0);else{var u=Wr(t),c=function(t,e,n,r){!function(t,e,n,r){Object(i.e)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Ge(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var o=We.fromObject(n);return Jn(t,new De({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,o))}(t.serverSyncTree_,e,s,u);Pr(t.eventQueue_,c),t.server_.merge(e.toString(),n,(function(n,i){var o="ok"===n;o||E("update at "+e+" failed: "+n);var a=Bn(t.serverSyncTree_,u,!o),s=a.length>0?$r(t,e):e;Dr(t.eventQueue_,s,a),Yr(0,r,n,i)})),D(n,(function(n){var r=ri(t,vt(e,n));$r(t,r)})),Dr(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback((function(){}))),n.promise}var Ei=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new si("value",this,new yi(t.snapshotNode,new vi(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new ui(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),Ti=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return this.eventType===("children_removed"===e?"child_removed":e)},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new ui(this,t,e):null},t.prototype.createEvent=function(t,e){Object(i.e)(null!=t.childName,"Child events should have a childName.");var n=bi(new vi(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new si(t.type,this,new yi(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function Ii(t,e,n,r,i){var o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){var a=n,s=function(e,n){Gr(t._repo,t,c),a(e,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new ci(n,o||void 0),c="value"===e?new Ei(u):new Ti(e,u);return function(t,e,n){var r;r=".info"===ct(e._path)?Kn(t.infoSyncTree_,e,n):Kn(t.serverSyncTree_,e,n),Rr(t.eventQueue_,e._path,r)}(t._repo,t,c),function(){return Gr(t._repo,t,c)}}function xi(t,e,n,r){return Ii(t,"value",e,n,r)}function Ni(t,e,n,r){return Ii(t,"child_added",e,n,r)}function Ai(t,e,n,r){return Ii(t,"child_changed",e,n,r)}function ji(t,e,n,r){return Ii(t,"child_moved",e,n,r)}function Pi(t,e,n,r){return Ii(t,"child_removed",e,n,r)}function Ri(t,e,n){var r=null,i=n?new ci(n):null;"value"===e?r=new Ei(i):e&&(r=new Ti(e,i)),Gr(t._repo,t,r)}var Di=function(){},Li=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){kr("endAt",this._value,t._path,!0);var e=me(t._queryParams,this._value,this._key);if(pi(e),di(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new hi(t._repo,t._path,e,t._orderByCalled)},e}(Di);function Mi(t,e){return Tr("endAt","key",e,!0),new Li(t,e)}var Fi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){kr("endBefore",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===At?("string"==typeof n&&(n=ue(n)),i=me(e,n,r)):i=me(e,n,null==r?I:ue(r)),i.endBeforeSet_=!0,i);if(pi(o),di(o),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new hi(t._repo,t._path,o,t._orderByCalled)},e}(Di);function Ui(t,e){return Tr("endBefore","key",e,!0),new Fi(t,e)}var qi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){kr("startAt",this._value,t._path,!0);var e=ge(t._queryParams,this._value,this._key);if(pi(e),di(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new hi(t._repo,t._path,e,t._orderByCalled)},e}(Di);function Vi(t,e){return void 0===t&&(t=null),Tr("startAt","key",e,!0),new qi(t,e)}var zi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){kr("startAfter",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===At?("string"==typeof n&&(n=se(n)),i=ge(e,n,r)):i=ge(e,n,null==r?x:se(r)),i.startAfterSet_=!0,i);if(pi(o),di(o),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new hi(t._repo,t._path,o,t._orderByCalled)},e}(Di);function Bi(t,e){return Tr("startAfter","key",e,!0),new zi(t,e)}var Wi=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(o.c)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new hi(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="l",n),t._orderByCalled);var e,n},e}(Di);function Hi(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Wi(t)}var Ki=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(o.c)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new hi(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="r",n),t._orderByCalled);var e,n},e}(Di);function Gi(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Ki(t)}var Ji=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return Object(o.c)(e,t),e.prototype._apply=function(t){fi(t,"orderByChild");var e=new st(this._path);if(yt(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new re(e),r=be(t._queryParams,n);return di(r),new hi(t._repo,t._path,r,!0)},e}(Di);function Qi(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Ir("orderByChild","path",t,!1),new Ji(t)}var Yi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype._apply=function(t){fi(t,"orderByKey");var e=be(t._queryParams,At);return di(e),new hi(t._repo,t._path,e,!0)},e}(Di);function Xi(){return new Yi}var Zi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype._apply=function(t){fi(t,"orderByPriority");var e=be(t._queryParams,Kt);return di(e),new hi(t._repo,t._path,e,!0)},e}(Di);function $i(){return new Zi}var to=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype._apply=function(t){fi(t,"orderByValue");var e=be(t._queryParams,ie);return di(e),new hi(t._repo,t._path,e,!0)},e}(Di);function eo(){return new to}var no,ro=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){if(kr("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Li(this._value,this._key)._apply(new qi(this._value,this._key)._apply(t))},e}(Di);function io(t,e){return Tr("equalTo","key",e,!0),new ro(t,e)}function oo(t){for(var e,n,r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];var s=Object(i.o)(t);try{for(var u=Object(o.h)(r),c=u.next();!c.done;c=u.next()){var l=c.value;s=l._apply(s)}}catch(h){e={error:h}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return s}no=vi,Object(i.e)(!On,"__referenceConstructor has already been defined"),On=no,function(t){Object(i.e)(!Nn,"__referenceConstructor has already been defined"),Nn=t}(vi);var ao={},so=!1;function uo(t,e,n,r,i){var o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||S("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),k("Using default host for project ",t.options.projectId),o=t.options.projectId+"-default-rtdb.firebaseio.com");var a,s=oi(o,i),u=s.repoInfo,c=void 0;"undefined"!=typeof process&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(a=!0,u=(s=oi(o="http://"+c+"?ns="+u.namespace,i)).repoInfo):a=!s.repoInfo.secure;var l=i&&a?new B(B.OWNER):new z(t.name,t.options,e);Nr("Invalid Firebase Database URL",s),yt(s.path)||S("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(t,e,n,r){var i=ao[e.name];i||(ao[e.name]=i={});var o=i[t.toURLString()];return o&&S("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Fr(t,so,n,r),i[t.toURLString()]=o,o}(u,t,l,new V(t.name,n));return new co(h,t)}var co=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(function(t,e,n){if(t.stats_=Y(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new ke(t.repoInfo_,(function(e,n,r,i){Vr(t,e,n,r,i)}),t.authTokenProvider_,t.appCheckProvider_),setTimeout((function(){return zr(t,!0)}),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(i.I)(n)}catch(a){throw new Error("Invalid authOverride provided: "+a)}}t.persistentConnection_=new Tt(t.repoInfo_,e,(function(e,n,r,i){Vr(t,e,n,r,i)}),(function(e){zr(t,e)}),(function(e){!function(t,e){D(e,(function(e,n){Br(t,e,n)}))}(t,e)}),t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}var r,o;t.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),t.appCheckProvider_.addTokenChangeListener((function(e){t.server_.refreshAppCheckToken(e.token)})),t.statsReporter_=(r=function(){return new Ie(t.stats_,t.server_)},o=t.repoInfo_.toString(),Q[o]||(Q[o]=r()),Q[o]),t.infoData_=new Oe,t.infoSyncTree_=new Vn({startListening:function(e,n,r,i){var o=[],a=t.infoData_.getNode(e._path);return a.isEmpty()||(o=Wn(t.infoSyncTree_,e._path,a),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),Br(t,"connected",!1),t.serverSyncTree_=new Vn({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);Dr(t.eventQueue_,e._path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new vi(this._repo,ut())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){var t,e,n;return this._checkNotDeleted("delete"),t=this._repo,(n=ao[e=this.app.name])&&n[t.key]===t||S("Database "+e+"("+t.repoInfo_+") has already been deleted."),Jr(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null,Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&S("Cannot call "+t+" on a deleted database.")},t}();function lo(t){(t=Object(i.o)(t))._checkNotDeleted("goOffline"),Jr(t._repo)}function ho(t){var e;(t=Object(i.o)(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume("repo_interrupt")}var fo={".sv":"timestamp"},po=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function vo(t,e,n){var r;if(t=Object(i.o)(t),xr("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var o=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,a=new i.a,s=xi(t,(function(){}));return function(e,n,r,o,s,u){Qr(e,"transaction on "+n);var c={path:n,update:r,onComplete:function(e,n,r){var i=null;e?a.reject(e):(i=new yi(r,new vi(t._repo,t._path),Kt),a.resolve(new po(n,i)))},status:null,order:y(),applyLocally:u,retryCount:0,unwatcher:s,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=Xr(e,n,void 0);c.currentInputSnapshot=l;var h=c.update(l.val());if(void 0===h)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Or("transaction failed: Data returned ",h,c.path),c.status=0;var f=hr(e.transactionQueueTree_,n),d=fr(f)||[];d.push(c),dr(f,d);var p=void 0;"object"==typeof h&&null!==h&&Object(i.i)(h,".priority")?(p=Object(i.F)(h,".priority"),Object(i.e)(wr(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(Gn(e.serverSyncTree_,n)||Zt.EMPTY_NODE).getPriority().val();var v=qr(e),g=te(h,p),m=ur(g,l,v);c.currentOutputSnapshotRaw=g,c.currentOutputSnapshotResolved=m,c.currentWriteId=Wr(e);var b=zn(e.serverSyncTree_,n,m,c.currentWriteId,c.applyLocally);Dr(e.eventQueue_,n,b),Zr(e,e.transactionQueueTree_)}}(t._repo,t._path,e,0,s,o),a.promise}var yo=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){Object(i.J)("OnDisconnect.cancel",0,1,arguments.length),Object(i.K)("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},t.prototype.remove=function(t){Object(i.J)("OnDisconnect.remove",0,1,arguments.length),Object(i.K)("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},t.prototype.set=function(t,e){Object(i.J)("OnDisconnect.set",1,2,arguments.length),Object(i.K)("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},t.prototype.setWithPriority=function(t,e,n){Object(i.J)("OnDisconnect.setWithPriority",2,3,arguments.length),Object(i.K)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then((function(){return n(null)}),(function(t){return n(t)})),r},t.prototype.update=function(t,e){if(Object(i.J)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,E("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Object(i.K)("OnDisconnect.update","onComplete",e,!0);var o=this._delegate.update(t);return e&&o.then((function(){return e(null)}),(function(t){return e(t)})),o},t}(),go=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(i.J)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),mo=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return Object(i.J)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return Object(i.J)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return Object(i.J)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return Object(i.J)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return Object(i.J)("DataSnapshot.child",0,1,arguments.length),e=String(e),Ir("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return Object(i.J)("DataSnapshot.hasChild",1,1,arguments.length),Ir("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return Object(i.J)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return Object(i.J)("DataSnapshot.forEach",1,1,arguments.length),Object(i.K)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach((function(r){return e(new t(n._database,r))}))},t.prototype.hasChildren=function(){return Object(i.J)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(i.J)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return Object(i.J)("DataSnapshot.ref",0,0,arguments.length),new _o(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),bo=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,o){var a,s=this;Object(i.J)("Query.on",2,4,arguments.length),Object(i.K)("Query.on","callback",n,!1);var u=t.getCancelAndContextArgs_("Query.on",r,o),c=function(t,e){n.call(u.context,new mo(s.database,t),e)};c.userCallback=n,c.context=u.context;var l=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(e){case"value":return xi(this._delegate,c,l),n;case"child_added":return Ni(this._delegate,c,l),n;case"child_removed":return Pi(this._delegate,c,l),n;case"child_changed":return Ai(this._delegate,c,l),n;case"child_moved":return ji(this._delegate,c,l),n;default:throw new Error(Object(i.n)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if(Object(i.J)("Query.off",0,3,arguments.length),Er("Query.off",t,!0),Object(i.K)("Query.off","callback",e,!0),Object(i.L)("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,Ri(this._delegate,t,r)}else Ri(this._delegate,t)},t.prototype.get=function(){var t=this;return function(t){return function(t,e){var n=function(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(function(t,e){var i=gt(t,n);r=r||Dn(e,i)}));var i=t.syncPointTree_.get(n);i?r=r||Dn(i,ut()):(i=new An,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,a=o?new Le(r,!0,!1):null;return ze(Pn(i,e,en(t.pendingWriteTree_,e._path),o?a.getNode():Zt.EMPTY_NODE,o).viewCache_)}(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then((function(n){var r=te(n),i=Wn(t.serverSyncTree_,e._path,r);return Rr(t.eventQueue_,e._path,i),Promise.resolve(r)}),(function(n){return Qr(t,"get for query "+Object(i.I)(e)+" failed: "+n),Promise.reject(new Error(n))}))}((t=Object(i.o)(t))._repo,t).then((function(e){return new yi(e,new vi(t._repo,t._path),t._queryParams.getIndex())}))}(this._delegate).then((function(e){return new mo(t.database,e)}))},t.prototype.once=function(e,n,r,o){var a=this;Object(i.J)("Query.once",1,4,arguments.length),Object(i.K)("Query.once","callback",n,!0);var s=t.getCancelAndContextArgs_("Query.once",r,o),u=new i.a,c=function(t,e){var r=new mo(a.database,t);n&&n.call(s.context,r,e),u.resolve(r)};c.userCallback=n,c.context=s.context;var l=function(t){s.cancel&&s.cancel.call(s.context,t),u.reject(t)};switch(e){case"value":xi(this._delegate,c,l,{onlyOnce:!0});break;case"child_added":Ni(this._delegate,c,l,{onlyOnce:!0});break;case"child_removed":Pi(this._delegate,c,l,{onlyOnce:!0});break;case"child_changed":Ai(this._delegate,c,l,{onlyOnce:!0});break;case"child_moved":ji(this._delegate,c,l,{onlyOnce:!0});break;default:throw new Error(Object(i.n)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise},t.prototype.limitToFirst=function(e){return Object(i.J)("Query.limitToFirst",1,1,arguments.length),new t(this.database,oo(this._delegate,Hi(e)))},t.prototype.limitToLast=function(e){return Object(i.J)("Query.limitToLast",1,1,arguments.length),new t(this.database,oo(this._delegate,Gi(e)))},t.prototype.orderByChild=function(e){return Object(i.J)("Query.orderByChild",1,1,arguments.length),new t(this.database,oo(this._delegate,Qi(e)))},t.prototype.orderByKey=function(){return Object(i.J)("Query.orderByKey",0,0,arguments.length),new t(this.database,oo(this._delegate,Xi()))},t.prototype.orderByPriority=function(){return Object(i.J)("Query.orderByPriority",0,0,arguments.length),new t(this.database,oo(this._delegate,$i()))},t.prototype.orderByValue=function(){return Object(i.J)("Query.orderByValue",0,0,arguments.length),new t(this.database,oo(this._delegate,eo()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),Object(i.J)("Query.startAt",0,2,arguments.length),new t(this.database,oo(this._delegate,Vi(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),Object(i.J)("Query.startAfter",0,2,arguments.length),new t(this.database,oo(this._delegate,Bi(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),Object(i.J)("Query.endAt",0,2,arguments.length),new t(this.database,oo(this._delegate,Mi(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),Object(i.J)("Query.endBefore",0,2,arguments.length),new t(this.database,oo(this._delegate,Ui(e,n)))},t.prototype.equalTo=function(e,n){return Object(i.J)("Query.equalTo",1,2,arguments.length),new t(this.database,oo(this._delegate,io(e,n)))},t.prototype.toString=function(){return Object(i.J)("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return Object(i.J)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if(Object(i.J)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,Object(i.K)(t,"cancel",r.cancel,!0),r.context=n,Object(i.L)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(i.n)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new _o(this.database,new vi(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),_o=function(t){function e(e,n){var r=t.call(this,e,new hi(n._repo,n._path,new ye,!1))||this;return r.database=e,r._delegate=n,r}return Object(o.c)(e,t),e.prototype.getKey=function(){return Object(i.J)("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return Object(i.J)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new e(this.database,bi(this._delegate,t))},e.prototype.getParent=function(){Object(i.J)("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return Object(i.J)("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){Object(i.J)("Reference.set",1,2,arguments.length),Object(i.K)("Reference.set","onComplete",e,!0);var n=ki(this._delegate,t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},e.prototype.update=function(t,e){if(Object(i.J)("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,E("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}xr("Reference.update",this._delegate._path),Object(i.K)("Reference.update","onComplete",e,!0);var o=Si(this._delegate,t);return e&&o.then((function(){return e(null)}),(function(t){return e(t)})),o},e.prototype.setWithPriority=function(t,e,n){Object(i.J)("Reference.setWithPriority",2,3,arguments.length),Object(i.K)("Reference.setWithPriority","onComplete",n,!0);var r=Ci(this._delegate,t,e);return n&&r.then((function(){return n(null)}),(function(t){return n(t)})),r},e.prototype.remove=function(t){Object(i.J)("Reference.remove",0,1,arguments.length),Object(i.K)("Reference.remove","onComplete",t,!0);var e=wi(this._delegate);return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},e.prototype.transaction=function(t,e,n){var r=this;Object(i.J)("Reference.transaction",1,3,arguments.length),Object(i.K)("Reference.transaction","transactionUpdate",t,!1),Object(i.K)("Reference.transaction","onComplete",e,!0),Ar("Reference.transaction","applyLocally",n,!0);var o=vo(this._delegate,t,{applyLocally:n}).then((function(t){return new go(t.committed,new mo(r.database,t.snapshot))}));return e&&o.then((function(t){return e(null,t.committed,t.snapshot)}),(function(t){return e(t,!1,null)})),o},e.prototype.setPriority=function(t,e){Object(i.J)("Reference.setPriority",1,2,arguments.length),Object(i.K)("Reference.setPriority","onComplete",e,!0);var n=Oi(this._delegate,t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},e.prototype.push=function(t,n){var r=this;Object(i.J)("Reference.push",0,2,arguments.length),Object(i.K)("Reference.push","onComplete",n,!0);var o=_i(this._delegate,t),a=o.then((function(t){return new e(r.database,t)}));n&&a.then((function(){return n(null)}),(function(t){return n(t)}));var s=new e(this.database,o);return s.then=a.then.bind(a),s.catch=a.catch.bind(a,void 0),s},e.prototype.onDisconnect=function(){return xr("Reference.onDisconnect",this._delegate._path),new yo(new li(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(bo),wo=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={}),(t=Object(i.o)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&S("Cannot call useEmulator() after instance has already been initialized.");var o=t._repoInternal,a=void 0;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&S('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new B(B.OWNER);else if(r.mockUserToken){var s=Object(i.j)(r.mockUserToken,t.app.options.projectId);a=new B(s)}!function(t,e,n,r){t.repoInfo_=new H(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}(o,e,n,a)}(this._delegate,t,e,n)},t.prototype.ref=function(t){if(Object(i.J)("database.ref",0,1,arguments.length),t instanceof _o){var e=mi(this._delegate,t.toString());return new _o(this,e)}return e=gi(this._delegate,t),new _o(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";Object(i.J)(e,1,1,arguments.length);var n=mi(this._delegate,t);return new _o(this,n)},t.prototype.goOffline=function(){return Object(i.J)("database.goOffline",0,0,arguments.length),lo(this._delegate)},t.prototype.goOnline=function(){return Object(i.J)("database.goOnline",0,0,arguments.length),ho(this._delegate)},t.ServerValue={TIMESTAMP:fo,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}(),ko=Object.freeze({__proto__:null,forceLongPolling:function(){et.forceDisallow(),Z.forceAllow()},forceWebSockets:function(){Z.forceDisallow()},isWebSocketsAvailable:function(){return et.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new Te(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce((function(t,e){return Math.max(e.length,t)}),0);D(n,(function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)}))}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){t.stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,i=t.customAuthImpl,o=t.namespace,a=t.nodeAdmin,s=void 0!==a&&a;u(t.version);var c=new r.c("auth-internal",new r.b("database-standalone"));return c.setComponent(new r.a("auth-internal",(function(){return i}),"PRIVATE")),{instance:new wo(uo(e,c,void 0,n,s),e),namespace:o}}}),Oo=Tt;Tt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Tt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Co=Object.freeze({__proto__:null,DataConnection:Oo,RealTimeConnection:rt,hijackHash:function(t){var e=Tt.prototype.put;return Tt.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Tt.prototype.put=e}},ConnectionTarget:H,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){so=t}(t)}}),So=wo.ServerValue;!function(e){u(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new r.a("database",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new wo(uo(r,i,o,n),r)}),"PUBLIC").setServiceProps({Reference:_o,Query:bo,Database:wo,DataSnapshot:mo,enableLogging:w,INTERNAL:ko,ServerValue:So,TEST_ACCESS:Co}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.10.1"),Object(i.y)()&&(t.exports=n)}(e.a)}).call(this,n("3UD+")(t))},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),a=n("2QA8"),s=n("2fFW"),u=n("NJ4a"),c=function(t){p(n,t);var e=y(n);function n(t,r,o){var a;switch(h(this,n),(a=e.call(this)).syncErrorValue=null,a.syncErrorThrown=!1,a.syncErrorThrowable=!1,a.isStopped=!1,arguments.length){case 0:a.destination=i.a;break;case 1:if(!t){a.destination=i.a;break}if("object"==typeof t){t instanceof n?(a.syncErrorThrowable=t.syncErrorThrowable,a.destination=t,t.add(m(a))):(a.syncErrorThrowable=!0,a.destination=new f(m(a),t));break}default:a.syncErrorThrowable=!0,a.destination=new f(m(a),t,r,o)}return a}return d(n,[{key:a.a,value:function(){return this}},{key:"next",value:function(t){this.isStopped||this._next(t)}},{key:"error",value:function(t){this.isStopped||(this.isStopped=!0,this._error(t))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,l(_(n.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(t){this.destination.next(t)}},{key:"_error",value:function(t){this.destination.error(t),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}],[{key:"create",value:function(t,e,r){var i=new n(t,e,r);return i.syncErrorThrowable=!1,i}}]),n}(o.a),f=function(t){p(n,t);var e=y(n);function n(t,o,a,s){var u,c;h(this,n),(u=e.call(this))._parentSubscriber=t;var l=m(u);return Object(r.a)(o)?c=o:o&&(c=o.next,a=o.error,s=o.complete,o!==i.a&&(l=Object.create(o),Object(r.a)(l.unsubscribe)&&u.add(l.unsubscribe.bind(l)),l.unsubscribe=u.unsubscribe.bind(m(u)))),u._context=l,u._next=c,u._error=a,u._complete=s,u}return d(n,[{key:"next",value:function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;s.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}},{key:"error",value:function(t){if(!this.isStopped){var e=this._parentSubscriber,n=s.a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}},{key:"complete",value:function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};s.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),s.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}},{key:"__tryOrSetError",value:function(t,e,n){if(!s.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return s.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}},{key:"_unsubscribe",value:function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}]),n}(c)},"8Qeq":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");function i(t){for(;t;){var e=t,n=e.closed,i=e.destination,o=e.isStopped;if(n||o)return!1;t=i&&i instanceof r.a?i:null}return!0}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}()},Bpvx:function(t,e,n){"use strict";var r=n("Qfp6"),i=n("Pfkr"),o=n("3RSX"),a=n("n8Jw")||0;function s(){return i(a)}t.exports=s,t.exports.generate=s,t.exports.seed=function(e){return r.seed(e),t.exports},t.exports.worker=function(e){return a=e,t.exports},t.exports.characters=function(t){return void 0!==t&&r.characters(t),r.shuffled()},t.exports.isValid=o},CR0S:function(t,e,n){"use strict";var r="object"==typeof window&&(window.crypto||window.msCrypto);t.exports=r&&r.getRandomValues?function(t){return r.getRandomValues(new Uint8Array(t))}:function(t){for(var e=[],n=0;n<t;n++)e.push(Math.floor(256*Math.random()));return e}},Cfvw:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),a=n("kJWO"),s=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[a.a]}(t))return function(t,e){return new r.a((function(n){var r=new o.a;return r.add(e.schedule((function(){var i=t[a.a]();r.add(i.subscribe({next:function(t){r.add(e.schedule((function(){return n.next(t)})))},error:function(t){r.add(e.schedule((function(){return n.error(t)})))},complete:function(){r.add(e.schedule((function(){return n.complete()})))}}))}))),r}))}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a((function(n){var r=new o.a;return r.add(e.schedule((function(){return t.then((function(t){r.add(e.schedule((function(){n.next(t),r.add(e.schedule((function(){return n.complete()})))})))}),(function(t){r.add(e.schedule((function(){return n.error(t)})))}))}))),r}))}(t,e);if(Object(l.a)(t))return Object(s.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a((function(n){var r,i=new o.a;return i.add((function(){r&&"function"==typeof r.return&&r.return()})),i.add(e.schedule((function(){r=t[u.a](),i.add(e.schedule((function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(o){return void n.error(o)}e?n.complete():(n.next(t),this.schedule())}})))}))),i}))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o}));var r=n("3N8a"),i=new(n("IjjT").a)(r.a),o=i},DH7j:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=Array.isArray||function(t){return t&&"number"==typeof t.length}},EY2u:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=n("HDdC"),i=new r.a((function(t){return t.complete()}));function o(t){return t?function(t){return new r.a((function(e){return t.schedule((function(){return e.complete()}))}))}(t):i}},FurV:function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"f",(function(){return a})),n.d(e,"b",(function(){return s})),n.d(e,"d",(function(){return u})),n.d(e,"h",(function(){return c})),n.d(e,"e",(function(){return l})),n.d(e,"g",(function(){return h}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function u(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function c(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function h(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}},HDdC:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r,i=n("8Qeq"),o=n("7o/Q"),a=n("2QA8"),s=n("gRHU"),u=n("kJWO"),c=n("SpAZ"),l=n("2fFW"),f=((r=function(){function t(e){h(this,t),this._isScalar=!1,e&&(this._subscribe=e)}return d(t,[{key:"lift",value:function(e){var n=new t;return n.source=this,n.operator=e,n}},{key:"subscribe",value:function(t,e,n){var r=this.operator,i=function(t,e,n){if(t){if(t instanceof o.a)return t;if(t[a.a])return t[a.a]()}return t||e||n?new o.a(t,e,n):new o.a(s.a)}(t,e,n);if(i.add(r?r.call(i,this.source):this.source||l.a.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),l.a.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}},{key:"_trySubscribe",value:function(t){try{return this._subscribe(t)}catch(e){l.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),Object(i.a)(t)?t.error(e):console.warn(e)}}},{key:"forEach",value:function(t,e){var n=this;return new(e=p(e))((function(e,r){var i;i=n.subscribe((function(e){try{t(e)}catch(n){r(n),i&&i.unsubscribe()}}),r,e)}))}},{key:"_subscribe",value:function(t){var e=this.source;return e&&e.subscribe(t)}},{key:u.a,value:function(){return this}},{key:"pipe",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?this:(0===(r=e).length?c.a:1===r.length?r[0]:function(t){return r.reduce((function(t,e){return e(t)}),t)})(this);var r}},{key:"toPromise",value:function(t){var e=this;return new(t=p(t))((function(t,n){var r;e.subscribe((function(t){return r=t}),(function(t){return n(t)}),(function(){return t(r)}))}))}}]),t}()).create=function(t){return new r(t)},r);function p(t){if(t||(t=l.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t}},Iab2:function(t,e,n){var r,i;void 0===(i="function"==typeof(r=function(){"use strict";function e(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){a(r.response,e,n)},r.onerror=function(){console.error("could not download file")},r.send()}function n(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function r(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,o=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),a=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(t,o,a){var s=i.URL||i.webkitURL,u=document.createElement("a");u.download=o=o||t.name||"download",u.rel="noopener","string"==typeof t?(u.href=t,u.origin===location.origin?r(u):n(u.href)?e(t,o,a):r(u,u.target="_blank")):(u.href=s.createObjectURL(t),setTimeout((function(){s.revokeObjectURL(u.href)}),4e4),setTimeout((function(){r(u)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,i,o){if(i=i||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,o),i);else if(n(t))e(t,i,o);else{var a=document.createElement("a");a.href=t,a.target="_blank",setTimeout((function(){r(a)}))}}:function(t,n,r,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,r);var s="application/octet-stream"===t.type,u=/constructor/i.test(i.HTMLElement)||i.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||s&&u||o)&&"undefined"!=typeof FileReader){var l=new FileReader;l.onloadend=function(){var t=l.result;t=c?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=t:location=t,a=null},l.readAsDataURL(t)}else{var h=i.URL||i.webkitURL,f=h.createObjectURL(t);a?a.location=f:location.href=f,a=null,setTimeout((function(){h.revokeObjectURL(f)}),4e4)}});i.saveAs=a.saveAs=a,t.exports=a})?r.apply(e,[]):r)||(t.exports=i)},IjjT:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=function(){var t=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.now;h(this,t),this.SchedulerAction=e,this.now=n}return d(t,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return new this.SchedulerAction(this,t).schedule(n,e)}}]),t}();return t.now=function(){return Date.now()},t}(),i=function(t){p(n,t);var e=y(n);function n(t){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.now;return h(this,n),(i=e.call(this,t,(function(){return n.delegate&&n.delegate!==m(i)?n.delegate.now():o()}))).actions=[],i.active=!1,i.scheduled=void 0,i}return d(n,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;return n.delegate&&n.delegate!==this?n.delegate.schedule(t,e,r):l(_(n.prototype),"schedule",this).call(this,t,e,r)}},{key:"flush",value:function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}}]),n}(r)},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",(function(){return r.a})),r.a.registerVersion("firebase","8.6.2","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function a(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var a=e[e.length-1];return Object(r.a)(a)?(e.pop(),Object(o.a)(e,a)):Object(i.a)(e)}},Lhse:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout((function(){throw t}),0)}n.d(e,"a",(function(){return r}))},Pfkr:function(t,e,n){"use strict";var r,i,o=n("vZIR");n("Qfp6"),t.exports=function(t){var e="",n=Math.floor(.001*(Date.now()-1567752802062));return n===i?r++:(r=0,i=n),e+=o(7),e+=o(t),r>0&&(e+=o(r)),e+o(n)}},Qfp6:function(t,e,n){"use strict";var r,i,o,a=n("fqyn"),s="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function u(){o=!1}function c(t){if(t){if(t!==r){if(t.length!==s.length)throw new Error("Custom alphabet for shortid must be "+s.length+" unique characters. You submitted "+t.length+" characters: "+t);var e=t.split("").filter((function(t,e,n){return e!==n.lastIndexOf(t)}));if(e.length)throw new Error("Custom alphabet for shortid must be "+s.length+" unique characters. These characters were not unique: "+e.join(", "));r=t,u()}}else r!==s&&(r=s,u())}function l(){return o||(o=function(){r||c(s);for(var t,e=r.split(""),n=[],i=a.nextValue();e.length>0;)i=a.nextValue(),t=Math.floor(i*e.length),n.push(e.splice(t,1)[0]);return n.join("")}())}t.exports={get:function(){return r||s},characters:function(t){return c(t),r},seed:function(t){a.seed(t),i!==t&&(u(),i=t)},lookup:function(t){return l()[t]},shuffled:l}},SeVD:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),a=n("kJWO"),s=n("I55L"),u=n("c2HN"),c=n("XoHu"),l=function(t){if(t&&"function"==typeof t[a.a])return l=t,function(t){var e=l[a.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(s.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,function(t){return n.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,i.a),t};if(t&&"function"==typeof t[o.a])return e=t,function(t){for(var n=e[o.a]();;){var r=void 0;try{r=n.next()}catch(i){return t.error(i),t}if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof n.return&&t.add((function(){n.return&&n.return()})),t};var e,n,l,h=Object(c.a)(t)?"an invalid object":"'".concat(t,"'");throw new TypeError("You provided ".concat(h," where a stream was expected. You can provide an Observable, Promise, Array, or Iterable."))}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",(function(){return r}))},VRyK:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),a=n("yCtX");function s(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var s=Number.POSITIVE_INFINITY,u=null,c=e[e.length-1];return Object(i.a)(c)?(u=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(s=e.pop())):"number"==typeof c&&(s=e.pop()),null===u&&1===e.length&&e[0]instanceof r.a?e[0]:Object(o.a)(s)(Object(a.a)(e,u))}},XNiG:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return f}));var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),a=n("9ppp"),s=n("Ylt2"),u=n("2QA8"),c=function(t){p(n,t);var e=y(n);function n(t){var r;return h(this,n),(r=e.call(this,t)).destination=t,r}return n}(i.a),f=function(){var t=function(t){p(n,t);var e=y(n);function n(){var t;return h(this,n),(t=e.call(this)).observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return d(n,[{key:u.a,value:function(){return new c(this)}},{key:"lift",value:function(t){var e=new v(this,this);return e.operator=t,e}},{key:"next",value:function(t){if(this.closed)throw new a.a;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)}},{key:"error",value:function(t){if(this.closed)throw new a.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new a.a;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(t){if(this.closed)throw new a.a;return l(_(n.prototype),"_trySubscribe",this).call(this,t)}},{key:"_subscribe",value:function(t){if(this.closed)throw new a.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new s.a(this,t))}},{key:"asObservable",value:function(){var t=new r.a;return t.source=this,t}}]),n}(r.a);return t.create=function(t,e){return new v(t,e)},t}(),v=function(t){p(n,t);var e=y(n);function n(t,r){var i;return h(this,n),(i=e.call(this)).destination=t,i.source=r,i}return d(n,[{key:"next",value:function(t){var e=this.destination;e&&e.next&&e.next(t)}},{key:"error",value:function(t){var e=this.destination;e&&e.error&&this.destination.error(t)}},{key:"complete",value:function(){var t=this.destination;t&&t.complete&&this.destination.complete()}},{key:"_subscribe",value:function(t){return this.source?this.source.subscribe(t):o.a.EMPTY}}]),n}(f)},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",(function(){return r}))},Y7HM:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("DH7j");function i(t){return!Object(r.a)(t)&&t-parseFloat(t)+1>=0}},YcCt:function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,i){n=n||"=";var o={};if("string"!=typeof t||0===t.length)return o;var a=/\+/g;t=t.split(e=e||"&");var s=1e3;i&&"number"==typeof i.maxKeys&&(s=i.maxKeys);var u=t.length;s>0&&u>s&&(u=s);for(var c=0;c<u;++c){var l,h,f,d,p=t[c].replace(a,"%20"),v=p.indexOf(n);v>=0?(l=p.substr(0,v),h=p.substr(v+1)):(l=p,h=""),f=decodeURIComponent(l),d=decodeURIComponent(h),r(o,f)?Array.isArray(o[f])?o[f].push(d):o[f]=[o[f],d]:o[f]=d}return o}},Ylt2:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){p(n,t);var e=y(n);function n(t,r){var i;return h(this,n),(i=e.call(this)).subject=t,i.subscriber=r,i.closed=!1,i}return d(n,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}}}]),n}(n("quSY").a)},bHdf:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("5+tZ"),i=n("SpAZ");function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return Object(r.b)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",(function(){return r}))},fXoL:function(t,n,r){"use strict";r.d(n,"a",(function(){return Eo})),r.d(n,"b",(function(){return cu})),r.d(n,"c",(function(){return iu})),r.d(n,"d",(function(){return nu})),r.d(n,"e",(function(){return ru})),r.d(n,"f",(function(){return Zu})),r.d(n,"g",(function(){return zu})),r.d(n,"h",(function(){return so})),r.d(n,"i",(function(){return _u})),r.d(n,"j",(function(){return Wa})),r.d(n,"k",(function(){return fu})),r.d(n,"l",(function(){return Ha})),r.d(n,"m",(function(){return jn})),r.d(n,"n",(function(){return Us})),r.d(n,"o",(function(){return it})),r.d(n,"p",(function(){return w})),r.d(n,"q",(function(){return rt})),r.d(n,"r",(function(){return So})),r.d(n,"s",(function(){return ls})),r.d(n,"t",(function(){return hs})),r.d(n,"u",(function(){return hu})),r.d(n,"v",(function(){return gt})),r.d(n,"w",(function(){return Wu})),r.d(n,"x",(function(){return yt})),r.d(n,"y",(function(){return Mu})),r.d(n,"z",(function(){return Ou})),r.d(n,"A",(function(){return k})),r.d(n,"B",(function(){return uu})),r.d(n,"C",(function(){return su})),r.d(n,"D",(function(){return Vs})),r.d(n,"E",(function(){return Qa})),r.d(n,"F",(function(){return Ga})),r.d(n,"G",(function(){return Ja})),r.d(n,"H",(function(){return Xa})),r.d(n,"I",(function(){return _r})),r.d(n,"J",(function(){return C})),r.d(n,"K",(function(){return Gu})),r.d(n,"L",(function(){return vs})),r.d(n,"M",(function(){return Au})),r.d(n,"N",(function(){return co})),r.d(n,"O",(function(){return $a})),r.d(n,"P",(function(){return Za})),r.d(n,"Q",(function(){return gs})),r.d(n,"R",(function(){return Et})),r.d(n,"S",(function(){return Fu})),r.d(n,"T",(function(){return Yn})),r.d(n,"U",(function(){return V})),r.d(n,"V",(function(){return Qn})),r.d(n,"W",(function(){return Yu})),r.d(n,"X",(function(){return Pu})),r.d(n,"Y",(function(){return lu})),r.d(n,"Z",(function(){return lo})),r.d(n,"ab",(function(){return ja})),r.d(n,"bb",(function(){return mr})),r.d(n,"cb",(function(){return er})),r.d(n,"db",(function(){return qn})),r.d(n,"eb",(function(){return zn})),r.d(n,"fb",(function(){return Kn})),r.d(n,"gb",(function(){return Wn})),r.d(n,"hb",(function(){return Bn})),r.d(n,"ib",(function(){return Hn})),r.d(n,"jb",(function(){return Ia})),r.d(n,"kb",(function(){return Qu})),r.d(n,"lb",(function(){return xa})),r.d(n,"mb",(function(){return Na})),r.d(n,"nb",(function(){return Vn})),r.d(n,"ob",(function(){return Q})),r.d(n,"pb",(function(){return Mo})),r.d(n,"qb",(function(){return na})),r.d(n,"rb",(function(){return ea})),r.d(n,"sb",(function(){return Ta})),r.d(n,"tb",(function(){return se})),r.d(n,"ub",(function(){return F})),r.d(n,"vb",(function(){return Un})),r.d(n,"wb",(function(){return xo})),r.d(n,"xb",(function(){return ee})),r.d(n,"yb",(function(){return Va})),r.d(n,"zb",(function(){return Vr})),r.d(n,"Ab",(function(){return Vo})),r.d(n,"Bb",(function(){return va})),r.d(n,"Cb",(function(){return Xs})),r.d(n,"Db",(function(){return Nt})),r.d(n,"Eb",(function(){return Mt})),r.d(n,"Fb",(function(){return I})),r.d(n,"Gb",(function(){return x})),r.d(n,"Hb",(function(){return Rt})),r.d(n,"Ib",(function(){return Ft})),r.d(n,"Jb",(function(){return Ho})),r.d(n,"Kb",(function(){return Xo})),r.d(n,"Lb",(function(){return $o})),r.d(n,"Mb",(function(){return Zo})),r.d(n,"Nb",(function(){return Yo})),r.d(n,"Ob",(function(){return Qo})),r.d(n,"Pb",(function(){return ta})),r.d(n,"Qb",(function(){return In})),r.d(n,"Rb",(function(){return Oa})),r.d(n,"Sb",(function(){return ft})),r.d(n,"Tb",(function(){return Ko})),r.d(n,"Ub",(function(){return eu})),r.d(n,"Vb",(function(){return ra})),r.d(n,"Wb",(function(){return Zs})),r.d(n,"Xb",(function(){return aa})),r.d(n,"Yb",(function(){return Rs})),r.d(n,"Zb",(function(){return Ds})),r.d(n,"ac",(function(){return Ls})),r.d(n,"bc",(function(){return ca})),r.d(n,"cc",(function(){return ua})),r.d(n,"dc",(function(){return Go})),r.d(n,"ec",(function(){return la})),r.d(n,"fc",(function(){return Is})),r.d(n,"gc",(function(){return xs})),r.d(n,"hc",(function(){return Ns})),r.d(n,"ic",(function(){return Ys})),r.d(n,"jc",(function(){return Wo})),r.d(n,"kc",(function(){return Ee})),r.d(n,"lc",(function(){return kr})),r.d(n,"mc",(function(){return wr})),r.d(n,"nc",(function(){return Dt})),r.d(n,"oc",(function(){return Bo})),r.d(n,"pc",(function(){return tu})),r.d(n,"qc",(function(){return _a})),r.d(n,"rc",(function(){return wa})),r.d(n,"sc",(function(){return ka}));var o=r("XNiG"),s=r("quSY"),u=r("HDdC"),f=r("VRyK"),v=r("w1tV");function g(t){return{toString:t}.toString()}function b(t,e,n){return g((function(){var r=function(t){return function(){if(t){var e=t.apply(void 0,arguments);for(var n in e)this[n]=e[n]}}}(e);function i(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(this instanceof i)return r.apply(this,e),this;var o=c(i,e);return a.annotation=o,a;function a(t,e,n){for(var r=t.hasOwnProperty("__parameters__")?t.__parameters__:Object.defineProperty(t,"__parameters__",{value:[]}).__parameters__;r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(o),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i}))}var w=b("Inject",(function(t){return{token:t}})),k=b("Optional"),O=b("Self"),C=b("SkipSelf"),S=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function E(t){for(var e in t)if(t[e]===E)return e;throw Error("Could not find renamed property on target object.")}function T(t,e){for(var n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function I(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function x(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function N(t){return A(t,t[P])||A(t,t[L])}function A(t,e){return e&&e.token===t?e:null}function j(t){return t&&(t.hasOwnProperty(R)||t.hasOwnProperty(M))?t[R]:null}var P=E({"\u0275prov":E}),R=E({"\u0275inj":E}),D=E({"\u0275provFallback":E}),L=E({ngInjectableDef:E}),M=E({ngInjectorDef:E});function F(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(F).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;var e=t.toString();if(null==e)return""+e;var n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function U(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}var q=E({__forward_ref__:E});function V(t){return t.__forward_ref__=V,t.toString=function(){return F(this())},t}function z(t){return B(t)?t():t}function B(t){return"function"==typeof t&&t.hasOwnProperty(q)&&t.__forward_ref__===V}var W,H="undefined"!=typeof globalThis&&globalThis,K="undefined"!=typeof window&&window,G="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,J="undefined"!=typeof global&&global,Q=H||J||K||G,Y=E({"\u0275cmp":E}),X=E({"\u0275dir":E}),Z=E({"\u0275pipe":E}),$=E({"\u0275mod":E}),tt=E({"\u0275loc":E}),et=E({"\u0275fac":E}),nt=E({__NG_ELEMENT_ID__:E}),rt=function(){function t(e,n){h(this,t),this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=I({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}return d(t,[{key:"toString",value:function(){return"InjectionToken "+this._desc}}]),t}(),it=new rt("INJECTOR",-1),ot={},at=/\n/gm,st=E({provide:String,useValue:E}),ut=void 0;function ct(t){var e=ut;return ut=t,e}function lt(t){var e=W;return W=t,e}function ht(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S.Default;if(void 0===ut)throw new Error("inject() must be called from an injection context");return null===ut?dt(t,void 0,e):ut.get(t,e&S.Optional?null:void 0,e)}function ft(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S.Default;return(W||ht)(z(t),e)}function dt(t,e,n){var r=N(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&S.Optional)return null;if(void 0!==e)return e;throw new Error("Injector: NOT_FOUND [".concat(F(t),"]"))}function pt(t){for(var e=[],n=0;n<t.length;n++){var r=z(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");for(var i=void 0,o=S.Default,a=0;a<r.length;a++){var s=r[a];s instanceof k||"Optional"===s.ngMetadataName||s===k?o|=S.Optional:s instanceof C||"SkipSelf"===s.ngMetadataName||s===C?o|=S.SkipSelf:s instanceof O||"Self"===s.ngMetadataName||s===O?o|=S.Self:i=s instanceof w||s===w?s.token:s}e.push(ft(i,o))}else e.push(ft(r))}return e}var vt=function(){function t(){h(this,t)}return d(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ot;if(e===ot){var n=new Error("NullInjectorError: No provider for ".concat(F(t),"!"));throw n.name="NullInjectorError",n}return e}}]),t}(),yt=function t(){h(this,t)},gt=function t(){h(this,t)};function mt(t,e){t.forEach((function(t){return Array.isArray(t)?mt(t,e):e(t)}))}function bt(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function _t(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function wt(t,e){for(var n=[],r=0;r<t;r++)n.push(e);return n}function kt(t,e){var n=Ot(t,e);if(n>=0)return t[1|n]}function Ot(t,e){return function(t,e,n){for(var r=0,i=t.length>>1;i!==r;){var o=r+(i-r>>1),a=t[o<<1];if(e===a)return o<<1;a>e?i=o:r=o+1}return~(i<<1)}(t,e)}var Ct,St=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),Et=((Ct={})[Ct.Emulated=0]="Emulated",Ct[Ct.Native=1]="Native",Ct[Ct.None=2]="None",Ct[Ct.ShadowDom=3]="ShadowDom",Ct),Tt={},It=[],xt=0;function Nt(t){return g((function(){var e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===St.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||It,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Et.Emulated,id:"c",styles:t.styles||It,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=xt++,n.inputs=Lt(t.inputs,e),n.outputs=Lt(t.outputs),i&&i.forEach((function(t){return t(n)})),n.directiveDefs=r?function(){return("function"==typeof r?r():r).map(At)}:null,n.pipeDefs=o?function(){return("function"==typeof o?o():o).map(jt)}:null,n}))}function At(t){return Ut(t)||function(t){return t[X]||null}(t)}function jt(t){return function(t){return t[Z]||null}(t)}var Pt={};function Rt(t){var e={type:t.type,bootstrap:t.bootstrap||It,declarations:t.declarations||It,imports:t.imports||It,exports:t.exports||It,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&g((function(){Pt[t.id]=t.type})),e}function Dt(t,e){return g((function(){var n=Vt(t,!0);n.declarations=e.declarations||It,n.imports=e.imports||It,n.exports=e.exports||It}))}function Lt(t,e){if(null==t)return Tt;var n={};for(var r in t)if(t.hasOwnProperty(r)){var i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}var Mt=Nt;function Ft(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function Ut(t){return t[Y]||null}function qt(t,e){return t.hasOwnProperty(et)?t[et]:null}function Vt(t,e){var n=t[$]||null;if(!n&&!0===e)throw new Error("Type ".concat(F(t)," does not have '\u0275mod' property."));return n}function zt(t){return Array.isArray(t)&&"object"==typeof t[1]}function Bt(t){return Array.isArray(t)&&!0===t[1]}function Wt(t){return 0!=(8&t.flags)}function Ht(t){return 2==(2&t.flags)}function Kt(t){return 1==(1&t.flags)}function Gt(t){return null!==t.template}function Jt(t){return 0!=(512&t[2])}function Qt(t){return"string"==typeof t?t:null==t?"":""+t}function Yt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Qt(t)}var Xt=("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Q);function Zt(t){return t instanceof Function?t():t}function $t(t,e){var n=e?" in "+e:"";throw new Error("No provider for ".concat(Yt(t)," found").concat(n))}var te=function(){function t(e,n,r){h(this,t),this.previousValue=e,this.currentValue=n,this.firstChange=r}return d(t,[{key:"isFirstChange",value:function(){return this.firstChange}}]),t}();function ee(){return ne}function ne(t){return t.type.prototype.ngOnChanges&&(t.setInput=ie),re}function re(){var t=oe(this),e=null==t?void 0:t.current;if(e){var n=t.previous;if(n===Tt)t.previous=e;else for(var r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function ie(t,e,n,r){var i=oe(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:Tt,current:null}),o=i.current||(i.current={}),a=i.previous,s=this.declaredInputs[n],u=a[s];o[s]=new te(u&&u.currentValue,e,a===Tt),t[r]=e}function oe(t){return t.__ngSimpleChanges__||null}ee.ngInherit=!0;var ae=void 0;function se(t){ae=t}function ue(t){return!!t.listen}var ce={createRenderer:function(t,e){return void 0!==ae?ae:"undefined"!=typeof document?document:void 0}};function le(t){for(;Array.isArray(t);)t=t[0];return t}function he(t,e){return le(e[t+20])}function fe(t,e){return le(e[t.index])}function de(t,e){return t.data[e+20]}function pe(t,e){return t[e+20]}function ve(t,e){var n=e[t];return zt(n)?n:n[0]}function ye(t){var e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function ge(t){return 4==(4&t[2])}function me(t){return 128==(128&t[2])}function be(t,e){return null===t||null==e?null:t[e]}function _e(t){t[18]=0}function we(t,e){t[5]+=e;for(var n=t,r=t[3];null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}var ke={lFrame:ze(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Oe(){return ke.bindingsEnabled}function Ce(){return ke.lFrame.lView}function Se(){return ke.lFrame.tView}function Ee(t){ke.lFrame.contextLView=t}function Te(){return ke.lFrame.currentTNode}function Ie(t,e){ke.lFrame.currentTNode=t,ke.lFrame.isParent=e}function xe(){return ke.lFrame.isParent}function Ne(){ke.lFrame.isParent=!1}function Ae(){return ke.isInCheckNoChangesMode}function je(t){ke.isInCheckNoChangesMode=t}function Pe(){var t=ke.lFrame,e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Re(){return ke.lFrame.bindingIndex++}function De(t,e){var n=ke.lFrame;n.bindingIndex=n.bindingRootIndex=t,Le(e)}function Le(t){ke.lFrame.currentDirectiveIndex=t}function Me(){return ke.lFrame.currentQueryIndex}function Fe(t){ke.lFrame.currentQueryIndex=t}function Ue(t,e){var n=Ve();ke.lFrame=n,n.currentTNode=e,n.lView=t}function qe(t){var e=Ve(),n=t[1];ke.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex}function Ve(){var t=ke.lFrame,e=null===t?null:t.child;return null===e?ze(t):e}function ze(t){var e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null};return null!==t&&(t.child=e),e}function Be(){var t=ke.lFrame;return ke.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var We=Be;function He(){var t=Be();t.isParent=!0,t.tView=null,t.selectedIndex=0,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Ke(){return ke.lFrame.selectedIndex}function Ge(t){ke.lFrame.selectedIndex=t}function Je(){var t=ke.lFrame;return de(t.tView,t.selectedIndex)}function Qe(t,e){for(var n=e.directiveStart,r=e.directiveEnd;n<r;n++){var i=t.data[n].type.prototype,o=i.ngAfterContentInit,a=i.ngAfterContentChecked,s=i.ngAfterViewInit,u=i.ngAfterViewChecked,c=i.ngOnDestroy;o&&(t.contentHooks||(t.contentHooks=[])).push(-n,o),a&&((t.contentHooks||(t.contentHooks=[])).push(n,a),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,a)),s&&(t.viewHooks||(t.viewHooks=[])).push(-n,s),u&&((t.viewHooks||(t.viewHooks=[])).push(n,u),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,u)),null!=c&&(t.destroyHooks||(t.destroyHooks=[])).push(n,c)}}function Ye(t,e,n){$e(t,e,3,n)}function Xe(t,e,n,r){(3&t[2])===n&&$e(t,e,n,r)}function Ze(t,e){var n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function $e(t,e,n,r){for(var i=null!=r?r:-1,o=0,a=void 0!==r?65535&t[18]:0;a<e.length;a++)if("number"==typeof e[a+1]){if(o=e[a],null!=r&&o>=r)break}else e[a]<0&&(t[18]+=65536),(o<i||-1==i)&&(tn(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function tn(t,e,n,r){var i=n[r]<0,o=n[r+1],a=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(a)):o.call(a)}var en=function t(e,n,r){h(this,t),this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r};function nn(t,e,n){for(var r=ue(t),i=0;i<n.length;){var o=n[i];if("number"==typeof o){if(0!==o)break;i++;var a=n[i++],s=n[i++],u=n[i++];r?t.setAttribute(e,s,u,a):e.setAttributeNS(a,s,u)}else{var c=o,l=n[++i];on(c)?r&&t.setProperty(e,c,l):r?t.setAttribute(e,c,l):e.setAttribute(c,l),i++}}return i}function rn(t){return 3===t||4===t||6===t}function on(t){return 64===t.charCodeAt(0)}function an(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else for(var n=-1,r=0;r<e.length;r++){var i=e[r];"number"==typeof i?n=i:0===n||sn(t,n,i,null,-1===n||2===n?e[++r]:null)}return t}function sn(t,e,n,r,i){var o=0,a=t.length;if(-1===e)a=-1;else for(;o<t.length;){var s=t[o++];if("number"==typeof s){if(s===e){a=-1;break}if(s>e){a=o-1;break}}}for(;o<t.length;){var u=t[o];if("number"==typeof u)break;if(u===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==a&&(t.splice(a,0,e),o=a+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function un(t){return-1!==t}function cn(t){return 32767&t}function ln(t,e){for(var n=t>>16,r=e;n>0;)r=r[15],n--;return r}var hn=!0;function fn(t){var e=hn;return hn=t,e}var dn=0;function pn(t,e){var n=yn(t,e);if(-1!==n)return n;var r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,vn(r.data,t),vn(e,null),vn(r.blueprint,null));var i=gn(t,e),o=t.injectorIndex;if(un(i))for(var a=cn(i),s=ln(i,e),u=s[1].data,c=0;c<8;c++)e[o+c]=s[a+c]|u[a+c];return e[o+8]=i,o}function vn(t,e){t.push(0,0,0,0,0,0,0,0,e)}function yn(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function gn(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;for(var n=0,r=null,i=e;null!==i;){var o=i[1],a=o.type;if(null===(r=2===a?o.declTNode:1===a?i[6]:null))return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function mn(t,e,n){!function(t,e,n){var r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(nt)&&(r=n[nt]),null==r&&(r=n[nt]=dn++);var i=255&r,o=1<<i,a=64&i,s=32&i,u=e.data;128&i?a?s?u[t+7]|=o:u[t+6]|=o:s?u[t+5]|=o:u[t+4]|=o:a?s?u[t+3]|=o:u[t+2]|=o:s?u[t+1]|=o:u[t]|=o}(t,e,n)}function bn(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:S.Default,i=arguments.length>4?arguments[4]:void 0;if(null!==t){var o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;var e=t.hasOwnProperty(nt)?t[nt]:void 0;return"number"==typeof e&&e>0?255&e:e}(n);if("function"==typeof o){Ue(e,t);try{var a=o();if(null!=a||r&S.Optional)return a;$t(n)}finally{We()}}else if("number"==typeof o){if(-1===o)return new En(t,e);var s=null,u=yn(t,e),c=-1,l=r&S.Host?e[16][6]:null;for((-1===u||r&S.SkipSelf)&&(-1!==(c=-1===u?gn(t,e):e[u+8])&&Sn(r,!1)?(s=e[1],u=cn(c),e=ln(c,e)):u=-1);-1!==u;){var h=e[1];if(Cn(o,u,h.data)){var f=wn(u,e,n,s,r,l);if(f!==_n)return f}-1!==(c=e[u+8])&&Sn(r,e[1].data[u+8]===l)&&Cn(o,u,e)?(s=h,u=cn(c),e=ln(c,e)):u=-1}}}if(r&S.Optional&&void 0===i&&(i=null),0==(r&(S.Self|S.Host))){var d=e[9],p=lt(void 0);try{return d?d.get(n,i,r&S.Optional):dt(n,i,r&S.Optional)}finally{lt(p)}}if(r&S.Optional)return i;$t(n,"NodeInjector")}var _n={};function wn(t,e,n,r,i,o){var a=e[1],s=a.data[t+8],u=kn(s,a,n,null==r?Ht(s)&&hn:r!=a&&2===s.type,i&S.Host&&o===s);return null!==u?On(e,a,u,s):_n}function kn(t,e,n,r,i){for(var o=t.providerIndexes,a=e.data,s=1048575&o,u=t.directiveStart,c=o>>20,l=i?s+c:t.directiveEnd,h=r?s:s+c;h<l;h++){var f=a[h];if(h<u&&n===f||h>=u&&f.type===n)return h}if(i){var d=a[u];if(d&&Gt(d)&&d.type===n)return u}return null}function On(t,e,n,r){var i=t[n],o=e.data;if(i instanceof en){var a=i;a.resolving&&function(t,e){throw new Error("Circular dependency in DI detected for "+t)}(Yt(o[n]));var s=fn(a.canSeeViewProviders);a.resolving=!0;var u=a.injectImpl?lt(a.injectImpl):null;Ue(t,r);try{i=t[n]=a.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){var r=e.type.prototype,i=r.ngOnChanges,o=r.ngOnInit,a=r.ngDoCheck;if(i){var s=ne(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s)}o&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,o),a&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,a),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,a))}(n,o[n],e)}finally{null!==u&&lt(u),fn(s),a.resolving=!1,We()}}return i}function Cn(t,e,n){var r=64&t,i=32&t;return!!((128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e])&1<<t)}function Sn(t,e){return!(t&S.Self||t&S.Host&&e)}var En=function(){function t(e,n){h(this,t),this._tNode=e,this._lView=n}return d(t,[{key:"get",value:function(t,e){return bn(this._tNode,this._lView,t,void 0,e)}}]),t}();function Tn(t){var e=t;if(B(t))return function(){var t=Tn(z(e));return t?t():null};var n=qt(e);if(null===n){var r=j(e);n=r&&r.factory}return n||null}function In(t){return g((function(){for(var e=t.prototype.constructor,n=e[et]||Tn(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;i&&i!==r;){var o=i[et]||Tn(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return function(t){return new t}}))}function xn(t){return t.ngDebugContext}function Nn(t){return t.ngOriginalError}function An(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];t.error.apply(t,n)}var jn=function(){function t(){h(this,t),this._console=console}return d(t,[{key:"handleError",value:function(t){var e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||An}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}},{key:"_findContext",value:function(t){return t?xn(t)?xn(t):this._findContext(Nn(t)):null}},{key:"_findOriginalError",value:function(t){for(var e=Nn(t);e&&Nn(e);)e=Nn(e);return e}}]),t}(),Pn=function(){function t(e){h(this,t),this.changingThisBreaksApplicationSecurity=e}return d(t,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}]),t}(),Rn=function(t){p(n,t);var e=y(n);function n(){return h(this,n),e.apply(this,arguments)}return d(n,[{key:"getTypeName",value:function(){return"HTML"}}]),n}(Pn),Dn=function(t){p(n,t);var e=y(n);function n(){return h(this,n),e.apply(this,arguments)}return d(n,[{key:"getTypeName",value:function(){return"Style"}}]),n}(Pn),Ln=function(t){p(n,t);var e=y(n);function n(){return h(this,n),e.apply(this,arguments)}return d(n,[{key:"getTypeName",value:function(){return"Script"}}]),n}(Pn),Mn=function(t){p(n,t);var e=y(n);function n(){return h(this,n),e.apply(this,arguments)}return d(n,[{key:"getTypeName",value:function(){return"URL"}}]),n}(Pn),Fn=function(t){p(n,t);var e=y(n);function n(){return h(this,n),e.apply(this,arguments)}return d(n,[{key:"getTypeName",value:function(){return"ResourceURL"}}]),n}(Pn);function Un(t){return t instanceof Pn?t.changingThisBreaksApplicationSecurity:t}function qn(t,e){var n=Vn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error("Required a safe ".concat(e,", got a ").concat(n," (see http://g.co/ng/security#xss)"))}return n===e}function Vn(t){return t instanceof Pn&&t.getTypeName()||null}function zn(t){return new Rn(t)}function Bn(t){return new Dn(t)}function Wn(t){return new Ln(t)}function Hn(t){return new Mn(t)}function Kn(t){return new Fn(t)}var Gn=!0,Jn=!1;function Qn(){return Jn=!0,Gn}function Yn(){if(Jn)throw new Error("Cannot enable prod mode after platform setup.");Gn=!1}var Xn=function(){function t(){h(this,t)}return d(t,[{key:"getInertBodyElement",value:function(t){t="<body><remove></remove>"+t;try{var e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(n){return null}}}]),t}(),Zn=function(){function t(e){if(h(this,t),this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){var n=this.inertDocument.createElement("html");this.inertDocument.appendChild(n);var r=this.inertDocument.createElement("body");n.appendChild(r)}}return d(t,[{key:"getInertBodyElement",value:function(t){var e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=t,e;var n=this.inertDocument.createElement("body");return n.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}},{key:"stripCustomNsAttrs",value:function(t){for(var e=t.attributes,n=e.length-1;0<n;n--){var r=e.item(n).name;"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||t.removeAttribute(r)}for(var i=t.firstChild;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}]),t}(),$n=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,tr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function er(t){return(t=String(t)).match($n)||t.match(tr)?t:(Qn()&&console.warn("WARNING: sanitizing unsafe URL value ".concat(t," (see http://g.co/ng/security#xss)")),"unsafe:"+t)}function nr(t){var e,n={},r=a(t.split(","));try{for(r.s();!(e=r.n()).done;){n[e.value]=!0}}catch(i){r.e(i)}finally{r.f()}return n}function rr(){for(var t={},e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];for(var s in a)a.hasOwnProperty(s)&&(t[s]=!0)}return t}var ir,or=nr("area,br,col,hr,img,wbr"),ar=nr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),sr=nr("rp,rt"),ur=rr(sr,ar),cr=rr(or,rr(ar,nr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),rr(sr,nr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ur),lr=nr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),hr=nr("srcset"),fr=rr(lr,hr,nr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),nr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),dr=nr("script,style,template"),pr=function(){function t(){h(this,t),this.sanitizedSomething=!1,this.buf=[]}return d(t,[{key:"sanitizeChildren",value:function(t){for(var e=t.firstChild,n=!0;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);var r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}},{key:"startElement",value:function(t){var e=t.nodeName.toLowerCase();if(!cr.hasOwnProperty(e))return this.sanitizedSomething=!0,!dr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);for(var n,r=t.attributes,i=0;i<r.length;i++){var o=r.item(i),a=o.name,s=a.toLowerCase();if(fr.hasOwnProperty(s)){var u=o.value;lr[s]&&(u=er(u)),hr[s]&&(n=u,u=(n=String(n)).split(",").map((function(t){return er(t.trim())})).join(", ")),this.buf.push(" ",a,'="',gr(u),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0}},{key:"endElement",value:function(t){var e=t.nodeName.toLowerCase();cr.hasOwnProperty(e)&&!or.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}},{key:"chars",value:function(t){this.buf.push(gr(t))}},{key:"checkClobberedElement",value:function(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e}}]),t}(),vr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,yr=/([^\#-~ |!])/g;function gr(t){return t.replace(/&/g,"&amp;").replace(vr,(function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"})).replace(yr,(function(t){return"&#"+t.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function mr(t,e){var n=null;try{ir=ir||function(t){return function(){try{return!!(new window.DOMParser).parseFromString("","text/html")}catch(t){return!1}}()?new Xn:new Zn(t)}(t);var r=e?String(e):"";n=ir.getInertBodyElement(r);var i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=ir.getInertBodyElement(r)}while(r!==o);var a=new pr,s=a.sanitizeChildren(br(n)||n);return Qn()&&a.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),s}finally{if(n)for(var u=br(n)||n;u.firstChild;)u.removeChild(u.firstChild)}}function br(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var _r=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function wr(t){var e=Or();return e?e.sanitize(_r.URL,t)||"":qn(t,"URL")?Un(t):er(Qt(t))}function kr(t){var e=Or();if(e)return e.sanitize(_r.RESOURCE_URL,t)||"";if(qn(t,"ResourceURL"))return Un(t);throw new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)")}function Or(){var t=Ce();return t&&t[12]}function Cr(t,e){t.__ngContext__=e}function Sr(t,e,n){for(var r=t.length;;){var i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){var o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Er(t,e,n){for(var r=0;r<t.length;){var i=t[r++];if(n&&"class"===i){if(-1!==Sr((i=t[r]).toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Tr(t){return 0===t.type&&"ng-template"!==t.tagName}function Ir(t,e,n){return e===(0!==t.type||n?t.tagName:"ng-template")}function xr(t,e,n){for(var r=4,i=t.attrs||[],o=function(t){for(var e=0;e<t.length;e++)if(rn(t[e]))return e;return t.length}(i),a=!1,s=0;s<e.length;s++){var u=e[s];if("number"!=typeof u){if(!a)if(4&r){if(r=2|1&r,""!==u&&!Ir(t,u,n)||""===u&&1===e.length){if(Nr(r))return!1;a=!0}}else{var c=8&r?u:e[++s];if(8&r&&null!==t.attrs){if(!Er(t.attrs,c,n)){if(Nr(r))return!1;a=!0}continue}var l=Ar(8&r?"class":u,i,Tr(t),n);if(-1===l){if(Nr(r))return!1;a=!0;continue}if(""!==c){var h;h=l>o?"":i[l+1].toLowerCase();var f=8&r?h:null;if(f&&-1!==Sr(f,c,0)||2&r&&c!==h){if(Nr(r))return!1;a=!0}}}}else{if(!a&&!Nr(r)&&!Nr(u))return!1;if(a&&Nr(u))continue;a=!1,r=u|1&r}}return Nr(r)||a}function Nr(t){return 0==(1&t)}function Ar(t,e,n,r){if(null===e)return-1;var i=0;if(r||!n){for(var o=!1;i<e.length;){var a=e[i];if(a===t)return i;if(3===a||6===a)o=!0;else{if(1===a||2===a){for(var s=e[++i];"string"==typeof s;)s=e[++i];continue}if(4===a)break;if(0===a){i+=4;continue}}i+=o?1:2}return-1}return function(t,e){var n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){var r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function jr(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0;r<e.length;r++)if(xr(t,e[r],n))return!0;return!1}function Pr(t,e){t:for(var n=0;n<e.length;n++){var r=e[n];if(t.length===r.length){for(var i=0;i<t.length;i++)if(t[i]!==r[i])continue t;return!0}}return!1}function Rr(t,e){return t?":not("+e.trim()+")":e}function Dr(t){for(var e=t[0],n=1,r=2,i="",o=!1;n<t.length;){var a=t[n];if("string"==typeof a)if(2&r){var s=t[++n];i+="["+a+(s.length>0?'="'+s+'"':"")+"]"}else 8&r?i+="."+a:4&r&&(i+=" "+a);else""===i||Nr(a)||(e+=Rr(o,i),i=""),r=a,o=o||!Nr(r);n++}return""!==i&&(e+=Rr(o,i)),e}var Lr={};function Mr(t){var e=t[3];return Bt(e)?e[3]:e}function Fr(t){return qr(t[13])}function Ur(t){return qr(t[4])}function qr(t){for(;null!==t&&!Bt(t);)t=t[4];return t}function Vr(t){zr(Se(),Ce(),Ke()+t,Ae())}function zr(t,e,n,r){if(!r)if(3==(3&e[2])){var i=t.preOrderCheckHooks;null!==i&&Ye(e,i,n)}else{var o=t.preOrderHooks;null!==o&&Xe(e,o,0,n)}Ge(n)}function Br(t,e){return t<<17|e<<2}function Wr(t){return t>>17&32767}function Hr(t){return 2|t}function Kr(t){return(131068&t)>>2}function Gr(t,e){return-131069&t|e<<2}function Jr(t){return 1|t}function Qr(t,e){var n=t.contentQueries;if(null!==n)for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1];if(-1!==o){var a=t.data[o];Fe(i),a.contentQueries(2,e[o],o)}}}function Yr(t,e,n){return ue(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Xr(t,e,n,r,i,o,a,s,u,c){var l=e.blueprint.slice();return l[0]=i,l[2]=140|r,_e(l),l[3]=l[15]=t,l[8]=n,l[10]=a||t&&t[10],l[11]=s||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function Zr(t,e,n,r,i){var o=e+20,a=t.data[o]||function(t,e,n,r,i){var o=Te(),a=xe(),s=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=s),null!==o&&(a&&null==o.child&&null!==s.parent?o.child=s:a||(o.next=s)),s}(t,o,n,r,i);return Ie(a,!0),a}function $r(t,e,n){qe(e);try{var r=t.viewQuery;null!==r&&Ni(1,r,n);var i=t.template;null!==i&&ni(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Qr(t,e),t.staticViewQueries&&Ni(2,t.viewQuery,n);var o=t.components;null!==o&&function(t,e){for(var n=0;n<e.length;n++)Si(t,e[n])}(e,o)}catch(a){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),a}finally{e[2]&=-5,He()}}function ti(t,e,n,r){var i=e[2];if(256!=(256&i)){qe(e);var o=Ae();try{_e(e),ke.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&ni(t,e,n,2,r);var a=3==(3&i);if(!o)if(a){var s=t.preOrderCheckHooks;null!==s&&Ye(e,s,null)}else{var u=t.preOrderHooks;null!==u&&Xe(e,u,0,null),Ze(e,0)}if(function(t){for(var e=Fr(t);null!==e;e=Ur(e))if(e[2])for(var n=e[9],r=0;r<n.length;r++){var i=n[r],o=i[3];0==(1024&i[2])&&we(o,1),i[2]|=1024}}(e),function(t){for(var e=Fr(t);null!==e;e=Ur(e))for(var n=10;n<e.length;n++){var r=e[n],i=r[1];me(r)&&ti(i,r,i.template,r[8])}}(e),null!==t.contentQueries&&Qr(t,e),!o)if(a){var c=t.contentCheckHooks;null!==c&&Ye(e,c)}else{var l=t.contentHooks;null!==l&&Xe(e,l,1),Ze(e,1)}!function(t,e){try{var n=t.expandoInstructions;if(null!==n)for(var r=t.expandoStartIndex,i=-1,o=0;o<n.length;o++){var a=n[o];"number"==typeof a?a<=0?(Ge(0-a),i=r+=9+n[++o]):r+=a:(null!==a&&(De(r,i),a(2,e[i])),i++)}}finally{Ge(-1)}}(t,e);var h=t.components;null!==h&&function(t,e){for(var n=0;n<e.length;n++)Ci(t,e[n])}(e,h);var f=t.viewQuery;if(null!==f&&Ni(2,f,r),!o)if(a){var d=t.viewCheckHooks;null!==d&&Ye(e,d)}else{var p=t.viewHooks;null!==p&&Xe(e,p,2),Ze(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,we(e[3],-1))}finally{He()}}}function ei(t,e,n,r){var i=e[10],o=!Ae(),a=ge(e);try{o&&!a&&i.begin&&i.begin(),a&&$r(t,e,r),ti(t,e,n,r)}finally{o&&!a&&i.end&&i.end()}}function ni(t,e,n,r,i){var o=Ke();try{Ge(-1),2&r&&e.length>20&&zr(t,e,0,Ae()),n(r,i)}finally{Ge(o)}}function ri(t,e,n){if(Wt(e))for(var r=e.directiveEnd,i=e.directiveStart;i<r;i++){var o=t.data[i];o.contentQueries&&o.contentQueries(1,n[i],i)}}function ii(t,e,n){Oe()&&(function(t,e,n,r){var i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||pn(n,e),Cr(r,e);for(var a=n.initialInputs,s=i;s<o;s++){var u=t.data[s],c=Gt(u);c&&_i(e,n,u);var l=On(e,t,s,n);Cr(l,e),null!==a&&wi(0,s-i,l,u,0,a),c&&(ve(n.index,e)[8]=l)}}(t,e,n,fe(n,e)),128==(128&n.flags)&&function(t,e,n){var r=n.directiveStart,i=n.directiveEnd,o=t.expandoInstructions,a=t.firstCreatePass,s=n.index-20,u=ke.lFrame.currentDirectiveIndex;try{Ge(s);for(var c=r;c<i;c++){var l=t.data[c],h=e[c];Le(c),null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs?pi(l,h):a&&o.push(null)}}finally{Ge(-1),Le(u)}}(t,e,n))}function oi(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fe,r=e.localNames;if(null!==r)for(var i=e.index+1,o=0;o<r.length;o+=2){var a=r[o+1],s=-1===a?n(e,t):t[a];t[i++]=s}}function ai(t){var e=t.tView;return null===e||e.incompleteFirstPass?t.tView=si(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function si(t,e,n,r,i,o,a,s,u,c){var l=20+r,h=l+i,f=function(t,e){for(var n=[],r=0;r<e;r++)n.push(r<t?null:Lr);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:s,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function ui(t,e,n,r){var i=ji(e);i.push(n),t.firstCreatePass&&function(t){return t.cleanup||(t.cleanup=[])}(t).push(r,i.length-1)}function ci(t,e,n){for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function li(t,e,n,r,i,o,a,s){var u,c,l=fe(e,n),h=e.inputs;!s&&null!=h&&(u=h[r])?(Ri(t,n,u,r,i),Ht(e)&&function(t,e){var n=ve(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):2===e.type&&(r="class"===(c=r)?"className":"for"===c?"htmlFor":"formaction"===c?"formAction":"innerHtml"===c?"innerHTML":"readonly"===c?"readOnly":"tabindex"===c?"tabIndex":c,i=null!=a?a(i,e.tagName||"",r):i,ue(o)?o.setProperty(l,r,i):on(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}function hi(t,e,n,r){var i=!1;if(Oe()){var o=function(t,e,n){var r=t.directiveRegistry,i=null;if(r)for(var o=0;o<r.length;o++){var a=r[o];jr(n,a.selectors,!1)&&(i||(i=[]),mn(pn(n,e),t,a.type),Gt(a)?(yi(t,n),i.unshift(a)):i.push(a))}return i}(t,e,n),a=null===r?null:{"":-1};if(null!==o){var s=0;i=!0,mi(n,t.data.length,o.length);for(var u=0;u<o.length;u++){var c=o[u];c.providersResolver&&c.providersResolver(c)}vi(t,n,o.length);for(var l=!1,h=!1,f=0;f<o.length;f++){var d=o[f];n.mergedAttrs=an(n.mergedAttrs,d.hostAttrs),bi(t,e,d),gi(t.data.length-1,d,a),null!==d.contentQueries&&(n.flags|=8),null===d.hostBindings&&null===d.hostAttrs&&0===d.hostVars||(n.flags|=128);var p=d.type.prototype;!l&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index-20),l=!0),h||!p.ngOnChanges&&!p.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index-20),h=!0),fi(t,d),s+=d.hostVars}!function(t,e){for(var n=e.directiveEnd,r=t.data,i=e.attrs,o=[],a=null,s=null,u=e.directiveStart;u<n;u++){var c=r[u],l=c.inputs,h=null===i||Tr(e)?null:ki(l,i);o.push(h),a=ci(l,u,a),s=ci(c.outputs,u,s)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=s}(t,n),di(t,e,s)}a&&function(t,e,n){if(e)for(var r=t.localNames=[],i=0;i<e.length;i+=2){var o=n[e[i+1]];if(null==o)throw new Error("Export of name '".concat(e[i+1],"' not found!"));r.push(e[i],o)}}(n,r,a)}return n.mergedAttrs=an(n.mergedAttrs,n.attrs),i}function fi(t,e){var n=t.expandoInstructions;n.push(e.hostBindings),0!==e.hostVars&&n.push(e.hostVars)}function di(t,e,n){for(var r=0;r<n;r++)e.push(Lr),t.blueprint.push(Lr),t.data.push(null)}function pi(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function vi(t,e,n){var r=20-e.index,i=t.data.length-(1048575&e.providerIndexes);(t.expandoInstructions||(t.expandoInstructions=[])).push(r,i,n)}function yi(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function gi(t,e,n){if(n){if(e.exportAs)for(var r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Gt(e)&&(n[""]=t)}}function mi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function bi(t,e,n){t.data.push(n);var r=n.factory||(n.factory=qt(n.type)),i=new en(r,Gt(n),null);t.blueprint.push(i),e.push(i)}function _i(t,e,n){var r=fe(e,t),i=ai(n),o=t[10],a=Ei(t,Xr(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=a}function wi(t,e,n,r,i,o){var a=o[e];if(null!==a)for(var s=r.setInput,u=0;u<a.length;){var c=a[u++],l=a[u++],h=a[u++];null!==s?r.setInput(n,h,c,l):n[l]=h}}function ki(t,e){for(var n=null,r=0;r<e.length;){var i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Oi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Ci(t,e){var n=ve(e,t);if(me(n)){var r=n[1];80&n[2]?ti(r,n,r.template,n[8]):n[5]>0&&function t(e){for(var n=Fr(e);null!==n;n=Ur(n))for(var r=10;r<n.length;r++){var i=n[r];if(1024&i[2]){var o=i[1];ti(o,i,o.template,i[8])}else i[5]>0&&t(i)}var a=e[1].components;if(null!==a)for(var s=0;s<a.length;s++){var u=ve(a[s],e);me(u)&&u[5]>0&&t(u)}}(n)}}function Si(t,e){var n=ve(e,t),r=n[1];!function(t,e){for(var n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),$r(r,n,n[8])}function Ei(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Ti(t){for(;t;){t[2]|=64;var e=Mr(t);if(Jt(t)&&!e)return t;t=e}return null}function Ii(t,e,n){var r=e[10];r.begin&&r.begin();try{ti(t,e,t.template,n)}catch(i){throw Pi(e,i),i}finally{r.end&&r.end()}}function xi(t){!function(t){for(var e=0;e<t.components.length;e++){var n=t.components[e],r=ye(n),i=r[1];ei(i,r,i.template,n)}}(t[8])}function Ni(t,e,n){Fe(0),e(t,n)}var Ai=Promise.resolve(null);function ji(t){return t[7]||(t[7]=[])}function Pi(t,e){var n=t[9],r=n?n.get(jn,null):null;r&&r.handleError(e)}function Ri(t,e,n,r,i){for(var o=0;o<n.length;){var a=n[o++],s=n[o++],u=e[a],c=t.data[a];null!==c.setInput?c.setInput(u,i,r,s):u[s]=i}}function Di(t,e,n,r,i){if(null!=r){var o,a=!1;Bt(r)?o=r:zt(r)&&(a=!0,r=r[0]);var s=le(r);0===t&&null!==n?null==i?zi(e,n,s):Vi(e,n,s,i||null):1===t&&null!==n?Vi(e,n,s,i||null):2===t?function(t,e,n){var r=Wi(t,e);r&&function(t,e,n,r){ue(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,s,a):3===t&&e.destroyNode(s),null!=o&&function(t,e,n,r,i){var o=n[7];o!==le(n)&&Di(e,t,r,o,i);for(var a=10;a<n.length;a++){var s=n[a];Ji(s[1],s,t,e,r,o)}}(e,t,o,n,i)}}function Li(t,e){var n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,we(i,-1)),n.splice(r,1)}function Mi(t,e){if(!(t.length<=10)){var n,r=10+e,i=t[r];if(i){var o=i[17];null!==o&&o!==t&&Li(o,i),e>0&&(t[r-1][4]=i[4]);var a=_t(t,10+e);Ji(i[1],n=i,n[11],2,null,null),n[0]=null,n[6]=null;var s=a[19];null!==s&&s.detachView(a[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}}function Fi(t,e){if(!(256&e[2])){var n=e[11];ue(n)&&n.destroyNode&&Ji(t,e,n,3,null,null),function(t){var e=t[13];if(!e)return Ui(t[1],t);for(;e;){var n=null;if(zt(e))n=e[13];else{var r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)zt(e)&&Ui(e[1],e),e=e[3];null===e&&(e=t),zt(e)&&Ui(e[1],e),n=e&&e[4]}e=n}}(e)}}function Ui(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){var n;if(null!=t&&null!=(n=t.destroyHooks))for(var r=0;r<n.length;r+=2){var i=e[n[r]];if(!(i instanceof en)){var o=n[r+1];if(Array.isArray(o))for(var a=0;a<o.length;a+=2)o[a+1].call(i[o[a]]);else o.call(i)}}}(t,e),function(t,e){var n=t.cleanup;if(null!==n){for(var r=e[7],i=0;i<n.length-1;i+=2)if("string"==typeof n[i]){var o=n[i+1],a="function"==typeof o?o(e):le(e[o]),s=r[n[i+2]],u=n[i+3];"boolean"==typeof u?a.removeEventListener(n[i],s,u):u>=0?r[u]():r[-u].unsubscribe(),i+=2}else n[i].call(r[n[i+1]]);e[7]=null}}(t,e),1===e[1].type&&ue(e[11])&&e[11].destroy();var n=e[17];if(null!==n&&Bt(e[3])){n!==e[3]&&Li(n,e);var r=e[19];null!==r&&r.detachView(t)}}}function qi(t,e,n){for(var r=e.parent;null!=r&&(3===r.type||4===r.type);)r=(e=r).parent;if(null===r)return n[0];if(e&&4===e.type&&4&e.flags)return fe(e,n).parentNode;if(2&r.flags){var i=t.data,o=i[i[r.index].directiveStart].encapsulation;if(o!==Et.ShadowDom&&o!==Et.Native)return null}return fe(r,n)}function Vi(t,e,n,r){ue(t)?t.insertBefore(e,n,r):e.insertBefore(n,r,!0)}function zi(t,e,n){ue(t)?t.appendChild(e,n):e.appendChild(n)}function Bi(t,e,n,r){null!==r?Vi(t,e,n,r):zi(t,e,n)}function Wi(t,e){return ue(t)?t.parentNode(e):e.parentNode}function Hi(t,e){return 3===t.type||4===t.type?fe(t,e):null}function Ki(t,e,n,r){var i=qi(t,r,e);if(null!=i){var o=e[11],a=Hi(r.parent||e[6],e);if(Array.isArray(n))for(var s=0;s<n.length;s++)Bi(o,i,n[s],a);else Bi(o,i,n,a)}}function Gi(t,e,n,r,i,o,a){for(;null!=n;){var s=r[n.index],u=n.type;a&&0===e&&(s&&Cr(le(s),r),n.flags|=4),64!=(64&n.flags)&&(3===u||4===u?(Gi(t,e,n.child,r,i,o,!1),Di(e,t,i,s,o)):1===u?Qi(t,e,r,n,i,o):Di(e,t,i,s,o)),n=a?n.projectionNext:n.next}}function Ji(t,e,n,r,i,o){Gi(n,r,t.firstChild,e,i,o,!1)}function Qi(t,e,n,r,i,o){var a=n[16],s=a[6].projection[r.projection];if(Array.isArray(s))for(var u=0;u<s.length;u++)Di(e,t,i,s[u],o);else Gi(t,e,s,a[3],i,o,!0)}function Yi(t,e,n){ue(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Xi(t,e,n){ue(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}var Zi,$i,to,eo=function(){function t(e,n){h(this,t),this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._viewContainerRef=null}return d(t,[{key:"rootNodes",get:function(){var t=this._lView,e=t[1];return function t(e,n,r,o){for(var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!==r;){var s=n[r.index];if(null!==s&&o.push(le(s)),Bt(s))for(var u=10;u<s.length;u++){var c=s[u],l=c[1].firstChild;null!==l&&t(c[1],c,l,o)}var h=r.type;if(3===h||4===h)t(e,n,r.child,o);else if(1===h){var f=n[16],d=f[6].projection[r.projection];if(Array.isArray(d))o.push.apply(o,i(d));else{var p=Mr(f);t(p[1],p,d,o,!0)}}r=a?r.projectionNext:r.next}return o}(e,t,e.firstChild,[])}},{key:"context",get:function(){return this._lView[8]}},{key:"destroyed",get:function(){return 256==(256&this._lView[2])}},{key:"destroy",value:function(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){var t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}Fi(this._lView[1],this._lView)}},{key:"onDestroy",value:function(t){ui(this._lView[1],this._lView,null,t)}},{key:"markForCheck",value:function(){Ti(this._cdRefInjectingView||this._lView)}},{key:"detach",value:function(){this._lView[2]&=-129}},{key:"reattach",value:function(){this._lView[2]|=128}},{key:"detectChanges",value:function(){Ii(this._lView[1],this._lView,this.context)}},{key:"checkNoChanges",value:function(){!function(t,e,n){je(!0);try{Ii(t,e,n)}finally{je(!1)}}(this._lView[1],this._lView,this.context)}},{key:"attachToViewContainerRef",value:function(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}},{key:"detachFromAppRef",value:function(){var t;this._appRef=null,Ji(this._lView[1],t=this._lView,t[11],2,null,null)}},{key:"attachToAppRef",value:function(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}]),t}(),no=function(t){p(n,t);var e=y(n);function n(t){var r;return h(this,n),(r=e.call(this,t))._view=t,r}return d(n,[{key:"detectChanges",value:function(){xi(this._view)}},{key:"checkNoChanges",value:function(){!function(t){je(!0);try{xi(t)}finally{je(!1)}}(this._view)}},{key:"context",get:function(){return null}}]),n}(eo);function ro(t,e,n){return Zi||(Zi=function(t){p(n,t);var e=y(n);function n(){return h(this,n),e.apply(this,arguments)}return n}(t)),new Zi(fe(e,n))}function io(t,e,n,r){return $i||($i=function(t){p(n,t);var e=y(n);function n(t,r,i){var o;return h(this,n),(o=e.call(this))._declarationView=t,o._declarationTContainer=r,o.elementRef=i,o}return d(n,[{key:"createEmbeddedView",value:function(t){var e=this._declarationTContainer.tViews,n=Xr(this._declarationView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationView[this._declarationTContainer.index];var r=this._declarationView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),$r(e,n,t),new eo(n)}}]),n}(t)),0===n.type?new $i(r,n,ro(e,n,r)):null}function oo(t,e,n,r){var i;to||(to=function(t){p(r,t);var n=y(r);function r(t,e,i){var o;return h(this,r),(o=n.call(this))._lContainer=t,o._hostTNode=e,o._hostView=i,o}return d(r,[{key:"element",get:function(){return ro(e,this._hostTNode,this._hostView)}},{key:"injector",get:function(){return new En(this._hostTNode,this._hostView)}},{key:"parentInjector",get:function(){var t=gn(this._hostTNode,this._hostView);if(un(t)){var e=ln(t,this._hostView),n=cn(t);return new En(e[1].data[n+8],e)}return new En(null,this._hostView)}},{key:"clear",value:function(){for(;this.length>0;)this.remove(this.length-1)}},{key:"get",value:function(t){return null!==this._lContainer[8]&&this._lContainer[8][t]||null}},{key:"length",get:function(){return this._lContainer.length-10}},{key:"createEmbeddedView",value:function(t,e,n){var r=t.createEmbeddedView(e||{});return this.insert(r,n),r}},{key:"createComponent",value:function(t,e,n,r,i){var o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){var a=o.get(yt,null);a&&(i=a)}var s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}},{key:"insert",value:function(t,e){var n=t._lView,r=n[1];if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),Bt(n[3])){var i=this.indexOf(t);if(-1!==i)this.detach(i);else{var o=n[3],a=new to(o,o[6],o[3]);a.detach(a.indexOf(t))}}var s=this._adjustIndex(e),u=this._lContainer;!function(t,e,n,r){var i=10+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-10?(e[4]=n[i],bt(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;var a=e[17];null!==a&&n!==a&&function(t,e){var n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(a,e);var s=e[19];null!==s&&s.insertView(t),e[2]|=128}(r,n,u,s);var c=function t(e,n){var r=10+e+1;if(r<n.length){var i=n[r],o=i[1].firstChild;if(null!==o)return function e(n,r){if(null!==r){var i=r.type;if(2===i)return fe(r,n);if(0===i)return t(-1,n[r.index]);if(3===i||4===i){var o=r.child;if(null!==o)return e(n,o);var a=n[r.index];return Bt(a)?t(-1,a):le(a)}var s=n[16],u=s[6],c=Mr(s),l=u.projection[r.projection];return null!=l?e(c,l):e(n,r.next)}return null}(i,o)}return n[7]}(s,u),l=n[11],h=Wi(l,u[7]);return null!==h&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Ji(t,r,n,1,i,o)}(r,u[6],l,n,h,c),t.attachToViewContainerRef(this),bt(u[8],s,t),t}},{key:"move",value:function(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(t,e)}},{key:"indexOf",value:function(t){var e=this._lContainer[8];return null!==e?e.indexOf(t):-1}},{key:"remove",value:function(t){this.allocateContainerIfNeeded();var e=this._adjustIndex(t,-1),n=Mi(this._lContainer,e);n&&(_t(this._lContainer[8],e),Fi(n[1],n))}},{key:"detach",value:function(t){this.allocateContainerIfNeeded();var e=this._adjustIndex(t,-1),n=Mi(this._lContainer,e);return n&&null!=_t(this._lContainer[8],e)?new eo(n):null}},{key:"_adjustIndex",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==t?this.length+e:t}},{key:"allocateContainerIfNeeded",value:function(){null===this._lContainer[8]&&(this._lContainer[8]=[])}}]),r}(t));var o=r[n.index];if(Bt(o))i=o;else{var a;if(3===n.type)a=le(o);else if(a=r[11].createComment(""),Jt(r)){var s=r[11],u=fe(n,r);Vi(s,Wi(s,u),a,function(t,e){return ue(t)?t.nextSibling(e):e.nextSibling}(s,u))}else Ki(r[1],r,a,n);r[n.index]=i=Oi(o,r,a,n),Ei(r,i)}return new to(i,n,r)}function ao(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,e,n){if(!n&&Ht(t)){var r=ve(t.index,e);return new eo(r,r)}return 2===t.type||0===t.type||3===t.type||4===t.type?new eo(e[16],e):null}(Te(),Ce(),t)}var so=function(){var t=function t(){h(this,t)};return t.__NG_ELEMENT_ID__=function(){return uo()},t}(),uo=ao,co=Function,lo=new rt("Set Injector scope."),ho={},fo={},po=[],vo=void 0;function yo(){return void 0===vo&&(vo=new vt),vo}function go(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return new mo(t,n,e||yo(),r)}var mo=function(){function t(e,n,r){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;h(this,t),this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;var a=[];n&&mt(n,(function(t){return i.processProvider(t,e,n)})),mt([e],(function(t){return i.processInjectorType(t,[],a)})),this.records.set(it,wo(void 0,this));var s=this.records.get(lo);this.scope=null!=s?s.value:null,this.source=o||("object"==typeof e?null:F(e))}return d(t,[{key:"destroyed",get:function(){return this._destroyed}},{key:"destroy",value:function(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach((function(t){return t.ngOnDestroy()}))}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ot,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S.Default;this.assertNotDestroyed();var r,i=ct(this);try{if(!(n&S.SkipSelf)){var o=this.records.get(t);if(void 0===o){var a=("function"==typeof(r=t)||"object"==typeof r&&r instanceof rt)&&N(t);o=a&&this.injectableDefInScope(a)?wo(bo(t),ho):null,this.records.set(t,o)}if(null!=o)return this.hydrate(t,o)}return(n&S.Self?yo():this.parent).get(t,e=n&S.Optional&&e===ot?null:e)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(F(t)),i)throw s;return function(t,e,n,r){var i=t.ngTempTokenPath;throw e.__source&&i.unshift(e.__source),t.message=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;var i=F(e);if(Array.isArray(e))i=e.map(F).join(" -> ");else if("object"==typeof e){var o=[];for(var a in e)if(e.hasOwnProperty(a)){var s=e[a];o.push(a+":"+("string"==typeof s?JSON.stringify(s):F(s)))}i="{".concat(o.join(", "),"}")}return"".concat(n).concat(r?"("+r+")":"","[").concat(i,"]: ").concat(t.replace(at,"\n  "))}("\n"+t.message,i,"R3InjectorError",r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(s,t,0,this.source)}throw s}finally{ct(i)}}},{key:"_resolveInjectorDefTypes",value:function(){var t=this;this.injectorDefTypes.forEach((function(e){return t.get(e)}))}},{key:"toString",value:function(){var t=[];return this.records.forEach((function(e,n){return t.push(F(n))})),"R3Injector[".concat(t.join(", "),"]")}},{key:"assertNotDestroyed",value:function(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}},{key:"processInjectorType",value:function(t,e,n){var r=this;if(!(t=z(t)))return!1;var i=j(t),o=null==i&&t.ngModule||void 0,a=void 0===o?t:o,s=-1!==n.indexOf(a);if(void 0!==o&&(i=j(o)),null==i)return!1;if(null!=i.imports&&!s){var u;n.push(a);try{mt(i.imports,(function(t){r.processInjectorType(t,e,n)&&(void 0===u&&(u=[]),u.push(t))}))}finally{}if(void 0!==u)for(var c=function(t){var e=u[t],n=e.ngModule,i=e.providers;mt(i,(function(t){return r.processProvider(t,n,i||po)}))},l=0;l<u.length;l++)c(l)}this.injectorDefTypes.add(a),this.records.set(a,wo(i.factory,ho));var h=i.providers;if(null!=h&&!s){var f=t;mt(h,(function(t){return r.processProvider(t,f,h)}))}return void 0!==o&&void 0!==t.providers}},{key:"processProvider",value:function(t,e,n){var r=Oo(t=z(t))?t:z(t&&t.provide),i=function(t,e,n){return ko(t)?wo(void 0,t.useValue):wo(_o(t),ho)}(t);if(Oo(t)||!0!==t.multi)this.records.get(r);else{var o=this.records.get(r);o||((o=wo(void 0,ho,!0)).factory=function(){return pt(o.multi)},this.records.set(r,o)),r=t,o.multi.push(t)}this.records.set(r,i)}},{key:"hydrate",value:function(t,e){var n;return e.value===ho&&(e.value=fo,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}},{key:"injectableDefInScope",value:function(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}]),t}();function bo(t){var e=N(t),n=null!==e?e.factory:qt(t);if(null!==n)return n;var r=j(t);if(null!==r)return r.factory;if(t instanceof rt)throw new Error("Token ".concat(F(t)," is missing a \u0275prov definition."));if(t instanceof Function)return function(t){var e=t.length;if(e>0){var n=wt(e,"?");throw new Error("Can't resolve all parameters for ".concat(F(t),": (").concat(n.join(", "),")."))}var r=function(t){var e=t&&(t[P]||t[L]||t[D]&&t[D]());if(e){var n=function(t){if(t.hasOwnProperty("name"))return t.name;var e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn('DEPRECATED: DI is instantiating a token "'.concat(n,'" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "').concat(n,'" class.')),e}return null}(t);return null!==r?function(){return r.factory(t)}:function(){return new t}}(t);throw new Error("unreachable")}function _o(t,e,n){var r,o=void 0;if(Oo(t)){var a=z(t);return qt(a)||bo(a)}if(ko(t))o=function(){return z(t.useValue)};else if((r=t)&&r.useFactory)o=function(){return t.useFactory.apply(t,i(pt(t.deps||[])))};else if(function(t){return!(!t||!t.useExisting)}(t))o=function(){return ft(z(t.useExisting))};else{var s=z(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return qt(s)||bo(s);o=function(){return c(s,i(pt(t.deps)))}}return o}function wo(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{factory:t,value:e,multi:n?[]:void 0}}function ko(t){return null!==t&&"object"==typeof t&&st in t}function Oo(t){return"function"==typeof t}var Co=function(t,e,n){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0,i=go(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)},So=function(){var t=function(){function t(){h(this,t)}return d(t,null,[{key:"create",value:function(t,e){return Array.isArray(t)?Co(t,e,""):Co(t.providers,t.parent,t.name||"")}}]),t}();return t.THROW_IF_NOT_FOUND=ot,t.NULL=new vt,t.\u0275prov=I({token:t,providedIn:"any",factory:function(){return ft(it)}}),t.__NG_ELEMENT_ID__=-1,t}(),Eo=new rt("AnalyzeForEntryComponents");function To(t,e,n){var r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(var a=0;a<e.length;a++){var s=e[a];"number"==typeof s?o=s:1==o?i=U(i,s):2==o&&(r=U(r,s+": "+e[++a]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Io(t,e){var n=ye(t)[1],r=n.data.length-1;Qe(n,{directiveStart:r,directiveEnd:r+1})}function xo(t){for(var e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0,r=[t];e;){var i=void 0;if(Gt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);var o=t;o.inputs=No(t.inputs),o.declaredInputs=No(t.declaredInputs),o.outputs=No(t.outputs);var a=i.hostBindings;a&&Po(t,a);var s=i.viewQuery,u=i.contentQueries;if(s&&Ao(t,s),u&&jo(t,u),T(t.inputs,i.inputs),T(t.declaredInputs,i.declaredInputs),T(t.outputs,i.outputs),Gt(i)&&i.data.animation){var c=t.data;c.animation=(c.animation||[]).concat(i.data.animation)}}var l=i.features;if(l)for(var h=0;h<l.length;h++){var f=l[h];f&&f.ngInherit&&f(t),f===xo&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){for(var e=0,n=null,r=t.length-1;r>=0;r--){var i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=an(i.hostAttrs,n=an(n,i.hostAttrs))}}(r)}function No(t){return t===Tt?{}:t===It?[]:t}function Ao(t,e){var n=t.viewQuery;t.viewQuery=n?function(t,r){e(t,r),n(t,r)}:e}function jo(t,e){var n=t.contentQueries;t.contentQueries=n?function(t,r,i){e(t,r,i),n(t,r,i)}:e}function Po(t,e){var n=t.hostBindings;t.hostBindings=n?function(t,r){e(t,r),n(t,r)}:e}var Ro=null;function Do(){if(!Ro){var t=Q.Symbol;if(t&&t.iterator)Ro=t.iterator;else for(var e=Object.getOwnPropertyNames(Map.prototype),n=0;n<e.length;++n){var r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Ro=r)}}return Ro}var Lo=function(){function t(e){h(this,t),this.wrapped=e}return d(t,null,[{key:"wrap",value:function(e){return new t(e)}},{key:"unwrap",value:function(e){return t.isWrapped(e)?e.wrapped:e}},{key:"isWrapped",value:function(e){return e instanceof t}}]),t}();function Mo(t){return!!Fo(t)&&(Array.isArray(t)||!(t instanceof Map)&&Do()in t)}function Fo(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Uo(t,e,n){return t[e]=n}function qo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Vo(t,e,n,r){var i=Ce();return qo(i,Re(),e)&&(Se(),function(t,e,n,r,i,o){var a=fe(t,e),s=e[11];if(null==r)ue(s)?s.removeAttribute(a,n,o):a.removeAttribute(n);else{var u=null==i?Qt(r):i(r,t.tagName||"",n);ue(s)?s.setAttribute(a,n,u,o):o?a.setAttributeNS(o,n,u):a.setAttribute(n,u)}}(Je(),i,t,e,n,r)),Vo}function zo(t,e,n,r){return qo(t,Re(),n)?e+Qt(n)+r:Lr}function Bo(t,e,n,r,i,o,a,s){var u=Ce(),c=Se(),l=t+20,h=c.firstCreatePass?function(t,e,n,r,i,o,a,s,u){var c=e.consts,l=Zr(e,t,0,a||null,be(c,s));hi(e,n,l,be(c,u)),Qe(e,l);var h=l.tViews=si(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(t,c,u,e,n,r,i,o,a):c.data[l];Ie(h,!1);var f=u[11].createComment("");Ki(c,u,f,h),Cr(f,u),Ei(u,u[l]=Oi(f,u,f,h)),Kt(h)&&ii(c,u,h),null!=a&&oi(u,h,s)}function Wo(t){return pe(ke.lFrame.contextLView,t)}function Ho(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S.Default,n=Ce();return null===n?ft(t,e):bn(Te(),n,z(t),e)}function Ko(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;var n=t.attrs;if(n)for(var r=n.length,i=0;i<r;){var o=n[i];if(rn(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===e)return n[i+1];i+=2}}return null}(Te(),t)}function Go(t,e,n){var r=Ce();return qo(r,Re(),e)&&li(Se(),Je(),r,t,e,r[11],n,!1),Go}function Jo(t,e,n,r,i){var o=i?"class":"style";Ri(t,n,e.inputs[o],o,r)}function Qo(t,e,n,r){var i=Ce(),o=Se(),a=20+t,s=i[11],u=i[a]=Yr(e,s,ke.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,a){var s=e.consts,u=Zr(e,t,2,i,be(s,o));return hi(e,n,u,be(s,a)),null!==u.attrs&&To(u,u.attrs,!1),null!==u.mergedAttrs&&To(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(t,o,i,0,e,n,r):o.data[a];Ie(c,!0);var l=c.mergedAttrs;null!==l&&nn(s,u,l);var h=c.classes;null!==h&&Xi(s,u,h);var f=c.styles;null!==f&&Yi(s,u,f),Ki(o,i,u,c),0===ke.lFrame.elementDepthCount&&Cr(u,i),ke.lFrame.elementDepthCount++,Kt(c)&&(ii(o,i,c),ri(o,c,i)),null!==r&&oi(i,c)}function Yo(){var t=Te();xe()?Ne():Ie(t=t.parent,!1);var e=t;ke.lFrame.elementDepthCount--;var n=Se();n.firstCreatePass&&(Qe(n,t),Wt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Jo(n,e,Ce(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Jo(n,e,Ce(),e.stylesWithoutHost,!1)}function Xo(t,e,n,r){Qo(t,e,n,r),Yo()}function Zo(t,e,n){var r=Ce(),i=Se(),o=t+20,a=i.firstCreatePass?function(t,e,n,r,i){var o=e.consts,a=be(o,r),s=Zr(e,t,3,"ng-container",a);return null!==a&&To(s,a,!0),hi(e,n,s,be(o,i)),null!==e.queries&&e.queries.elementStart(e,s),s}(t,i,r,e,n):i.data[o];Ie(a,!0);var s=r[o]=r[11].createComment("");Ki(i,r,s,a),Cr(s,r),Kt(a)&&(ii(i,r,a),ri(i,a,r)),null!=n&&oi(r,a)}function $o(){var t=Te(),e=Se();xe()?Ne():Ie(t=t.parent,!1),e.firstCreatePass&&(Qe(e,t),Wt(t)&&e.queries.elementEnd(t))}function ta(){return Ce()}function ea(t){return!!t&&"function"==typeof t.then}function na(t){return!!t&&"function"==typeof t.subscribe}function ra(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=Ce(),o=Se(),a=Te();return function(t,e,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7?arguments[7]:void 0,u=Kt(r),c=t.firstCreatePass&&(t.cleanup||(t.cleanup=[])),l=ji(e),h=!0;if(2===r.type){var f=fe(r,e),d=s?s(f):Tt,p=d.target||f,v=l.length,y=s?function(t){return s(le(t[r.index])).target}:r.index;if(ue(n)){var g=null;if(!s&&u&&(g=function(t,e,n,r){var i=t.cleanup;if(null!=i)for(var o=0;o<i.length-1;o+=2){var a=i[o];if(a===n&&i[o+1]===r){var s=e[7],u=i[o+2];return s.length>u?s[u]:null}"string"==typeof a&&(o+=2)}return null}(t,e,i,r.index)),null!==g)(g.__ngLastListenerFn__||g).__ngNextListenerFn__=o,g.__ngLastListenerFn__=o,h=!1;else{o=oa(r,e,o,!1);var m=n.listen(d.name||p,i,o);l.push(o,m),c&&c.push(i,y,v,v+1)}}else o=oa(r,e,o,!0),p.addEventListener(i,o,a),l.push(o),c&&c.push(i,y,v,a)}var b,_=r.outputs;if(h&&null!==_&&(b=_[i])){var w=b.length;if(w)for(var k=0;k<w;k+=2){var O=e[b[k]][b[k+1]].subscribe(o),C=l.length;l.push(o,O),c&&c.push(i,r.index,C,-(C+1))}}}(o,i,i[11],a,t,e,n,r),ra}function ia(t,e,n){try{return!1!==e(n)}catch(r){return Pi(t,r),!1}}function oa(t,e,n,r){return function i(o){if(o===Function)return n;var a=2&t.flags?ve(t.index,e):e;0==(32&e[2])&&Ti(a);for(var s=ia(e,n,o),u=i.__ngNextListenerFn__;u;)s=ia(e,u,o)&&s,u=u.__ngNextListenerFn__;return r&&!1===s&&(o.preventDefault(),o.returnValue=!1),s}}function aa(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(t){return(ke.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,ke.lFrame.contextLView))[8]}(t)}function sa(t,e){for(var n=null,r=function(t){var e=t.attrs;if(null!=e){var n=e.indexOf(5);if(0==(1&n))return e[n+1]}return null}(t),i=0;i<e.length;i++){var o=e[i];if("*"!==o){if(null===r?jr(t,o,!0):Pr(r,o))return i}else n=i}return n}function ua(t){var e=Ce()[16][6];if(!e.projection)for(var n=e.projection=wt(t?t.length:1,null),r=n.slice(),i=e.child;null!==i;){var o=t?sa(i,t):0;null!==o&&(r[o]?r[o].projectionNext=i:n[o]=i,r[o]=i),i=i.next}}function ca(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=Ce(),i=Se(),o=Zr(i,t,1,null,n||null);null===o.projection&&(o.projection=e),Ne(),function(t,e,n){Qi(e[11],0,e,n,qi(t,n,e),Hi(n.parent||e[6],e))}(i,r,o)}function la(t,e,n){return ha(t,"",e,"",n),la}function ha(t,e,n,r,i){var o=Ce(),a=zo(o,e,n,r);return a!==Lr&&li(Se(),Je(),o,t,a,o[11],i,!1),ha}var fa=[];function da(t,e,n,r,i){for(var o=t[n+1],a=null===e,s=r?Wr(o):Kr(o),u=!1;0!==s&&(!1===u||a);){var c=t[s+1];pa(t[s],e)&&(u=!0,t[s+1]=r?Jr(c):Hr(c)),s=r?Wr(c):Kr(c)}u&&(t[n+1]=r?Hr(o):Jr(o))}function pa(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Ot(t,e)>=0}function va(t,e){return function(t,e,n,r){var i,o,a=Ce(),s=Se(),u=(i=ke.lFrame,o=i.bindingIndex,i.bindingIndex=i.bindingIndex+2,o);s.firstUpdatePass&&function(t,e,n,r){var i=t.data;if(null===i[n+1]){var o=i[Ke()+20],a=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(o)&&null===e&&!a&&(e=!1),e=function(t,e,n,r){var i=function(t){var e=ke.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t),o=e.residualClasses;if(null===i)0===e.classBindings&&(n=ga(n=ya(null,t,e,n,!0),e.attrs,!0),o=null);else{var a=e.directiveStylingLast;if(-1===a||t[a]!==i)if(n=ya(i,t,e,n,!0),null===o){var s=function(t,e,n){var r=e.classBindings;if(0!==Kr(r))return t[Wr(r)]}(t,e);void 0!==s&&Array.isArray(s)&&function(t,e,n,r){t[Wr(e.classBindings)]=r}(t,e,0,s=ga(s=ya(null,t,e,s[1],!0),e.attrs,!0))}else o=function(t,e,n){for(var r=void 0,i=e.directiveEnd,o=1+e.directiveStylingLast;o<i;o++)r=ga(r,t[o].hostAttrs,!0);return ga(r,e.attrs,!0)}(t,e)}return void 0!==o&&(e.residualClasses=o),n}(i,o,e),function(t,e,n,r,i,o){var a=e.classBindings,s=Wr(a),u=Kr(a);t[r]=n;var c,l=!1;if(Array.isArray(n)){var h=n;(null===(c=h[1])||Ot(h,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){var f=Wr(t[s+1]);t[r+1]=Br(f,s),0!==f&&(t[f+1]=Gr(t[f+1],r)),t[s+1]=131071&t[s+1]|r<<17}else t[r+1]=Br(s,0),0!==s&&(t[s+1]=Gr(t[s+1],r)),s=r;else t[r+1]=Br(u,0),0===s?s=r:t[u+1]=Gr(t[u+1],r),u=r;l&&(t[r+1]=Hr(t[r+1])),da(t,c,r,!0),da(t,c,r,!1),function(t,e,n,r,i){var o=t.residualClasses;null!=o&&"string"==typeof e&&Ot(o,e)>=0&&(n[r+1]=Jr(n[r+1]))}(e,c,t,r),a=Br(s,u),e.classBindings=a}(i,o,e,n,a)}}(s,t,u),e!==Lr&&qo(a,u,e)&&function(t,e,n,r,i,o,a,s){if(2===e.type){var u=t.data,c=u[s+1];ba(1==(1&c)?ma(u,e,n,i,Kr(c),!0):void 0)||(ba(o)||2==(2&c)&&(o=ma(u,null,n,i,s,!0)),function(t,e,n,r,i){var o=ue(t);i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r)}(r,0,he(Ke(),n),i,o))}}(s,s.data[Ke()+20],a,a[11],t,a[u+1]=function(t,e){return null==t||"object"==typeof t&&(t=F(Un(t))),t}(e),0,u)}(t,e),va}function ya(t,e,n,r,i){var o=null,a=n.directiveEnd,s=n.directiveStylingLast;for(-1===s?s=n.directiveStart:s++;s<a&&(r=ga(r,(o=e[s]).hostAttrs,i),o!==t);)s++;return null!==t&&(n.directiveStylingLast=s),r}function ga(t,e,n){var r,i,o,a,s=n?1:2,u=-1;if(null!==e)for(var c=0;c<e.length;c++){var l=e[c];"number"==typeof l?u=l:u===s&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),r=t,i=l,o=!!n||e[++c],a=void 0,(a=Ot(r,i))>=0?r[1|a]=o:function(t,e,n,r){var i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(r,a=~a,i,o))}return void 0===t?null:t}function ma(t,e,n,r,i,o){for(var a=null===e,s=void 0;i>0;){var u=t[i],c=Array.isArray(u),l=c?u[1]:u,h=null===l,f=n[i+1];f===Lr&&(f=h?fa:void 0);var d=h?kt(f,r):l===r?f:void 0;if(c&&!ba(d)&&(d=kt(u,r)),ba(d)&&(s=d,a))return s;var p=t[i+1];i=a?Wr(p):Kr(p)}if(null!==e){var v=o?e.residualClasses:e.residualStyles;null!=v&&(s=kt(v,r))}return s}function ba(t){return void 0!==t}function _a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Ce(),r=Se(),i=t+20,o=r.firstCreatePass?Zr(r,t,2,null,null):r.data[i],a=n[i]=function(t,e){return ue(e)?e.createText(t):e.createTextNode(t)}(e,n[11]);Ki(r,n,a,o),Ie(o,!1)}function wa(t){return ka("",t,""),wa}function ka(t,e,n){var r=Ce(),i=zo(r,t,e,n);return i!==Lr&&function(t,e,n){var r=he(e,t),i=t[11];ue(i)?i.setValue(r,n):r.textContent=n}(r,Ke(),i),ka}function Oa(t,e,n){var r=Ce();return qo(r,Re(),e)&&li(Se(),Je(),r,t,e,r[11],n,!0),Oa}var Ca=void 0,Sa=["en",[["a","p"],["AM","PM"],Ca],[["AM","PM"],Ca,Ca],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ca,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ca,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ca,"{1} 'at' {0}",Ca],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){var e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}],Ea={};function Ta(t,e,n){"string"!=typeof e&&(n=e,e=t[ja.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),Ea[e]=t,n&&(Ea[e][ja.ExtraData]=n)}function Ia(t){var e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t),n=Aa(e);if(n)return n;var r=e.split("-")[0];if(n=Aa(r))return n;if("en"===r)return Sa;throw new Error('Missing locale data for the locale "'.concat(t,'".'))}function xa(t){return Ia(t)[ja.CurrencyCode]||null}function Na(t){return Ia(t)[ja.PluralCase]}function Aa(t){return t in Ea||(Ea[t]=Q.ng&&Q.ng.common&&Q.ng.common.locales&&Q.ng.common.locales[t]),Ea[t]}var ja=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});function Pa(t){var e;null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: Expected localeId to be defined"+" [Expected=> null != ".concat(e," <=Actual]"))}(0,e),"string"==typeof t&&t.toLowerCase().replace(/_/g,"-")}function Ra(t,e,n,r,i){if(t=z(t),Array.isArray(t))for(var o=0;o<t.length;o++)Ra(t[o],e,n,r,i);else{var a=Se(),s=Ce(),u=Oo(t)?t:z(t.provide),c=_o(t),l=Te(),h=1048575&l.providerIndexes,f=l.directiveStart,d=l.providerIndexes>>20;if(Oo(t)||!t.multi){var p=new en(c,i,Ho),v=Ma(u,e,i?h:h+d,f);-1===v?(mn(pn(l,s),a,u),Da(a,t,e.length),e.push(u),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(p),s.push(p)):(n[v]=p,s[v]=p)}else{var y=Ma(u,e,h+d,f),g=Ma(u,e,h,h+d),m=y>=0&&n[y],b=g>=0&&n[g];if(i&&!b||!i&&!m){mn(pn(l,s),a,u);var _=function(t,e,n,r,i){var o=new en(t,n,Ho);return o.multi=[],o.index=e,o.componentProviders=0,La(o,i,r&&!n),o}(i?Ua:Fa,n.length,i,r,c);!i&&b&&(n[g].providerFactory=_),Da(a,t,e.length,0),e.push(u),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(_),s.push(_)}else Da(a,t,y>-1?y:g,La(n[i?g:y],c,!i&&r));!i&&r&&b&&n[g].componentProviders++}}}function Da(t,e,n,r){var i=Oo(e);if(i||e.useClass){var o=(e.useClass||e).prototype.ngOnDestroy;if(o){var a=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){var s=a.indexOf(n);-1===s?a.push(n,[r,o]):a[s+1].push(r,o)}else a.push(n,o)}}}function La(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Ma(t,e,n,r){for(var i=n;i<r;i++)if(e[i]===t)return i;return-1}function Fa(t,e,n,r){return qa(this.multi,[])}function Ua(t,e,n,r){var i,o=this.multi;if(this.providerFactory){var a=this.providerFactory.componentProviders,s=On(n,n[1],this.providerFactory.index,r);qa(o,i=s.slice(0,a));for(var u=a;u<s.length;u++)i.push(s[u])}else qa(o,i=[]);return i}function qa(t,e){for(var n=0;n<t.length;n++)e.push((0,t[n])());return e}function Va(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){n.providersResolver=function(n,r){return function(t,e,n){var r=Se();if(r.firstCreatePass){var i=Gt(t);Ra(n,r.data,r.blueprint,i,!0),Ra(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}}var za=function t(){h(this,t)},Ba=function(){function t(){h(this,t)}return d(t,[{key:"resolveComponentFactory",value:function(t){throw function(t){var e=Error("No component factory found for ".concat(F(t),". Did you add it to @NgModule.entryComponents?"));return e.ngComponent=t,e}(t)}}]),t}(),Wa=function(){var t=function t(){h(this,t)};return t.NULL=new Ba,t}(),Ha=function(){var t=function t(e){h(this,t),this.nativeElement=e};return t.__NG_ELEMENT_ID__=function(){return Ka(t)},t}(),Ka=function(t){return ro(t,Te(),Ce())},Ga=function t(){h(this,t)},Ja=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({}),Qa=function(){var t=function t(){h(this,t)};return t.__NG_ELEMENT_ID__=function(){return Ya()},t}(),Ya=function(){var t=Ce(),e=ve(Te().index,t);return function(t){var e=t[11];if(ue(e))return e;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(zt(e)?e:t)},Xa=function(){var t=function t(){h(this,t)};return t.\u0275prov=I({token:t,providedIn:"root",factory:function(){return null}}),t}(),Za=function t(e){h(this,t),this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")},$a=new Za("10.2.5"),ts=function(){function t(){h(this,t)}return d(t,[{key:"supports",value:function(t){return Mo(t)}},{key:"create",value:function(t){return new ns(t)}}]),t}(),es=function(t,e){return e},ns=function(){function t(e){h(this,t),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||es}return d(t,[{key:"forEachItem",value:function(t){var e;for(e=this._itHead;null!==e;e=e._next)t(e)}},{key:"forEachOperation",value:function(t){for(var e=this._itHead,n=this._removalsHead,r=0,i=null;e||n;){var o=!n||e&&e.currentIndex<as(n,r,i)?e:n,a=as(o,r,i),s=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);var u=a-r,c=s-r;if(u!=c){for(var l=0;l<u;l++){var h=l<i.length?i[l]:i[l]=0,f=h+l;c<=f&&f<u&&(i[l]=h+1)}i[o.previousIndex]=c-u}}a!==s&&t(o,a,s)}}},{key:"forEachPreviousItem",value:function(t){var e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}},{key:"forEachAddedItem",value:function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}},{key:"forEachMovedItem",value:function(t){var e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}},{key:"forEachRemovedItem",value:function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}},{key:"forEachIdentityChange",value:function(t){var e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}},{key:"diff",value:function(t){if(null==t&&(t=[]),!Mo(t))throw new Error("Error trying to diff '".concat(F(t),"'. Only arrays and iterables are allowed"));return this.check(t)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(t){var e=this;this._reset();var n,r,i,o=this._itHead,a=!1;if(Array.isArray(t)){this.length=t.length;for(var s=0;s<this.length;s++)r=t[s],i=this._trackByFn(s,r),null!==o&&Object.is(o.trackById,i)?(a&&(o=this._verifyReinsertion(o,r,i,s)),Object.is(o.item,r)||this._addIdentityChange(o,r)):(o=this._mismatch(o,r,i,s),a=!0),o=o._next}else n=0,function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e(t[n]);else for(var r,i=t[Do()]();!(r=i.next()).done;)e(r.value)}(t,(function(t){i=e._trackByFn(n,t),null!==o&&Object.is(o.trackById,i)?(a&&(o=e._verifyReinsertion(o,t,i,n)),Object.is(o.item,t)||e._addIdentityChange(o,t)):(o=e._mismatch(o,t,i,n),a=!0),o=o._next,n++})),this.length=n;return this._truncate(o),this.collection=t,this.isDirty}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}},{key:"_reset",value:function(){if(this.isDirty){var t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(t,e,n,r){var i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new rs(e,n),i,r),t}},{key:"_verifyReinsertion",value:function(t,e,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}},{key:"_truncate",value:function(t){for(;null!==t;){var e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);var r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}},{key:"_moveAfter",value:function(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}},{key:"_addAfter",value:function(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}},{key:"_insertAfter",value:function(t,e,n){var r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new os),this._linkedRecords.put(t),t.currentIndex=n,t}},{key:"_remove",value:function(t){return this._addToRemovals(this._unlink(t))}},{key:"_unlink",value:function(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);var e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}},{key:"_addToMoves",value:function(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}},{key:"_addToRemovals",value:function(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new os),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}},{key:"_addIdentityChange",value:function(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}]),t}(),rs=function t(e,n){h(this,t),this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},is=function(){function t(){h(this,t),this._head=null,this._tail=null}return d(t,[{key:"add",value:function(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}},{key:"get",value:function(t,e){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}},{key:"remove",value:function(t){var e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}]),t}(),os=function(){function t(){h(this,t),this.map=new Map}return d(t,[{key:"put",value:function(t){var e=t.trackById,n=this.map.get(e);n||(n=new is,this.map.set(e,n)),n.add(t)}},{key:"get",value:function(t,e){var n=this.map.get(t);return n?n.get(t,e):null}},{key:"remove",value:function(t){var e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}},{key:"isEmpty",get:function(){return 0===this.map.size}},{key:"clear",value:function(){this.map.clear()}}]),t}();function as(t,e,n){var r=t.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+e+i}var ss=function(){function t(){h(this,t)}return d(t,[{key:"supports",value:function(t){return t instanceof Map||Fo(t)}},{key:"create",value:function(){return new us}}]),t}(),us=function(){function t(){h(this,t),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return d(t,[{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}},{key:"forEachItem",value:function(t){var e;for(e=this._mapHead;null!==e;e=e._next)t(e)}},{key:"forEachPreviousItem",value:function(t){var e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}},{key:"forEachChangedItem",value:function(t){var e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}},{key:"forEachAddedItem",value:function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}},{key:"forEachRemovedItem",value:function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}},{key:"diff",value:function(t){if(t){if(!(t instanceof Map||Fo(t)))throw new Error("Error trying to diff '".concat(F(t),"'. Only maps and objects are allowed"))}else t=new Map;return this.check(t)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(t){var e=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(t,(function(t,r){if(n&&n.key===r)e._maybeAddToChanges(n,t),e._appendAfter=n,n=n._next;else{var i=e._getOrCreateRecordForKey(r,t);n=e._insertBeforeOrAppend(n,i)}})),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(t,e){if(t){var n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}},{key:"_getOrCreateRecordForKey",value:function(t,e){if(this._records.has(t)){var n=this._records.get(t);this._maybeAddToChanges(n,e);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var o=new cs(t);return this._records.set(t,o),o.currentValue=e,this._addToAdditions(o),o}},{key:"_reset",value:function(){if(this.isDirty){var t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}},{key:"_addToAdditions",value:function(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}},{key:"_addToChanges",value:function(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}},{key:"_forEach",value:function(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach((function(n){return e(t[n],n)}))}}]),t}(),cs=function t(e){h(this,t),this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},ls=function(){var t=function(){function t(e){h(this,t),this.factories=e}return d(t,[{key:"find",value:function(t){var e,n=this.factories.find((function(e){return e.supports(t)}));if(null!=n)return n;throw new Error("Cannot find a differ supporting object '".concat(t,"' of type '").concat((e=t).name||typeof e,"'"))}}],[{key:"create",value:function(e,n){if(null!=n){var r=n.factories.slice();e=e.concat(r)}return new t(e)}},{key:"extend",value:function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new C,new k]]}}}]),t}();return t.\u0275prov=I({token:t,providedIn:"root",factory:function(){return new t([new ts])}}),t}(),hs=function(){var t=function(){function t(e){h(this,t),this.factories=e}return d(t,[{key:"find",value:function(t){var e=this.factories.find((function(e){return e.supports(t)}));if(e)return e;throw new Error("Cannot find a differ supporting object '".concat(t,"'"))}}],[{key:"create",value:function(e,n){if(n){var r=n.factories.slice();e=e.concat(r)}return new t(e)}},{key:"extend",value:function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new C,new k]]}}}]),t}();return t.\u0275prov=I({token:t,providedIn:"root",factory:function(){return new t([new ss])}}),t}(),fs=[new ss],ds=new ls([new ts]),ps=new hs(fs),vs=function(){var t=function t(){h(this,t)};return t.__NG_ELEMENT_ID__=function(){return ys(t,Ha)},t}(),ys=function(t,e){return io(t,e,Te(),Ce())},gs=function(){var t=function t(){h(this,t)};return t.__NG_ELEMENT_ID__=function(){return ms(t,Ha)},t}(),ms=function(t,e){return oo(t,e,Te(),Ce())},bs={},_s=function(t){p(n,t);var e=y(n);function n(t){var r;return h(this,n),(r=e.call(this)).ngModule=t,r}return d(n,[{key:"resolveComponentFactory",value:function(t){var e=Ut(t);return new Os(e,this.ngModule)}}]),n}(Wa);function ws(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}var ks=new rt("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return Xt}}),Os=function(t){p(n,t);var e=y(n);function n(t,r){var i;return h(this,n),(i=e.call(this)).componentDef=t,i.ngModule=r,i.componentType=t.type,i.selector=t.selectors.map(Dr).join(","),i.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],i.isBoundToModule=!!r,i}return d(n,[{key:"inputs",get:function(){return ws(this.componentDef.inputs)}},{key:"outputs",get:function(){return ws(this.componentDef.outputs)}},{key:"create",value:function(t,e,n,r){var i,o,a=(r=r||this.ngModule)?function(t,e){return{get:function(n,r,i){var o=t.get(n,bs,i);return o!==bs||r===bs?o:e.get(n,r,i)}}}(t,r.injector):t,s=a.get(Ga,ce),u=a.get(Xa,null),c=s.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",h=n?function(t,e,n){if(ue(t))return t.selectRootElement(e,n===Et.ShadowDom);var r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(c,n,this.componentDef.encapsulation):Yr(l,s.createRenderer(null,this.componentDef),function(t){var e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(l)),f=this.componentDef.onPush?576:528,d={components:[],scheduler:Xt,clean:Ai,playerHandler:null,flags:0},p=si(0,null,null,1,0,null,null,null,null,null),v=Xr(null,p,d,f,null,null,s,c,u,a);qe(v);try{var y=function(t,e,n,r,i,o){var a=n[1];n[20]=t;var s=Zr(a,0,2,null,null),u=s.mergedAttrs=e.hostAttrs;null!==u&&(To(s,u,!0),null!==t&&(nn(i,t,u),null!==s.classes&&Xi(i,t,s.classes),null!==s.styles&&Yi(i,t,s.styles)));var c=r.createRenderer(t,e),l=Xr(n,ai(e),null,e.onPush?64:16,n[20],s,r,c,null,null);return a.firstCreatePass&&(mn(pn(s,n),a,e.type),yi(a,s),mi(s,n.length,1)),Ei(n,l),n[20]=l}(h,this.componentDef,v,s,c);if(h)if(n)nn(c,h,["ng-version",$a.full]);else{var g=function(t){for(var e=[],n=[],r=1,i=2;r<t.length;){var o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Nr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]),m=g.attrs,b=g.classes;m&&nn(c,h,m),b&&b.length>0&&Xi(c,h,b.join(" "))}if(o=de(p,0),void 0!==e)for(var _=o.projection=[],w=0;w<this.ngContentSelectors.length;w++){var k=e[w];_.push(null!=k?Array.from(k):null)}i=function(t,e,n,r,i){var o=n[1],a=function(t,e,n){var r=Te();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),vi(t,r,1),bi(t,e,n));var i=On(e,t,e.length-1,r);Cr(i,e);var o=fe(r,e);return o&&Cr(o,e),i}(o,n,e);r.components.push(a),t[8]=a,i&&i.forEach((function(t){return t(a,e)})),e.contentQueries&&e.contentQueries(1,a,n.length-1);var s=Te();if(o.firstCreatePass&&(null!==e.hostBindings||null!==e.hostAttrs)){Ge(s.index-20);var u=n[1];fi(u,e),di(u,n,e.hostVars),pi(e,a)}return a}(y,this.componentDef,v,d,[Io]),$r(p,v,null)}finally{He()}return new Cs(this.componentType,i,ro(Ha,o,v),v,o)}}]),n}(za),Cs=function(t){p(n,t);var e=y(n);function n(t,r,i,o,a){var s;return h(this,n),(s=e.call(this)).location=i,s._rootLView=o,s._tNode=a,s.destroyCbs=[],s.instance=r,s.hostView=s.changeDetectorRef=new no(o),s.componentType=t,s}return d(n,[{key:"injector",get:function(){return new En(this._tNode,this._rootLView)}},{key:"destroy",value:function(){this.destroyCbs&&(this.destroyCbs.forEach((function(t){return t()})),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}},{key:"onDestroy",value:function(t){this.destroyCbs&&this.destroyCbs.push(t)}}]),n}(function(){return function t(){h(this,t)}}()),Ss=new Map,Es=function(t){p(n,t);var e=y(n);function n(t,r){var i;h(this,n),(i=e.call(this))._parent=r,i._bootstrapComponents=[],i.injector=m(i),i.destroyCbs=[],i.componentFactoryResolver=new _s(m(i));var o=Vt(t),a=t[tt]||null;return a&&Pa(a),i._bootstrapComponents=Zt(o.bootstrap),i._r3Injector=go(t,r,[{provide:yt,useValue:m(i)},{provide:Wa,useValue:i.componentFactoryResolver}],F(t)),i._r3Injector._resolveInjectorDefTypes(),i.instance=i.get(t),i}return d(n,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:So.THROW_IF_NOT_FOUND,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S.Default;return t===So||t===yt||t===it?this:this._r3Injector.get(t,e,n)}},{key:"destroy",value:function(){var t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach((function(t){return t()})),this.destroyCbs=null}},{key:"onDestroy",value:function(t){this.destroyCbs.push(t)}}]),n}(yt),Ts=function(t){p(n,t);var e=y(n);function n(t){var r,i,o;return h(this,n),(r=e.call(this)).moduleType=t,null!==Vt(t)&&(i=t,o=new Set,function t(e){var n=Vt(e,!0),r=n.id;null!==r&&(function(t,e,n){if(e&&e!==n)throw new Error("Duplicate module registered for ".concat(t," - ").concat(F(e)," vs ").concat(F(e.name)))}(r,Ss.get(r),e),Ss.set(r,e));var i,s=a(Zt(n.imports));try{for(s.s();!(i=s.n()).done;){var u=i.value;o.has(u)||(o.add(u),t(u))}}catch(c){s.e(c)}finally{s.f()}}(i)),r}return d(n,[{key:"create",value:function(t){return new Es(this.moduleType,t)}}]),n}(gt);function Is(t,e,n){var r=Pe()+t,i=Ce();return i[r]===Lr?Uo(i,r,n?e.call(n):e()):function(t,e){return t[e]}(i,r)}function xs(t,e,n,r){return js(Ce(),Pe(),t,e,n,r)}function Ns(t,e,n,r,i){return Ps(Ce(),Pe(),t,e,n,r,i)}function As(t,e){var n=t[e];return n===Lr?void 0:n}function js(t,e,n,r,i,o){var a=e+n;return qo(t,a,i)?Uo(t,a+1,o?r.call(o,i):r(i)):As(t,a+1)}function Ps(t,e,n,r,i,o,a){var s=e+n;return function(t,e,n,r){var i=qo(t,e,n);return qo(t,e+1,r)||i}(t,s,i,o)?Uo(t,s+2,a?r.call(a,i,o):r(i,o)):As(t,s+2)}function Rs(t,e){var n,r=Se(),i=t+20;r.firstCreatePass?(n=function(t,e){if(e)for(var n=e.length-1;n>=0;n--){var r=e[n];if(t===r.name)return r}throw new Error("The pipe '".concat(t,"' could not be found!"))}(e,r.pipeRegistry),r.data[i]=n,n.onDestroy&&(r.destroyHooks||(r.destroyHooks=[])).push(i,n.onDestroy)):n=r.data[i];var o=n.factory||(n.factory=qt(n.type)),a=lt(Ho);try{var s=fn(!1),u=o();return fn(s),function(t,e,n,r){var i=n+20;i>=t.data.length&&(t.data[i]=null,t.blueprint[i]=null),e[i]=r}(r,Ce(),t,u),u}finally{lt(a)}}function Ds(t,e,n){var r=Ce(),i=pe(r,t);return Fs(r,Ms(r,t)?js(r,Pe(),e,i.transform,n,i):i.transform(n))}function Ls(t,e,n,r){var i=Ce(),o=pe(i,t);return Fs(i,Ms(i,t)?Ps(i,Pe(),e,o.transform,n,r,o):o.transform(n,r))}function Ms(t,e){return t[1].data[e+20].pure}function Fs(t,e){return Lo.isWrapped(e)&&(e=Lo.unwrap(e),t[ke.lFrame.bindingIndex]=Lr),e}var Us=function(t){p(n,t);var e=y(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return h(this,n),(t=e.call(this)).__isAsync=r,t}return d(n,[{key:"emit",value:function(t){l(_(n.prototype),"next",this).call(this,t)}},{key:"subscribe",value:function(t,e,r){var i,o=function(t){return null},a=function(){return null};t&&"object"==typeof t?(i=this.__isAsync?function(e){setTimeout((function(){return t.next(e)}))}:function(e){t.next(e)},t.error&&(o=this.__isAsync?function(e){setTimeout((function(){return t.error(e)}))}:function(e){t.error(e)}),t.complete&&(a=this.__isAsync?function(){setTimeout((function(){return t.complete()}))}:function(){t.complete()})):(i=this.__isAsync?function(e){setTimeout((function(){return t(e)}))}:function(e){t(e)},e&&(o=this.__isAsync?function(t){setTimeout((function(){return e(t)}))}:function(t){e(t)}),r&&(a=this.__isAsync?function(){setTimeout((function(){return r()}))}:function(){r()}));var u=l(_(n.prototype),"subscribe",this).call(this,i,o,a);return t instanceof s.a&&t.add(u),u}}]),n}(o.a);function qs(){return this._results[Do()]()}var Vs=function(){function t(){h(this,t),this.dirty=!0,this._results=[],this.changes=new Us,this.length=0;var e=Do(),n=t.prototype;n[e]||(n[e]=qs)}return d(t,[{key:"map",value:function(t){return this._results.map(t)}},{key:"filter",value:function(t){return this._results.filter(t)}},{key:"find",value:function(t){return this._results.find(t)}},{key:"reduce",value:function(t,e){return this._results.reduce(t,e)}},{key:"forEach",value:function(t){this._results.forEach(t)}},{key:"some",value:function(t){return this._results.some(t)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(t){this._results=function t(e,n){void 0===n&&(n=e);for(var r=0;r<e.length;r++){var i=e[r];Array.isArray(i)?(n===e&&(n=e.slice(0,r)),t(i,n)):n!==e&&n.push(i)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}},{key:"notifyOnChanges",value:function(){this.changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),t}(),zs=function(){function t(e){h(this,t),this.queryList=e,this.matches=null}return d(t,[{key:"clone",value:function(){return new t(this.queryList)}},{key:"setDirty",value:function(){this.queryList.setDirty()}}]),t}(),Bs=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];h(this,t),this.queries=e}return d(t,[{key:"createEmbeddedView",value:function(e){var n=e.queries;if(null!==n){for(var r=null!==e.contentQueries?e.contentQueries[0]:n.length,i=[],o=0;o<r;o++){var a=n.getByIndex(o);i.push(this.queries[a.indexInDeclarationView].clone())}return new t(i)}return null}},{key:"insertView",value:function(t){this.dirtyQueriesWithMatches(t)}},{key:"detachView",value:function(t){this.dirtyQueriesWithMatches(t)}},{key:"dirtyQueriesWithMatches",value:function(t){for(var e=0;e<this.queries.length;e++)null!==$s(t,e).matches&&this.queries[e].setDirty()}}]),t}(),Ws=function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;h(this,t),this.predicate=e,this.descendants=n,this.isStatic=r,this.read=i},Hs=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];h(this,t),this.queries=e}return d(t,[{key:"elementStart",value:function(t,e){for(var n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}},{key:"elementEnd",value:function(t){for(var e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}},{key:"embeddedTView",value:function(e){for(var n=null,r=0;r<this.length;r++){var i=null!==n?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,null!==n?n.push(o):n=[o])}return null!==n?new t(n):null}},{key:"template",value:function(t,e){for(var n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}},{key:"getByIndex",value:function(t){return this.queries[t]}},{key:"length",get:function(){return this.queries.length}},{key:"track",value:function(t){this.queries.push(t)}}]),t}(),Ks=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;h(this,t),this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}return d(t,[{key:"elementStart",value:function(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}},{key:"elementEnd",value:function(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}},{key:"template",value:function(t,e){this.elementStart(t,e)}},{key:"embeddedTView",value:function(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}},{key:"isApplyingToNode",value:function(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){for(var e=this._declarationNodeIndex,n=t.parent;null!==n&&3===n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}},{key:"matchTNode",value:function(t,e){var n=this.metadata.predicate;if(Array.isArray(n))for(var r=0;r<n.length;r++){var i=n[r];this.matchTNodeWithReadOption(t,e,Gs(e,i)),this.matchTNodeWithReadOption(t,e,kn(e,t,i,!1,!1))}else n===vs?0===e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,kn(e,t,n,!1,!1))}},{key:"matchTNodeWithReadOption",value:function(t,e,n){if(null!==n){var r=this.metadata.read;if(null!==r)if(r===Ha||r===gs||r===vs&&0===e.type)this.addMatch(e.index,-2);else{var i=kn(e,t,r,!1,!1);null!==i&&this.addMatch(e.index,i)}else this.addMatch(e.index,n)}}},{key:"addMatch",value:function(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}]),t}();function Gs(t,e){var n=t.localNames;if(null!==n)for(var r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Js(t,e,n,r){return-1===n?function(t,e){return 2===t.type||3===t.type?ro(Ha,t,e):0===t.type?io(vs,Ha,t,e):null}(e,t):-2===n?function(t,e,n){return n===Ha?ro(Ha,e,t):n===vs?io(vs,Ha,e,t):n===gs?oo(gs,Ha,e,t):void 0}(t,e,r):On(t,t[1],n,e)}function Qs(t,e,n,r){var i=e[19].queries[r];if(null===i.matches){for(var o=t.data,a=n.matches,s=[],u=0;u<a.length;u+=2){var c=a[u];s.push(c<0?null:Js(e,o[c],a[u+1],n.metadata.read))}i.matches=s}return i.matches}function Ys(t){var e=Ce(),n=Se(),r=Me();Fe(r+1);var i=$s(n,r);if(t.dirty&&ge(e)===i.metadata.isStatic){if(null===i.matches)t.reset([]);else{var o=i.crossesNgTemplate?function t(e,n,r,i){var o=e.queries.getByIndex(r),a=o.matches;if(null!==a)for(var s=Qs(e,n,o,r),u=0;u<a.length;u+=2){var c=a[u];if(c>0)i.push(s[u/2]);else{for(var l=a[u+1],h=n[-c],f=10;f<h.length;f++){var d=h[f];d[17]===d[3]&&t(d[1],d,l,i)}if(null!==h[9])for(var p=h[9],v=0;v<p.length;v++){var y=p[v];t(y[1],y,l,i)}}}return i}(n,e,r,[]):Qs(n,e,i,r);t.reset(o),t.notifyOnChanges()}return!0}return!1}function Xs(t,e,n,r){!function(t,e,n,r,i,o,a,s){t.firstCreatePass&&(function(t,e,n){null===t.queries&&(t.queries=new Hs),t.queries.track(new Ks(e,n))}(t,new Ws(n,r,!1,i),a.index),function(t,e){var n=t.contentQueries||(t.contentQueries=[]);e!==(t.contentQueries.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,s)),function(t,e){var n=new Vs;ui(t,e,n,n.destroy),null===e[19]&&(e[19]=new Bs),e[19].queries.push(new zs(n))}(t,e)}(Se(),Ce(),e,n,r,0,Te(),t)}function Zs(){return t=Ce(),e=Me(),t[19].queries[e].queryList;var t,e}function $s(t,e){return t.queries.getByIndex(e)}function tu(t,e){return io(vs,Ha,t,e)}function eu(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S.Default,e=ao(!0);if(null!=e||t&S.Optional)return e;$t("ChangeDetectorRef")}var nu=new rt("Application Initializer"),ru=function(){var t=function(){function t(e){var n=this;h(this,t),this.appInits=e,this.initialized=!1,this.done=!1,this.donePromise=new Promise((function(t,e){n.resolve=t,n.reject=e}))}return d(t,[{key:"runInitializers",value:function(){var t=this;if(!this.initialized){var e=[],n=function(){t.done=!0,t.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var i=this.appInits[r]();ea(i)&&e.push(i)}Promise.all(e).then((function(){n()})).catch((function(e){t.reject(e)})),0===e.length&&n(),this.initialized=!0}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(ft(nu,8))},t.\u0275prov=I({token:t,factory:t.\u0275fac}),t}(),iu=new rt("AppId"),ou={provide:iu,useFactory:function(){return"".concat(au()).concat(au()).concat(au())},deps:[]};function au(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var su=new rt("Platform Initializer"),uu=new rt("Platform ID"),cu=new rt("appBootstrapListener"),lu=function(){var t=function(){function t(){h(this,t)}return d(t,[{key:"log",value:function(t){console.log(t)}},{key:"warn",value:function(t){console.warn(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=I({token:t,factory:t.\u0275fac}),t}(),hu=new rt("LocaleId"),fu=new rt("DefaultCurrencyCode"),du=function t(e,n){h(this,t),this.ngModuleFactory=e,this.componentFactories=n},pu=function(t){return new Ts(t)},vu=pu,yu=function(t){return Promise.resolve(pu(t))},gu=function(t){var e=pu(t),n=Zt(Vt(t).declarations).reduce((function(t,e){var n=Ut(e);return n&&t.push(new Os(n)),t}),[]);return new du(e,n)},mu=gu,bu=function(t){return Promise.resolve(gu(t))},_u=function(){var t=function(){function t(){h(this,t),this.compileModuleSync=vu,this.compileModuleAsync=yu,this.compileModuleAndAllComponentsSync=mu,this.compileModuleAndAllComponentsAsync=bu}return d(t,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(t){}},{key:"getModuleId",value:function(t){}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=I({token:t,factory:t.\u0275fac}),t}(),wu=Promise.resolve(0);function ku(t){"undefined"==typeof Zone?wu.then((function(){t&&t.apply(null,null)})):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}var Ou=function(){function t(e){var n,r,i=e.enableLongStackTrace,o=void 0!==i&&i,a=e.shouldCoalesceEventChangeDetection,s=void 0!==a&&a;if(h(this,t),this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Us(!1),this.onMicrotaskEmpty=new Us(!1),this.onStable=new Us(!1),this.onError=new Us(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=s,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){var t=Q.requestAnimationFrame,e=Q.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){var n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);var r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,r=!!(n=this).shouldCoalesceEventChangeDetection&&n.nativeRequestAnimationFrame&&function(){!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Q,(function(){t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",(function(){t.lastRequestAnimationFrameId=-1,Tu(t),Eu(t)}),void 0,(function(){}),(function(){}))),t.fakeTopEventTask.invoke()})),Tu(t))}(n)},n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:r},onInvokeTask:function(t,e,i,o,a,s){try{return Iu(n),t.invokeTask(i,o,a,s)}finally{r&&"eventTask"===o.type&&r(),xu(n)}},onInvoke:function(t,e,r,i,o,a,s){try{return Iu(n),t.invoke(r,i,o,a,s)}finally{xu(n)}},onHasTask:function(t,e,r,i){t.hasTask(r,i),e===r&&("microTask"==i.change?(n._hasPendingMicrotasks=i.microTask,Tu(n),Eu(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:function(t,e,r,i){return t.handleError(r,i),n.runOutsideAngular((function(){return n.onError.emit(i)})),!1}})}return d(t,[{key:"run",value:function(t,e,n){return this._inner.run(t,e,n)}},{key:"runTask",value:function(t,e,n,r){var i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Su,Cu,Cu);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}},{key:"runGuarded",value:function(t,e,n){return this._inner.runGuarded(t,e,n)}},{key:"runOutsideAngular",value:function(t){return this._outer.run(t)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!t.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(t.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),t}();function Cu(){}var Su={};function Eu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular((function(){return t.onStable.emit(null)}))}finally{t.isStable=!0}}}function Tu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function Iu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function xu(t){t._nesting--,Eu(t)}var Nu=function(){function t(){h(this,t),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Us,this.onMicrotaskEmpty=new Us,this.onStable=new Us,this.onError=new Us}return d(t,[{key:"run",value:function(t,e,n){return t.apply(e,n)}},{key:"runGuarded",value:function(t,e,n){return t.apply(e,n)}},{key:"runOutsideAngular",value:function(t){return t()}},{key:"runTask",value:function(t,e,n,r){return t.apply(e,n)}}]),t}(),Au=function(){var t=function(){function t(e){var n=this;h(this,t),this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run((function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")}))}return d(t,[{key:"_watchAngularEvents",value:function(){var t=this;this._ngZone.onUnstable.subscribe({next:function(){t._didWork=!0,t._isZoneStable=!1}}),this._ngZone.runOutsideAngular((function(){t._ngZone.onStable.subscribe({next:function(){Ou.assertNotInAngularZone(),ku((function(){t._isZoneStable=!0,t._runCallbacksIfReady()}))}})}))}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var t=this;if(this.isStable())ku((function(){for(;0!==t._callbacks.length;){var e=t._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(t._didWork)}t._didWork=!1}));else{var e=this.getPendingTasks();this._callbacks=this._callbacks.filter((function(t){return!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)})),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map((function(t){return{source:t.source,creationLocation:t.creationLocation,data:t.data}})):[]}},{key:"addCallback",value:function(t,e,n){var r=this,i=-1;e&&e>0&&(i=setTimeout((function(){r._callbacks=r._callbacks.filter((function(t){return t.timeoutId!==i})),t(r._didWork,r.getPendingTasks())}),e)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:n})}},{key:"whenStable",value:function(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(t,e,n){return[]}}]),t}();return t.\u0275fac=function(e){return new(e||t)(ft(Ou))},t.\u0275prov=I({token:t,factory:t.\u0275fac}),t}(),ju=function(){var t=function(){function t(){h(this,t),this._applications=new Map,Du.addToWindow(this)}return d(t,[{key:"registerApplication",value:function(t,e){this._applications.set(t,e)}},{key:"unregisterApplication",value:function(t){this._applications.delete(t)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(t){return this._applications.get(t)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Du.findTestabilityInTree(this,t,e)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=I({token:t,factory:t.\u0275fac}),t}();function Pu(t){Du=t}var Ru,Du=new(function(){function t(){h(this,t)}return d(t,[{key:"addToWindow",value:function(t){}},{key:"findTestabilityInTree",value:function(t,e,n){return null}}]),t}()),Lu=new rt("AllowMultipleToken"),Mu=function t(e,n){h(this,t),this.name=e,this.token=n};function Fu(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="Platform: "+e,i=new rt(r);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=Uu();if(!o||o.injector.get(Lu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{var a=n.concat(e).concat({provide:i,useValue:!0},{provide:lo,useValue:"platform"});!function(t){if(Ru&&!Ru.destroyed&&!Ru.injector.get(Lu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ru=t.get(qu);var e=t.get(su,null);e&&e.forEach((function(t){return t()}))}(So.create({providers:a,name:r}))}return function(t){var e=Uu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Uu(){return Ru&&!Ru.destroyed?Ru:null}var qu=function(){var t=function(){function t(e){h(this,t),this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return d(t,[{key:"bootstrapModuleFactory",value:function(t,e){var n,r,i=this,o=(n=e?e.ngZone:void 0,r=e&&e.ngZoneEventCoalescing||!1,"noop"===n?new Nu:("zone.js"===n?void 0:n)||new Ou({enableLongStackTrace:Qn(),shouldCoalesceEventChangeDetection:r})),a=[{provide:Ou,useValue:o}];return o.run((function(){var e=So.create({providers:a,parent:i.injector,name:t.moduleType.name}),n=t.create(e),r=n.injector.get(jn,null);if(!r)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy((function(){return Bu(i._modules,n)})),o.runOutsideAngular((function(){return o.onError.subscribe({next:function(t){r.handleError(t)}})})),function(t,e,r){try{var o=((a=n.injector.get(ru)).runInitializers(),a.donePromise.then((function(){return Pa(n.injector.get(hu,"en-US")||"en-US"),i._moduleDoBootstrap(n),n})));return ea(o)?o.catch((function(n){throw e.runOutsideAngular((function(){return t.handleError(n)})),n})):o}catch(s){throw e.runOutsideAngular((function(){return t.handleError(s)})),s}var a}(r,o)}))}},{key:"bootstrapModule",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Vu({},n);return function(t,e,n){var r=new Ts(n);return Promise.resolve(r)}(0,0,t).then((function(t){return e.bootstrapModuleFactory(t,r)}))}},{key:"_moduleDoBootstrap",value:function(t){var e=t.injector.get(zu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach((function(t){return e.bootstrap(t)}));else{if(!t.instance.ngDoBootstrap)throw new Error("The module ".concat(F(t.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.'));t.instance.ngDoBootstrap(e)}this._modules.push(t)}},{key:"onDestroy",value:function(t){this._destroyListeners.push(t)}},{key:"injector",get:function(){return this._injector}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach((function(t){return t.destroy()})),this._destroyListeners.forEach((function(t){return t()})),this._destroyed=!0}},{key:"destroyed",get:function(){return this._destroyed}}]),t}();return t.\u0275fac=function(e){return new(e||t)(ft(So))},t.\u0275prov=I({token:t,factory:t.\u0275fac}),t}();function Vu(t,e){return Array.isArray(e)?e.reduce(Vu,t):Object.assign(Object.assign({},t),e)}var zu=function(){var t=function(){function t(e,n,r,i,o,a){var s=this;h(this,t),this._zone=e,this._console=n,this._injector=r,this._exceptionHandler=i,this._componentFactoryResolver=o,this._initStatus=a,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Qn(),this._zone.onMicrotaskEmpty.subscribe({next:function(){s._zone.run((function(){s.tick()}))}});var c=new u.a((function(t){s._stable=s._zone.isStable&&!s._zone.hasPendingMacrotasks&&!s._zone.hasPendingMicrotasks,s._zone.runOutsideAngular((function(){t.next(s._stable),t.complete()}))})),l=new u.a((function(t){var e;s._zone.runOutsideAngular((function(){e=s._zone.onStable.subscribe((function(){Ou.assertNotInAngularZone(),ku((function(){s._stable||s._zone.hasPendingMacrotasks||s._zone.hasPendingMicrotasks||(s._stable=!0,t.next(!0))}))}))}));var n=s._zone.onUnstable.subscribe((function(){Ou.assertInAngularZone(),s._stable&&(s._stable=!1,s._zone.runOutsideAngular((function(){t.next(!1)})))}));return function(){e.unsubscribe(),n.unsubscribe()}}));this.isStable=Object(f.a)(c,l.pipe(Object(v.a)()))}return d(t,[{key:"bootstrap",value:function(t,e){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=t instanceof za?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);var i=n.isBoundToModule?void 0:this._injector.get(yt),o=n.create(So.NULL,[],e||n.selector,i);o.onDestroy((function(){r._unloadComponent(o)}));var a=o.injector.get(Au,null);return a&&o.injector.get(ju).registerApplication(o.location.nativeElement,a),this._loadComponent(o),Qn()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),o}},{key:"tick",value:function(){var t=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;var e,n=a(this._views);try{for(n.s();!(e=n.n()).done;){e.value.detectChanges()}}catch(o){n.e(o)}finally{n.f()}if(this._enforceNoNewChanges){var r,i=a(this._views);try{for(i.s();!(r=i.n()).done;){r.value.checkNoChanges()}}catch(o){i.e(o)}finally{i.f()}}}catch(s){this._zone.runOutsideAngular((function(){return t._exceptionHandler.handleError(s)}))}finally{this._runningTick=!1}}},{key:"attachView",value:function(t){var e=t;this._views.push(e),e.attachToAppRef(this)}},{key:"detachView",value:function(t){var e=t;Bu(this._views,e),e.detachFromAppRef()}},{key:"_loadComponent",value:function(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(cu,[]).concat(this._bootstrapListeners).forEach((function(e){return e(t)}))}},{key:"_unloadComponent",value:function(t){this.detachView(t.hostView),Bu(this.components,t)}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach((function(t){return t.destroy()}))}},{key:"viewCount",get:function(){return this._views.length}}]),t}();return t.\u0275fac=function(e){return new(e||t)(ft(Ou),ft(lu),ft(So),ft(jn),ft(Wa),ft(ru))},t.\u0275prov=I({token:t,factory:t.\u0275fac}),t}();function Bu(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}var Wu=function t(){h(this,t)},Hu=function t(){h(this,t)},Ku={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},Gu=function(){var t=function(){function t(e,n){h(this,t),this._compiler=e,this._config=n||Ku}return d(t,[{key:"load",value:function(t){return this.loadAndCompile(t)}},{key:"loadAndCompile",value:function(t){var n=this,i=e(t.split("#"),2),o=i[0],a=i[1];return void 0===a&&(a="default"),r("zn8P")(o).then((function(t){return t[a]})).then((function(t){return Ju(t,o,a)})).then((function(t){return n._compiler.compileModuleAsync(t)}))}},{key:"loadFactory",value:function(t){var n=e(t.split("#"),2),i=n[0],o=n[1],a="NgFactory";return void 0===o&&(o="default",a=""),r("zn8P")(this._config.factoryPathPrefix+i+this._config.factoryPathSuffix).then((function(t){return t[o+a]})).then((function(t){return Ju(t,i,o)}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(ft(_u),ft(Hu,8))},t.\u0275prov=I({token:t,factory:t.\u0275fac}),t}();function Ju(t,e,n){if(!t)throw new Error("Cannot find '".concat(n,"' in '").concat(e,"'"));return t}var Qu=function(t){return null},Yu=Fu(null,"core",[{provide:uu,useValue:"unknown"},{provide:qu,deps:[So]},{provide:ju,deps:[]},{provide:lu,deps:[]}]),Xu=[{provide:zu,useClass:zu,deps:[Ou,lu,So,jn,Wa,ru]},{provide:ks,deps:[Ou],useFactory:function(t){var e=[];return t.onStable.subscribe((function(){for(;e.length;)e.pop()()})),function(t){e.push(t)}}},{provide:ru,useClass:ru,deps:[[new k,nu]]},{provide:_u,useClass:_u,deps:[]},ou,{provide:ls,useFactory:function(){return ds},deps:[]},{provide:hs,useFactory:function(){return ps},deps:[]},{provide:hu,useFactory:function(t){return Pa(t=t||"undefined"!=typeof $localize&&$localize.locale||"en-US"),t},deps:[[new w(hu),new k,new C]]},{provide:fu,useValue:"USD"}],Zu=function(){var t=function t(e){h(this,t)};return t.\u0275mod=Rt({type:t}),t.\u0275inj=x({factory:function(e){return new(e||t)(ft(zu))},providers:Xu}),t}()},fqyn:function(t,e,n){"use strict";var r=1;t.exports={nextValue:function(){return(r=(9301*r+49297)%233280)/233280},seed:function(t){r=t}}},gRHU:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("2fFW"),i=n("NJ4a"),o={closed:!0,next:function(t){},error:function(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete:function(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a((function(n){var r=new i.a,o=0;return r.add(e.schedule((function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}},je4i:function(t,e,n){"use strict";t.exports=n("Bpvx")},kJWO:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r="function"==typeof Symbol&&Symbol.observable||"@@observable"},lJxs:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}var o=function(){function t(e,n){h(this,t),this.project=e,this.thisArg=n}return d(t,[{key:"call",value:function(t,e){return e.subscribe(new a(t,this.project,this.thisArg))}}]),t}(),a=function(t){p(n,t);var e=y(n);function n(t,r,i){var o;return h(this,n),(o=e.call(this,t)).project=r,o.count=0,o.thisArg=i||m(o),o}return d(n,[{key:"_next",value:function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),n}(r.a)},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",(function(){return r}))},n8Jw:function(t,e,n){"use strict";t.exports=0},ngJS:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}}},oB13:function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var r,i=n("XNiG"),o=n("HDdC"),a=(n("7o/Q"),n("quSY")),s=n("x+ZX"),u=function(t){p(n,t);var e=y(n);function n(t,r){var i;return h(this,n),(i=e.call(this)).source=t,i.subjectFactory=r,i._refCount=0,i._isComplete=!1,i}return d(n,[{key:"_subscribe",value:function(t){return this.getSubject().subscribe(t)}},{key:"getSubject",value:function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new a.a).add(this.source.subscribe(new f(this.getSubject(),this))),t.closed&&(this._connection=null,t=a.a.EMPTY)),t}},{key:"refCount",value:function(){return Object(s.a)()(this)}}]),n}(o.a),c={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:(r=u.prototype)._subscribe},_isComplete:{value:r._isComplete,writable:!0},getSubject:{value:r.getSubject},connect:{value:r.connect},refCount:{value:r.refCount}},f=function(t){p(n,t);var e=y(n);function n(t,r){var i;return h(this,n),(i=e.call(this,t)).connectable=r,i}return d(n,[{key:"_error",value:function(t){this._unsubscribe(),l(_(n.prototype),"_error",this).call(this,t)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),l(_(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}]),n}(i.b);function v(t,e){return function(n){var r;if(r="function"==typeof t?t:function(){return t},"function"==typeof e)return n.lift(new g(r,e));var i=Object.create(n,c);return i.source=n,i.subjectFactory=r,i}}var g=function(){function t(e,n){h(this,t),this.subjectFactory=e,this.selector=n}return d(t,[{key:"call",value:function(t,e){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(t);return i.add(e.subscribe(r)),i}}]),t}()},pxpQ:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return f}));var r,i=n("7o/Q"),o=n("EY2u"),a=n("LRne"),s=n("z6cu"),u=((r=function(){function t(e,n,r){h(this,t),this.kind=e,this.value=n,this.error=r,this.hasValue="N"===e}return d(t,[{key:"observe",value:function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}},{key:"do",value:function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}},{key:"accept",value:function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}},{key:"toObservable",value:function(){switch(this.kind){case"N":return Object(a.a)(this.value);case"E":return Object(s.a)(this.error);case"C":return Object(o.b)()}throw new Error("unexpected notification kind value")}}],[{key:"createNext",value:function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}},{key:"createError",value:function(e){return new t("E",void 0,e)}},{key:"createComplete",value:function(){return t.completeNotification}}]),t}()).completeNotification=new r("C"),r.undefinedValueNotification=new r("N",void 0),r);function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new l(t,e))}}var l=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;h(this,t),this.scheduler=e,this.delay=n}return d(t,[{key:"call",value:function(t,e){return e.subscribe(new f(t,this.scheduler,this.delay))}}]),t}(),f=function(t){p(n,t);var e=y(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return h(this,n),(i=e.call(this,t)).scheduler=r,i.delay=o,i}return d(n,[{key:"scheduleMessage",value:function(t){this.destination.add(this.scheduler.schedule(n.dispatch,this.delay,new v(t,this.destination)))}},{key:"_next",value:function(t){this.scheduleMessage(u.createNext(t))}},{key:"_error",value:function(t){this.scheduleMessage(u.createError(t)),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleMessage(u.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()}}]),n}(i.a),v=function t(e,n){h(this,t),this.notification=e,this.destination=n}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var i;n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return d}));var o=[],a=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),s={debug:a.DEBUG,verbose:a.VERBOSE,info:a.INFO,warn:a.WARN,error:a.ERROR,silent:a.SILENT},u=a.INFO,c=((i={})[a.DEBUG]="log",i[a.VERBOSE]="log",i[a.INFO]="info",i[a.WARN]="warn",i[a.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),a=c[e];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[a].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in a))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?s[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.DEBUG],t)),this._logHandler.apply(this,r([this,a.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.VERBOSE],t)),this._logHandler.apply(this,r([this,a.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.INFO],t)),this._logHandler.apply(this,r([this,a.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.WARN],t)),this._logHandler.apply(this,r([this,a.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.ERROR],t)),this._logHandler.apply(this,r([this,a.ERROR],t))},t}();function f(t){o.forEach((function(e){e.setLogLevel(t)}))}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=s[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:a[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return S})),n.d(e,"c",(function(){return C})),n.d(e,"d",(function(){return F})),n.d(e,"e",(function(){return i})),n.d(e,"f",(function(){return o})),n.d(e,"g",(function(){return s})),n.d(e,"h",(function(){return u})),n.d(e,"i",(function(){return P})),n.d(e,"j",(function(){return d})),n.d(e,"k",(function(){return U})),n.d(e,"l",(function(){return l})),n.d(e,"m",(function(){return h})),n.d(e,"n",(function(){return B})),n.d(e,"o",(function(){return J})),n.d(e,"p",(function(){return p})),n.d(e,"q",(function(){return j})),n.d(e,"r",(function(){return g})),n.d(e,"s",(function(){return m})),n.d(e,"t",(function(){return _})),n.d(e,"u",(function(){return D})),n.d(e,"v",(function(){return w})),n.d(e,"w",(function(){return v})),n.d(e,"x",(function(){return y})),n.d(e,"y",(function(){return O})),n.d(e,"z",(function(){return b})),n.d(e,"A",(function(){return k})),n.d(e,"B",(function(){return A})),n.d(e,"C",(function(){return I})),n.d(e,"D",(function(){return L})),n.d(e,"E",(function(){return M})),n.d(e,"F",(function(){return R})),n.d(e,"G",(function(){return G})),n.d(e,"H",(function(){return K})),n.d(e,"I",(function(){return x})),n.d(e,"J",(function(){return z})),n.d(e,"K",(function(){return W})),n.d(e,"L",(function(){return H}));var r=n("FurV"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&s)<<2|c>>6,h=63&c;u||(h=64,a||(l=64)),r.push(n[o>>2],n[(3&o)<<4|s>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();r.push(o<<2|a>>4),64!==s&&(r.push(a<<4&240|s>>2),64!==u&&r.push(s<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=a(t);return s.encodeByteArray(e,!0)},c=function(t){try{return s.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function d(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object(r.a)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[s.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),s.encodeString(JSON.stringify(a),!1),""].join(".")}function p(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function v(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())}function y(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function g(){return"object"==typeof self&&self.self===self}function m(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function b(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _(){return p().indexOf("Electron/")>=0}function w(){var t=p();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function k(){return p().indexOf("MSAppHost/")>=0}function O(){return!1}var C=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,S.prototype.create),o}return Object(r.c)(e,t),e}(Error),S=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?E(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new C(i,s,r);return u},t}();function E(t,e){return t.replace(T,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var T=/\{\$([^}]+)}/g;function I(t){return JSON.parse(t)}function x(t){return JSON.stringify(t)}var N=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=I(c(o[0])||""),n=I(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(a){}return{header:e,claims:n,data:r,signature:i}},A=function(t){var e=N(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},j=function(t){var e=N(t).claims;return"object"==typeof e&&!0===e.admin};function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function R(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function D(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function L(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function M(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var F=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,a=this.chain_[0],s=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^s&(u^c),o=1518500249):(i=s^u^c,o=1859775393):r<60?(i=s&u|c&(s|u),o=2400959708):(i=s^u^c,o=3395469782);var h=(a<<5|a>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(s<<30|s>>>2),s=a,a=h}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function U(t,e){var n=new q(t,e);return n.subscribe.bind(n)}var q=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=V),void 0===r.error&&(r.error=V),void 0===r.complete&&(r.complete=V);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function V(){}var z=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function B(t,e){return t+" failed: "+e+" argument "}function W(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(B(t,e)+"must be a valid function.")}function H(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(B(t,e)+"must be a valid context object.")}var K=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var a=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(a<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},G=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function J(t){return t&&t._delegate?t._delegate:t}},qgXg:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o}));var r=function(t){p(n,t);var e=y(n);function n(t,r){var i;return h(this,n),(i=e.call(this,t,r)).scheduler=t,i.work=r,i}return d(n,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e>0?l(_(n.prototype),"schedule",this).call(this,t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}},{key:"execute",value:function(t,e){return e>0||this.closed?l(_(n.prototype),"execute",this).call(this,t,e):this._execute(t,e)}},{key:"requestAsyncId",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0||null===r&&this.delay>0?l(_(n.prototype),"requestAsyncId",this).call(this,t,e,r):t.flush(this)}}]),n}(n("3N8a").a),i=new(function(t){p(n,t);var e=y(n);function n(){return h(this,n),e.apply(this,arguments)}return n}(n("IjjT").a))(r),o=i},quSY:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r,i,o=n("DH7j"),a=n("XoHu"),s=n("n6bG"),u=function(){function t(t){return Error.call(this),this.message=t?"".concat(t.length," errors occurred during unsubscription:\n").concat(t.map((function(t,e){return"".concat(e+1,") ").concat(t.toString())})).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),c=((i=function(){function t(e){h(this,t),this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return d(t,[{key:"unsubscribe",value:function(){var e;if(!this.closed){var n=this._parentOrParents,r=this._ctorUnsubscribe,i=this._unsubscribe,c=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(var h=0;h<n.length;++h)n[h].remove(this);if(Object(s.a)(i)){r&&(this._unsubscribe=void 0);try{i.call(this)}catch(v){e=v instanceof u?l(v.errors):[v]}}if(Object(o.a)(c))for(var f=-1,d=c.length;++f<d;){var p=c[f];if(Object(a.a)(p))try{p.unsubscribe()}catch(v){e=e||[],v instanceof u?e=e.concat(l(v.errors)):e.push(v)}}if(e)throw new u(e)}}},{key:"add",value:function(e){var n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof t){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n}},{key:"remove",value:function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}]),t}()).EMPTY=((r=new i).closed=!0,r),i);function l(t){return t.reduce((function(t,e){return t.concat(e instanceof u?e.errors:e)}),[])}},r8II:function(t,e,n){"use strict";e.decode=e.parse=n("YcCt"),e.encode=e.stringify=n("6MUB")},spgP:function(t,e,a){"use strict";(function(t){a.d(e,"a",(function(){return P})),a.d(e,"b",(function(){return E})),a.d(e,"c",(function(){return S})),a.d(e,"d",(function(){return _})),a.d(e,"e",(function(){return C})),a.d(e,"f",(function(){return A})),a.d(e,"g",(function(){return I})),a.d(e,"h",(function(){return w})),a.d(e,"i",(function(){return O})),a.d(e,"j",(function(){return x}));var u=a("qgXg"),c=a("D0XW"),l=a("vkgz"),f=a("tf+s"),p=a("pxpQ"),v=a("fXoL"),y=a("Jgta");function g(){}var m=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.b;h(this,t),this.zone=e,this.delegate=n}return d(t,[{key:"now",value:function(){return this.delegate.now()}},{key:"schedule",value:function(t,e,n){var r=this.zone;return this.delegate.schedule((function(e){var n=this;r.runGuarded((function(){t.apply(n,[e])}))}),e,n)}}]),t}(),b=function(){function t(e){h(this,t),this.zone=e,this.task=null}return d(t,[{key:"call",value:function(t,e){var n=this.unscheduleTask.bind(this);return this.task=this.zone.run((function(){return Zone.current.scheduleMacroTask("firebaseZoneBlock",g,{},g,g)})),e.pipe(Object(l.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}},{key:"unscheduleTask",value:function(){var t=this;setTimeout((function(){null!=t.task&&"scheduled"===t.task.state&&(t.task.invoke(),t.task=null)}),10)}}]),t}(),_=function t(e){h(this,t),this.ngZone=e,this.outsideAngular=e.runOutsideAngular((function(){return new m(Zone.current)})),this.insideAngular=e.run((function(){return new m(Zone.current,c.b)}))};function w(t){return function(e){return(e=e.lift(new b(t.ngZone))).pipe(Object(f.a)(t.outsideAngular),Object(p.b)(t.insideAngular))}}var k=["ngOnDestroy"],O=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Proxy(t,{get:function(o,a){return n.runOutsideAngular((function(){var o;if(t[a])return(null===(o=null==r?void 0:r.spy)||void 0===o?void 0:o.get)&&r.spy.get(a,t[a]),t[a];if(k.indexOf(a)>-1)return function(){};var s=e.toPromise().then((function(t){var e=t&&t[a];return"function"==typeof e?e.bind(t):e&&e.then?e.then((function(t){return n.run((function(){return t}))})):n.run((function(){return e}))}));return new Proxy((function(){}),{get:function(t,e){return s[e]},apply:function(t,e,n){return s.then((function(t){var e,o=t&&t.apply(void 0,i(n));return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(a,n,o),o}))}})}))}})},C=function(t,e){e.forEach((function(e){Object.getOwnPropertyNames(e.prototype||e).forEach((function(n){Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))}))}))},S=new v.q("angularfire2.app.options"),E=new v.q("angularfire2.app.nameOrConfig"),T=new v.P("6.1.5");function I(e,n,r){var i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";var o=y.a.apps.filter((function(t){return t&&t.name===i.name}))[0]||n.runOutsideAngular((function(){return y.a.initializeApp(e,i)}));try{JSON.stringify(e)!==JSON.stringify(o.options)&&N("error","".concat(o.name," Firebase App already initialized with different options").concat(t.hot?", you may need to reload as Firebase is not HMR aware.":"."))}catch(a){}return o}var x=function(){N("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},N=function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Object(v.V)()&&"undefined"!=typeof console&&(e=console)[t].apply(e,r)};function A(e,a,u,c,l){var h,f=globalThis.\u0275AngularfireInstanceCache.get(e)||[],d=r(h=f)||o(h)||s(h)||n(),p=d[0],v=d.slice(1);if(p){try{l.some((function(t,e){var n=v[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n}))&&N("error","".concat(a," was already initialized on the ").concat(u.name," Firebase App instance with different settings.").concat(t.hot?" You may need to reload as Firebase is not HMR aware.":""))}catch(g){}return p}var y=c();return globalThis.\u0275AngularfireInstanceCache.set(e,[y].concat(i(l))),y}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);var j={provide:function t(){h(this,t)},useFactory:I,deps:[S,v.z,[new v.A,E]]},P=function(){var t=function(){function t(e){h(this,t),y.a.registerVersion("angularfire",T.full,e.toString()),y.a.registerVersion("angular",v.O.full)}return d(t,null,[{key:"initializeApp",value:function(e,n){return{ngModule:t,providers:[{provide:S,useValue:e},{provide:E,useValue:n}]}}}]),t}();return t.\u0275mod=v.Hb({type:t}),t.\u0275inj=v.Gb({factory:function(e){return new(e||t)(v.Sb(v.B))},providers:[j]}),t}()}).call(this,a("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var r=n("HDdC"),i=1,o=Promise.resolve(),a={};function s(t){return t in a&&(delete a[t],!0)}var u=function(t){var e=i++;return a[e]=!0,o.then((function(){return s(e)&&t()})),e},c=function(t){s(t)},f=function(t){p(n,t);var e=y(n);function n(t,r){var i;return h(this,n),(i=e.call(this,t,r)).scheduler=t,i.work=r,i}return d(n,[{key:"requestAsyncId",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0?l(_(n.prototype),"requestAsyncId",this).call(this,t,e,r):(t.actions.push(this),t.scheduled||(t.scheduled=u(t.flush.bind(t,null))))}},{key:"recycleAsyncId",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==r&&r>0||null===r&&this.delay>0)return l(_(n.prototype),"recycleAsyncId",this).call(this,t,e,r);0===t.actions.length&&(c(e),t.scheduled=void 0)}}]),n}(n("3N8a").a),v=new(function(t){p(n,t);var e=y(n);function n(){return h(this,n),e.apply(this,arguments)}return d(n,[{key:"flush",value:function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}}}]),n}(n("IjjT").a))(f),g=n("Y7HM"),m=function(t){p(n,t);var e=y(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v;return h(this,n),(r=e.call(this)).source=t,r.delayTime=i,r.scheduler=o,(!Object(g.a)(i)||i<0)&&(r.delayTime=0),o&&"function"==typeof o.schedule||(r.scheduler=v),r}return d(n,[{key:"_subscribe",value:function(t){return this.scheduler.schedule(n.dispatch,this.delayTime,{source:this.source,subscriber:t})}}],[{key:"create",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v;return new n(t,e,r)}},{key:"dispatch",value:function(t){var e=t.source,n=t.subscriber;return this.add(e.subscribe(n))}}]),n}(r.a);function b(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new w(t,e))}}var w=function(){function t(e,n){h(this,t),this.scheduler=e,this.delay=n}return d(t,[{key:"call",value:function(t,e){return new m(e,this.delay,this.scheduler).subscribe(t)}}]),t}()},vZIR:function(t,e,n){"use strict";var r=n("Qfp6"),i=n("CR0S"),o=n("5R+2");t.exports=function(t){for(var e,n=0,a="";!e;)a+=o(i,r.get(),1),e=t<Math.pow(16,n+1),n++;return a}},vkgz:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("7o/Q");function i(){}var o=n("n6bG");function a(t,e,n){return function(r){return r.lift(new s(t,e,n))}}var s=function(){function t(e,n,r){h(this,t),this.nextOrObserver=e,this.error=n,this.complete=r}return d(t,[{key:"call",value:function(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}]),t}(),u=function(t){p(n,t);var e=y(n);function n(t,r,a,s){var u;return h(this,n),(u=e.call(this,t))._tapNext=i,u._tapError=i,u._tapComplete=i,u._tapError=a||i,u._tapComplete=s||i,Object(o.a)(r)?(u._context=m(u),u._tapNext=r):r&&(u._context=r,u._tapNext=r.next||i,u._tapError=r.error||i,u._tapComplete=r.complete||i),u}return d(n,[{key:"_next",value:function(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}},{key:"_error",value:function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}},{key:"_complete",value:function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}]),n}(r.a)},w1tV:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("oB13"),i=n("x+ZX"),o=n("XNiG");function a(){return new o.a}function s(){return function(t){return Object(i.a)()(Object(r.a)(a)(t))}}},"x+ZX":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");function i(){return function(t){return t.lift(new o(t))}}var o=function(){function t(e){h(this,t),this.connectable=e}return d(t,[{key:"call",value:function(t,e){var n=this.connectable;n._refCount++;var r=new a(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}]),t}(),a=function(t){p(n,t);var e=y(n);function n(t,r){var i;return h(this,n),(i=e.call(this,t)).connectable=r,i}return d(n,[{key:"_unsubscribe",value:function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null}}]),n}(r.a)},yCtX:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function a(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",(function(){return r}))},z6cu:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("HDdC");function i(t,e){return new r.a(e?function(n){return e.schedule(o,0,{error:t,subscriber:n})}:function(e){return e.error(t)})}function o(t){var e=t.error;t.subscriber.error(e)}},zIRd:function(t,e,n){"use strict";var r,i,o=n("FurV"),a=n("qOnz"),s=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new a.b("app","Firebase",c),h="@firebase/app",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),d=new u.b("@firebase/app"),p=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(a.l)(t),this.container=new s.b(e.name),this._addComponent(new s.a("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){d.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();p.prototype.name&&p.prototype.options||p.prototype.delete||console.log("dc");var v=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name="[DEFAULT]");var s=o.name;if("string"!=typeof s||!s)throw l.create("bad-app-name",{appName:String(s)});if(Object(a.i)(e,s))throw l.create("duplicate-app",{appName:s});var u=new t(n,o,r);return e[s]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var a=i.match(/\s|\//),u=e.match(/\s|\//);if(a||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return a&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void d.warn(c.join(" "))}o(new s.a(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.6.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||"[DEFAULT]",!Object(a.i)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return d.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[s])throw l.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&Object(a.m)(u,o.serviceProps),r[s]=u,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,s).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(p);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(a.m)(e,t)},createSubscribe:a.k,ErrorFactory:a.b,deepExtend:a.m}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(Object(a.r)()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var g=self.firebase.SDK_VERSION;g&&g.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var m=v.initializeApp;v.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(a.x)()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),m.apply(void 0,t)};var b=v;!function(t,e){t.INTERNAL.registerComponent(new s.a("platform-logger",(function(t){return new y(t)}),"PRIVATE")),t.registerVersion(h,"0.6.22",void 0),t.registerVersion("fire-js","")}(b),e.a=b},zUnb:function(n,r,o){"use strict";o.r(r);var s=o("fXoL"),u={apiKey:"AIzaSyBzmXumYjOj_AINSeVOB96doLWGqh4xSOU",authDomain:"fotos-app-779cb.firebaseapp.com",databaseURL:"https://fotos-app-779cb-default-rtdb.firebaseio.com",projectId:"fotos-app-779cb",storageBucket:"fotos-app-779cb.appspot.com",messagingSenderId:"420287488542",appId:"1:420287488542:web:36bce96229e7974d02840f",measurementId:"G-E9JTVTWSQG"},c=null;function f(){return c}var v,b=new s.q("DocumentToken"),w=((v=function t(){h(this,t)}).\u0275fac=function(t){return new(t||v)},v.\u0275prov=Object(s.Fb)({factory:k,token:v,providedIn:"platform"}),v);function k(){return Object(s.Sb)(S)}var O,C=new s.q("Location Initialized"),S=((O=function(t){p(n,t);var e=y(n);function n(t){var r;return h(this,n),(r=e.call(this))._doc=t,r._init(),r}return d(n,[{key:"_init",value:function(){this.location=f().getLocation(),this._history=f().getHistory()}},{key:"getBaseHrefFromDOM",value:function(){return f().getBaseHref(this._doc)}},{key:"onPopState",value:function(t){f().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}},{key:"onHashChange",value:function(t){f().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(t){this.location.pathname=t}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}},{key:"pushState",value:function(t,e,n){E()?this._history.pushState(t,e,n):this.location.hash=n}},{key:"replaceState",value:function(t,e,n){E()?this._history.replaceState(t,e,n):this.location.hash=n}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"getState",value:function(){return this._history.state}}]),n}(w)).\u0275fac=function(t){return new(t||O)(s.Sb(b))},O.\u0275prov=Object(s.Fb)({factory:T,token:O,providedIn:"platform"}),O);function E(){return!!window.history.pushState}function T(){return new S(Object(s.Sb)(b))}function I(t,e){if(0==t.length)return e;if(0==e.length)return t;var n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function x(t){var e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function N(t){return t&&"?"!==t[0]?"?"+t:t}var A,j=((A=function t(){h(this,t)}).\u0275fac=function(t){return new(t||A)},A.\u0275prov=Object(s.Fb)({factory:P,token:A,providedIn:"root"}),A);function P(t){var e=Object(s.Sb)(b).location;return new F(Object(s.Sb)(w),e&&e.origin||"")}var R,D,L,M=new s.q("appBaseHref"),F=((L=function(t){p(n,t);var e=y(n);function n(t,r){var i;if(h(this,n),(i=e.call(this))._platformLocation=t,null==r&&(r=i._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return i._baseHref=r,g(i)}return d(n,[{key:"onPopState",value:function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(t){return I(this._baseHref,t)}},{key:"path",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._platformLocation.pathname+N(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?"".concat(e).concat(n):e}},{key:"pushState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+N(r));this._platformLocation.pushState(t,e,i)}},{key:"replaceState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+N(r));this._platformLocation.replaceState(t,e,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),n}(j)).\u0275fac=function(t){return new(t||L)(s.Sb(w),s.Sb(M,8))},L.\u0275prov=s.Fb({token:L,factory:L.\u0275fac}),L),U=((D=function(t){p(n,t);var e=y(n);function n(t,r){var i;return h(this,n),(i=e.call(this))._platformLocation=t,i._baseHref="",null!=r&&(i._baseHref=r),i}return d(n,[{key:"onPopState",value:function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){var t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}},{key:"prepareExternalUrl",value:function(t){var e=I(this._baseHref,t);return e.length>0?"#"+e:e}},{key:"pushState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+N(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}},{key:"replaceState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+N(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),n}(j)).\u0275fac=function(t){return new(t||D)(s.Sb(w),s.Sb(M,8))},D.\u0275prov=s.Fb({token:D,factory:D.\u0275fac}),D),q=((R=function(){function t(e,n){var r=this;h(this,t),this._subject=new s.n,this._urlChangeListeners=[],this._platformStrategy=e;var i=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=x(z(i)),this._platformStrategy.onPopState((function(t){r._subject.emit({url:r.path(!0),pop:!0,state:t.state,type:t.type})}))}return d(t,[{key:"path",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(t))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(t+N(e))}},{key:"normalize",value:function(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,z(e)))}},{key:"prepareExternalUrl",value:function(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}},{key:"go",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+N(e)),n)}},{key:"replaceState",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+N(e)),n)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"onUrlChange",value:function(t){var e=this;this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe((function(t){e._notifyUrlChangeListeners(t.url,t.state)})))}},{key:"_notifyUrlChangeListeners",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach((function(n){return n(t,e)}))}},{key:"subscribe",value:function(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}]),t}()).\u0275fac=function(t){return new(t||R)(s.Sb(j),s.Sb(w))},R.normalizeQueryParams=N,R.joinWithSlash=I,R.stripTrailingSlash=x,R.\u0275prov=Object(s.Fb)({factory:V,token:R,providedIn:"root"}),R);function V(){return new q(Object(s.Sb)(j),Object(s.Sb)(w))}function z(t){return t.replace(/\/index.html$/,"")}var B=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}({}),W=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),H=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t[1/0]=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}({});function K(t,e){var n=Object(s.jb)(t),r=n[s.ab.NumberSymbols][e];if(void 0===r){if(e===H.CurrencyDecimal)return n[s.ab.NumberSymbols][H.Decimal];if(e===H.CurrencyGroup)return n[s.ab.NumberSymbols][H.Group]}return r}var G=s.mb,J=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Q(t){var e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}var Y,X=function t(){h(this,t)},Z=((Y=function(t){p(n,t);var e=y(n);function n(t){var r;return h(this,n),(r=e.call(this)).locale=t,r}return d(n,[{key:"getPluralCategory",value:function(t,e){switch(G(e||this.locale)(t)){case W.Zero:return"zero";case W.One:return"one";case W.Two:return"two";case W.Few:return"few";case W.Many:return"many";default:return"other"}}}]),n}(X)).\u0275fac=function(t){return new(t||Y)(s.Sb(s.u))},Y.\u0275prov=s.Fb({token:Y,factory:Y.\u0275fac}),Y);function $(t,n){n=encodeURIComponent(n);var r,i=a(t.split(";"));try{for(i.s();!(r=i.n()).done;){var o=r.value,s=o.indexOf("="),u=e(-1==s?[o,""]:[o.slice(0,s),o.slice(s+1)],2),c=u[0],l=u[1];if(c.trim()===n)return decodeURIComponent(l)}}catch(h){i.e(h)}finally{i.f()}return null}var tt,et,nt,rt=((tt=function(){function t(e,n,r,i){h(this,t),this._iterableDiffers=e,this._keyValueDiffers=n,this._ngEl=r,this._renderer=i,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}return d(t,[{key:"klass",set:function(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}},{key:"ngClass",set:function(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Object(s.pb)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}},{key:"ngDoCheck",value:function(){if(this._iterableDiffer){var t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){var e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}},{key:"_applyKeyValueChanges",value:function(t){var e=this;t.forEachAddedItem((function(t){return e._toggleClass(t.key,t.currentValue)})),t.forEachChangedItem((function(t){return e._toggleClass(t.key,t.currentValue)})),t.forEachRemovedItem((function(t){t.previousValue&&e._toggleClass(t.key,!1)}))}},{key:"_applyIterableChanges",value:function(t){var e=this;t.forEachAddedItem((function(t){if("string"!=typeof t.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+Object(s.ub)(t.item));e._toggleClass(t.item,!0)})),t.forEachRemovedItem((function(t){return e._toggleClass(t.item,!1)}))}},{key:"_applyClasses",value:function(t){var e=this;t&&(Array.isArray(t)||t instanceof Set?t.forEach((function(t){return e._toggleClass(t,!0)})):Object.keys(t).forEach((function(n){return e._toggleClass(n,!!t[n])})))}},{key:"_removeClasses",value:function(t){var e=this;t&&(Array.isArray(t)||t instanceof Set?t.forEach((function(t){return e._toggleClass(t,!1)})):Object.keys(t).forEach((function(t){return e._toggleClass(t,!1)})))}},{key:"_toggleClass",value:function(t,e){var n=this;(t=t.trim())&&t.split(/\s+/g).forEach((function(t){e?n._renderer.addClass(n._ngEl.nativeElement,t):n._renderer.removeClass(n._ngEl.nativeElement,t)}))}}]),t}()).\u0275fac=function(t){return new(t||tt)(s.Jb(s.s),s.Jb(s.t),s.Jb(s.l),s.Jb(s.E))},tt.\u0275dir=s.Eb({type:tt,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),tt),it=function(){function t(e,n,r,i){h(this,t),this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}return d(t,[{key:"first",get:function(){return 0===this.index}},{key:"last",get:function(){return this.index===this.count-1}},{key:"even",get:function(){return this.index%2==0}},{key:"odd",get:function(){return!this.even}}]),t}(),ot=((et=function(){function t(e,n,r){h(this,t),this._viewContainer=e,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}return d(t,[{key:"ngForOf",set:function(t){this._ngForOf=t,this._ngForOfDirty=!0}},{key:"ngForTrackBy",get:function(){return this._trackByFn},set:function(t){Object(s.V)()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn("trackBy must be a function, but received ".concat(JSON.stringify(t),". See https://angular.io/api/common/NgForOf#change-propagation for more information.")),this._trackByFn=t}},{key:"ngForTemplate",set:function(t){t&&(this._template=t)}},{key:"ngDoCheck",value:function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error("Cannot find a differ supporting object '".concat(t,"' of type '").concat((e=t).name||typeof e,"'. NgFor only supports binding to Iterables such as Arrays."))}}var e;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}},{key:"_applyChanges",value:function(t){var e=this,n=[];t.forEachOperation((function(t,r,i){if(null==t.previousIndex){var o=e._viewContainer.createEmbeddedView(e._template,new it(null,e._ngForOf,-1,-1),null===i?void 0:i),a=new at(t,o);n.push(a)}else if(null==i)e._viewContainer.remove(null===r?void 0:r);else if(null!==r){var s=e._viewContainer.get(r);e._viewContainer.move(s,i);var u=new at(t,s);n.push(u)}}));for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);for(var i=0,o=this._viewContainer.length;i<o;i++){var a=this._viewContainer.get(i);a.context.index=i,a.context.count=o,a.context.ngForOf=this._ngForOf}t.forEachIdentityChange((function(t){e._viewContainer.get(t.currentIndex).context.$implicit=t.item}))}},{key:"_perViewChange",value:function(t,e){t.context.$implicit=e.item}}],[{key:"ngTemplateContextGuard",value:function(t,e){return!0}}]),t}()).\u0275fac=function(t){return new(t||et)(s.Jb(s.Q),s.Jb(s.L),s.Jb(s.s))},et.\u0275dir=s.Eb({type:et,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),et),at=function t(e,n){h(this,t),this.record=e,this.view=n},st=((nt=function(){function t(e,n){h(this,t),this._viewContainer=e,this._context=new ut,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}return d(t,[{key:"ngIf",set:function(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}},{key:"ngIfThen",set:function(t){ct("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}},{key:"ngIfElse",set:function(t){ct("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}},{key:"_updateView",value:function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}],[{key:"ngTemplateContextGuard",value:function(t,e){return!0}}]),t}()).\u0275fac=function(t){return new(t||nt)(s.Jb(s.Q),s.Jb(s.L))},nt.\u0275dir=s.Eb({type:nt,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),nt),ut=function t(){h(this,t),this.$implicit=null,this.ngIf=null};function ct(t,e){if(e&&!e.createEmbeddedView)throw new Error("".concat(t," must be a TemplateRef, but received '").concat(Object(s.ub)(e),"'."))}var lt,ht=((lt=function(){function t(e,n,r){h(this,t),this._ngEl=e,this._differs=n,this._renderer=r,this._ngStyle=null,this._differ=null}return d(t,[{key:"ngStyle",set:function(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}},{key:"ngDoCheck",value:function(){if(this._differ){var t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}},{key:"_setStyle",value:function(t,n){var r=e(t.split("."),2),i=r[0],o=r[1];null!=(n=null!=n&&o?"".concat(n).concat(o):n)?this._renderer.setStyle(this._ngEl.nativeElement,i,n):this._renderer.removeStyle(this._ngEl.nativeElement,i)}},{key:"_applyChanges",value:function(t){var e=this;t.forEachRemovedItem((function(t){return e._setStyle(t.key,null)})),t.forEachAddedItem((function(t){return e._setStyle(t.key,t.currentValue)})),t.forEachChangedItem((function(t){return e._setStyle(t.key,t.currentValue)}))}}]),t}()).\u0275fac=function(t){return new(t||lt)(s.Jb(s.l),s.Jb(s.t),s.Jb(s.E))},lt.\u0275dir=s.Eb({type:lt,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),lt);function ft(t,e){return Error("InvalidPipeArgument: '".concat(e,"' for pipe '").concat(Object(s.ub)(t),"'"))}var dt,pt,vt,yt=function(){function t(){h(this,t)}return d(t,[{key:"createSubscription",value:function(t,e){return t.subscribe({next:e,error:function(t){throw t}})}},{key:"dispose",value:function(t){t.unsubscribe()}},{key:"onDestroy",value:function(t){t.unsubscribe()}}]),t}(),gt=new(function(){function t(){h(this,t)}return d(t,[{key:"createSubscription",value:function(t,e){return t.then(e,(function(t){throw t}))}},{key:"dispose",value:function(t){}},{key:"onDestroy",value:function(t){}}]),t}()),mt=new yt,bt=((vt=function(){function t(e){h(this,t),this._ref=e,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}return d(t,[{key:"ngOnDestroy",value:function(){this._subscription&&this._dispose()}},{key:"transform",value:function(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}},{key:"_subscribe",value:function(t){var e=this;this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,(function(n){return e._updateLatestValue(t,n)}))}},{key:"_selectStrategy",value:function(e){if(Object(s.rb)(e))return gt;if(Object(s.qb)(e))return mt;throw ft(t,e)}},{key:"_dispose",value:function(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}},{key:"_updateLatestValue",value:function(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())}}]),t}()).\u0275fac=function(t){return new(t||vt)(s.Ub())},vt.\u0275pipe=s.Ib({name:"async",type:vt,pure:!1}),vt),_t=((pt=function(){function t(e){h(this,t),this._locale=e}return d(t,[{key:"transform",value:function(e,n,r){if(function(t){return null==t||""===t||t!=t}(e))return null;r=r||this._locale;try{return function(t,e,n){return function(t,e,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s="",u=!1;if(isFinite(t)){var c=function(t){var e,n,r,i,o,a=Math.abs(t)+"",s=0;for((n=a.indexOf("."))>-1&&(a=a.replace(".","")),(r=a.search(/e/i))>0?(n<0&&(n=r),n+=+a.slice(r+1),a=a.substring(0,r)):n<0&&(n=a.length),r=0;"0"===a.charAt(r);r++);if(r===(o=a.length))e=[0],n=1;else{for(o--;"0"===a.charAt(o);)o--;for(n-=r,e=[],i=0;r<=o;r++,i++)e[i]=Number(a.charAt(r))}return n>22&&(e=e.splice(0,21),s=n-1,n=1),{digits:e,exponent:s,integerLen:n}}(t);a&&(c=function(t){if(0===t.digits[0])return t;var e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===e?t.digits.push(0,0):1===e&&t.digits.push(0),t.integerLen+=2),t}(c));var l=e.minInt,h=e.minFrac,f=e.maxFrac;if(o){var d=o.match(J);if(null===d)throw new Error(o+" is not a valid digit info");var p=d[1],v=d[3],y=d[5];null!=p&&(l=Q(p)),null!=v&&(h=Q(v)),null!=y?f=Q(y):null!=v&&h>f&&(f=h)}!function(t,e,n){if(e>n)throw new Error("The minimum number of digits after fraction (".concat(e,") is higher than the maximum (").concat(n,")."));var r=t.digits,i=r.length-t.integerLen,o=Math.min(Math.max(e,i),n),a=o+t.integerLen,s=r[a];if(a>0){r.splice(Math.max(t.integerLen,a));for(var u=a;u<r.length;u++)r[u]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,a=o+1),r[0]=0;for(var c=1;c<a;c++)r[c]=0}if(s>=5)if(a-1<0){for(var l=0;l>a;l--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[a-1]++;for(;i<Math.max(0,o);i++)r.push(0);var h=0!==o,f=e+t.integerLen,d=r.reduceRight((function(t,e,n,r){return r[n]=(e+=t)<10?e:e-10,h&&(0===r[n]&&n>=f?r.pop():h=!1),e>=10?1:0}),0);d&&(r.unshift(d),t.integerLen++)}(c,h,f);var g=c.digits,m=c.integerLen,b=c.exponent,_=[];for(u=g.every((function(t){return!t}));m<l;m++)g.unshift(0);for(;m<0;m++)g.unshift(0);m>0?_=g.splice(m,g.length):(_=g,g=[0]);var w=[];for(g.length>=e.lgSize&&w.unshift(g.splice(-e.lgSize,g.length).join(""));g.length>e.gSize;)w.unshift(g.splice(-e.gSize,g.length).join(""));g.length&&w.unshift(g.join("")),s=w.join(K(n,r)),_.length&&(s+=K(n,i)+_.join("")),b&&(s+=K(n,H.Exponential)+"+"+b)}else s=K(n,H.Infinity);return s=t<0&&!u?e.negPre+s+e.negSuf:e.posPre+s+e.posSuf}(t,function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(";"),i=r[0],o=r[1],a=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],s=a[0],u=a[1]||"";n.posPre=s.substr(0,s.indexOf("#"));for(var c=0;c<u.length;c++){var l=u.charAt(c);"0"===l?n.minFrac=n.maxFrac=c+1:"#"===l?n.maxFrac=c+1:n.posSuf+=l}var h=s.split(",");if(n.gSize=h[1]?h[1].length:0,n.lgSize=h[2]||h[1]?(h[2]||h[1]).length:0,o){var f=i.length-n.posPre.length-n.posSuf.length,d=o.indexOf("#");n.negPre=o.substr(0,d).replace(/'/g,""),n.negSuf=o.substr(d+f).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}(function(t,e){return Object(s.jb)(t)[s.ab.NumberFormats][e]}(e,B.Decimal),K(e,H.MinusSign)),e,H.Group,H.Decimal,n)}(function(t){if("string"==typeof t&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if("number"!=typeof t)throw new Error(t+" is not a number");return t}(e),r,n)}catch(i){throw ft(t,i.message)}}}]),t}()).\u0275fac=function(t){return new(t||pt)(s.Jb(s.u))},pt.\u0275pipe=s.Ib({name:"number",type:pt,pure:!0}),pt),wt=((dt=function t(){h(this,t)}).\u0275mod=s.Hb({type:dt}),dt.\u0275inj=s.Gb({factory:function(t){return new(t||dt)},providers:[{provide:X,useClass:Z}]}),dt);function kt(t){return"server"===t}var Ot,Ct=((Ot=function t(){h(this,t)}).\u0275prov=Object(s.Fb)({token:Ot,providedIn:"root",factory:function(){return new St(Object(s.Sb)(b),window,Object(s.Sb)(s.m))}}),Ot),St=function(){function t(e,n,r){h(this,t),this.document=e,this.window=n,this.errorHandler=r,this.offset=function(){return[0,0]}}return d(t,[{key:"setOffset",value:function(t){this.offset=Array.isArray(t)?function(){return t}:t}},{key:"getScrollPosition",value:function(){return this.supportsScrolling()?[this.window.scrollX,this.window.scrollY]:[0,0]}},{key:"scrollToPosition",value:function(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}},{key:"scrollToAnchor",value:function(t){if(this.supportsScrolling()){var e=this.document.getElementById(t)||this.document.getElementsByName(t)[0];e&&this.scrollToElement(e)}}},{key:"setHistoryScrollRestoration",value:function(t){if(this.supportScrollRestoration()){var e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}},{key:"scrollToElement",value:function(t){var e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}},{key:"supportScrollRestoration",value:function(){try{if(!this.window||!this.window.scrollTo)return!1;var t=Et(this.window.history)||Et(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(e){return!1}}},{key:"supportsScrolling",value:function(){try{return!!this.window.scrollTo}catch(t){return!1}}}]),t}();function Et(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}var Tt,It,xt,Nt,At=function(t){p(n,t);var e=y(n);function n(){return h(this,n),e.apply(this,arguments)}return d(n,[{key:"getProperty",value:function(t,e){return t[e]}},{key:"log",value:function(t){window.console&&window.console.log&&window.console.log(t)}},{key:"logGroup",value:function(t){window.console&&window.console.group&&window.console.group(t)}},{key:"logGroupEnd",value:function(){window.console&&window.console.groupEnd&&window.console.groupEnd()}},{key:"onAndCancel",value:function(t,e,n){return t.addEventListener(e,n,!1),function(){t.removeEventListener(e,n,!1)}}},{key:"dispatchEvent",value:function(t,e){t.dispatchEvent(e)}},{key:"remove",value:function(t){return t.parentNode&&t.parentNode.removeChild(t),t}},{key:"getValue",value:function(t){return t.value}},{key:"createElement",value:function(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"isElementNode",value:function(t){return t.nodeType===Node.ELEMENT_NODE}},{key:"isShadowRoot",value:function(t){return t instanceof DocumentFragment}},{key:"getGlobalEventTarget",value:function(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}},{key:"getHistory",value:function(){return window.history}},{key:"getLocation",value:function(){return window.location}},{key:"getBaseHref",value:function(t){var e,n=jt||(jt=document.querySelector("base"))?jt.getAttribute("href"):null;return null==n?null:(e=n,Tt||(Tt=document.createElement("a")),Tt.setAttribute("href",e),"/"===Tt.pathname.charAt(0)?Tt.pathname:"/"+Tt.pathname)}},{key:"resetBaseElement",value:function(){jt=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"performanceNow",value:function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}},{key:"supportsCookies",value:function(){return!0}},{key:"getCookie",value:function(t){return $(document.cookie,t)}}],[{key:"makeCurrent",value:function(){var t;t=new n,c||(c=t)}}]),n}(function(t){p(n,t);var e=y(n);function n(){return h(this,n),e.call(this)}return d(n,[{key:"supportsDOMEvents",value:function(){return!0}}]),n}(function(){return function t(){h(this,t)}}())),jt=null,Pt=new s.q("TRANSITION_ID"),Rt=[{provide:s.d,useFactory:function(t,e,n){return function(){n.get(s.e).donePromise.then((function(){var n=f();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter((function(e){return e.getAttribute("ng-transition")===t})).forEach((function(t){return n.remove(t)}))}))}},deps:[Pt,b,s.r],multi:!0}],Dt=function(){function t(){h(this,t)}return d(t,[{key:"addToWindow",value:function(t){s.ob.getAngularTestability=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},s.ob.getAllAngularTestabilities=function(){return t.getAllTestabilities()},s.ob.getAllAngularRootElements=function(){return t.getAllRootElements()},s.ob.frameworkStabilizers||(s.ob.frameworkStabilizers=[]),s.ob.frameworkStabilizers.push((function(t){var e=s.ob.getAllAngularTestabilities(),n=e.length,r=!1,i=function(e){r=r||e,0==--n&&t(r)};e.forEach((function(t){t.whenStable(i)}))}))}},{key:"findTestabilityInTree",value:function(t,e,n){if(null==e)return null;var r=t.getTestability(e);return null!=r?r:n?f().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}],[{key:"init",value:function(){Object(s.X)(new t)}}]),t}(),Lt=new s.q("EventManagerPlugins"),Mt=((It=function(){function t(e,n){var r=this;h(this,t),this._zone=n,this._eventNameToPlugin=new Map,e.forEach((function(t){return t.manager=r})),this._plugins=e.slice().reverse()}return d(t,[{key:"addEventListener",value:function(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}},{key:"addGlobalEventListener",value:function(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(t){var e=this._eventNameToPlugin.get(t);if(e)return e;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(t))return this._eventNameToPlugin.set(t,i),i}throw new Error("No event manager plugin found for event "+t)}}]),t}()).\u0275fac=function(t){return new(t||It)(s.Sb(Lt),s.Sb(s.z))},It.\u0275prov=s.Fb({token:It,factory:It.\u0275fac}),It),Ft=function(){function t(e){h(this,t),this._doc=e}return d(t,[{key:"addGlobalEventListener",value:function(t,e,n){var r=f().getGlobalEventTarget(this._doc,t);if(!r)throw new Error("Unsupported event target ".concat(r," for event ").concat(e));return this.addEventListener(r,e,n)}}]),t}(),Ut=((Nt=function(){function t(){h(this,t),this._stylesSet=new Set}return d(t,[{key:"addStyles",value:function(t){var e=this,n=new Set;t.forEach((function(t){e._stylesSet.has(t)||(e._stylesSet.add(t),n.add(t))})),this.onStylesAdded(n)}},{key:"onStylesAdded",value:function(t){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),t}()).\u0275fac=function(t){return new(t||Nt)},Nt.\u0275prov=s.Fb({token:Nt,factory:Nt.\u0275fac}),Nt),qt=((xt=function(t){p(n,t);var e=y(n);function n(t){var r;return h(this,n),(r=e.call(this))._doc=t,r._hostNodes=new Set,r._styleNodes=new Set,r._hostNodes.add(t.head),r}return d(n,[{key:"_addStylesToHost",value:function(t,e){var n=this;t.forEach((function(t){var r=n._doc.createElement("style");r.textContent=t,n._styleNodes.add(e.appendChild(r))}))}},{key:"addHost",value:function(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}},{key:"removeHost",value:function(t){this._hostNodes.delete(t)}},{key:"onStylesAdded",value:function(t){var e=this;this._hostNodes.forEach((function(n){return e._addStylesToHost(t,n)}))}},{key:"ngOnDestroy",value:function(){this._styleNodes.forEach((function(t){return f().remove(t)}))}}]),n}(Ut)).\u0275fac=function(t){return new(t||xt)(s.Sb(b))},xt.\u0275prov=s.Fb({token:xt,factory:xt.\u0275fac}),xt),Vt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},zt=/%COMP%/g;function Bt(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];Array.isArray(i)?Bt(t,i,n):(i=i.replace(zt,t),n.push(i))}return n}function Wt(t){return function(e){if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}var Ht,Kt,Gt,Jt,Qt,Yt,Xt=((Ht=function(){function t(e,n,r){h(this,t),this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Zt(e)}return d(t,[{key:"createRenderer",value:function(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case s.R.Emulated:var n=this.rendererByCompId.get(e.id);return n||(n=new $t(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n;case s.R.Native:case s.R.ShadowDom:return new te(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){var r=Bt(e.id,e.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||Ht)(s.Sb(Mt),s.Sb(qt),s.Sb(s.c))},Ht.\u0275prov=s.Fb({token:Ht,factory:Ht.\u0275fac}),Ht),Zt=function(){function t(e){h(this,t),this.eventManager=e,this.data=Object.create(null)}return d(t,[{key:"destroy",value:function(){}},{key:"createElement",value:function(t,e){return e?document.createElementNS(Vt[e]||e,t):document.createElement(t)}},{key:"createComment",value:function(t){return document.createComment(t)}},{key:"createText",value:function(t){return document.createTextNode(t)}},{key:"appendChild",value:function(t,e){t.appendChild(e)}},{key:"insertBefore",value:function(t,e,n){t&&t.insertBefore(e,n)}},{key:"removeChild",value:function(t,e){t&&t.removeChild(e)}},{key:"selectRootElement",value:function(t,e){var n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error('The selector "'.concat(t,'" did not match any elements'));return e||(n.textContent=""),n}},{key:"parentNode",value:function(t){return t.parentNode}},{key:"nextSibling",value:function(t){return t.nextSibling}},{key:"setAttribute",value:function(t,e,n,r){if(r){e=r+":"+e;var i=Vt[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}},{key:"removeAttribute",value:function(t,e,n){if(n){var r=Vt[n];r?t.removeAttributeNS(r,e):t.removeAttribute("".concat(n,":").concat(e))}else t.removeAttribute(e)}},{key:"addClass",value:function(t,e){t.classList.add(e)}},{key:"removeClass",value:function(t,e){t.classList.remove(e)}},{key:"setStyle",value:function(t,e,n,r){r&s.G.DashCase?t.style.setProperty(e,n,r&s.G.Important?"important":""):t.style[e]=n}},{key:"removeStyle",value:function(t,e,n){n&s.G.DashCase?t.style.removeProperty(e):t.style[e]=""}},{key:"setProperty",value:function(t,e,n){t[e]=n}},{key:"setValue",value:function(t,e){t.nodeValue=e}},{key:"listen",value:function(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Wt(n)):this.eventManager.addEventListener(t,e,Wt(n))}}]),t}(),$t=function(t){p(n,t);var e=y(n);function n(t,r,i,o){var a;h(this,n),(a=e.call(this,t)).component=i;var s=Bt(o+"-"+i.id,i.styles,[]);return r.addStyles(s),a.contentAttr="_ngcontent-%COMP%".replace(zt,o+"-"+i.id),a.hostAttr="_nghost-%COMP%".replace(zt,o+"-"+i.id),a}return d(n,[{key:"applyToHost",value:function(t){l(_(n.prototype),"setAttribute",this).call(this,t,this.hostAttr,"")}},{key:"createElement",value:function(t,e){var r=l(_(n.prototype),"createElement",this).call(this,t,e);return l(_(n.prototype),"setAttribute",this).call(this,r,this.contentAttr,""),r}}]),n}(Zt),te=function(t){p(n,t);var e=y(n);function n(t,r,i,o){var a;h(this,n),(a=e.call(this,t)).sharedStylesHost=r,a.hostEl=i,a.component=o,a.shadowRoot=o.encapsulation===s.R.ShadowDom?i.attachShadow({mode:"open"}):i.createShadowRoot(),a.sharedStylesHost.addHost(a.shadowRoot);for(var u=Bt(o.id,o.styles,[]),c=0;c<u.length;c++){var l=document.createElement("style");l.textContent=u[c],a.shadowRoot.appendChild(l)}return a}return d(n,[{key:"nodeOrShadowRoot",value:function(t){return t===this.hostEl?this.shadowRoot:t}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(t,e){return l(_(n.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(t),e)}},{key:"insertBefore",value:function(t,e,r){return l(_(n.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(t),e,r)}},{key:"removeChild",value:function(t,e){return l(_(n.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(t),e)}},{key:"parentNode",value:function(t){return this.nodeOrShadowRoot(l(_(n.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(t)))}}]),n}(Zt),ee=((Kt=function(t){p(n,t);var e=y(n);function n(t){return h(this,n),e.call(this,t)}return d(n,[{key:"supports",value:function(t){return!0}},{key:"addEventListener",value:function(t,e,n){var r=this;return t.addEventListener(e,n,!1),function(){return r.removeEventListener(t,e,n)}}},{key:"removeEventListener",value:function(t,e,n){return t.removeEventListener(e,n)}}]),n}(Ft)).\u0275fac=function(t){return new(t||Kt)(s.Sb(b))},Kt.\u0275prov=s.Fb({token:Kt,factory:Kt.\u0275fac}),Kt),ne=["alt","control","meta","shift"],re={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ie={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},oe={alt:function(t){return t.altKey},control:function(t){return t.ctrlKey},meta:function(t){return t.metaKey},shift:function(t){return t.shiftKey}},ae=((Qt=function(t){p(n,t);var e=y(n);function n(t){return h(this,n),e.call(this,t)}return d(n,[{key:"supports",value:function(t){return null!=n.parseEventName(t)}},{key:"addEventListener",value:function(t,e,r){var i=n.parseEventName(e),o=n.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular((function(){return f().onAndCancel(t,i.domEventName,o)}))}}],[{key:"parseEventName",value:function(t){var e=t.toLowerCase().split("."),r=e.shift();if(0===e.length||"keydown"!==r&&"keyup"!==r)return null;var i=n._normalizeKey(e.pop()),o="";if(ne.forEach((function(t){var n=e.indexOf(t);n>-1&&(e.splice(n,1),o+=t+".")})),o+=i,0!=e.length||0===i.length)return null;var a={};return a.domEventName=r,a.fullKey=o,a}},{key:"getEventFullKey",value:function(t){var e="",n=function(t){var e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&ie.hasOwnProperty(e)&&(e=ie[e]))}return re[e]||e}(t);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),ne.forEach((function(r){r!=n&&(0,oe[r])(t)&&(e+=r+".")})),e+=n}},{key:"eventCallback",value:function(t,e,r){return function(i){n.getEventFullKey(i)===t&&r.runGuarded((function(){return e(i)}))}}},{key:"_normalizeKey",value:function(t){switch(t){case"esc":return"escape";default:return t}}}]),n}(Ft)).\u0275fac=function(t){return new(t||Qt)(s.Sb(b))},Qt.\u0275prov=s.Fb({token:Qt,factory:Qt.\u0275fac}),Qt),se=((Jt=function t(){h(this,t)}).\u0275fac=function(t){return new(t||Jt)},Jt.\u0275prov=Object(s.Fb)({factory:function(){return Object(s.Sb)(ue)},token:Jt,providedIn:"root"}),Jt),ue=((Gt=function(t){p(n,t);var e=y(n);function n(t){var r;return h(this,n),(r=e.call(this))._doc=t,r}return d(n,[{key:"sanitize",value:function(t,e){if(null==e)return null;switch(t){case s.I.NONE:return e;case s.I.HTML:return Object(s.db)(e,"HTML")?Object(s.vb)(e):Object(s.bb)(this._doc,String(e));case s.I.STYLE:return Object(s.db)(e,"Style")?Object(s.vb)(e):e;case s.I.SCRIPT:if(Object(s.db)(e,"Script"))return Object(s.vb)(e);throw new Error("unsafe value used in a script context");case s.I.URL:return Object(s.nb)(e),Object(s.db)(e,"URL")?Object(s.vb)(e):Object(s.cb)(String(e));case s.I.RESOURCE_URL:if(Object(s.db)(e,"ResourceURL"))return Object(s.vb)(e);throw new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext ".concat(t," (see http://g.co/ng/security#xss)"))}}},{key:"bypassSecurityTrustHtml",value:function(t){return Object(s.eb)(t)}},{key:"bypassSecurityTrustStyle",value:function(t){return Object(s.hb)(t)}},{key:"bypassSecurityTrustScript",value:function(t){return Object(s.gb)(t)}},{key:"bypassSecurityTrustUrl",value:function(t){return Object(s.ib)(t)}},{key:"bypassSecurityTrustResourceUrl",value:function(t){return Object(s.fb)(t)}}]),n}(se)).\u0275fac=function(t){return new(t||Gt)(s.Sb(b))},Gt.\u0275prov=Object(s.Fb)({factory:function(){return t=Object(s.Sb)(s.o),new ue(t.get(b));var t},token:Gt,providedIn:"root"}),Gt),ce=[{provide:s.B,useValue:"browser"},{provide:s.C,useValue:function(){At.makeCurrent(),Dt.init()},multi:!0},{provide:b,useFactory:function(){return Object(s.tb)(document),document},deps:[]}],le=Object(s.S)(s.W,"browser",ce),he=[[],{provide:s.Z,useValue:"root"},{provide:s.m,useFactory:function(){return new s.m},deps:[]},{provide:Lt,useClass:ee,multi:!0,deps:[b,s.z,s.B]},{provide:Lt,useClass:ae,multi:!0,deps:[b]},[],{provide:Xt,useClass:Xt,deps:[Mt,qt,s.c]},{provide:s.F,useExisting:Xt},{provide:Ut,useExisting:qt},{provide:qt,useClass:qt,deps:[b]},{provide:s.M,useClass:s.M,deps:[s.z]},{provide:Mt,useClass:Mt,deps:[Lt,s.z]},[]],fe=((Yt=function(){function t(e){if(h(this,t),e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return d(t,null,[{key:"withServerTransition",value:function(e){return{ngModule:t,providers:[{provide:s.c,useValue:e.appId},{provide:Pt,useExisting:s.c},Rt]}}}]),t}()).\u0275mod=s.Hb({type:Yt}),Yt.\u0275inj=s.Gb({factory:function(t){return new(t||Yt)(s.Sb(Yt,12))},providers:he,imports:[wt,s.f]}),Yt);"undefined"!=typeof window&&window;var de=o("HDdC"),pe=o("DH7j"),ve=o("lJxs"),ye=o("XoHu"),ge=o("Cfvw");function me(t,e){return new de.a((function(n){var r=t.length;if(0!==r)for(var i=new Array(r),o=0,a=0,s=function(s){var u=Object(ge.a)(t[s]),c=!1;n.add(u.subscribe({next:function(t){c||(c=!0,a++),i[s]=t},error:function(t){return n.error(t)},complete:function(){++o!==r&&c||(a===r&&n.next(e?e.reduce((function(t,e,n){return t[e]=i[n],t}),{}):i),n.complete())}}))},u=0;u<r;u++)s(u);else n.complete()}))}var be,_e,we,ke,Oe,Ce=new s.q("NgValueAccessor"),Se={provide:Ce,useExisting:Object(s.U)((function(){return Ee})),multi:!0},Ee=((be=function(){function t(e,n){h(this,t),this._renderer=e,this._elementRef=n,this.onChange=function(t){},this.onTouched=function(){}}return d(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}},{key:"registerOnChange",value:function(t){this.onChange=t}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}]),t}()).\u0275fac=function(t){return new(t||be)(s.Jb(s.E),s.Jb(s.l))},be.\u0275dir=s.Eb({type:be,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&s.Vb("change",(function(t){return e.onChange(t.target.checked)}))("blur",(function(){return e.onTouched()}))},features:[s.yb([Se])]}),be),Te={provide:Ce,useExisting:Object(s.U)((function(){return xe})),multi:!0},Ie=new s.q("CompositionEventMode"),xe=((ke=function(){function t(e,n,r){var i;h(this,t),this._renderer=e,this._elementRef=n,this._compositionMode=r,this.onChange=function(t){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(i=f()?f().getUserAgent():"",!/android (\d+)/.test(i.toLowerCase())))}return d(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}},{key:"registerOnChange",value:function(t){this.onChange=t}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_handleInput",value:function(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}},{key:"_compositionStart",value:function(){this._composing=!0}},{key:"_compositionEnd",value:function(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}]),t}()).\u0275fac=function(t){return new(t||ke)(s.Jb(s.E),s.Jb(s.l),s.Jb(Ie,8))},ke.\u0275dir=s.Eb({type:ke,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&s.Vb("input",(function(t){return e._handleInput(t.target.value)}))("blur",(function(){return e.onTouched()}))("compositionstart",(function(){return e._compositionStart()}))("compositionend",(function(t){return e._compositionEnd(t.target.value)}))},features:[s.yb([Te])]}),ke),Ne=((we=function(){function t(){h(this,t)}return d(t,[{key:"value",get:function(){return this.control?this.control.value:null}},{key:"valid",get:function(){return this.control?this.control.valid:null}},{key:"invalid",get:function(){return this.control?this.control.invalid:null}},{key:"pending",get:function(){return this.control?this.control.pending:null}},{key:"disabled",get:function(){return this.control?this.control.disabled:null}},{key:"enabled",get:function(){return this.control?this.control.enabled:null}},{key:"errors",get:function(){return this.control?this.control.errors:null}},{key:"pristine",get:function(){return this.control?this.control.pristine:null}},{key:"dirty",get:function(){return this.control?this.control.dirty:null}},{key:"touched",get:function(){return this.control?this.control.touched:null}},{key:"status",get:function(){return this.control?this.control.status:null}},{key:"untouched",get:function(){return this.control?this.control.untouched:null}},{key:"statusChanges",get:function(){return this.control?this.control.statusChanges:null}},{key:"valueChanges",get:function(){return this.control?this.control.valueChanges:null}},{key:"path",get:function(){return null}},{key:"reset",value:function(t){this.control&&this.control.reset(t)}},{key:"hasError",value:function(t,e){return!!this.control&&this.control.hasError(t,e)}},{key:"getError",value:function(t,e){return this.control?this.control.getError(t,e):null}}]),t}()).\u0275fac=function(t){return new(t||we)},we.\u0275dir=s.Eb({type:we}),we),Ae=((_e=function(t){p(n,t);var e=y(n);function n(){return h(this,n),e.apply(this,arguments)}return d(n,[{key:"formDirective",get:function(){return null}},{key:"path",get:function(){return null}}]),n}(Ne)).\u0275fac=function(t){return je(t||_e)},_e.\u0275dir=s.Eb({type:_e,features:[s.wb]}),_e),je=s.Qb(Ae),Pe=function(t){p(n,t);var e=y(n);function n(){var t;return h(this,n),(t=e.apply(this,arguments))._parent=null,t.name=null,t.valueAccessor=null,t._rawValidators=[],t._rawAsyncValidators=[],t}return d(n,[{key:"validator",get:function(){}},{key:"asyncValidator",get:function(){}}]),n}(Ne),Re=((Oe=function(t){p(n,t);var e=y(n);function n(t){return h(this,n),e.call(this,t)}return n}(function(){function t(e){h(this,t),this._cd=e}return d(t,[{key:"ngClassUntouched",get:function(){return!!this._cd.control&&this._cd.control.untouched}},{key:"ngClassTouched",get:function(){return!!this._cd.control&&this._cd.control.touched}},{key:"ngClassPristine",get:function(){return!!this._cd.control&&this._cd.control.pristine}},{key:"ngClassDirty",get:function(){return!!this._cd.control&&this._cd.control.dirty}},{key:"ngClassValid",get:function(){return!!this._cd.control&&this._cd.control.valid}},{key:"ngClassInvalid",get:function(){return!!this._cd.control&&this._cd.control.invalid}},{key:"ngClassPending",get:function(){return!!this._cd.control&&this._cd.control.pending}}]),t}())).\u0275fac=function(t){return new(t||Oe)(s.Jb(Pe,2))},Oe.\u0275dir=s.Eb({type:Oe,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&s.Bb("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[s.wb]}),Oe);function De(t){return null==t||0===t.length}function Le(t){return null!=t&&"number"==typeof t.length}var Me=new s.q("NgValidators"),Fe=new s.q("NgAsyncValidators"),Ue=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,qe=function(){function t(){h(this,t)}return d(t,null,[{key:"min",value:function(t){return function(e){if(De(e.value)||De(t))return null;var n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}},{key:"max",value:function(t){return function(e){if(De(e.value)||De(t))return null;var n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}},{key:"required",value:function(t){return De(t.value)?{required:!0}:null}},{key:"requiredTrue",value:function(t){return!0===t.value?null:{required:!0}}},{key:"email",value:function(t){return De(t.value)||Ue.test(t.value)?null:{email:!0}}},{key:"minLength",value:function(t){return function(e){return De(e.value)||!Le(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}}},{key:"maxLength",value:function(t){return function(e){return Le(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}}},{key:"pattern",value:function(e){return e?("string"==typeof e?(r="","^"!==e.charAt(0)&&(r+="^"),r+=e,"$"!==e.charAt(e.length-1)&&(r+="$"),n=new RegExp(r)):(r=e.toString(),n=e),function(t){if(De(t.value))return null;var e=t.value;return n.test(e)?null:{pattern:{requiredPattern:r,actualValue:e}}}):t.nullValidator;var n,r}},{key:"nullValidator",value:function(t){return null}},{key:"compose",value:function(t){if(!t)return null;var e=t.filter(Ve);return 0==e.length?null:function(t){return Be(We(t,e))}}},{key:"composeAsync",value:function(t){if(!t)return null;var e=t.filter(Ve);return 0==e.length?null:function(t){return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(1===e.length){var r=e[0];if(Object(pe.a)(r))return me(r,null);if(Object(ye.a)(r)&&Object.getPrototypeOf(r)===Object.prototype){var o=Object.keys(r);return me(o.map((function(t){return r[t]})),o)}}if("function"==typeof e[e.length-1]){var a=e.pop();return me(e=1===e.length&&Object(pe.a)(e[0])?e[0]:e,null).pipe(Object(ve.a)((function(t){return a.apply(void 0,i(t))})))}return me(e,null)}(We(t,e).map(ze)).pipe(Object(ve.a)(Be))}}}]),t}();function Ve(t){return null!=t}function ze(t){var e=Object(s.rb)(t)?Object(ge.a)(t):t;return Object(s.qb)(e),e}function Be(t){var e={};return t.forEach((function(t){e=null!=t?Object.assign(Object.assign({},e),t):e})),0===Object.keys(e).length?null:e}function We(t,e){return e.map((function(e){return e(t)}))}function He(t){return t.map((function(t){return function(t){return!t.validate}(t)?t:function(e){return t.validate(e)}}))}var Ke,Ge,Je,Qe,Ye={provide:Ce,useExisting:Object(s.U)((function(){return Xe})),multi:!0},Xe=((Ke=function(){function t(e,n){h(this,t),this._renderer=e,this._elementRef=n,this.onChange=function(t){},this.onTouched=function(){}}return d(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}},{key:"registerOnChange",value:function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}]),t}()).\u0275fac=function(t){return new(t||Ke)(s.Jb(s.E),s.Jb(s.l))},Ke.\u0275dir=s.Eb({type:Ke,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&s.Vb("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[s.yb([Ye])]}),Ke),Ze={provide:Ce,useExisting:Object(s.U)((function(){return tn})),multi:!0},$e=((Je=function(){function t(){h(this,t),this._accessors=[]}return d(t,[{key:"add",value:function(t,e){this._accessors.push([t,e])}},{key:"remove",value:function(t){for(var e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}},{key:"select",value:function(t){var e=this;this._accessors.forEach((function(n){e._isSameGroup(n,t)&&n[1]!==t&&n[1].fireUncheck(t.value)}))}},{key:"_isSameGroup",value:function(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}]),t}()).\u0275fac=function(t){return new(t||Je)},Je.\u0275prov=s.Fb({token:Je,factory:Je.\u0275fac}),Je),tn=((Ge=function(){function t(e,n,r,i){h(this,t),this._renderer=e,this._elementRef=n,this._registry=r,this._injector=i,this.onChange=function(){},this.onTouched=function(){}}return d(t,[{key:"ngOnInit",value:function(){this._control=this._injector.get(Pe),this._checkName(),this._registry.add(this._control,this)}},{key:"ngOnDestroy",value:function(){this._registry.remove(this)}},{key:"writeValue",value:function(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}},{key:"registerOnChange",value:function(t){var e=this;this._fn=t,this.onChange=function(){t(e.value),e._registry.select(e)}}},{key:"fireUncheck",value:function(t){this.writeValue(t)}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_checkName",value:function(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}]),t}()).\u0275fac=function(t){return new(t||Ge)(s.Jb(s.E),s.Jb(s.l),s.Jb($e),s.Jb(s.r))},Ge.\u0275dir=s.Eb({type:Ge,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&s.Vb("change",(function(){return e.onChange()}))("blur",(function(){return e.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[s.yb([Ze])]}),Ge),en={provide:Ce,useExisting:Object(s.U)((function(){return nn})),multi:!0},nn=((Qe=function(){function t(e,n){h(this,t),this._renderer=e,this._elementRef=n,this.onChange=function(t){},this.onTouched=function(){}}return d(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}},{key:"registerOnChange",value:function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}]),t}()).\u0275fac=function(t){return new(t||Qe)(s.Jb(s.E),s.Jb(s.l))},Qe.\u0275dir=s.Eb({type:Qe,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&s.Vb("change",(function(t){return e.onChange(t.target.value)}))("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[s.yb([en])]}),Qe),rn={provide:Ce,useExisting:Object(s.U)((function(){return un})),multi:!0};function on(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),"".concat(t,": ").concat(e).slice(0,50))}var an,sn,un=((sn=function(){function t(e,n){h(this,t),this._renderer=e,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(t){},this.onTouched=function(){},this._compareWith=Object.is}return d(t,[{key:"compareWith",set:function(t){this._compareWith=t}},{key:"writeValue",value:function(t){this.value=t;var e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);var n=on(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}},{key:"registerOnChange",value:function(t){var e=this;this.onChange=function(n){e.value=e._getOptionValue(n),t(e.value)}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_registerOption",value:function(){return(this._idCounter++).toString()}},{key:"_getOptionId",value:function(t){for(var e=0,n=Array.from(this._optionMap.keys());e<n.length;e++){var r=n[e];if(this._compareWith(this._optionMap.get(r),t))return r}return null}},{key:"_getOptionValue",value:function(t){var e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}]),t}()).\u0275fac=function(t){return new(t||sn)(s.Jb(s.E),s.Jb(s.l))},sn.\u0275dir=s.Eb({type:sn,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&s.Vb("change",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[s.yb([rn])]}),sn),cn=((an=function(){function t(e,n,r){h(this,t),this._element=e,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption())}return d(t,[{key:"ngValue",set:function(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(on(this.id,t)),this._select.writeValue(this._select.value))}},{key:"value",set:function(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}},{key:"_setElementValue",value:function(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}},{key:"ngOnDestroy",value:function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}]),t}()).\u0275fac=function(t){return new(t||an)(s.Jb(s.l),s.Jb(s.E),s.Jb(un,9))},an.\u0275dir=s.Eb({type:an,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),an),ln={provide:Ce,useExisting:Object(s.U)((function(){return pn})),multi:!0};function hn(t,e){return null==t?""+e:("string"==typeof e&&(e="'".concat(e,"'")),e&&"object"==typeof e&&(e="Object"),"".concat(t,": ").concat(e).slice(0,50))}var fn,dn,pn=((dn=function(){function t(e,n){h(this,t),this._renderer=e,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(t){},this.onTouched=function(){},this._compareWith=Object.is}return d(t,[{key:"compareWith",set:function(t){this._compareWith=t}},{key:"writeValue",value:function(t){var e,n=this;if(this.value=t,Array.isArray(t)){var r=t.map((function(t){return n._getOptionId(t)}));e=function(t,e){t._setSelected(r.indexOf(e.toString())>-1)}}else e=function(t,e){t._setSelected(!1)};this._optionMap.forEach(e)}},{key:"registerOnChange",value:function(t){var e=this;this.onChange=function(n){var r=[];if(void 0!==n.selectedOptions)for(var i=n.selectedOptions,o=0;o<i.length;o++){var a=i.item(o),s=e._getOptionValue(a.value);r.push(s)}else for(var u=n.options,c=0;c<u.length;c++){var l=u.item(c);if(l.selected){var h=e._getOptionValue(l.value);r.push(h)}}e.value=r,t(r)}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_registerOption",value:function(t){var e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}},{key:"_getOptionId",value:function(t){for(var e=0,n=Array.from(this._optionMap.keys());e<n.length;e++){var r=n[e];if(this._compareWith(this._optionMap.get(r)._value,t))return r}return null}},{key:"_getOptionValue",value:function(t){var e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}]),t}()).\u0275fac=function(t){return new(t||dn)(s.Jb(s.E),s.Jb(s.l))},dn.\u0275dir=s.Eb({type:dn,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&s.Vb("change",(function(t){return e.onChange(t.target)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[s.yb([ln])]}),dn),vn=((fn=function(){function t(e,n,r){h(this,t),this._element=e,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption(this))}return d(t,[{key:"ngValue",set:function(t){null!=this._select&&(this._value=t,this._setElementValue(hn(this.id,t)),this._select.writeValue(this._select.value))}},{key:"value",set:function(t){this._select?(this._value=t,this._setElementValue(hn(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}},{key:"_setElementValue",value:function(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}},{key:"_setSelected",value:function(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}},{key:"ngOnDestroy",value:function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}]),t}()).\u0275fac=function(t){return new(t||fn)(s.Jb(s.l),s.Jb(s.E),s.Jb(pn,9))},fn.\u0275dir=s.Eb({type:fn,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),fn);function yn(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function gn(t){return null!=t?qe.compose(He(t)):null}function mn(t){return null!=t?qe.composeAsync(He(t)):null}var bn=[Ee,nn,Xe,un,pn,tn];function _n(t){return(Cn(t)?t.validators:t)||null}function wn(t){return Array.isArray(t)?gn(t):t||null}function kn(t,e){return(Cn(e)?e.asyncValidators:t)||null}function On(t){return Array.isArray(t)?mn(t):t||null}function Cn(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}var Sn,En,Tn,In,xn,Nn=function(){function t(e,n){h(this,t),this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=n,this._composedValidatorFn=wn(this._rawValidators),this._composedAsyncValidatorFn=On(this._rawAsyncValidators)}return d(t,[{key:"validator",get:function(){return this._composedValidatorFn},set:function(t){this._rawValidators=this._composedValidatorFn=t}},{key:"asyncValidator",get:function(){return this._composedAsyncValidatorFn},set:function(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}},{key:"parent",get:function(){return this._parent}},{key:"valid",get:function(){return"VALID"===this.status}},{key:"invalid",get:function(){return"INVALID"===this.status}},{key:"pending",get:function(){return"PENDING"==this.status}},{key:"disabled",get:function(){return"DISABLED"===this.status}},{key:"enabled",get:function(){return"DISABLED"!==this.status}},{key:"dirty",get:function(){return!this.pristine}},{key:"untouched",get:function(){return!this.touched}},{key:"updateOn",get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}},{key:"setValidators",value:function(t){this._rawValidators=t,this._composedValidatorFn=wn(t)}},{key:"setAsyncValidators",value:function(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=On(t)}},{key:"clearValidators",value:function(){this.validator=null}},{key:"clearAsyncValidators",value:function(){this.asyncValidator=null}},{key:"markAsTouched",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}},{key:"markAllAsTouched",value:function(){this.markAsTouched({onlySelf:!0}),this._forEachChild((function(t){return t.markAllAsTouched()}))}},{key:"markAsUntouched",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!1,this._pendingTouched=!1,this._forEachChild((function(t){t.markAsUntouched({onlySelf:!0})})),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}},{key:"markAsDirty",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}},{key:"markAsPristine",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!0,this._pendingDirty=!1,this._forEachChild((function(t){t.markAsPristine({onlySelf:!0})})),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}},{key:"markAsPending",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.status="PENDING",!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}},{key:"disable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._parentMarkedDirty(t.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild((function(e){e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))})),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach((function(t){return t(!0)}))}},{key:"enable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._parentMarkedDirty(t.onlySelf);this.status="VALID",this._forEachChild((function(e){e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))})),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach((function(t){return t(!1)}))}},{key:"_updateAncestors",value:function(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}},{key:"setParent",value:function(t){this._parent=t}},{key:"updateValueAndValidity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}},{key:"_updateTreeValidity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{emitEvent:!0};this._forEachChild((function(e){return e._updateTreeValidity(t)})),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}},{key:"_setInitialStatus",value:function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}},{key:"_runValidator",value:function(){return this.validator?this.validator(this):null}},{key:"_runAsyncValidator",value:function(t){var e=this;if(this.asyncValidator){this.status="PENDING",this._hasOwnPendingAsyncValidator=!0;var n=ze(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe((function(n){e._hasOwnPendingAsyncValidator=!1,e.setErrors(n,{emitEvent:t})}))}}},{key:"_cancelExistingSubscription",value:function(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}},{key:"setErrors",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}},{key:"get",value:function(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;var r=t;return e.forEach((function(t){r=r instanceof jn?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof Pn&&r.at(t)||null})),r}(this,t)}},{key:"getError",value:function(t,e){var n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}},{key:"hasError",value:function(t,e){return!!this.getError(t,e)}},{key:"root",get:function(){for(var t=this;t._parent;)t=t._parent;return t}},{key:"_updateControlsErrors",value:function(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}},{key:"_initObservables",value:function(){this.valueChanges=new s.n,this.statusChanges=new s.n}},{key:"_calculateStatus",value:function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}},{key:"_anyControlsHaveStatus",value:function(t){return this._anyControls((function(e){return e.status===t}))}},{key:"_anyControlsDirty",value:function(){return this._anyControls((function(t){return t.dirty}))}},{key:"_anyControlsTouched",value:function(){return this._anyControls((function(t){return t.touched}))}},{key:"_updatePristine",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}},{key:"_updateTouched",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}},{key:"_isBoxedValue",value:function(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}},{key:"_registerOnCollectionChange",value:function(t){this._onCollectionChange=t}},{key:"_setUpdateStrategy",value:function(t){Cn(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}},{key:"_parentMarkedDirty",value:function(t){return!t&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}]),t}(),An=function(t){p(n,t);var e=y(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;return h(this,n),(t=e.call(this,_n(i),kn(o,i)))._onChange=[],t._applyFormState(r),t._setUpdateStrategy(i),t.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),t._initObservables(),t}return d(n,[{key:"setValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.value=this._pendingValue=t,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach((function(t){return t(e.value,!1!==n.emitViewToModelChange)})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setValue(t,e)}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}},{key:"_updateValue",value:function(){}},{key:"_anyControls",value:function(t){return!1}},{key:"_allControlsDisabled",value:function(){return this.disabled}},{key:"registerOnChange",value:function(t){this._onChange.push(t)}},{key:"_clearChangeFns",value:function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}}},{key:"registerOnDisabledChange",value:function(t){this._onDisabledChange.push(t)}},{key:"_forEachChild",value:function(t){}},{key:"_syncPendingControls",value:function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}},{key:"_applyFormState",value:function(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}]),n}(Nn),jn=function(t){p(n,t);var e=y(n);function n(t,r,i){var o;return h(this,n),(o=e.call(this,_n(r),kn(i,r))).controls=t,o._initObservables(),o._setUpdateStrategy(r),o._setUpControls(),o.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),o}return d(n,[{key:"registerControl",value:function(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}},{key:"addControl",value:function(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"removeControl",value:function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange((function(){})),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setControl",value:function(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange((function(){})),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"contains",value:function(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}},{key:"setValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(t),Object.keys(t).forEach((function(r){e._throwIfControlMissing(r),e.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.keys(t).forEach((function(r){e.controls[r]&&e.controls[r].patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild((function(n,r){n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})})),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}},{key:"getRawValue",value:function(){return this._reduceChildren({},(function(t,e,n){return t[n]=e instanceof An?e.value:e.getRawValue(),t}))}},{key:"_syncPendingControls",value:function(){var t=this._reduceChildren(!1,(function(t,e){return!!e._syncPendingControls()||t}));return t&&this.updateValueAndValidity({onlySelf:!0}),t}},{key:"_throwIfControlMissing",value:function(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error("Cannot find form control with name: ".concat(t,"."))}},{key:"_forEachChild",value:function(t){var e=this;Object.keys(this.controls).forEach((function(n){return t(e.controls[n],n)}))}},{key:"_setUpControls",value:function(){var t=this;this._forEachChild((function(e){e.setParent(t),e._registerOnCollectionChange(t._onCollectionChange)}))}},{key:"_updateValue",value:function(){this.value=this._reduceValue()}},{key:"_anyControls",value:function(t){for(var e=0,n=Object.keys(this.controls);e<n.length;e++){var r=n[e],i=this.controls[r];if(this.contains(r)&&t(i))return!0}return!1}},{key:"_reduceValue",value:function(){var t=this;return this._reduceChildren({},(function(e,n,r){return(n.enabled||t.disabled)&&(e[r]=n.value),e}))}},{key:"_reduceChildren",value:function(t,e){var n=t;return this._forEachChild((function(t,r){n=e(n,t,r)})),n}},{key:"_allControlsDisabled",value:function(){for(var t=0,e=Object.keys(this.controls);t<e.length;t++){var n=e[t];if(this.controls[n].enabled)return!1}return Object.keys(this.controls).length>0||this.disabled}},{key:"_checkAllValuesPresent",value:function(t){this._forEachChild((function(e,n){if(void 0===t[n])throw new Error("Must supply a value for form control with name: '".concat(n,"'."))}))}}]),n}(Nn),Pn=function(t){p(n,t);var e=y(n);function n(t,r,i){var o;return h(this,n),(o=e.call(this,_n(r),kn(i,r))).controls=t,o._initObservables(),o._setUpdateStrategy(r),o._setUpControls(),o.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),o}return d(n,[{key:"at",value:function(t){return this.controls[t]}},{key:"push",value:function(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"insert",value:function(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}},{key:"removeAt",value:function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange((function(){})),this.controls.splice(t,1),this.updateValueAndValidity()}},{key:"setControl",value:function(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange((function(){})),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"length",get:function(){return this.controls.length}},{key:"setValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(t),t.forEach((function(t,r){e._throwIfControlMissing(r),e.at(r).setValue(t,{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.forEach((function(t,r){e.at(r)&&e.at(r).patchValue(t,{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild((function(n,r){n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})})),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}},{key:"getRawValue",value:function(){return this.controls.map((function(t){return t instanceof An?t.value:t.getRawValue()}))}},{key:"clear",value:function(){this.controls.length<1||(this._forEachChild((function(t){return t._registerOnCollectionChange((function(){}))})),this.controls.splice(0),this.updateValueAndValidity())}},{key:"_syncPendingControls",value:function(){var t=this.controls.reduce((function(t,e){return!!e._syncPendingControls()||t}),!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}},{key:"_throwIfControlMissing",value:function(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)}},{key:"_forEachChild",value:function(t){this.controls.forEach((function(e,n){t(e,n)}))}},{key:"_updateValue",value:function(){var t=this;this.value=this.controls.filter((function(e){return e.enabled||t.disabled})).map((function(t){return t.value}))}},{key:"_anyControls",value:function(t){return this.controls.some((function(e){return e.enabled&&t(e)}))}},{key:"_setUpControls",value:function(){var t=this;this._forEachChild((function(e){return t._registerControl(e)}))}},{key:"_checkAllValuesPresent",value:function(t){this._forEachChild((function(e,n){if(void 0===t[n])throw new Error("Must supply a value for form control at index: ".concat(n,"."))}))}},{key:"_allControlsDisabled",value:function(){var t,e=a(this.controls);try{for(e.s();!(t=e.n()).done;){if(t.value.enabled)return!1}}catch(n){e.e(n)}finally{e.f()}return this.controls.length>0||this.disabled}},{key:"_registerControl",value:function(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}]),n}(Nn),Rn={provide:Pe,useExisting:Object(s.U)((function(){return Ln}))},Dn=Promise.resolve(null),Ln=((Sn=function(t){p(n,t);var e=y(n);function n(t,r,i,o){var a;return h(this,n),(a=e.call(this)).control=new An,a._registered=!1,a.update=new s.n,a._parent=t,a._rawValidators=r||[],a._rawAsyncValidators=i||[],a.valueAccessor=function(t,e){if(!e)return null;Array.isArray(e);var n=void 0,r=void 0,i=void 0;return e.forEach((function(t){var e;t.constructor===xe?n=t:(e=t,bn.some((function(t){return e.constructor===t}))?r=t:i=t)})),i||r||n||null}(0,o),a}return d(n,[{key:"ngOnChanges",value:function(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;var n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeControl(this)}},{key:"path",get:function(){return this._parent?[].concat(i(this._parent.path),[this.name]):[this.name]}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"validator",get:function(){return gn(this._rawValidators)}},{key:"asyncValidator",get:function(){return mn(this._rawAsyncValidators)}},{key:"viewToModelUpdate",value:function(t){this.viewModel=t,this.update.emit(t)}},{key:"_setUpControl",value:function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}},{key:"_isStandalone",value:function(){return!this._parent||!(!this.options||!this.options.standalone)}},{key:"_setUpStandalone",value:function(){var t,e;(t=this.control).validator=qe.compose([t.validator,(e=this).validator]),t.asyncValidator=qe.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange((function(n){t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&yn(t,e)}))}(t,e),function(t,e){t.registerOnChange((function(t,n){e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)}))}(t,e),function(t,e){e.valueAccessor.registerOnTouched((function(){t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&yn(t,e),"submit"!==t.updateOn&&t.markAsTouched()}))}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange((function(t){e.valueAccessor.setDisabledState(t)})),e._rawValidators.forEach((function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange((function(){return t.updateValueAndValidity()}))})),e._rawAsyncValidators.forEach((function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange((function(){return t.updateValueAndValidity()}))})),this.control.updateValueAndValidity({emitEvent:!1})}},{key:"_checkForErrors",value:function(){this._isStandalone()||this._checkParentType(),this._checkName()}},{key:"_checkParentType",value:function(){}},{key:"_checkName",value:function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}},{key:"_updateValue",value:function(t){var e=this;Dn.then((function(){e.control.setValue(t,{emitViewToModelChange:!1})}))}},{key:"_updateDisabled",value:function(t){var e=this,n=t.isDisabled.currentValue,r=""===n||n&&"false"!==n;Dn.then((function(){r&&!e.control.disabled?e.control.disable():!r&&e.control.disabled&&e.control.enable()}))}}]),n}(Pe)).\u0275fac=function(t){return new(t||Sn)(s.Jb(Ae,9),s.Jb(Me,10),s.Jb(Fe,10),s.Jb(Ce,10))},Sn.\u0275dir=s.Eb({type:Sn,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[s.yb([Rn]),s.wb,s.xb]}),Sn),Mn=new s.q("NgModelWithFormControlWarning"),Fn=((xn=function t(){h(this,t)}).\u0275mod=s.Hb({type:xn}),xn.\u0275inj=s.Gb({factory:function(t){return new(t||xn)}}),xn),Un=((In=function(){function t(){h(this,t)}return d(t,[{key:"group",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this._reduceControls(t),r=null,i=null,o=void 0;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(r=null!=e.validators?e.validators:null,i=null!=e.asyncValidators?e.asyncValidators:null,o=null!=e.updateOn?e.updateOn:void 0):(r=null!=e.validator?e.validator:null,i=null!=e.asyncValidator?e.asyncValidator:null)),new jn(n,{asyncValidators:i,updateOn:o,validators:r})}},{key:"control",value:function(t,e,n){return new An(t,e,n)}},{key:"array",value:function(t,e,n){var r=this,i=t.map((function(t){return r._createControl(t)}));return new Pn(i,e,n)}},{key:"_reduceControls",value:function(t){var e=this,n={};return Object.keys(t).forEach((function(r){n[r]=e._createControl(t[r])})),n}},{key:"_createControl",value:function(t){return t instanceof An||t instanceof jn||t instanceof Pn?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}]),t}()).\u0275fac=function(t){return new(t||In)},In.\u0275prov=s.Fb({token:In,factory:In.\u0275fac}),In),qn=((Tn=function t(){h(this,t)}).\u0275mod=s.Hb({type:Tn}),Tn.\u0275inj=s.Gb({factory:function(t){return new(t||Tn)},providers:[$e],imports:[Fn]}),Tn),Vn=((En=function(){function t(){h(this,t)}return d(t,null,[{key:"withConfig",value:function(e){return{ngModule:t,providers:[{provide:Mn,useValue:e.warnOnNgModelWithFormControl}]}}}]),t}()).\u0275mod=s.Hb({type:En}),En.\u0275inj=s.Gb({factory:function(t){return new(t||En)},providers:[Un,$e],imports:[Fn]}),En),zn=function(t,e){return(zn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Bn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}zn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Wn=function(){return(Wn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Hn(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function Kn(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function Gn(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var Jn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Qn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Yn(t,e){return t(e={exports:{}},e.exports),e.exports}var Xn=function(t){return t&&t.Math==Math&&t},Zn=Xn("object"==typeof globalThis&&globalThis)||Xn("object"==typeof window&&window)||Xn("object"==typeof self&&self)||Xn("object"==typeof Jn&&Jn)||function(){return this}()||Function("return this")(),$n=function(t){try{return!!t()}catch(t){return!0}},tr=!$n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),er={}.propertyIsEnumerable,nr=Object.getOwnPropertyDescriptor,rr={f:nr&&!er.call({1:2},1)?function(t){var e=nr(this,t);return!!e&&e.enumerable}:er},ir=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},or={}.toString,ar=function(t){return or.call(t).slice(8,-1)},sr="".split,ur=$n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==ar(t)?sr.call(t,""):Object(t)}:Object,cr=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},lr=function(t){return ur(cr(t))},hr=function(t){return"object"==typeof t?null!==t:"function"==typeof t},fr=function(t,e){if(!hr(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!hr(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!hr(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!hr(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},dr=function(t){return Object(cr(t))},pr={}.hasOwnProperty,vr=function(t,e){return pr.call(dr(t),e)},yr=Zn.document,gr=hr(yr)&&hr(yr.createElement),mr=function(t){return gr?yr.createElement(t):{}},br=!tr&&!$n((function(){return 7!=Object.defineProperty(mr("div"),"a",{get:function(){return 7}}).a})),_r=Object.getOwnPropertyDescriptor,wr={f:tr?_r:function(t,e){if(t=lr(t),e=fr(e,!0),br)try{return _r(t,e)}catch(t){}if(vr(t,e))return ir(!rr.f.call(t,e),t[e])}},kr=function(t){if(!hr(t))throw TypeError(String(t)+" is not an object");return t},Or=Object.defineProperty,Cr={f:tr?Or:function(t,e,n){if(kr(t),e=fr(e,!0),kr(n),br)try{return Or(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},Sr=tr?function(t,e,n){return Cr.f(t,e,ir(1,n))}:function(t,e,n){return t[e]=n,t},Er=function(t,e){try{Sr(Zn,t,e)}catch(n){Zn[t]=e}return e},Tr=Zn["__core-js_shared__"]||Er("__core-js_shared__",{}),Ir=Function.toString;"function"!=typeof Tr.inspectSource&&(Tr.inspectSource=function(t){return Ir.call(t)});var xr,Nr,Ar,jr=Tr.inspectSource,Pr=Zn.WeakMap,Rr="function"==typeof Pr&&/native code/.test(jr(Pr)),Dr=Yn((function(t){(t.exports=function(t,e){return Tr[t]||(Tr[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.11.0",mode:"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})})),Lr=0,Mr=Math.random(),Fr=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++Lr+Mr).toString(36)},Ur=Dr("keys"),qr=function(t){return Ur[t]||(Ur[t]=Fr(t))},Vr={};if(Rr){var zr=Tr.state||(Tr.state=new(0,Zn.WeakMap)),Br=zr.get,Wr=zr.has,Hr=zr.set;xr=function(t,e){if(Wr.call(zr,t))throw new TypeError("Object already initialized");return e.facade=t,Hr.call(zr,t,e),e},Nr=function(t){return Br.call(zr,t)||{}},Ar=function(t){return Wr.call(zr,t)}}else{var Kr=qr("state");Vr[Kr]=!0,xr=function(t,e){if(vr(t,Kr))throw new TypeError("Object already initialized");return e.facade=t,Sr(t,Kr,e),e},Nr=function(t){return vr(t,Kr)?t[Kr]:{}},Ar=function(t){return vr(t,Kr)}}var Gr,Jr,Qr={set:xr,get:Nr,has:Ar,enforce:function(t){return Ar(t)?Nr(t):xr(t,{})},getterFor:function(t){return function(e){var n;if(!hr(e)||(n=Nr(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},Yr=Yn((function(t){var e=Qr.get,n=Qr.enforce,r=String(String).split("String");(t.exports=function(t,e,i,o){var a,s=!!o&&!!o.unsafe,u=!!o&&!!o.enumerable,c=!!o&&!!o.noTargetGet;"function"==typeof i&&("string"!=typeof e||vr(i,"name")||Sr(i,"name",e),(a=n(i)).source||(a.source=r.join("string"==typeof e?e:""))),t!==Zn?(s?!c&&t[e]&&(u=!0):delete t[e],u?t[e]=i:Sr(t,e,i)):u?t[e]=i:Er(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||jr(this)}))})),Xr=Zn,Zr=function(t){return"function"==typeof t?t:void 0},$r=function(t,e){return arguments.length<2?Zr(Xr[t])||Zr(Zn[t]):Xr[t]&&Xr[t][e]||Zn[t]&&Zn[t][e]},ti=Math.ceil,ei=Math.floor,ni=function(t){return isNaN(t=+t)?0:(t>0?ei:ti)(t)},ri=Math.min,ii=function(t){return t>0?ri(ni(t),9007199254740991):0},oi=Math.max,ai=Math.min,si=function(t){return function(e,n,r){var i,o=lr(e),a=ii(o.length),s=function(t,e){var n=ni(t);return n<0?oi(n+e,0):ai(n,e)}(r,a);if(t&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}},ui={includes:si(!0),indexOf:si(!1)},ci=ui.indexOf,li=function(t,e){var n,r=lr(t),i=0,o=[];for(n in r)!vr(Vr,n)&&vr(r,n)&&o.push(n);for(;e.length>i;)vr(r,n=e[i++])&&(~ci(o,n)||o.push(n));return o},hi=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],fi=hi.concat("length","prototype"),di={f:Object.getOwnPropertyNames||function(t){return li(t,fi)}},pi={f:Object.getOwnPropertySymbols},vi=$r("Reflect","ownKeys")||function(t){var e=di.f(kr(t)),n=pi.f;return n?e.concat(n(t)):e},yi=function(t,e){for(var n=vi(e),r=Cr.f,i=wr.f,o=0;o<n.length;o++){var a=n[o];vr(t,a)||r(t,a,i(e,a))}},gi=/#|\.prototype\./,mi=function(t,e){var n=_i[bi(t)];return n==ki||n!=wi&&("function"==typeof e?$n(e):!!e)},bi=mi.normalize=function(t){return String(t).replace(gi,".").toLowerCase()},_i=mi.data={},wi=mi.NATIVE="N",ki=mi.POLYFILL="P",Oi=mi,Ci=wr.f,Si=function(t,e){var n,r,i,o,a,s=t.target,u=t.global,c=t.stat;if(n=u?Zn:c?Zn[s]||Er(s,{}):(Zn[s]||{}).prototype)for(r in e){if(o=e[r],i=t.noTargetGet?(a=Ci(n,r))&&a.value:n[r],!Oi(u?r:s+(c?".":"#")+r,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;yi(o,i)}(t.sham||i&&i.sham)&&Sr(o,"sham",!0),Yr(n,r,o,t)}},Ei="process"==ar(Zn.process),Ti=$r("navigator","userAgent")||"",Ii=Zn.process,xi=Ii&&Ii.versions,Ni=xi&&xi.v8;Ni?Jr=(Gr=Ni.split("."))[0]+Gr[1]:Ti&&(!(Gr=Ti.match(/Edge\/(\d+)/))||Gr[1]>=74)&&(Gr=Ti.match(/Chrome\/(\d+)/))&&(Jr=Gr[1]);var Ai,ji=Jr&&+Jr,Pi=!!Object.getOwnPropertySymbols&&!$n((function(){return!Symbol.sham&&(Ei?38===ji:ji>37&&ji<41)})),Ri=Pi&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Di=Dr("wks"),Li=Zn.Symbol,Mi=Ri?Li:Li&&Li.withoutSetter||Fr,Fi=function(t){return vr(Di,t)&&(Pi||"string"==typeof Di[t])||(Di[t]=Pi&&vr(Li,t)?Li[t]:Mi("Symbol."+t)),Di[t]},Ui=Fi("match"),qi=function(t){if(function(t){var e;return hr(t)&&(void 0!==(e=t[Ui])?!!e:"RegExp"==ar(t))}(t))throw TypeError("The method doesn't accept regular expressions");return t},Vi=Fi("match"),zi=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[Vi]=!1,"/./"[t](e)}catch(t){}}return!1},Bi=wr.f,Wi="".startsWith,Hi=Math.min,Ki=zi("startsWith"),Gi=!(Ki||(Ai=Bi(String.prototype,"startsWith"),!Ai||Ai.writable));Si({target:"String",proto:!0,forced:!Gi&&!Ki},{startsWith:function(t){var e=String(cr(this));qi(t);var n=ii(Hi(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return Wi?Wi.call(e,r,n):e.slice(n,n+r.length)===r}});var Ji=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},Qi=function(t,e,n){if(Ji(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},Yi=Function.call,Xi=function(t,e,n){return Qi(Yi,Zn[t].prototype[e],n)};Xi("String","startsWith");var Zi=Array.isArray||function(t){return"Array"==ar(t)},$i=function(t,e,n){var r=fr(e);r in t?Cr.f(t,r,ir(0,n)):t[r]=n},to=Fi("species"),eo=function(t,e){var n;return Zi(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!Zi(n.prototype)?hr(n)&&null===(n=n[to])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},no=Fi("species"),ro=Fi("isConcatSpreadable"),io=ji>=51||!$n((function(){var t=[];return t[ro]=!1,t.concat()[0]!==t})),oo=ji>=51||!$n((function(){var t=[];return(t.constructor={})[no]=function(){return{foo:1}},1!==t.concat(Boolean).foo})),ao=function(t){if(!hr(t))return!1;var e=t[ro];return void 0!==e?!!e:Zi(t)};Si({target:"Array",proto:!0,forced:!io||!oo},{concat:function(t){var e,n,r,i,o,a=dr(this),s=eo(a,0),u=0;for(e=-1,r=arguments.length;e<r;e++)if(ao(o=-1===e?a:arguments[e])){if(u+(i=ii(o.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<i;n++,u++)n in o&&$i(s,u,o[n])}else{if(u>=9007199254740991)throw TypeError("Maximum allowed index exceeded");$i(s,u++,o)}return s.length=u,s}});var so={};so[Fi("toStringTag")]="z";var uo="[object z]"===String(so),co=Fi("toStringTag"),lo="Arguments"==ar(function(){return arguments}()),ho=uo?ar:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),co))?n:lo?ar(e):"Object"==(r=ar(e))&&"function"==typeof e.callee?"Arguments":r};uo||Yr(Object.prototype,"toString",uo?{}.toString:function(){return"[object "+ho(this)+"]"},{unsafe:!0});var fo,po=Object.keys||function(t){return li(t,hi)},vo=tr?Object.defineProperties:function(t,e){kr(t);for(var n,r=po(e),i=r.length,o=0;i>o;)Cr.f(t,n=r[o++],e[n]);return t},yo=$r("document","documentElement"),go=qr("IE_PROTO"),mo=function(){},bo=function(t){return"<script>"+t+"<\/script>"},_o=function(){try{fo=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;_o=fo?function(t){t.write(bo("")),t.close();var e=t.parentWindow.Object;return t=null,e}(fo):((e=mr("iframe")).style.display="none",yo.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(bo("document.F=Object")),t.close(),t.F);for(var n=hi.length;n--;)delete _o.prototype[hi[n]];return _o()};Vr[go]=!0;var wo=Object.create||function(t,e){var n;return null!==t?(mo.prototype=kr(t),n=new mo,mo.prototype=null,n[go]=t):n=_o(),void 0===e?n:vo(n,e)},ko=di.f,Oo={}.toString,Co="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],So={f:function(t){return Co&&"[object Window]"==Oo.call(t)?function(t){try{return ko(t)}catch(t){return Co.slice()}}(t):ko(lr(t))}},Eo={f:Fi},To=Cr.f,Io=function(t){var e=Xr.Symbol||(Xr.Symbol={});vr(e,t)||To(e,t,{value:Eo.f(t)})},xo=Cr.f,No=Fi("toStringTag"),Ao=function(t,e,n){t&&!vr(t=n?t:t.prototype,No)&&xo(t,No,{configurable:!0,value:e})},jo=[].push,Po=function(t){var e=1==t,n=2==t,r=3==t,i=4==t,o=6==t,a=7==t,s=5==t||o;return function(u,c,l,h){for(var f,d,p=dr(u),v=ur(p),y=Qi(c,l,3),g=ii(v.length),m=0,b=h||eo,_=e?b(u,g):n||a?b(u,0):void 0;g>m;m++)if((s||m in v)&&(d=y(f=v[m],m,p),t))if(e)_[m]=d;else if(d)switch(t){case 3:return!0;case 5:return f;case 6:return m;case 2:jo.call(_,f)}else switch(t){case 4:return!1;case 7:jo.call(_,f)}return o?-1:r||i?i:_}},Ro=[Po(0),Po(1),Po(2),Po(3),Po(4),Po(5),Po(6),Po(7)][0],Do=qr("hidden"),Lo=Fi("toPrimitive"),Mo=Qr.set,Fo=Qr.getterFor("Symbol"),Uo=Object.prototype,qo=Zn.Symbol,Vo=$r("JSON","stringify"),zo=wr.f,Bo=Cr.f,Wo=So.f,Ho=rr.f,Ko=Dr("symbols"),Go=Dr("op-symbols"),Jo=Dr("string-to-symbol-registry"),Qo=Dr("symbol-to-string-registry"),Yo=Dr("wks"),Xo=Zn.QObject,Zo=!Xo||!Xo.prototype||!Xo.prototype.findChild,$o=tr&&$n((function(){return 7!=wo(Bo({},"a",{get:function(){return Bo(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=zo(Uo,e);r&&delete Uo[e],Bo(t,e,n),r&&t!==Uo&&Bo(Uo,e,r)}:Bo,ta=function(t,e){var n=Ko[t]=wo(qo.prototype);return Mo(n,{type:"Symbol",tag:t,description:e}),tr||(n.description=e),n},ea=Ri?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof qo},na=function t(e,n,r){e===Uo&&t(Go,n,r),kr(e);var i=fr(n,!0);return kr(r),vr(Ko,i)?(r.enumerable?(vr(e,Do)&&e[Do][i]&&(e[Do][i]=!1),r=wo(r,{enumerable:ir(0,!1)})):(vr(e,Do)||Bo(e,Do,ir(1,{})),e[Do][i]=!0),$o(e,i,r)):Bo(e,i,r)},ra=function(t,e){kr(t);var n=lr(e),r=po(n).concat(sa(n));return Ro(r,(function(e){tr&&!ia.call(n,e)||na(t,e,n[e])})),t},ia=function(t){var e=fr(t,!0),n=Ho.call(this,e);return!(this===Uo&&vr(Ko,e)&&!vr(Go,e))&&(!(n||!vr(this,e)||!vr(Ko,e)||vr(this,Do)&&this[Do][e])||n)},oa=function(t,e){var n=lr(t),r=fr(e,!0);if(n!==Uo||!vr(Ko,r)||vr(Go,r)){var i=zo(n,r);return!i||!vr(Ko,r)||vr(n,Do)&&n[Do][r]||(i.enumerable=!0),i}},aa=function(t){var e=Wo(lr(t)),n=[];return Ro(e,(function(t){vr(Ko,t)||vr(Vr,t)||n.push(t)})),n},sa=function(t){var e=t===Uo,n=Wo(e?Go:lr(t)),r=[];return Ro(n,(function(t){!vr(Ko,t)||e&&!vr(Uo,t)||r.push(Ko[t])})),r};if(Pi||(Yr((qo=function(){if(this instanceof qo)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=Fr(t),n=function t(n){this===Uo&&t.call(Go,n),vr(this,Do)&&vr(this[Do],e)&&(this[Do][e]=!1),$o(this,e,ir(1,n))};return tr&&Zo&&$o(Uo,e,{configurable:!0,set:n}),ta(e,t)}).prototype,"toString",(function(){return Fo(this).tag})),Yr(qo,"withoutSetter",(function(t){return ta(Fr(t),t)})),rr.f=ia,Cr.f=na,wr.f=oa,di.f=So.f=aa,pi.f=sa,Eo.f=function(t){return ta(Fi(t),t)},tr&&(Bo(qo.prototype,"description",{configurable:!0,get:function(){return Fo(this).description}}),Yr(Uo,"propertyIsEnumerable",ia,{unsafe:!0}))),Si({global:!0,wrap:!0,forced:!Pi,sham:!Pi},{Symbol:qo}),Ro(po(Yo),(function(t){Io(t)})),Si({target:"Symbol",stat:!0,forced:!Pi},{for:function(t){var e=String(t);if(vr(Jo,e))return Jo[e];var n=qo(e);return Jo[e]=n,Qo[n]=e,n},keyFor:function(t){if(!ea(t))throw TypeError(t+" is not a symbol");if(vr(Qo,t))return Qo[t]},useSetter:function(){Zo=!0},useSimple:function(){Zo=!1}}),Si({target:"Object",stat:!0,forced:!Pi,sham:!tr},{create:function(t,e){return void 0===e?wo(t):ra(wo(t),e)},defineProperty:na,defineProperties:ra,getOwnPropertyDescriptor:oa}),Si({target:"Object",stat:!0,forced:!Pi},{getOwnPropertyNames:aa,getOwnPropertySymbols:sa}),Si({target:"Object",stat:!0,forced:$n((function(){pi.f(1)}))},{getOwnPropertySymbols:function(t){return pi.f(dr(t))}}),Vo){var ua=!Pi||$n((function(){var t=qo();return"[null]"!=Vo([t])||"{}"!=Vo({a:t})||"{}"!=Vo(Object(t))}));Si({target:"JSON",stat:!0,forced:ua},{stringify:function(t,e,n){for(var r,i=[t],o=1;arguments.length>o;)i.push(arguments[o++]);if(r=e,(hr(e)||void 0!==t)&&!ea(t))return Zi(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!ea(e))return e}),i[1]=e,Vo.apply(null,i)}})}qo.prototype[Lo]||Sr(qo.prototype,Lo,qo.prototype.valueOf),Ao(qo,"Symbol"),Vr[Do]=!0,Io("asyncIterator");var ca=Cr.f,la=Zn.Symbol;if(tr&&"function"==typeof la&&(!("description"in la.prototype)||void 0!==la().description)){var ha={},fa=function t(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),n=this instanceof t?new la(e):void 0===e?la():la(e);return""===e&&(ha[n]=!0),n};yi(fa,la);var da=fa.prototype=la.prototype;da.constructor=fa;var pa=da.toString,va="Symbol(test)"==String(la("test")),ya=/^Symbol\((.*)\)[^)]+$/;ca(da,"description",{configurable:!0,get:function(){var t=hr(this)?this.valueOf():this,e=pa.call(t);if(vr(ha,t))return"";var n=va?e.slice(7,-1):e.replace(ya,"$1");return""===n?void 0:n}}),Si({global:!0,forced:!0},{Symbol:fa})}Io("hasInstance"),Io("isConcatSpreadable"),Io("iterator"),Io("match"),Io("matchAll"),Io("replace"),Io("search"),Io("species"),Io("split"),Io("toPrimitive"),Io("toStringTag"),Io("unscopables"),Ao(Zn.JSON,"JSON",!0),Ao(Math,"Math",!0),Si({global:!0},{Reflect:{}}),Ao(Zn.Reflect,"Reflect",!0);var ga,ma,ba,_a=function(t){return function(e,n){var r,i,o=String(cr(e)),a=ni(n),s=o.length;return a<0||a>=s?t?"":void 0:(r=o.charCodeAt(a))<55296||r>56319||a+1===s||(i=o.charCodeAt(a+1))<56320||i>57343?t?o.charAt(a):r:t?o.slice(a,a+2):i-56320+(r-55296<<10)+65536}},wa={codeAt:_a(!1),charAt:_a(!0)},ka=!$n((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Oa=qr("IE_PROTO"),Ca=Object.prototype,Sa=ka?Object.getPrototypeOf:function(t){return t=dr(t),vr(t,Oa)?t[Oa]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Ca:null},Ea=Fi("iterator"),Ta=!1;[].keys&&("next"in(ba=[].keys())?(ma=Sa(Sa(ba)))!==Object.prototype&&(ga=ma):Ta=!0),(null==ga||$n((function(){var t={};return ga[Ea].call(t)!==t})))&&(ga={}),vr(ga,Ea)||Sr(ga,Ea,(function(){return this}));var Ia={IteratorPrototype:ga,BUGGY_SAFARI_ITERATORS:Ta},xa={},Na=Ia.IteratorPrototype,Aa=function(){return this},ja=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return kr(n),function(t){if(!hr(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),Pa=Ia.IteratorPrototype,Ra=Ia.BUGGY_SAFARI_ITERATORS,Da=Fi("iterator"),La=function(){return this},Ma=function(t,e,n,r,i,o,a){!function(t,e,n){var r=e+" Iterator";t.prototype=wo(Na,{next:ir(1,n)}),Ao(t,r,!1),xa[r]=Aa}(n,e,r);var s,u,c,l=function(t){if(t===i&&v)return v;if(!Ra&&t in d)return d[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},h=e+" Iterator",f=!1,d=t.prototype,p=d[Da]||d["@@iterator"]||i&&d[i],v=!Ra&&p||l(i),y="Array"==e&&d.entries||p;if(y&&(s=Sa(y.call(new t)),Pa!==Object.prototype&&s.next&&(Sa(s)!==Pa&&(ja?ja(s,Pa):"function"!=typeof s[Da]&&Sr(s,Da,La)),Ao(s,h,!0))),"values"==i&&p&&"values"!==p.name&&(f=!0,v=function(){return p.call(this)}),d[Da]!==v&&Sr(d,Da,v),xa[e]=v,i)if(u={values:l("values"),keys:o?v:l("keys"),entries:l("entries")},a)for(c in u)(Ra||f||!(c in d))&&Yr(d,c,u[c]);else Si({target:e,proto:!0,forced:Ra||f},u);return u},Fa=wa.charAt,Ua=Qr.set,qa=Qr.getterFor("String Iterator");Ma(String,"String",(function(t){Ua(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=qa(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=Fa(n,r),e.index+=t.length,{value:t,done:!1})}));var Va=function(t){var e=t.return;if(void 0!==e)return kr(e.call(t)).value},za=function(t,e,n,r){try{return r?e(kr(n)[0],n[1]):e(n)}catch(e){throw Va(t),e}},Ba=Fi("iterator"),Wa=Array.prototype,Ha=function(t){return void 0!==t&&(xa.Array===t||Wa[Ba]===t)},Ka=Fi("iterator"),Ga=function(t){if(null!=t)return t[Ka]||t["@@iterator"]||xa[ho(t)]},Ja=Fi("iterator"),Qa=!1;try{var Ya=0,Xa={next:function(){return{done:!!Ya++}},return:function(){Qa=!0}};Xa[Ja]=function(){return this},Array.from(Xa,(function(){throw 2}))}catch(VA){}var Za=function(t,e){if(!e&&!Qa)return!1;var n=!1;try{var r={};r[Ja]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},$a=!Za((function(t){Array.from(t)}));Si({target:"Array",stat:!0,forced:$a},{from:function(t){var e,n,r,i,o,a,s=dr(t),u="function"==typeof this?this:Array,c=arguments.length,l=c>1?arguments[1]:void 0,h=void 0!==l,f=Ga(s),d=0;if(h&&(l=Qi(l,c>2?arguments[2]:void 0,2)),null==f||u==Array&&Ha(f))for(n=new u(e=ii(s.length));e>d;d++)a=h?l(s[d],d):s[d],$i(n,d,a);else for(o=(i=f.call(s)).next,n=new u;!(r=o.call(i)).done;d++)a=h?za(i,l,[r.value,d],!0):r.value,$i(n,d,a);return n.length=d,n}});var ts,es="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,ns=Cr.f,rs=Zn.Int8Array,is=rs&&rs.prototype,os=Zn.Uint8ClampedArray,as=os&&os.prototype,ss=rs&&Sa(rs),us=is&&Sa(is),cs=Object.prototype,ls=cs.isPrototypeOf,hs=Fi("toStringTag"),fs=Fr("TYPED_ARRAY_TAG"),ds=es&&!!ja&&"Opera"!==ho(Zn.opera),ps={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},vs={BigInt64Array:8,BigUint64Array:8};for(ts in ps)Zn[ts]||(ds=!1);if((!ds||"function"!=typeof ss||ss===Function.prototype)&&(ss=function(){throw TypeError("Incorrect invocation")},ds))for(ts in ps)Zn[ts]&&ja(Zn[ts],ss);if((!ds||!us||us===cs)&&(us=ss.prototype,ds))for(ts in ps)Zn[ts]&&ja(Zn[ts].prototype,us);if(ds&&Sa(as)!==us&&ja(as,us),tr&&!vr(us,hs))for(ts in ns(us,hs,{get:function(){return hr(this)?this[fs]:void 0}}),ps)Zn[ts]&&Sr(Zn[ts],fs,ts);var ys=Fi("species"),gs=[].slice;!function(t,e,n){if(tr){if(n)for(var r in ps){var i=Zn[r];i&&vr(i.prototype,t)&&delete i.prototype[t]}us[t]&&!n||Yr(us,t,n?e:ds&&is[t]||e)}}("slice",(function(t,e){for(var n=gs.call(function(t){if(function(t){if(!hr(t))return!1;var e=ho(t);return vr(ps,e)||vr(vs,e)}(t))return t;throw TypeError("Target is not a typed array")}(this),t,e),r=function(t,e){var n,r=kr(t).constructor;return void 0===r||null==(n=kr(r)[ys])?e:Ji(n)}(this,this.constructor),i=0,o=n.length,a=new(function(t){if(ja){if(ls.call(ss,t))return t}else for(var e in ps)if(vr(ps,ts)){var n=Zn[e];if(n&&(t===n||ls.call(n,t)))return t}throw TypeError("Target is not a typed array constructor")}(r))(o);o>i;)a[i]=n[i++];return a}),$n((function(){new Int8Array(1).slice()})));var ms=Fi("unscopables"),bs=Array.prototype;null==bs[ms]&&Cr.f(bs,ms,{configurable:!0,value:wo(null)});var _s=function(t){bs[ms][t]=!0},ws=ui.includes;Si({target:"Array",proto:!0},{includes:function(t){return ws(this,t,arguments.length>1?arguments[1]:void 0)}}),_s("includes"),Xi("Array","includes"),Si({target:"String",proto:!0,forced:!zi("includes")},{includes:function(t){return!!~String(cr(this)).indexOf(qi(t),arguments.length>1?arguments[1]:void 0)}}),Xi("String","includes");var ks=!$n((function(){return Object.isExtensible(Object.preventExtensions({}))})),Os=Yn((function(t){var e=Cr.f,n=Fr("meta"),r=0,i=Object.isExtensible||function(){return!0},o=function(t){e(t,n,{value:{objectID:"O"+ ++r,weakData:{}}})},a=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!hr(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!vr(t,n)){if(!i(t))return"F";if(!e)return"E";o(t)}return t[n].objectID},getWeakData:function(t,e){if(!vr(t,n)){if(!i(t))return!0;if(!e)return!1;o(t)}return t[n].weakData},onFreeze:function(t){return ks&&a.REQUIRED&&i(t)&&!vr(t,n)&&o(t),t}};Vr[n]=!0})),Cs=function(t,e){this.stopped=t,this.result=e},Ss=function(t,e,n){var r,i,o,a,s,u,c,l=!(!n||!n.AS_ENTRIES),h=!(!n||!n.IS_ITERATOR),f=!(!n||!n.INTERRUPTED),d=Qi(e,n&&n.that,1+l+f),p=function(t){return r&&Va(r),new Cs(!0,t)},v=function(t){return l?(kr(t),f?d(t[0],t[1],p):d(t[0],t[1])):f?d(t,p):d(t)};if(h)r=t;else{if("function"!=typeof(i=Ga(t)))throw TypeError("Target is not iterable");if(Ha(i)){for(o=0,a=ii(t.length);a>o;o++)if((s=v(t[o]))&&s instanceof Cs)return s;return new Cs(!1)}r=i.call(t)}for(u=r.next;!(c=u.call(r)).done;){try{s=v(c.value)}catch(t){throw Va(r),t}if("object"==typeof s&&s&&s instanceof Cs)return s}return new Cs(!1)},Es=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t},Ts=function(t,e,n){for(var r in e)Yr(t,r,e[r],n);return t},Is=Fi("species"),xs=Cr.f,Ns=Os.fastKey,As=Qr.set,js=Qr.getterFor;!function(t,e,n){var r=-1!==t.indexOf("Map"),i=-1!==t.indexOf("Weak"),o=r?"set":"add",a=Zn[t],s=a&&a.prototype,u=a,c={},l=function(t){var e=s[t];Yr(s,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(i&&!hr(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return i&&!hr(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(i&&!hr(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(Oi(t,"function"!=typeof a||!(i||s.forEach&&!$n((function(){(new a).entries().next()})))))u=n.getConstructor(e,t,r,o),Os.REQUIRED=!0;else if(Oi(t,!0)){var h=new u,f=h[o](i?{}:-0,1)!=h,d=$n((function(){h.has(1)})),p=Za((function(t){new a(t)})),v=!i&&$n((function(){for(var t=new a,e=5;e--;)t[o](e,e);return!t.has(-0)}));p||((u=e((function(e,n){Es(e,u,t);var i=function(t,e,n){var r,i;return ja&&"function"==typeof(r=e.constructor)&&r!==n&&hr(i=r.prototype)&&i!==n.prototype&&ja(t,i),t}(new a,e,u);return null!=n&&Ss(n,i[o],{that:i,AS_ENTRIES:r}),i}))).prototype=s,s.constructor=u),(d||v)&&(l("delete"),l("has"),r&&l("get")),(v||f)&&l(o),i&&s.clear&&delete s.clear}c[t]=u,Si({global:!0,forced:u!=a},c),Ao(u,t),i||n.setStrong(u,t,r)}("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),{getConstructor:function(t,e,n,r){var i=t((function(t,o){Es(t,i,e),As(t,{type:e,index:wo(null),first:void 0,last:void 0,size:0}),tr||(t.size=0),null!=o&&Ss(o,t[r],{that:t,AS_ENTRIES:n})})),o=js(e),a=function(t,e,n){var r,i,a=o(t),u=s(t,e);return u?u.value=n:(a.last=u={index:i=Ns(e,!0),key:e,value:n,previous:r=a.last,next:void 0,removed:!1},a.first||(a.first=u),r&&(r.next=u),tr?a.size++:t.size++,"F"!==i&&(a.index[i]=u)),t},s=function(t,e){var n,r=o(t),i=Ns(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n};return Ts(i.prototype,{clear:function(){for(var t=o(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,tr?t.size=0:this.size=0},delete:function(t){var e=this,n=o(e),r=s(e,t);if(r){var i=r.next,a=r.previous;delete n.index[r.index],r.removed=!0,a&&(a.next=i),i&&(i.previous=a),n.first==r&&(n.first=i),n.last==r&&(n.last=a),tr?n.size--:e.size--}return!!r},forEach:function(t){for(var e,n=o(this),r=Qi(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!s(this,t)}}),Ts(i.prototype,n?{get:function(t){var e=s(this,t);return e&&e.value},set:function(t,e){return a(this,0===t?0:t,e)}}:{add:function(t){return a(this,t=0===t?0:t,t)}}),tr&&xs(i.prototype,"size",{get:function(){return o(this).size}}),i},setStrong:function(t,e,n){var r=e+" Iterator",i=js(e),o=js(r);Ma(t,e,(function(t,e){As(this,{type:r,target:t,state:i(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),function(t){var e=$r(t);tr&&e&&!e[Is]&&(0,Cr.f)(e,Is,{configurable:!0,get:function(){return this}})}(e)}});var Ps={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Rs=Qr.set,Ds=Qr.getterFor("Array Iterator"),Ls=Ma(Array,"Array",(function(t,e){Rs(this,{type:"Array Iterator",target:lr(t),index:0,kind:e})}),(function(){var t=Ds(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");xa.Arguments=xa.Array,_s("keys"),_s("values"),_s("entries");var Ms=Fi("iterator"),Fs=Fi("toStringTag"),Us=Ls.values;for(var qs in Ps){var Vs=Zn[qs],zs=Vs&&Vs.prototype;if(zs){if(zs[Ms]!==Us)try{Sr(zs,Ms,Us)}catch(VA){zs[Ms]=Us}if(zs[Fs]||Sr(zs,Fs,qs),Ps[qs])for(var Bs in Ls)if(zs[Bs]!==Ls[Bs])try{Sr(zs,Bs,Ls[Bs])}catch(VA){zs[Bs]=Ls[Bs]}}}function Ws(t){var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){return e.reject(n)}))}))}function Hs(t){return new this((function(e,n){if(!t||void 0===t.length)return n(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var i=r.length;function o(t,n){if(n&&("object"==typeof n||"function"==typeof n)){var a=n.then;if("function"==typeof a)return void a.call(n,(function(e){o(t,e)}),(function(n){r[t]={status:"rejected",reason:n},0==--i&&e(r)}))}r[t]={status:"fulfilled",value:n},0==--i&&e(r)}for(var a=0;a<r.length;a++)o(a,r[a])}))}var Ks=setTimeout;function Gs(t){return Boolean(t&&void 0!==t.length)}function Js(){}function Qs(t){if(!(this instanceof Qs))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],eu(t,this)}function Ys(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,Qs._immediateFn((function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void Zs(e.promise,t)}Xs(e.promise,r)}else(1===t._state?Xs:Zs)(e.promise,t._value)}))):t._deferreds.push(e)}function Xs(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof Qs)return t._state=3,t._value=e,void $s(t);if("function"==typeof n)return void eu((r=n,i=e,function(){r.apply(i,arguments)}),t)}t._state=1,t._value=e,$s(t)}catch(e){Zs(t,e)}var r,i}function Zs(t,e){t._state=2,t._value=e,$s(t)}function $s(t){2===t._state&&0===t._deferreds.length&&Qs._immediateFn((function(){t._handled||Qs._unhandledRejectionFn(t._value)}));for(var e=0,n=t._deferreds.length;e<n;e++)Ys(t,t._deferreds[e]);t._deferreds=null}function tu(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function eu(t,e){var n=!1;try{t((function(t){n||(n=!0,Xs(e,t))}),(function(t){n||(n=!0,Zs(e,t))}))}catch(t){if(n)return;n=!0,Zs(e,t)}}Qs.prototype.catch=function(t){return this.then(null,t)},Qs.prototype.then=function(t,e){var n=new this.constructor(Js);return Ys(this,new tu(t,e,n)),n},Qs.prototype.finally=Ws,Qs.all=function(t){return new Qs((function(e,n){if(!Gs(t))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var i=r.length;function o(t,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,(function(e){o(t,e)}),n)}r[t]=a,0==--i&&e(r)}catch(t){n(t)}}for(var a=0;a<r.length;a++)o(a,r[a])}))},Qs.allSettled=Hs,Qs.resolve=function(t){return t&&"object"==typeof t&&t.constructor===Qs?t:new Qs((function(e){e(t)}))},Qs.reject=function(t){return new Qs((function(e,n){n(t)}))},Qs.race=function(t){return new Qs((function(e,n){if(!Gs(t))return n(new TypeError("Promise.race accepts an array"));for(var r=0,i=t.length;r<i;r++)Qs.resolve(t[r]).then(e,n)}))},Qs._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){Ks(t,0)},Qs._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var nu=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();"function"!=typeof nu.Promise?nu.Promise=Qs:nu.Promise.prototype.finally?nu.Promise.allSettled||(nu.Promise.allSettled=Hs):nu.Promise.prototype.finally=Ws,function(t){function e(){}function n(t,e){if(e=void 0===e?{fatal:!1}:e,-1===i.indexOf((t=void 0===t?"utf-8":t).toLowerCase()))throw new RangeError("Failed to construct 'TextDecoder': The encoding label provided ('"+t+"') is invalid.");if(e.fatal)throw Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}function r(t){for(var e=0,n=Math.min(65536,t.length+1),r=new Uint16Array(n),i=[],o=0;;){var a=e<t.length;if(!a||o>=n-1){if(i.push(String.fromCharCode.apply(null,r.subarray(0,o))),!a)return i.join("");t=t.subarray(e),o=e=0}if(0==(128&(a=t[e++])))r[o++]=a;else if(192==(224&a)){var s=63&t[e++];r[o++]=(31&a)<<6|s}else if(224==(240&a)){s=63&t[e++];var u=63&t[e++];r[o++]=(31&a)<<12|s<<6|u}else 240==(248&a)&&(65535<(a=(7&a)<<18|(s=63&t[e++])<<12|(u=63&t[e++])<<6|63&t[e++])&&(r[o++]=(a-=65536)>>>10&1023|55296,a=56320|1023&a),r[o++]=a)}}if(t.TextEncoder&&t.TextDecoder)return!1;var i=["utf-8","utf8","unicode-1-1-utf-8"];Object.defineProperty(e.prototype,"encoding",{value:"utf-8"}),e.prototype.encode=function(t,e){if((e=void 0===e?{stream:!1}:e).stream)throw Error("Failed to encode: the 'stream' option is unsupported.");e=0;for(var n=t.length,r=0,i=Math.max(32,n+(n>>>1)+7),o=new Uint8Array(i>>>3<<3);e<n;){var a=t.charCodeAt(e++);if(55296<=a&&56319>=a){if(e<n){var s=t.charCodeAt(e);56320==(64512&s)&&(++e,a=((1023&a)<<10)+(1023&s)+65536)}if(55296<=a&&56319>=a)continue}if(r+4>o.length&&(i+=8,i=(i*=1+e/t.length*2)>>>3<<3,(s=new Uint8Array(i)).set(o),o=s),0==(4294967168&a))o[r++]=a;else{if(0==(4294965248&a))o[r++]=a>>>6&31|192;else if(0==(4294901760&a))o[r++]=a>>>12&15|224,o[r++]=a>>>6&63|128;else{if(0!=(4292870144&a))continue;o[r++]=a>>>18&7|240,o[r++]=a>>>12&63|128,o[r++]=a>>>6&63|128}o[r++]=63&a|128}}return o.slice?o.slice(0,r):o.subarray(0,r)},Object.defineProperty(n.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(n.prototype,"fatal",{value:!1}),Object.defineProperty(n.prototype,"ignoreBOM",{value:!1});var o=r;"function"==typeof Buffer&&Buffer.from?o=function(t){return Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf-8")}:"function"==typeof Blob&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&(o=function(t){var e=URL.createObjectURL(new Blob([t],{type:"text/plain;charset=UTF-8"}));try{var n=new XMLHttpRequest;return n.open("GET",e,!1),n.send(),n.responseText}catch(e){return r(t)}finally{URL.revokeObjectURL(e)}}),n.prototype.decode=function(t,e){if((e=void 0===e?{stream:!1}:e).stream)throw Error("Failed to decode: the 'stream' option is unsupported.");return t=t instanceof Uint8Array?t:t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer):new Uint8Array(t),o(t)},t.TextEncoder=e,t.TextDecoder=n}("undefined"!=typeof window?window:Jn),function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?i(t):e}function a(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=a(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}var u=function(){function e(){t(this,e),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return n(e,[{key:"addEventListener",value:function(t,e,n){t in this.listeners||(this.listeners[t]=[]),this.listeners[t].push({callback:e,options:n})}},{key:"removeEventListener",value:function(t,e){if(t in this.listeners)for(var n=this.listeners[t],r=0,i=n.length;r<i;r++)if(n[r].callback===e)return void n.splice(r,1)}},{key:"dispatchEvent",value:function(t){if(t.type in this.listeners){for(var e=this.listeners[t.type].slice(),n=0,r=e.length;n<r;n++){var i=e[n];try{i.callback.call(this,t)}catch(t){Promise.resolve().then((function(){throw t}))}i.options&&i.options.once&&this.removeEventListener(t.type,i.callback)}return!t.defaultPrevented}}}]),e}(),c=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}(c,e);var a=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=r(t);if(e){var a=r(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return o(this,n)}}(c);function c(){var e;return t(this,c),(e=a.call(this)).listeners||u.call(i(e)),Object.defineProperty(i(e),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(i(e),"onabort",{value:null,writable:!0,configurable:!0}),e}return n(c,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(t){"abort"===t.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,t)),s(r(c.prototype),"dispatchEvent",this).call(this,t)}}]),c}(u),l=function(){function e(){t(this,e),Object.defineProperty(this,"signal",{value:new c,writable:!0,configurable:!0})}return n(e,[{key:"abort",value:function(){var t;try{t=new Event("abort")}catch(e){"undefined"!=typeof document?document.createEvent?(t=document.createEvent("Event")).initEvent("abort",!1,!1):(t=document.createEventObject()).type="abort":t={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(t)}},{key:"toString",value:function(){return"[object AbortController]"}}]),e}();"undefined"!=typeof Symbol&&Symbol.toStringTag&&(l.prototype[Symbol.toStringTag]="AbortController",c.prototype[Symbol.toStringTag]="AbortSignal"),function(t){(function(t){return t.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):"function"==typeof t.Request&&!t.Request.prototype.hasOwnProperty("signal")||!t.AbortController})(t)&&(t.AbortController=l,t.AbortSignal=c)}("undefined"!=typeof self?self:Jn)}();var ru=Yn((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){var t=this;this.locked=new Map,this.addToLocked=function(e,n){var r=t.locked.get(e);void 0===r?t.locked.set(e,void 0===n?[]:[n]):void 0!==n&&(r.unshift(n),t.locked.set(e,r))},this.isLocked=function(e){return t.locked.has(e)},this.lock=function(e){return new Promise((function(n,r){t.isLocked(e)?t.addToLocked(e,n):(t.addToLocked(e),n())}))},this.unlock=function(e){var n=t.locked.get(e);if(void 0!==n&&0!==n.length){var r=n.pop();t.locked.set(e,n),void 0!==r&&setTimeout(r,0)}else t.locked.delete(e)}}return t.getInstance=function(){return void 0===t.instance&&(t.instance=new t),t.instance},t}();e.default=function(){return n.getInstance()}}));Qn(ru);var iu=Qn(Yn((function(t,e){var n=Jn&&Jn.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(a,s)}u((r=r.apply(t,e||[])).next())}))},r=Jn&&Jn.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var i="browser-tabs-lock-key";function o(t){return new Promise((function(e){return setTimeout(e,t)}))}function a(t){for(var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",n="",r=0;r<t;r++)n+=e[Math.floor(Math.random()*e.length)];return n}var s=function(){function t(){this.acquiredIatSet=new Set,this.id=Date.now().toString()+a(15),this.acquireLock=this.acquireLock.bind(this),this.releaseLock=this.releaseLock.bind(this),this.releaseLock__private__=this.releaseLock__private__.bind(this),this.waitForSomethingToChange=this.waitForSomethingToChange.bind(this),this.refreshLockWhileAcquired=this.refreshLockWhileAcquired.bind(this),void 0===t.waiters&&(t.waiters=[])}return t.prototype.acquireLock=function(e,s){return void 0===s&&(s=5e3),n(this,void 0,void 0,(function(){var n,u,c,l,h,f;return r(this,(function(r){switch(r.label){case 0:n=Date.now()+a(4),u=Date.now()+s,c=i+"-"+e,l=window.localStorage,r.label=1;case 1:return Date.now()<u?[4,o(30)]:[3,8];case 2:return r.sent(),null!==l.getItem(c)?[3,5]:(h=this.id+"-"+e+"-"+n,[4,o(Math.floor(25*Math.random()))]);case 3:return r.sent(),l.setItem(c,JSON.stringify({id:this.id,iat:n,timeoutKey:h,timeAcquired:Date.now(),timeRefreshed:Date.now()})),[4,o(30)];case 4:return r.sent(),null!==(f=l.getItem(c))&&(f=JSON.parse(f)).id===this.id&&f.iat===n?(this.acquiredIatSet.add(n),this.refreshLockWhileAcquired(c,n),[2,!0]):[3,7];case 5:return t.lockCorrector(),[4,this.waitForSomethingToChange(u)];case 6:r.sent(),r.label=7;case 7:return n=Date.now()+a(4),[3,1];case 8:return[2,!1]}}))}))},t.prototype.refreshLockWhileAcquired=function(t,e){return n(this,void 0,void 0,(function(){var i=this;return r(this,(function(o){return setTimeout((function(){return n(i,void 0,void 0,(function(){var n,i;return r(this,(function(r){switch(r.label){case 0:return[4,ru.default().lock(e)];case 1:return r.sent(),this.acquiredIatSet.has(e)?(n=window.localStorage,null===(i=n.getItem(t))?(ru.default().unlock(e),[2]):((i=JSON.parse(i)).timeRefreshed=Date.now(),n.setItem(t,JSON.stringify(i)),ru.default().unlock(e),this.refreshLockWhileAcquired(t,e),[2])):(ru.default().unlock(e),[2])}}))}))}),1e3),[2]}))}))},t.prototype.waitForSomethingToChange=function(e){return n(this,void 0,void 0,(function(){return r(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(n){var r=!1,i=Date.now(),o=!1;function a(){if(o||(window.removeEventListener("storage",a),t.removeFromWaiting(a),clearTimeout(s),o=!0),!r){r=!0;var e=50-(Date.now()-i);e>0?setTimeout(n,e):n()}}window.addEventListener("storage",a),t.addToWaiting(a);var s=setTimeout(a,Math.max(0,e-Date.now()))}))];case 1:return n.sent(),[2]}}))}))},t.addToWaiting=function(e){this.removeFromWaiting(e),void 0!==t.waiters&&t.waiters.push(e)},t.removeFromWaiting=function(e){void 0!==t.waiters&&(t.waiters=t.waiters.filter((function(t){return t!==e})))},t.notifyWaiters=function(){void 0!==t.waiters&&t.waiters.slice().forEach((function(t){return t()}))},t.prototype.releaseLock=function(t){return n(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,this.releaseLock__private__(t)];case 1:return[2,e.sent()]}}))}))},t.prototype.releaseLock__private__=function(e){return n(this,void 0,void 0,(function(){var n,o,a;return r(this,(function(r){switch(r.label){case 0:return n=window.localStorage,null===(a=n.getItem(o=i+"-"+e))?[2]:(a=JSON.parse(a)).id!==this.id?[3,2]:[4,ru.default().lock(a.iat)];case 1:r.sent(),this.acquiredIatSet.delete(a.iat),n.removeItem(o),ru.default().unlock(a.iat),t.notifyWaiters(),r.label=2;case 2:return[2]}}))}))},t.lockCorrector=function(){for(var e=Date.now()-5e3,n=window.localStorage,r=Object.keys(n),o=!1,a=0;a<r.length;a++){var s=r[a];if(s.includes(i)){var u=n.getItem(s);null!==u&&(void 0===(u=JSON.parse(u)).timeRefreshed&&u.timeAcquired<e||void 0!==u.timeRefreshed&&u.timeRefreshed<e)&&(n.removeItem(s),o=!0)}}o&&t.notifyWaiters()},t.waiters=void 0,t}();e.default=s}))),ou={timeoutInSeconds:60},au=["login_required","consent_required","interaction_required","account_selection_required","access_denied"],su={name:"auth0-spa-js",version:"1.15.0"},uu=function(t){function e(n,r){var i=t.call(this,r)||this;return i.error=n,i.error_description=r,Object.setPrototypeOf(i,e.prototype),i}return Bn(e,t),e.fromPayload=function(t){return new e(t.error,t.error_description)},e}(Error),cu=function(t){function e(n,r,i,o){void 0===o&&(o=null);var a=t.call(this,n,r)||this;return a.state=i,a.appState=o,Object.setPrototypeOf(a,e.prototype),a}return Bn(e,t),e}(uu),lu=function(t){function e(){var n=t.call(this,"timeout","Timeout")||this;return Object.setPrototypeOf(n,e.prototype),n}return Bn(e,t),e}(uu),hu=function(t){function e(n){var r=t.call(this)||this;return r.popup=n,Object.setPrototypeOf(r,e.prototype),r}return Bn(e,t),e}(lu),fu=function(t){function e(n){var r=t.call(this,"cancelled","Popup closed")||this;return r.popup=n,Object.setPrototypeOf(r,e.prototype),r}return Bn(e,t),e}(uu),du=function(t){return new Promise((function(e,n){var r,i=setInterval((function(){t.popup&&t.popup.closed&&(clearInterval(i),clearTimeout(o),window.removeEventListener("message",r,!1),n(new fu(t.popup)))}),1e3),o=setTimeout((function(){clearInterval(i),n(new hu(t.popup)),window.removeEventListener("message",r,!1)}),1e3*(t.timeoutInSeconds||60));r=function(a){if(a.data&&"authorization_response"===a.data.type){if(clearTimeout(o),clearInterval(i),window.removeEventListener("message",r,!1),t.popup.close(),a.data.response.error)return n(uu.fromPayload(a.data.response));e(a.data.response)}},window.addEventListener("message",r)}))},pu=function(){return window.crypto||window.msCrypto},vu=function(){var t=pu();return t.subtle||t.webkitSubtle},yu=function(){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_~.",e="";return Array.from(pu().getRandomValues(new Uint8Array(43))).forEach((function(n){return e+=t[n%t.length]})),e},gu=function(t){return btoa(t)},mu=function(t){return Object.keys(t).filter((function(e){return void 0!==t[e]})).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&")},bu=function(t){return Kn(void 0,void 0,void 0,(function(){var e;return Gn(this,(function(n){switch(n.label){case 0:return e=vu().digest({name:"SHA-256"},(new TextEncoder).encode(t)),window.msCrypto?[2,new Promise((function(t,n){e.oncomplete=function(e){t(e.target.result)},e.onerror=function(t){n(t.error)},e.onabort=function(){n("The digest operation was aborted")}}))]:[4,e];case 1:return[2,n.sent()]}}))}))},_u=function(t){return function(t){return decodeURIComponent(atob(t).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""))}(t.replace(/_/g,"/").replace(/-/g,"+"))},wu=function(t){var e=new Uint8Array(t);return function(t){var e={"+":"-","/":"_","=":""};return t.replace(/[+/=]/g,(function(t){return e[t]}))}(window.btoa(String.fromCharCode.apply(String,Array.from(e))))},ku=function(t,e){return Kn(void 0,void 0,void 0,(function(){var n,r;return Gn(this,(function(i){switch(i.label){case 0:return[4,(o=t,a=e,a=a||{},new Promise((function(t,e){var n=new XMLHttpRequest,r=[],i=[],s={};for(var u in n.open(a.method||"get",o,!0),n.onload=function(){n.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(t,e,n){r.push(e=e.toLowerCase()),i.push([e,n]),s[e]=s[e]?s[e]+","+n:n})),t(function t(){return{ok:2==(n.status/100|0),statusText:n.statusText,status:n.status,url:n.responseURL,text:function(){return Promise.resolve(n.responseText)},json:function(){return Promise.resolve(n.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([n.response]))},clone:t,headers:{keys:function(){return r},entries:function(){return i},get:function(t){return s[t.toLowerCase()]},has:function(t){return t.toLowerCase()in s}}}}())},n.onerror=e,n.withCredentials="include"==a.credentials,a.headers)n.setRequestHeader(u,a.headers[u]);n.send(a.body||null)})))];case 1:return n=i.sent(),r={ok:n.ok},[4,n.json()];case 2:return[2,(r.json=i.sent(),r)]}var o,a}))}))},Ou=function(t,e,n){return Kn(void 0,void 0,void 0,(function(){var r,i;return Gn(this,(function(o){return r=new AbortController,e.signal=r.signal,[2,Promise.race([ku(t,e),new Promise((function(t,e){i=setTimeout((function(){r.abort(),e(new Error("Timeout when executing 'fetch'"))}),n)}))]).finally((function(){clearTimeout(i)}))]}))}))},Cu=function(t,e,n,r,i,o){return Kn(void 0,void 0,void 0,(function(){return Gn(this,(function(a){return[2,(s={auth:{audience:e,scope:n},timeout:i,fetchUrl:t,fetchOptions:r},u=o,new Promise((function(t,e){var n=new MessageChannel;n.port1.onmessage=function(n){n.data.error?e(new Error(n.data.error)):t(n.data)},u.postMessage(s,[n.port2])})))];var s,u}))}))},Su=function(t,e,n,r,i,o){return void 0===o&&(o=1e4),Kn(void 0,void 0,void 0,(function(){return Gn(this,(function(a){return i?[2,Cu(t,e,n,r,o,i)]:[2,Ou(t,r,o)]}))}))};function Eu(t,e,n,r,i,o){return Kn(this,void 0,void 0,(function(){var a,s,u,c,l,h,f,d;return Gn(this,(function(p){switch(p.label){case 0:a=null,u=0,p.label=1;case 1:if(!(u<3))return[3,6];p.label=2;case 2:return p.trys.push([2,4,,5]),[4,Su(t,n,r,i,o,e)];case 3:return s=p.sent(),a=null,[3,6];case 4:return c=p.sent(),a=c,[3,5];case 5:return u++,[3,1];case 6:if(a)throw a.message=a.message||"Failed to fetch",a;if(h=(l=s.json).error,f=l.error_description,d=Hn(l,["error","error_description"]),!s.ok)throw new uu(h||"request_error",f||"HTTP error. Unable to fetch "+t);return[2,d]}}))}))}function Tu(t,e){var n=t.baseUrl,r=t.timeout,i=t.audience,o=t.scope,a=t.auth0Client,s=Hn(t,["baseUrl","timeout","audience","scope","auth0Client"]);return Kn(this,void 0,void 0,(function(){return Gn(this,(function(t){switch(t.label){case 0:return[4,Eu(n+"/oauth/token",r,i||"default",o,{method:"POST",body:JSON.stringify(s),headers:{"Content-type":"application/json","Auth0-Client":btoa(JSON.stringify(a||su))}},e)];case 1:return[2,t.sent()]}}))}))}var Iu=function(t){return Array.from(new Set(t))},xu=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Iu(t.join(" ").trim().split(/\s+/)).join(" ")},Nu=function(){function t(t,e){void 0===e&&(e=Au),this.prefix=e,this.client_id=t.client_id,this.scope=t.scope,this.audience=t.audience}return t.prototype.toKey=function(){return this.prefix+"::"+this.client_id+"::"+this.audience+"::"+this.scope},t.fromKey=function(e){var n=e.split("::");return new t({client_id:n[1],scope:n[3],audience:n[2]},n[0])},t}(),Au="@@auth0spajs@@",ju=function(t){var e=Math.floor(Date.now()/1e3)+t.expires_in;return{body:t,expiresAt:Math.min(e,t.decodedToken.claims.exp)}},Pu=function(t,e){var n=t.client_id,r=t.audience,i=t.scope;return e.filter((function(t){var e=Nu.fromKey(t),o=e.prefix,a=e.client_id,s=e.audience,u=e.scope,c=u&&u.split(" "),l=u&&i.split(" ").reduce((function(t,e){return t&&c.includes(e)}),!0);return o===Au&&a===n&&s===r&&l}))[0]},Ru=function(){function t(){}return t.prototype.save=function(t){var e=new Nu({client_id:t.client_id,scope:t.scope,audience:t.audience}),n=ju(t);window.localStorage.setItem(e.toKey(),JSON.stringify(n))},t.prototype.get=function(t,e){void 0===e&&(e=0);var n=this.readJson(t),r=Math.floor(Date.now()/1e3);if(n){if(!(n.expiresAt-e<r))return n.body;if(n.body.refresh_token){var i=this.stripData(n);return this.writeJson(t.toKey(),i),i.body}localStorage.removeItem(t.toKey())}},t.prototype.clear=function(){for(var t=localStorage.length-1;t>=0;t--)localStorage.key(t).startsWith(Au)&&localStorage.removeItem(localStorage.key(t))},t.prototype.readJson=function(t){var e,n=Pu(t,Object.keys(window.localStorage)),r=n&&window.localStorage.getItem(n);if(r&&(e=JSON.parse(r)))return e},t.prototype.writeJson=function(t,e){localStorage.setItem(t,JSON.stringify(e))},t.prototype.stripData=function(t){return{body:{refresh_token:t.body.refresh_token},expiresAt:t.expiresAt}},t}(),Du=function(){var t;this.enclosedCache=(t={},{save:function(e){var n=new Nu({client_id:e.client_id,scope:e.scope,audience:e.audience}),r=ju(e);t[n.toKey()]=r},get:function(e,n){void 0===n&&(n=0);var r=Pu(e,Object.keys(t)),i=t[r],o=Math.floor(Date.now()/1e3);if(i)return i.expiresAt-n<o?i.body.refresh_token?(i.body={refresh_token:i.body.refresh_token},i.body):void delete t[e.toKey()]:i.body},clear:function(){t={}}})},Lu=function(){function t(t){this.storage=t,this.transaction=this.storage.get("a0.spajs.txs")}return t.prototype.create=function(t){this.transaction=t,this.storage.save("a0.spajs.txs",t,{daysUntilExpire:1})},t.prototype.get=function(){return this.transaction},t.prototype.remove=function(){delete this.transaction,this.storage.remove("a0.spajs.txs")},t}(),Mu=function(t){return"number"==typeof t},Fu=["iss","aud","exp","nbf","iat","jti","azp","nonce","auth_time","at_hash","c_hash","acr","amr","sub_jwk","cnf","sip_from_tag","sip_date","sip_callid","sip_cseq_num","sip_via_branch","orig","dest","mky","events","toe","txn","rph","sid","vot","vtm"],Uu=Yn((function(t,e){var n=Jn&&Jn.__assign||function(){return(n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function r(t,e){if(!e)return"";var n="; "+t;return!0===e?n:n+"="+e}function i(t,e,n){return encodeURIComponent(t).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/\(/g,"%28").replace(/\)/g,"%29")+"="+encodeURIComponent(e).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)+function(t){if("number"==typeof t.expires){var e=new Date;e.setMilliseconds(e.getMilliseconds()+864e5*t.expires),t.expires=e}return r("Expires",t.expires?t.expires.toUTCString():"")+r("Domain",t.domain)+r("Path",t.path)+r("Secure",t.secure)+r("SameSite",t.sameSite)}(n)}function o(t){for(var e={},n=t?t.split("; "):[],r=/(%[\dA-F]{2})+/gi,i=0;i<n.length;i++){var o=n[i].split("="),a=o.slice(1).join("=");'"'===a.charAt(0)&&(a=a.slice(1,-1));try{e[o[0].replace(r,decodeURIComponent)]=a.replace(r,decodeURIComponent)}catch(t){}}return e}function a(){return o(document.cookie)}function s(t,e,r){document.cookie=i(t,e,n({path:"/"},r))}e.__esModule=!0,e.encode=i,e.parse=o,e.getAll=a,e.get=function(t){return a()[t]},e.set=s,e.remove=function(t,e){s(t,"",n(n({},e),{expires:-1}))}}));Qn(Uu);var qu,Vu=Uu.get,zu=Uu.set,Bu=Uu.remove,Wu={get:function(t){var e=Vu(t);if(void 0!==e)return JSON.parse(e)},save:function(t,e,n){var r={};"https:"===window.location.protocol&&(r={secure:!0,sameSite:"none"}),r.expires=n.daysUntilExpire,zu(t,JSON.stringify(e),r)},remove:function(t){Bu(t)}},Hu={get:function(t){return Wu.get(t)||Wu.get("_legacy_"+t)},save:function(t,e,n){var r={};"https:"===window.location.protocol&&(r={secure:!0}),r.expires=n.daysUntilExpire,zu("_legacy_"+t,JSON.stringify(e),r),Wu.save(t,e,n)},remove:function(t){Wu.remove(t),Wu.remove("_legacy_"+t)}},Ku={get:function(t){if("undefined"!=typeof sessionStorage){var e=sessionStorage.getItem(t);if(void 0!==e)return JSON.parse(e)}},save:function(t,e){sessionStorage.setItem(t,JSON.stringify(e))},remove:function(t){sessionStorage.removeItem(t)}},Gu=function(t){return qu=qu||function(t,e,n){var r=atob("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Ci8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogICAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uCgogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55CiAgICBwdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuCgogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgKICAgIFJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWQogICAgQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULAogICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NCiAgICBMT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUgogICAgT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUgogICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4KICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovdmFyIGU9ZnVuY3Rpb24oKXtyZXR1cm4oZT1PYmplY3QuYXNzaWdufHxmdW5jdGlvbihlKXtmb3IodmFyIHQscj0xLG49YXJndW1lbnRzLmxlbmd0aDtyPG47cisrKWZvcih2YXIgbyBpbiB0PWFyZ3VtZW50c1tyXSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxvKSYmKGVbb109dFtvXSk7cmV0dXJuIGV9KS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2Z1bmN0aW9uIHQoZSx0LHIsbil7cmV0dXJuIG5ldyhyfHwocj1Qcm9taXNlKSkoKGZ1bmN0aW9uKG8scyl7ZnVuY3Rpb24gYShlKXt0cnl7dShuLm5leHQoZSkpfWNhdGNoKGUpe3MoZSl9fWZ1bmN0aW9uIGkoZSl7dHJ5e3Uobi50aHJvdyhlKSl9Y2F0Y2goZSl7cyhlKX19ZnVuY3Rpb24gdShlKXt2YXIgdDtlLmRvbmU/byhlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiByP3Q6bmV3IHIoKGZ1bmN0aW9uKGUpe2UodCl9KSkpLnRoZW4oYSxpKX11KChuPW4uYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KSl9ZnVuY3Rpb24gcihlLHQpe3ZhciByLG4sbyxzLGE9e2xhYmVsOjAsc2VudDpmdW5jdGlvbigpe2lmKDEmb1swXSl0aHJvdyBvWzFdO3JldHVybiBvWzFdfSx0cnlzOltdLG9wczpbXX07cmV0dXJuIHM9e25leHQ6aSgwKSx0aHJvdzppKDEpLHJldHVybjppKDIpfSwiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYoc1tTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSxzO2Z1bmN0aW9uIGkocyl7cmV0dXJuIGZ1bmN0aW9uKGkpe3JldHVybiBmdW5jdGlvbihzKXtpZihyKXRocm93IG5ldyBUeXBlRXJyb3IoIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy4iKTtmb3IoO2E7KXRyeXtpZihyPTEsbiYmKG89MiZzWzBdP24ucmV0dXJuOnNbMF0/bi50aHJvd3x8KChvPW4ucmV0dXJuKSYmby5jYWxsKG4pLDApOm4ubmV4dCkmJiEobz1vLmNhbGwobixzWzFdKSkuZG9uZSlyZXR1cm4gbztzd2l0Y2gobj0wLG8mJihzPVsyJnNbMF0sby52YWx1ZV0pLHNbMF0pe2Nhc2UgMDpjYXNlIDE6bz1zO2JyZWFrO2Nhc2UgNDpyZXR1cm4gYS5sYWJlbCsrLHt2YWx1ZTpzWzFdLGRvbmU6ITF9O2Nhc2UgNTphLmxhYmVsKyssbj1zWzFdLHM9WzBdO2NvbnRpbnVlO2Nhc2UgNzpzPWEub3BzLnBvcCgpLGEudHJ5cy5wb3AoKTtjb250aW51ZTtkZWZhdWx0OmlmKCEobz1hLnRyeXMsKG89by5sZW5ndGg+MCYmb1tvLmxlbmd0aC0xXSl8fDYhPT1zWzBdJiYyIT09c1swXSkpe2E9MDtjb250aW51ZX1pZigzPT09c1swXSYmKCFvfHxzWzFdPm9bMF0mJnNbMV08b1szXSkpe2EubGFiZWw9c1sxXTticmVha31pZig2PT09c1swXSYmYS5sYWJlbDxvWzFdKXthLmxhYmVsPW9bMV0sbz1zO2JyZWFrfWlmKG8mJmEubGFiZWw8b1syXSl7YS5sYWJlbD1vWzJdLGEub3BzLnB1c2gocyk7YnJlYWt9b1syXSYmYS5vcHMucG9wKCksYS50cnlzLnBvcCgpO2NvbnRpbnVlfXM9dC5jYWxsKGUsYSl9Y2F0Y2goZSl7cz1bNixlXSxuPTB9ZmluYWxseXtyPW89MH1pZig1JnNbMF0pdGhyb3cgc1sxXTtyZXR1cm57dmFsdWU6c1swXT9zWzFdOnZvaWQgMCxkb25lOiEwfX0oW3MsaV0pfX19dmFyIG49e30sbz1mdW5jdGlvbihlLHQpe3JldHVybiBlKyJ8Iit0fTthZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwoZnVuY3Rpb24ocyl7dmFyIGE9cy5kYXRhLGk9YS50aW1lb3V0LHU9YS5hdXRoLGM9YS5mZXRjaFVybCxmPWEuZmV0Y2hPcHRpb25zLGw9cy5wb3J0c1swXTtyZXR1cm4gdCh2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxzLGEsaCxwLGIseSxkLHYsdztyZXR1cm4gcih0aGlzLChmdW5jdGlvbihyKXtzd2l0Y2goci5sYWJlbCl7Y2FzZSAwOmE9KHM9dXx8e30pLmF1ZGllbmNlLGg9cy5zY29wZSxyLmxhYmVsPTE7Y2FzZSAxOmlmKHIudHJ5cy5wdXNoKFsxLDcsLDhdKSwhKHA9SlNPTi5wYXJzZShmLmJvZHkpKS5yZWZyZXNoX3Rva2VuJiYicmVmcmVzaF90b2tlbiI9PT1wLmdyYW50X3R5cGUpe2lmKCEoYj1mdW5jdGlvbihlLHQpe3JldHVybiBuW28oZSx0KV19KGEsaCkpKXRocm93IG5ldyBFcnJvcigiVGhlIHdlYiB3b3JrZXIgaXMgbWlzc2luZyB0aGUgcmVmcmVzaCB0b2tlbiIpO2YuYm9keT1KU09OLnN0cmluZ2lmeShlKGUoe30scCkse3JlZnJlc2hfdG9rZW46Yn0pKX15PXZvaWQgMCwiZnVuY3Rpb24iPT10eXBlb2YgQWJvcnRDb250cm9sbGVyJiYoeT1uZXcgQWJvcnRDb250cm9sbGVyLGYuc2lnbmFsPXkuc2lnbmFsKSxkPXZvaWQgMCxyLmxhYmVsPTI7Y2FzZSAyOnJldHVybiByLnRyeXMucHVzaChbMiw0LCw1XSksWzQsUHJvbWlzZS5yYWNlKFsoZz1pLG5ldyBQcm9taXNlKChmdW5jdGlvbihlKXtyZXR1cm4gc2V0VGltZW91dChlLGcpfSkpKSxmZXRjaChjLGUoe30sZikpXSldO2Nhc2UgMzpyZXR1cm4gZD1yLnNlbnQoKSxbMyw1XTtjYXNlIDQ6cmV0dXJuIHY9ci5zZW50KCksbC5wb3N0TWVzc2FnZSh7ZXJyb3I6di5tZXNzYWdlfSksWzJdO2Nhc2UgNTpyZXR1cm4gZD9bNCxkLmpzb24oKV06KHkmJnkuYWJvcnQoKSxsLnBvc3RNZXNzYWdlKHtlcnJvcjoiVGltZW91dCB3aGVuIGV4ZWN1dGluZyAnZmV0Y2gnIn0pLFsyXSk7Y2FzZSA2OnJldHVybih0PXIuc2VudCgpKS5yZWZyZXNoX3Rva2VuPyhmdW5jdGlvbihlLHQscil7bltvKHQscildPWV9KHQucmVmcmVzaF90b2tlbixhLGgpLGRlbGV0ZSB0LnJlZnJlc2hfdG9rZW4pOmZ1bmN0aW9uKGUsdCl7ZGVsZXRlIG5bbyhlLHQpXX0oYSxoKSxsLnBvc3RNZXNzYWdlKHtvazpkLm9rLGpzb246dH0pLFszLDhdO2Nhc2UgNzpyZXR1cm4gdz1yLnNlbnQoKSxsLnBvc3RNZXNzYWdlKHtvazohMSxqc29uOntlcnJvcl9kZXNjcmlwdGlvbjp3Lm1lc3NhZ2V9fSksWzMsOF07Y2FzZSA4OnJldHVyblsyXX12YXIgZ30pKX0pKX0pKX0oKTsKCg=="),i=r.indexOf("\n",10)+1,o=r.substring(i)+"",a=new Blob([o],{type:"application/javascript"});return URL.createObjectURL(a)}(),new Worker(qu,t)},Ju={},Qu=new iu,Yu={memory:function(){return(new Du).enclosedCache},localstorage:function(){return new Ru}},Xu=function(t){return Yu[t]},Zu=function(){function t(t){var e,n;if(this.options=t,"undefined"!=typeof window&&function(){if(!pu())throw new Error("For security reasons, `window.crypto` is required to run `auth0-spa-js`.");if(void 0===vu())throw new Error("\n      auth0-spa-js must run on a secure origin. See https://github.com/auth0/auth0-spa-js/blob/master/FAQ.md#why-do-i-get-auth0-spa-js-must-run-on-a-secure-origin for more information.\n    ")}(),this.cacheLocation=t.cacheLocation||"memory",this.cookieStorage=!1===t.legacySameSiteCookie?Wu:Hu,this.sessionCheckExpiryDays=t.sessionCheckExpiryDays||1,!Xu(this.cacheLocation))throw new Error('Invalid cache location "'+this.cacheLocation+'"');var r,i,o=t.useCookiesForTransactions?this.cookieStorage:Ku;this.cache=Xu(this.cacheLocation)(),this.scope=this.options.scope,this.transactionManager=new Lu(o),this.domainUrl="https://"+this.options.domain,this.tokenIssuer=(i=this.domainUrl,(r=this.options.issuer)?r.startsWith("https://")?r:"https://"+r+"/":i+"/"),this.defaultScope=xu("openid",void 0!==(null===(n=null===(e=this.options)||void 0===e?void 0:e.advancedOptions)||void 0===n?void 0:n.defaultScope)?this.options.advancedOptions.defaultScope:"openid profile email"),this.options.useRefreshTokens&&(this.scope=xu(this.scope,"offline_access")),"undefined"!=typeof window&&window.Worker&&this.options.useRefreshTokens&&"memory"===this.cacheLocation&&!/Trident.*rv:11\.0/.test(navigator.userAgent)&&(this.worker=new Gu),this.customOptions=function(t){return Hn(t,["advancedOptions","audience","auth0Client","authorizeTimeoutInSeconds","cacheLocation","client_id","domain","issuer","leeway","max_age","redirect_uri","scope","useRefreshTokens"])}(t)}return t.prototype._url=function(t){var e=encodeURIComponent(btoa(JSON.stringify(this.options.auth0Client||su)));return""+this.domainUrl+t+"&auth0Client="+e},t.prototype._getParams=function(t,e,n,r,i){var o=Hn(this.options,["domain","leeway","useRefreshTokens","useCookiesForTransactions","auth0Client","cacheLocation","advancedOptions"]);return Wn(Wn(Wn({},o),t),{scope:xu(this.defaultScope,this.scope,t.scope),response_type:"code",response_mode:"query",state:e,nonce:n,redirect_uri:i||this.options.redirect_uri,code_challenge:r,code_challenge_method:"S256"})},t.prototype._authorizeUrl=function(t){return this._url("/authorize?"+mu(t))},t.prototype._verifyIdToken=function(t,e,n){return function(t){if(!t.id_token)throw new Error("ID token is required but missing");var e=function(t){var e=t.split("."),n=e[0],r=e[1],i=e[2];if(3!==e.length||!n||!r||!i)throw new Error("ID token could not be decoded");var o=JSON.parse(_u(r)),a={__raw:t},s={};return Object.keys(o).forEach((function(t){a[t]=o[t],Fu.includes(t)||(s[t]=o[t])})),{encoded:{header:n,payload:r,signature:i},header:JSON.parse(_u(n)),claims:a,user:s}}(t.id_token);if(!e.claims.iss)throw new Error("Issuer (iss) claim must be a string present in the ID token");if(e.claims.iss!==t.iss)throw new Error('Issuer (iss) claim mismatch in the ID token; expected "'+t.iss+'", found "'+e.claims.iss+'"');if(!e.user.sub)throw new Error("Subject (sub) claim must be a string present in the ID token");if("RS256"!==e.header.alg)throw new Error('Signature algorithm of "'+e.header.alg+'" is not supported. Expected the ID token to be signed with "RS256".');if(!e.claims.aud||"string"!=typeof e.claims.aud&&!Array.isArray(e.claims.aud))throw new Error("Audience (aud) claim must be a string or array of strings present in the ID token");if(Array.isArray(e.claims.aud)){if(!e.claims.aud.includes(t.aud))throw new Error('Audience (aud) claim mismatch in the ID token; expected "'+t.aud+'" but was not one of "'+e.claims.aud.join(", ")+'"');if(e.claims.aud.length>1){if(!e.claims.azp)throw new Error("Authorized Party (azp) claim must be a string present in the ID token when Audience (aud) claim has multiple values");if(e.claims.azp!==t.aud)throw new Error('Authorized Party (azp) claim mismatch in the ID token; expected "'+t.aud+'", found "'+e.claims.azp+'"')}}else if(e.claims.aud!==t.aud)throw new Error('Audience (aud) claim mismatch in the ID token; expected "'+t.aud+'" but found "'+e.claims.aud+'"');if(t.nonce){if(!e.claims.nonce)throw new Error("Nonce (nonce) claim must be a string present in the ID token");if(e.claims.nonce!==t.nonce)throw new Error('Nonce (nonce) claim mismatch in the ID token; expected "'+t.nonce+'", found "'+e.claims.nonce+'"')}if(t.max_age&&!Mu(e.claims.auth_time))throw new Error("Authentication Time (auth_time) claim must be a number present in the ID token when Max Age (max_age) is specified");if(!Mu(e.claims.exp))throw new Error("Expiration Time (exp) claim must be a number present in the ID token");if(!Mu(e.claims.iat))throw new Error("Issued At (iat) claim must be a number present in the ID token");var n=t.leeway||60,r=new Date(Date.now()),i=new Date(0),o=new Date(0),a=new Date(0);if(a.setUTCSeconds(parseInt(e.claims.auth_time)+t.max_age+n),i.setUTCSeconds(e.claims.exp+n),o.setUTCSeconds(e.claims.nbf-n),r>i)throw new Error("Expiration Time (exp) claim error in the ID token; current time ("+r+") is after expiration time ("+i+")");if(Mu(e.claims.nbf)&&r<o)throw new Error("Not Before time (nbf) claim in the ID token indicates that this token can't be used just yet. Currrent time ("+r+") is before "+o);if(Mu(e.claims.auth_time)&&r>a)throw new Error("Authentication Time (auth_time) claim in the ID token indicates that too much time has passed since the last end-user authentication. Currrent time ("+r+") is after last auth at "+a);if(t.organizationId){if(!e.claims.org_id)throw new Error("Organization ID (org_id) claim must be a string present in the ID token");if(t.organizationId!==e.claims.org_id)throw new Error('Organization ID (org_id) claim mismatch in the ID token; expected "'+t.organizationId+'", found "'+e.claims.org_id+'"')}return e}({iss:this.tokenIssuer,aud:this.options.client_id,id_token:t,nonce:e,organizationId:n,leeway:this.options.leeway,max_age:this._parseNumber(this.options.max_age)})},t.prototype._parseNumber=function(t){return"string"!=typeof t?t:parseInt(t,10)||void 0},t.prototype.buildAuthorizeUrl=function(t){return void 0===t&&(t={}),Kn(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,u,c,l,h,f;return Gn(this,(function(d){switch(d.label){case 0:return e=t.redirect_uri,n=t.appState,r=Hn(t,["redirect_uri","appState"]),i=gu(yu()),o=gu(yu()),a=yu(),[4,bu(a)];case 1:return s=d.sent(),u=wu(s),c=t.fragment?"#"+t.fragment:"",l=this._getParams(r,i,o,u,e),h=this._authorizeUrl(l),this.transactionManager.create(Wn({nonce:o,code_verifier:a,appState:n,scope:l.scope,audience:l.audience||"default",redirect_uri:l.redirect_uri},(f=t.organization||this.options.organization)&&{organizationId:f})),[2,h+c]}}))}))},t.prototype.loginWithPopup=function(t,e){return Kn(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,h,f,d;return Gn(this,(function(p){switch(p.label){case 0:return t=t||{},(e=e||{}).popup||(e.popup=function(t){var e=window.screenX+(window.innerWidth-400)/2,n=window.screenY+(window.innerHeight-600)/2;return window.open("","auth0:authorize:popup","left="+e+",top="+n+",width=400,height=600,resizable,scrollbars=yes,status=1")}()),n=Hn(t,[]),r=gu(yu()),i=gu(yu()),o=yu(),[4,bu(o)];case 1:return a=p.sent(),s=wu(a),u=this._getParams(n,r,i,s,this.options.redirect_uri||window.location.origin),c=this._authorizeUrl(Wn(Wn({},u),{response_mode:"web_message"})),e.popup.location.href=c,[4,du(Wn(Wn({},e),{timeoutInSeconds:e.timeoutInSeconds||this.options.authorizeTimeoutInSeconds||60}))];case 2:if(l=p.sent(),r!==l.state)throw new Error("Invalid state");return[4,Tu({audience:u.audience,scope:u.scope,baseUrl:this.domainUrl,client_id:this.options.client_id,code_verifier:o,code:l.code,grant_type:"authorization_code",redirect_uri:u.redirect_uri,auth0Client:this.options.auth0Client},this.worker)];case 3:return h=p.sent(),f=this._verifyIdToken(h.id_token,i,t.organization||this.options.organization),d=Wn(Wn({},h),{decodedToken:f,scope:u.scope,audience:u.audience||"default",client_id:this.options.client_id}),this.cache.save(d),this.cookieStorage.save("auth0.is.authenticated",!0,{daysUntilExpire:this.sessionCheckExpiryDays}),[2]}}))}))},t.prototype.getUser=function(t){return void 0===t&&(t={}),Kn(this,void 0,void 0,(function(){var e,n,r;return Gn(this,(function(i){return e=t.audience||this.options.audience||"default",n=xu(this.defaultScope,this.scope,t.scope),[2,(r=this.cache.get(new Nu({client_id:this.options.client_id,audience:e,scope:n})))&&r.decodedToken&&r.decodedToken.user]}))}))},t.prototype.getIdTokenClaims=function(t){return void 0===t&&(t={}),Kn(this,void 0,void 0,(function(){var e,n,r;return Gn(this,(function(i){return e=t.audience||this.options.audience||"default",n=xu(this.defaultScope,this.scope,t.scope),[2,(r=this.cache.get(new Nu({client_id:this.options.client_id,audience:e,scope:n})))&&r.decodedToken&&r.decodedToken.claims]}))}))},t.prototype.loginWithRedirect=function(t){return void 0===t&&(t={}),Kn(this,void 0,void 0,(function(){var e,n,r;return Gn(this,(function(i){switch(i.label){case 0:return e=t.redirectMethod,n=Hn(t,["redirectMethod"]),[4,this.buildAuthorizeUrl(n)];case 1:return r=i.sent(),window.location[e||"assign"](r),[2]}}))}))},t.prototype.handleRedirectCallback=function(t){return void 0===t&&(t=window.location.href),Kn(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,u,c,l,h;return Gn(this,(function(f){switch(f.label){case 0:if(0===(e=t.split("?").slice(1)).length)throw new Error("There are no query params available for parsing.");if(n=function(t){t.indexOf("#")>-1&&(t=t.substr(0,t.indexOf("#")));var e=t.split("&"),n={};return e.forEach((function(t){var e=t.split("=");n[e[0]]=decodeURIComponent(e[1])})),Wn(Wn({},n),{expires_in:parseInt(n.expires_in)})}(e.join("")),r=n.state,i=n.code,o=n.error,a=n.error_description,!(s=this.transactionManager.get())||!s.code_verifier)throw new Error("Invalid state");if(this.transactionManager.remove(),o)throw new cu(o,a,r,s.appState);return u={audience:s.audience,scope:s.scope,baseUrl:this.domainUrl,client_id:this.options.client_id,code_verifier:s.code_verifier,grant_type:"authorization_code",code:i,auth0Client:this.options.auth0Client},void 0!==s.redirect_uri&&(u.redirect_uri=s.redirect_uri),[4,Tu(u,this.worker)];case 1:return c=f.sent(),l=this._verifyIdToken(c.id_token,s.nonce,s.organizationId),h=Wn(Wn({},c),{decodedToken:l,audience:s.audience,scope:s.scope,client_id:this.options.client_id}),this.cache.save(h),this.cookieStorage.save("auth0.is.authenticated",!0,{daysUntilExpire:this.sessionCheckExpiryDays}),[2,{appState:s.appState}]}}))}))},t.prototype.checkSession=function(t){return Kn(this,void 0,void 0,(function(){var e;return Gn(this,(function(n){switch(n.label){case 0:if(!this.cookieStorage.get("auth0.is.authenticated"))return[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.getTokenSilently(t)];case 2:return n.sent(),[3,4];case 3:if(e=n.sent(),!au.includes(e.error))throw e;return[3,4];case 4:return[2]}}))}))},t.prototype.getTokenSilently=function(t){return void 0===t&&(t={}),Kn(this,void 0,void 0,(function(){var e,n,r,i=this;return Gn(this,(function(o){return e=Wn(Wn({audience:this.options.audience,ignoreCache:!1},t),{scope:xu(this.defaultScope,this.scope,t.scope)}),n=e.ignoreCache,r=Hn(e,["ignoreCache"]),[2,(a=function(){return i._getTokenSilently(Wn({ignoreCache:n},r))},s=this.options.client_id+"::"+r.audience+"::"+r.scope,u=Ju[s],u||(u=a().finally((function(){delete Ju[s],u=null})),Ju[s]=u),u)];var a,s,u}))}))},t.prototype._getTokenSilently=function(t){return void 0===t&&(t={}),Kn(this,void 0,void 0,(function(){var e,n,r,i,o,a,s=this;return Gn(this,(function(u){switch(u.label){case 0:return e=t.ignoreCache,n=Hn(t,["ignoreCache"]),r=function(){var t=s.cache.get(new Nu({scope:n.scope,audience:n.audience||"default",client_id:s.options.client_id}),60);return t&&t.access_token},!e&&(i=r())?[2,i]:[4,(c=function(){return Qu.acquireLock("auth0.lock.getTokenSilently",5e3)},l=10,void 0===l&&(l=3),Kn(void 0,void 0,void 0,(function(){var t;return Gn(this,(function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<l?[4,c()]:[3,4];case 2:if(e.sent())return[2,!0];e.label=3;case 3:return t++,[3,1];case 4:return[2,!1]}}))})))];case 1:if(!u.sent())return[3,10];u.label=2;case 2:return u.trys.push([2,,7,9]),!e&&(i=r())?[2,i]:this.options.useRefreshTokens?[4,this._getTokenUsingRefreshToken(n)]:[3,4];case 3:return a=u.sent(),[3,6];case 4:return[4,this._getTokenFromIFrame(n)];case 5:a=u.sent(),u.label=6;case 6:return this.cache.save(Wn({client_id:this.options.client_id},o=a)),this.cookieStorage.save("auth0.is.authenticated",!0,{daysUntilExpire:this.sessionCheckExpiryDays}),[2,o.access_token];case 7:return[4,Qu.releaseLock("auth0.lock.getTokenSilently")];case 8:return u.sent(),[7];case 9:return[3,11];case 10:throw new lu;case 11:return[2]}var c,l}))}))},t.prototype.getTokenWithPopup=function(t,e){return void 0===t&&(t={}),void 0===e&&(e={}),Kn(this,void 0,void 0,(function(){return Gn(this,(function(n){switch(n.label){case 0:return t.audience=t.audience||this.options.audience,t.scope=xu(this.defaultScope,this.scope,t.scope),e=Wn(Wn({},ou),e),[4,this.loginWithPopup(t,e)];case 1:return n.sent(),[2,this.cache.get(new Nu({scope:t.scope,audience:t.audience||"default",client_id:this.options.client_id})).access_token]}}))}))},t.prototype.isAuthenticated=function(){return Kn(this,void 0,void 0,(function(){return Gn(this,(function(t){switch(t.label){case 0:return[4,this.getUser()];case 1:return[2,!!t.sent()]}}))}))},t.prototype.buildLogoutUrl=function(t){void 0===t&&(t={}),null!==t.client_id?t.client_id=t.client_id||this.options.client_id:delete t.client_id;var e=t.federated,n=Hn(t,["federated"]),r=e?"&federated":"";return this._url("/v2/logout?"+mu(n))+r},t.prototype.logout=function(t){void 0===t&&(t={});var e=t.localOnly,n=Hn(t,["localOnly"]);if(e&&n.federated)throw new Error("It is invalid to set both the `federated` and `localOnly` options to `true`");if(this.cache.clear(),this.cookieStorage.remove("auth0.is.authenticated"),!e){var r=this.buildLogoutUrl(n);window.location.assign(r)}},t.prototype._getTokenFromIFrame=function(t){return Kn(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,u,c,l,h,f,d,p,v;return Gn(this,(function(y){switch(y.label){case 0:return e=gu(yu()),n=gu(yu()),r=yu(),[4,bu(r)];case 1:i=y.sent(),o=wu(i),a=this._getParams(t,e,n,o,t.redirect_uri||this.options.redirect_uri||window.location.origin),s=this._authorizeUrl(Wn(Wn({},a),{prompt:"none",response_mode:"web_message"})),u=t.timeoutInSeconds||this.options.authorizeTimeoutInSeconds,y.label=2;case 2:return y.trys.push([2,5,,6]),[4,(g=s,m=this.domainUrl,b=u,void 0===b&&(b=60),new Promise((function(t,e){var n=window.document.createElement("iframe");n.setAttribute("width","0"),n.setAttribute("height","0"),n.style.display="none";var r,i=function(){window.document.body.contains(n)&&(window.document.body.removeChild(n),window.removeEventListener("message",r,!1))},o=setTimeout((function(){e(new lu),i()}),1e3*b);r=function(n){if(n.origin==m&&n.data&&"authorization_response"===n.data.type){var a=n.source;a&&a.close(),n.data.response.error?e(uu.fromPayload(n.data.response)):t(n.data.response),clearTimeout(o),window.removeEventListener("message",r,!1),setTimeout(i,2e3)}},window.addEventListener("message",r,!1),window.document.body.appendChild(n),n.setAttribute("src",g)})))];case 3:if(c=y.sent(),e!==c.state)throw new Error("Invalid state");return l=t.scope,h=t.audience,f=Hn(t,["scope","audience","redirect_uri","ignoreCache","timeoutInSeconds"]),[4,Tu(Wn(Wn(Wn({},this.customOptions),f),{scope:l,audience:h,baseUrl:this.domainUrl,client_id:this.options.client_id,code_verifier:r,code:c.code,grant_type:"authorization_code",redirect_uri:a.redirect_uri,auth0Client:this.options.auth0Client}),this.worker)];case 4:return d=y.sent(),p=this._verifyIdToken(d.id_token,n),[2,Wn(Wn({},d),{decodedToken:p,scope:a.scope,audience:a.audience||"default"})];case 5:throw"login_required"===(v=y.sent()).error&&this.logout({localOnly:!0}),v;case 6:return[2]}var g,m,b}))}))},t.prototype._getTokenUsingRefreshToken=function(t){return Kn(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,u,c;return Gn(this,(function(l){switch(l.label){case 0:return t.scope=xu(this.defaultScope,this.options.scope,t.scope),(e=this.cache.get(new Nu({scope:t.scope,audience:t.audience||"default",client_id:this.options.client_id})))&&e.refresh_token||this.worker?[3,2]:[4,this._getTokenFromIFrame(t)];case 1:return[2,l.sent()];case 2:n=t.redirect_uri||this.options.redirect_uri||window.location.origin,i=t.scope,o=t.audience,a=Hn(t,["scope","audience","ignoreCache","timeoutInSeconds"]),s="number"==typeof t.timeoutInSeconds?1e3*t.timeoutInSeconds:null,l.label=3;case 3:return l.trys.push([3,5,,8]),[4,Tu(Wn(Wn(Wn(Wn(Wn({},this.customOptions),a),{audience:o,scope:i,baseUrl:this.domainUrl,client_id:this.options.client_id,grant_type:"refresh_token",refresh_token:e&&e.refresh_token,redirect_uri:n}),s&&{timeout:s}),{auth0Client:this.options.auth0Client}),this.worker)];case 4:return r=l.sent(),[3,8];case 5:return"The web worker is missing the refresh token"===(u=l.sent()).message||u.message&&u.message.indexOf("invalid refresh token")>-1?[4,this._getTokenFromIFrame(t)]:[3,7];case 6:return[2,l.sent()];case 7:throw u;case 8:return c=this._verifyIdToken(r.id_token),[2,Wn(Wn({},r),{decodedToken:c,scope:t.scope,audience:t.audience||"default"})]}}))}))},t}(),$u=o("XNiG"),tc=o("9ppp"),ec=function(t){p(n,t);var e=y(n);function n(t){var r;return h(this,n),(r=e.call(this))._value=t,r}return d(n,[{key:"value",get:function(){return this.getValue()}},{key:"_subscribe",value:function(t){var e=l(_(n.prototype),"_subscribe",this).call(this,t);return e&&!e.closed&&t.next(this._value),e}},{key:"getValue",value:function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new tc.a;return this._value}},{key:"next",value:function(t){l(_(n.prototype),"next",this).call(this,this._value=t)}}]),n}($u.a),nc=o("qgXg"),rc=o("quSY"),ic=o("pxpQ"),oc=o("Ylt2"),ac=function(t){p(n,t);var e=y(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY,o=arguments.length>2?arguments[2]:void 0;return h(this,n),(t=e.call(this)).scheduler=o,t._events=[],t._infiniteTimeWindow=!1,t._bufferSize=r<1?1:r,t._windowTime=i<1?1:i,i===Number.POSITIVE_INFINITY?(t._infiniteTimeWindow=!0,t.next=t.nextInfiniteTimeWindow):t.next=t.nextTimeWindow,t}return d(n,[{key:"nextInfiniteTimeWindow",value:function(t){if(!this.isStopped){var e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}l(_(n.prototype),"next",this).call(this,t)}},{key:"nextTimeWindow",value:function(t){this.isStopped||(this._events.push(new sc(this._getNow(),t)),this._trimBufferThenGetEvents()),l(_(n.prototype),"next",this).call(this,t)}},{key:"_subscribe",value:function(t){var e,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new tc.a;if(this.isStopped||this.hasError?e=rc.a.EMPTY:(this.observers.push(t),e=new oc.a(this,t)),i&&t.add(t=new ic.a(t,i)),n)for(var a=0;a<o&&!t.closed;a++)t.next(r[a]);else for(var s=0;s<o&&!t.closed;s++)t.next(r[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e}},{key:"_getNow",value:function(){return(this.scheduler||nc.a).now()}},{key:"_trimBufferThenGetEvents",value:function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}]),n}($u.a),sc=function t(e,n){h(this,t),this.time=e,this.value=n},uc=o("VRyK"),cc=o("EY2u");function lc(t){return new de.a((function(e){var n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(ge.a)(n):Object(cc.b)()).subscribe(e)}))}var hc=o("LRne"),fc=o("z6cu"),dc=o("7o/Q");function pc(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new vc(t,e,n))}}var vc=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];h(this,t),this.accumulator=e,this.seed=n,this.hasSeed=r}return d(t,[{key:"call",value:function(t,e){return e.subscribe(new yc(t,this.accumulator,this.seed,this.hasSeed))}}]),t}(),yc=function(t){p(n,t);var e=y(n);function n(t,r,i,o){var a;return h(this,n),(a=e.call(this,t)).accumulator=r,a._seed=i,a.hasSeed=o,a.index=0,a}return d(n,[{key:"seed",get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t}},{key:"_next",value:function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}},{key:"_tryNext",value:function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(r){this.destination.error(r)}this.seed=e,this.destination.next(e)}}]),n}(dc.a);function gc(t,e){return function(n){return n.lift(new mc(t,e))}}var mc=function(){function t(e,n){h(this,t),this.predicate=e,this.thisArg=n}return d(t,[{key:"call",value:function(t,e){return e.subscribe(new bc(t,this.predicate,this.thisArg))}}]),t}(),bc=function(t){p(n,t);var e=y(n);function n(t,r,i){var o;return h(this,n),(o=e.call(this,t)).predicate=r,o.thisArg=i,o.count=0,o}return d(n,[{key:"_next",value:function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}]),n}(dc.a);function _c(t,e){return function(n){return n.lift(new wc(t,e))}}var wc=function(){function t(e,n){h(this,t),this.compare=e,this.keySelector=n}return d(t,[{key:"call",value:function(t,e){return e.subscribe(new kc(t,this.compare,this.keySelector))}}]),t}(),kc=function(t){p(n,t);var e=y(n);function n(t,r,i){var o;return h(this,n),(o=e.call(this,t)).keySelector=i,o.hasKey=!1,"function"==typeof r&&(o.compare=r),o}return d(n,[{key:"compare",value:function(t,e){return t===e}},{key:"_next",value:function(t){var e;try{var n=this.keySelector;e=n?n(t):t}catch(i){return this.destination.error(i)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,e)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=e,this.destination.next(t))}}]),n}(dc.a),Oc=o("zx2A");function Cc(t,e){return"function"==typeof e?function(n){return n.pipe(Cc((function(n,r){return Object(ge.a)(t(n,r)).pipe(Object(ve.a)((function(t,i){return e(n,t,r,i)})))})))}:function(e){return e.lift(new Sc(t))}}var Sc=function(){function t(e){h(this,t),this.project=e}return d(t,[{key:"call",value:function(t,e){return e.subscribe(new Ec(t,this.project))}}]),t}(),Ec=function(t){p(n,t);var e=y(n);function n(t,r){var i;return h(this,n),(i=e.call(this,t)).project=r,i.index=0,i}return d(n,[{key:"_next",value:function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}},{key:"_innerSub",value:function(t){var e=this.innerSubscription;e&&e.unsubscribe();var n=new Oc.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(Oc.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}},{key:"_complete",value:function(){var t=this.innerSubscription;t&&!t.closed||l(_(n.prototype),"_complete",this).call(this),this.unsubscribe()}},{key:"_unsubscribe",value:function(){this.innerSubscription=void 0}},{key:"notifyComplete",value:function(){this.innerSubscription=void 0,this.isStopped&&l(_(n.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(t){this.destination.next(t)}}]),n}(Oc.b),Tc=o("5+tZ");function Ic(t,e){return Object(Tc.b)(t,e,1)}function xc(t){return function(e){var n=new Nc(t),r=e.lift(n);return n.caught=r}}var Nc=function(){function t(e){h(this,t),this.selector=e}return d(t,[{key:"call",value:function(t,e){return e.subscribe(new Ac(t,this.selector,this.caught))}}]),t}(),Ac=function(t){p(n,t);var e=y(n);function n(t,r,i){var o;return h(this,n),(o=e.call(this,t)).selector=r,o.caught=i,o}return d(n,[{key:"error",value:function(t){if(!this.isStopped){var e;try{e=this.selector(t,this.caught)}catch(o){return void l(_(n.prototype),"error",this).call(this,o)}this._unsubscribeAndRecycle();var r=new Oc.a(this);this.add(r);var i=Object(Oc.c)(e,r);i!==r&&this.add(i)}}}]),n}(Oc.b),jc=o("vkgz"),Pc=function(){function t(e){h(this,t),this.notifier=e}return d(t,[{key:"call",value:function(t,e){var n=new Rc(t),r=Object(Oc.c)(this.notifier,new Oc.a(n));return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}]),t}(),Rc=function(t){p(n,t);var e=y(n);function n(t){var r;return h(this,n),(r=e.call(this,t)).seenValue=!1,r}return d(n,[{key:"notifyNext",value:function(){this.seenValue=!0,this.complete()}},{key:"notifyComplete",value:function(){}}]),n}(Oc.b),Dc=function(t){p(n,t);var e=y(n);function n(){return h(this,n),e.apply(this,arguments)}return d(n,[{key:"notifyNext",value:function(t,e,n,r,i){this.destination.next(e)}},{key:"notifyError",value:function(t,e){this.destination.error(t)}},{key:"notifyComplete",value:function(t){this.destination.complete()}}]),n}(dc.a),Lc=function(t){p(n,t);var e=y(n);function n(t,r,i){var o;return h(this,n),(o=e.call(this)).parent=t,o.outerValue=r,o.outerIndex=i,o.index=0,o}return d(n,[{key:"_next",value:function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}},{key:"_error",value:function(t){this.parent.notifyError(t,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),n}(dc.a),Mc=o("SeVD");function Fc(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Lc(t,n,r);if(!i.closed)return e instanceof de.a?e.subscribe(i):Object(Mc.a)(e)(i)}function Uc(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){var n;return"function"==typeof e[e.length-1]&&(n=e.pop()),t.lift(new qc(e,n))}}var qc=function(){function t(e,n){h(this,t),this.observables=e,this.project=n}return d(t,[{key:"call",value:function(t,e){return e.subscribe(new Vc(t,this.observables,this.project))}}]),t}(),Vc=function(t){p(n,t);var e=y(n);function n(t,r,i){var o;h(this,n),(o=e.call(this,t)).observables=r,o.project=i,o.toRespond=[];var a=r.length;o.values=new Array(a);for(var s=0;s<a;s++)o.toRespond.push(s);for(var u=0;u<a;u++)o.add(Fc(m(o),r[u],void 0,u));return o}return d(n,[{key:"notifyNext",value:function(t,e,n){this.values[n]=e;var r=this.toRespond;if(r.length>0){var i=r.indexOf(n);-1!==i&&r.splice(i,1)}}},{key:"notifyComplete",value:function(){}},{key:"_next",value:function(t){if(0===this.toRespond.length){var e=[t].concat(i(this.values));this.project?this._tryProject(e):this.destination.next(e)}}},{key:"_tryProject",value:function(t){var e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),n}(Dc),zc=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}();function Bc(t){return function(e){return 0===t?Object(cc.b)():e.lift(new Wc(t))}}var Wc=function(){function t(e){if(h(this,t),this.total=e,this.total<0)throw new zc}return d(t,[{key:"call",value:function(t,e){return e.subscribe(new Hc(t,this.total))}}]),t}(),Hc=function(t){p(n,t);var e=y(n);function n(t,r){var i;return h(this,n),(i=e.call(this,t)).total=r,i.count=0,i}return d(n,[{key:"_next",value:function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}]),n}(dc.a),Kc=function(){function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t}();function Gc(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(e){return e.lift(new Jc(t))}}var Jc=function(){function t(e){h(this,t),this.defaultValue=e}return d(t,[{key:"call",value:function(t,e){return e.subscribe(new Qc(t,this.defaultValue))}}]),t}(),Qc=function(t){p(n,t);var e=y(n);function n(t,r){var i;return h(this,n),(i=e.call(this,t)).defaultValue=r,i.isEmpty=!0,i}return d(n,[{key:"_next",value:function(t){this.isEmpty=!1,this.destination.next(t)}},{key:"_complete",value:function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}]),n}(dc.a);function Yc(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$c;return function(e){return e.lift(new Xc(t))}}var Xc=function(){function t(e){h(this,t),this.errorFactory=e}return d(t,[{key:"call",value:function(t,e){return e.subscribe(new Zc(t,this.errorFactory))}}]),t}(),Zc=function(t){p(n,t);var e=y(n);function n(t,r){var i;return h(this,n),(i=e.call(this,t)).errorFactory=r,i.hasValue=!1,i}return d(n,[{key:"_next",value:function(t){this.hasValue=!0,this.destination.next(t)}},{key:"_complete",value:function(){if(this.hasValue)return this.destination.complete();var t;try{t=this.errorFactory()}catch(VA){t=VA}this.destination.error(t)}}]),n}(dc.a);function $c(){return new Kc}var tl=o("SpAZ");function el(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?gc((function(e,n){return t(e,n,r)})):tl.a,Bc(1),n?Gc(e):Yc((function(){return new Kc})))}}var nl=o("FurV"),rl=o("z+Ro"),il=o("yCtX"),ol={},al=function(){function t(e){h(this,t),this.resultSelector=e}return d(t,[{key:"call",value:function(t,e){return e.subscribe(new sl(t,this.resultSelector))}}]),t}(),sl=function(t){p(n,t);var e=y(n);function n(t,r){var i;return h(this,n),(i=e.call(this,t)).resultSelector=r,i.active=0,i.values=[],i.observables=[],i}return d(n,[{key:"_next",value:function(t){this.values.push(ol),this.observables.push(t)}},{key:"_complete",value:function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++)this.add(Fc(this,t[n],void 0,n))}}},{key:"notifyComplete",value:function(t){0==(this.active-=1)&&this.destination.complete()}},{key:"notifyNext",value:function(t,e,n){var r=this.values,i=this.toRespond?r[n]===ol?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}},{key:"_tryResultSelector",value:function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),n}(Dc),ul=o("bHdf");function cl(){return Object(ul.a)(1)}function ll(t){return function(e){return 0===t?Object(cc.b)():e.lift(new hl(t))}}var hl=function(){function t(e){if(h(this,t),this.total=e,this.total<0)throw new zc}return d(t,[{key:"call",value:function(t,e){return e.subscribe(new fl(t,this.total))}}]),t}(),fl=function(t){p(n,t);var e=y(n);function n(t,r){var i;return h(this,n),(i=e.call(this,t)).total=r,i.ring=new Array,i.count=0,i}return d(n,[{key:"_next",value:function(t){var e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}},{key:"_complete",value:function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=e++%n;t.next(r[o])}t.complete()}}]),n}(dc.a);function dl(){return cl()(Object(hc.a).apply(void 0,arguments))}function pl(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[e.length-1];return Object(rl.a)(r)?(e.pop(),function(t){return dl(e,t,r)}):function(t){return dl(e,t)}}var vl=function(){function t(e){h(this,t),this.callback=e}return d(t,[{key:"call",value:function(t,e){return e.subscribe(new yl(t,this.callback))}}]),t}(),yl=function(t){p(n,t);var e=y(n);function n(t,r){var i;return h(this,n),(i=e.call(this,t)).add(new rc.a(r)),i}return n}(dc.a),gl=function t(e,n){h(this,t),this.id=e,this.url=n},ml=function(t){p(n,t);var e=y(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return h(this,n),(i=e.call(this,t,r)).navigationTrigger=o,i.restoredState=a,i}return d(n,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(gl),bl=function(t){p(n,t);var e=y(n);function n(t,r,i){var o;return h(this,n),(o=e.call(this,t,r)).urlAfterRedirects=i,o}return d(n,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),n}(gl),_l=function(t){p(n,t);var e=y(n);function n(t,r,i){var o;return h(this,n),(o=e.call(this,t,r)).reason=i,o}return d(n,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(gl),wl=function(t){p(n,t);var e=y(n);function n(t,r,i){var o;return h(this,n),(o=e.call(this,t,r)).error=i,o}return d(n,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),n}(gl),kl=function(t){p(n,t);var e=y(n);function n(t,r,i,o){var a;return h(this,n),(a=e.call(this,t,r)).urlAfterRedirects=i,a.state=o,a}return d(n,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(gl),Ol=function(t){p(n,t);var e=y(n);function n(t,r,i,o){var a;return h(this,n),(a=e.call(this,t,r)).urlAfterRedirects=i,a.state=o,a}return d(n,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(gl),Cl=function(t){p(n,t);var e=y(n);function n(t,r,i,o,a){var s;return h(this,n),(s=e.call(this,t,r)).urlAfterRedirects=i,s.state=o,s.shouldActivate=a,s}return d(n,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),n}(gl),Sl=function(t){p(n,t);var e=y(n);function n(t,r,i,o){var a;return h(this,n),(a=e.call(this,t,r)).urlAfterRedirects=i,a.state=o,a}return d(n,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(gl),El=function(t){p(n,t);var e=y(n);function n(t,r,i,o){var a;return h(this,n),(a=e.call(this,t,r)).urlAfterRedirects=i,a.state=o,a}return d(n,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(gl),Tl=function(){function t(e){h(this,t),this.route=e}return d(t,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),t}(),Il=function(){function t(e){h(this,t),this.route=e}return d(t,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),t}(),xl=function(){function t(e){h(this,t),this.snapshot=e}return d(t,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),Nl=function(){function t(e){h(this,t),this.snapshot=e}return d(t,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),Al=function(){function t(e){h(this,t),this.snapshot=e}return d(t,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),jl=function(){function t(e){h(this,t),this.snapshot=e}return d(t,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),Pl=function(){function t(e,n,r){h(this,t),this.routerEvent=e,this.position=n,this.anchor=r}return d(t,[{key:"toString",value:function(){return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(this.position?"".concat(this.position[0],", ").concat(this.position[1]):null,"')")}}]),t}(),Rl=function(){function t(e){h(this,t),this.params=e||{}}return d(t,[{key:"has",value:function(t){return Object.prototype.hasOwnProperty.call(this.params,t)}},{key:"get",value:function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e[0]:e}return null}},{key:"getAll",value:function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e:[e]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),t}();function Dl(t){return new Rl(t)}function Ll(t){var e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Ml(t,e,n){var r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;for(var i={},o=0;o<r.length;o++){var a=r[o],s=t[o];if(a.startsWith(":"))i[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Fl(t,e){var n,r=Object.keys(t),i=Object.keys(e);if(!r||!i||r.length!=i.length)return!1;for(var o=0;o<r.length;o++)if(!Ul(t[n=r[o]],e[n]))return!1;return!0}function Ul(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;var n=i(t).sort(),r=i(e).sort();return n.every((function(t,e){return r[e]===t}))}return t===e}function ql(t){return Array.prototype.concat.apply([],t)}function Vl(t){return t.length>0?t[t.length-1]:null}function zl(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Bl(t){return Object(s.qb)(t)?t:Object(s.rb)(t)?Object(ge.a)(Promise.resolve(t)):Object(hc.a)(t)}function Wl(t,e,n){return n?function(t,e){return Fl(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!Jl(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(var r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every((function(n){return Ul(t[n],e[n])}))}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length)return!!Jl(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!Jl(n.segments,i))return!1;for(var o in r.children){if(!n.children[o])return!1;if(!t(n.children[o],r.children[o]))return!1}return!0}var a=i.slice(0,n.segments.length),s=i.slice(n.segments.length);return!!Jl(n.segments,a)&&!!n.children.primary&&e(n.children.primary,r,s)}(e,n,n.segments)}(t.root,e.root)}var Hl=function(){function t(e,n,r){h(this,t),this.root=e,this.queryParams=n,this.fragment=r}return d(t,[{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=Dl(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return Zl.serialize(this)}}]),t}(),Kl=function(){function t(e,n){var r=this;h(this,t),this.segments=e,this.children=n,this.parent=null,zl(n,(function(t,e){return t.parent=r}))}return d(t,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}},{key:"toString",value:function(){return $l(this)}}]),t}(),Gl=function(){function t(e,n){h(this,t),this.path=e,this.parameters=n}return d(t,[{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=Dl(this.parameters)),this._parameterMap}},{key:"toString",value:function(){return oh(this)}}]),t}();function Jl(t,e){return t.length===e.length&&t.every((function(t,n){return t.path===e[n].path}))}function Ql(t,e){var n=[];return zl(t.children,(function(t,r){"primary"===r&&(n=n.concat(e(t,r)))})),zl(t.children,(function(t,r){"primary"!==r&&(n=n.concat(e(t,r)))})),n}var Yl=function t(){h(this,t)},Xl=function(){function t(){h(this,t)}return d(t,[{key:"parse",value:function(t){var e=new lh(t);return new Hl(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}},{key:"serialize",value:function(t){return"".concat("/"+function t(e,n){if(!e.hasChildren())return $l(e);if(n){var r=e.children.primary?t(e.children.primary,!1):"",i=[];return zl(e.children,(function(e,n){"primary"!==n&&i.push("".concat(n,":").concat(t(e,!1)))})),i.length>0?"".concat(r,"(").concat(i.join("//"),")"):r}var o=Ql(e,(function(n,r){return"primary"===r?[t(e.children.primary,!1)]:["".concat(r,":").concat(t(n,!1))]}));return 1===Object.keys(e.children).length&&null!=e.children.primary?"".concat($l(e),"/").concat(o[0]):"".concat($l(e),"/(").concat(o.join("//"),")")}(t.root,!0)).concat((e=t.queryParams,n=Object.keys(e).map((function(t){var n=e[t];return Array.isArray(n)?n.map((function(e){return"".concat(eh(t),"=").concat(eh(e))})).join("&"):"".concat(eh(t),"=").concat(eh(n))})),n.length?"?"+n.join("&"):"")).concat("string"==typeof t.fragment?"#"+encodeURI(t.fragment):"");var e,n}}]),t}(),Zl=new Xl;function $l(t){return t.segments.map((function(t){return oh(t)})).join("/")}function th(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function eh(t){return th(t).replace(/%3B/gi,";")}function nh(t){return th(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function rh(t){return decodeURIComponent(t)}function ih(t){return rh(t.replace(/\+/g,"%20"))}function oh(t){return"".concat(nh(t.path)).concat((e=t.parameters,Object.keys(e).map((function(t){return";".concat(nh(t),"=").concat(nh(e[t]))})).join("")));var e}var ah=/^[^\/()?;=#]+/;function sh(t){var e=t.match(ah);return e?e[0]:""}var uh=/^[^=?&#]+/,ch=/^[^?&#]+/,lh=function(){function t(e){h(this,t),this.url=e,this.remaining=e}return d(t,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Kl([],{}):new Kl([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());var e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Kl(t,e)),n}},{key:"parseSegment",value:function(){var t=sh(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(t),new Gl(rh(t),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var t={};this.consumeOptional(";");)this.parseParam(t);return t}},{key:"parseParam",value:function(t){var e=sh(this.remaining);if(e){this.capture(e);var n="";if(this.consumeOptional("=")){var r=sh(this.remaining);r&&(n=r,this.capture(n))}t[rh(e)]=rh(n)}}},{key:"parseQueryParam",value:function(t){var e=function(t){var e=t.match(uh);return e?e[0]:""}(this.remaining);if(e){this.capture(e);var n="";if(this.consumeOptional("=")){var r=function(t){var e=t.match(ch);return e?e[0]:""}(this.remaining);r&&(n=r,this.capture(n))}var i=ih(e),o=ih(n);if(t.hasOwnProperty(i)){var a=t[i];Array.isArray(a)||(a=[a],t[i]=a),a.push(o)}else t[i]=o}}},{key:"parseParens",value:function(t){var e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=sh(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '".concat(this.url,"'"));var i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i="primary");var o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new Kl([],o),this.consumeOptional("//")}return e}},{key:"peekStartsWith",value:function(t){return this.remaining.startsWith(t)}},{key:"consumeOptional",value:function(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}},{key:"capture",value:function(t){if(!this.consumeOptional(t))throw new Error('Expected "'.concat(t,'".'))}}]),t}(),hh=function(){function t(e){h(this,t),this._root=e}return d(t,[{key:"root",get:function(){return this._root.value}},{key:"parent",value:function(t){var e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}},{key:"children",value:function(t){var e=fh(t,this._root);return e?e.children.map((function(t){return t.value})):[]}},{key:"firstChild",value:function(t){var e=fh(t,this._root);return e&&e.children.length>0?e.children[0].value:null}},{key:"siblings",value:function(t){var e=dh(t,this._root);return e.length<2?[]:e[e.length-2].children.map((function(t){return t.value})).filter((function(e){return e!==t}))}},{key:"pathFromRoot",value:function(t){return dh(t,this._root).map((function(t){return t.value}))}}]),t}();function fh(t,e){if(t===e.value)return e;var n,r=a(e.children);try{for(r.s();!(n=r.n()).done;){var i=fh(t,n.value);if(i)return i}}catch(o){r.e(o)}finally{r.f()}return null}function dh(t,e){if(t===e.value)return[e];var n,r=a(e.children);try{for(r.s();!(n=r.n()).done;){var i=dh(t,n.value);if(i.length)return i.unshift(e),i}}catch(o){r.e(o)}finally{r.f()}return[]}var ph=function(){function t(e,n){h(this,t),this.value=e,this.children=n}return d(t,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),t}();function vh(t){var e={};return t&&t.children.forEach((function(t){return e[t.value.outlet]=t})),e}var yh=function(t){p(n,t);var e=y(n);function n(t,r){var i;return h(this,n),(i=e.call(this,t)).snapshot=r,kh(m(i),t),i}return d(n,[{key:"toString",value:function(){return this.snapshot.toString()}}]),n}(hh);function gh(t,e){var n=function(t,e){var n=new _h([],{},{},"",{},"primary",e,null,t.root,-1,{});return new wh("",new ph(n,[]))}(t,e),r=new ec([new Gl("",{})]),i=new ec({}),o=new ec({}),a=new ec({}),s=new ec(""),u=new mh(r,i,a,s,o,"primary",e,n.root);return u.snapshot=n.root,new yh(new ph(u,[]),n)}var mh=function(){function t(e,n,r,i,o,a,s,u){h(this,t),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=s,this._futureSnapshot=u}return d(t,[{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe(Object(ve.a)((function(t){return Dl(t)})))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(ve.a)((function(t){return Dl(t)})))),this._queryParamMap}},{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}}]),t}();function bh(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",n=t.pathFromRoot,r=0;if("always"!==e)for(r=n.length-1;r>=1;){var i=n[r],o=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function(t){return t.reduce((function(t,e){return{params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}}),{params:{},data:{},resolve:{}})}(n.slice(r))}var _h=function(){function t(e,n,r,i,o,a,s,u,c,l,f){h(this,t),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=s,this.routeConfig=u,this._urlSegment=c,this._lastPathIndex=l,this._resolve=f}return d(t,[{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=Dl(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=Dl(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return"Route(url:'".concat(this.url.map((function(t){return t.toString()})).join("/"),"', path:'").concat(this.routeConfig?this.routeConfig.path:"","')")}}]),t}(),wh=function(t){p(n,t);var e=y(n);function n(t,r){var i;return h(this,n),(i=e.call(this,r)).url=t,kh(m(i),r),i}return d(n,[{key:"toString",value:function(){return Oh(this._root)}}]),n}(hh);function kh(t,e){e.value._routerState=t,e.children.forEach((function(e){return kh(t,e)}))}function Oh(t){var e=t.children.length>0?" { ".concat(t.children.map(Oh).join(", ")," } "):"";return"".concat(t.value).concat(e)}function Ch(t){if(t.snapshot){var e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Fl(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Fl(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!Fl(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Fl(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Sh(t,e){return Fl(t.params,e.params)&&function(t,e){return Jl(t,e)&&t.every((function(t,n){return Fl(t.parameters,e[n].parameters)}))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Sh(t.parent,e.parent))}function Eh(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Th(t){return"object"==typeof t&&null!=t&&t.outlets}function Ih(t,e,n,r,i){var o={};return r&&zl(r,(function(t,e){o[e]=Array.isArray(t)?t.map((function(t){return""+t})):""+t})),new Hl(n.root===t?e:function t(e,n,r){var i={};return zl(e.children,(function(e,o){i[o]=e===n?r:t(e,n,r)})),new Kl(e.segments,i)}(n.root,t,e),o,i)}var xh=function(){function t(e,n,r){if(h(this,t),this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Eh(r[0]))throw new Error("Root segment cannot have matrix parameters");var i=r.find(Th);if(i&&i!==Vl(r))throw new Error("{outlets:{}} has to be the last command")}return d(t,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),t}(),Nh=function t(e,n,r){h(this,t),this.segmentGroup=e,this.processChildren=n,this.index=r};function Ah(t,e,n){if(t||(t=new Kl([],{})),0===t.segments.length&&t.hasChildren())return jh(t,e,n);var r=function(t,e,n){for(var r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};i<t.segments.length;){if(r>=n.length)return o;var a=t.segments[i],s=n[r];if(Th(s))break;var u=""+s,c=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&c&&"object"==typeof c&&void 0===c.outlets){if(!Lh(u,c,a))return o;r+=2}else{if(!Lh(u,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){var o=new Kl(t.segments.slice(0,r.pathIndex),{});return o.children.primary=new Kl(t.segments.slice(r.pathIndex),t.children),jh(o,0,i)}return r.match&&0===i.length?new Kl(t.segments,{}):r.match&&!t.hasChildren()?Ph(t,e,n):r.match?jh(t,0,i):Ph(t,e,n)}function jh(t,e,n){if(0===n.length)return new Kl(t.segments,{});var r=function(t){return Th(t[0])?t[0].outlets:{primary:t}}(n),i={};return zl(r,(function(n,r){null!==n&&(i[r]=Ah(t.children[r],e,n))})),zl(t.children,(function(t,e){void 0===r[e]&&(i[e]=t)})),new Kl(t.segments,i)}function Ph(t,e,n){for(var r=t.segments.slice(0,e),i=0;i<n.length;){var o=n[i];if(Th(o)){var a=Rh(o.outlets);return new Kl(r,a)}if(0===i&&Eh(n[0]))r.push(new Gl(t.segments[e].path,n[0])),i++;else{var s=Th(o)?o.outlets.primary:""+o,u=i<n.length-1?n[i+1]:null;s&&u&&Eh(u)?(r.push(new Gl(s,Dh(u))),i+=2):(r.push(new Gl(s,{})),i++)}}return new Kl(r,{})}function Rh(t){var e={};return zl(t,(function(t,n){null!==t&&(e[n]=Ph(new Kl([],{}),0,t))})),e}function Dh(t){var e={};return zl(t,(function(t,n){return e[n]=""+t})),e}function Lh(t,e,n){return t==n.path&&Fl(e,n.parameters)}var Mh=function(){function t(e,n,r,i){h(this,t),this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i}return d(t,[{key:"activate",value:function(t){var e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Ch(this.futureState.root),this.activateChildRoutes(e,n,t)}},{key:"deactivateChildRoutes",value:function(t,e,n){var r=this,i=vh(e);t.children.forEach((function(t){var e=t.value.outlet;r.deactivateRoutes(t,i[e],n),delete i[e]})),zl(i,(function(t,e){r.deactivateRouteAndItsChildren(t,n)}))}},{key:"deactivateRoutes",value:function(t,e,n){var r=t.value,i=e?e.value:null;if(r===i)if(r.component){var o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}},{key:"deactivateRouteAndItsChildren",value:function(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}},{key:"detachAndStoreRouteSubtree",value:function(t,e){var n=e.getContext(t.value.outlet);if(n&&n.outlet){var r=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:r,route:t,contexts:i})}}},{key:"deactivateRouteAndOutlet",value:function(t,e){var n=this,r=e.getContext(t.value.outlet);if(r){var i=vh(t),o=t.value.component?r.children:e;zl(i,(function(t,e){return n.deactivateRouteAndItsChildren(t,o)})),r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated())}}},{key:"activateChildRoutes",value:function(t,e,n){var r=this,i=vh(e);t.children.forEach((function(t){r.activateRoutes(t,i[t.value.outlet],n),r.forwardEvent(new jl(t.value.snapshot))})),t.children.length&&this.forwardEvent(new Nl(t.value.snapshot))}},{key:"activateRoutes",value:function(t,e,n){var r=t.value,i=e?e.value:null;if(Ch(r),r===i)if(r.component){var o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(r.component){var a=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){var s=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(s.contexts),a.attachRef=s.componentRef,a.route=s.route.value,a.outlet&&a.outlet.attach(s.componentRef,s.route.value),Fh(s.route)}else{var u=function(t){for(var e=t.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(r.snapshot),c=u?u.module.componentFactoryResolver:null;a.attachRef=null,a.route=r,a.resolver=c,a.outlet&&a.outlet.activateWith(r,c),this.activateChildRoutes(t,null,a.children)}}else this.activateChildRoutes(t,null,n)}}]),t}();function Fh(t){Ch(t.value),t.children.forEach(Fh)}var Uh=function t(e,n){h(this,t),this.routes=e,this.module=n};function qh(t){return"function"==typeof t}function Vh(t){return t instanceof Hl}var zh=Symbol("INITIAL_VALUE");function Bh(){return Cc((function(t){return(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=void 0,i=void 0;return Object(rl.a)(e[e.length-1])&&(i=e.pop()),"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&Object(pe.a)(e[0])&&(e=e[0]),Object(il.a)(e,i).lift(new al(r))}).apply(void 0,i(t.map((function(t){return t.pipe(Bc(1),pl(zh))})))).pipe(pc((function(t,e){var n=!1;return e.reduce((function(t,r,i){if(t!==zh)return t;if(r===zh&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Vh(r))return r}return t}),t)}),zh),gc((function(t){return t!==zh})),Object(ve.a)((function(t){return Vh(t)?t:!0===t})),Bc(1))}))}var Wh=function t(e){h(this,t),this.segmentGroup=e||null},Hh=function t(e){h(this,t),this.urlTree=e};function Kh(t){return new de.a((function(e){return e.error(new Wh(t))}))}function Gh(t){return new de.a((function(e){return e.error(new Hh(t))}))}function Jh(t){return new de.a((function(e){return e.error(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(t,"'")))}))}var Qh=function(){function t(e,n,r,i,o){h(this,t),this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=e.get(s.x)}return d(t,[{key:"apply",value:function(){var t=this;return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(Object(ve.a)((function(e){return t.createUrlTree(e,t.urlTree.queryParams,t.urlTree.fragment)}))).pipe(xc((function(e){if(e instanceof Hh)return t.allowRedirects=!1,t.match(e.urlTree);if(e instanceof Wh)throw t.noMatchError(e);throw e})))}},{key:"match",value:function(t){var e=this;return this.expandSegmentGroup(this.ngModule,this.config,t.root,"primary").pipe(Object(ve.a)((function(n){return e.createUrlTree(n,t.queryParams,t.fragment)}))).pipe(xc((function(t){if(t instanceof Wh)throw e.noMatchError(t);throw t})))}},{key:"noMatchError",value:function(t){return new Error("Cannot match any routes. URL Segment: '".concat(t.segmentGroup,"'"))}},{key:"createUrlTree",value:function(t,e,n){var r=t.segments.length>0?new Kl([],{primary:t}):t;return new Hl(r,e,n)}},{key:"expandSegmentGroup",value:function(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(ve.a)((function(t){return new Kl([],t)}))):this.expandSegment(t,n,e,n.segments,r,!0)}},{key:"expandChildren",value:function(t,e,n){var r=this;return function(n,i){if(0===Object.keys(n).length)return Object(hc.a)({});var o=[],a=[],s={};return zl(n,(function(n,i){var u,c,l=(u=i,c=n,r.expandSegmentGroup(t,e,c,u)).pipe(Object(ve.a)((function(t){return s[i]=t})));"primary"===i?o.push(l):a.push(l)})),hc.a.apply(null,o.concat(a)).pipe(cl(),function(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?gc((function(e,n){return t(e,n,r)})):tl.a,ll(1),n?Gc(e):Yc((function(){return new Kc})))}}(),Object(ve.a)((function(){return s})))}(n.children)}},{key:"expandSegment",value:function(t,e,n,r,o,a){var s=this;return Object(hc.a).apply(void 0,i(n)).pipe(Ic((function(i){return s.expandSegmentAgainstRoute(t,e,n,i,r,o,a).pipe(xc((function(t){if(t instanceof Wh)return Object(hc.a)(null);throw t})))})),el((function(t){return!!t})),xc((function(t,n){if(t instanceof Kc||"EmptyError"===t.name){if(s.noLeftoversInUrl(e,r,o))return Object(hc.a)(new Kl([],{}));throw new Wh(e)}throw t})))}},{key:"noLeftoversInUrl",value:function(t,e,n){return 0===e.length&&!t.children[n]}},{key:"expandSegmentAgainstRoute",value:function(t,e,n,r,i,o,a){return $h(r)!==o?Kh(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):Kh(e)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(t,e,n,r){var i=this,o=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Gh(o):this.lineralizeSegments(n,o).pipe(Object(Tc.b)((function(n){var o=new Kl(n,{});return i.expandSegment(t,o,e,n,r,!1)})))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(t,e,n,r,i,o){var a=this,s=Yh(e,r,i),u=s.matched,c=s.consumedSegments,l=s.lastChild,h=s.positionalParamSegments;if(!u)return Kh(e);var f=this.applyRedirectCommands(c,r.redirectTo,h);return r.redirectTo.startsWith("/")?Gh(f):this.lineralizeSegments(r,f).pipe(Object(Tc.b)((function(r){return a.expandSegment(t,e,n,r.concat(i.slice(l)),o,!1)})))}},{key:"matchSegmentAgainstRoute",value:function(t,e,n,r){var i=this;if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(ve.a)((function(t){return n._loadedConfig=t,new Kl(r,{})}))):Object(hc.a)(new Kl(r,{}));var o=Yh(e,n,r),s=o.matched,u=o.consumedSegments,c=o.lastChild;if(!s)return Kh(e);var l=r.slice(c);return this.getChildConfig(t,n,r).pipe(Object(Tc.b)((function(t){var n=t.module,r=t.routes,o=function(t,e,n,r){return n.length>0&&function(t,e,n){return n.some((function(n){return Zh(t,e,n)&&"primary"!==$h(n)}))}(t,n,r)?{segmentGroup:Xh(new Kl(e,function(t,e){var n={};n.primary=e;var r,i=a(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;""===o.path&&"primary"!==$h(o)&&(n[$h(o)]=new Kl([],{}))}}catch(s){i.e(s)}finally{i.f()}return n}(r,new Kl(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some((function(n){return Zh(t,e,n)}))}(t,n,r)?{segmentGroup:Xh(new Kl(t.segments,function(t,e,n,r){var i,o={},s=a(n);try{for(s.s();!(i=s.n()).done;){var u=i.value;Zh(t,e,u)&&!r[$h(u)]&&(o[$h(u)]=new Kl([],{}))}}catch(c){s.e(c)}finally{s.f()}return Object.assign(Object.assign({},r),o)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,u,l,r),s=o.segmentGroup,c=o.slicedSegments;return 0===c.length&&s.hasChildren()?i.expandChildren(n,r,s).pipe(Object(ve.a)((function(t){return new Kl(u,t)}))):0===r.length&&0===c.length?Object(hc.a)(new Kl(u,{})):i.expandSegment(n,s,r,c,"primary",!0).pipe(Object(ve.a)((function(t){return new Kl(u.concat(t.segments),t.children)})))})))}},{key:"getChildConfig",value:function(t,e,n){var r=this;return e.children?Object(hc.a)(new Uh(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(hc.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(Tc.b)((function(n){return n?r.configLoader.load(t.injector,e).pipe(Object(ve.a)((function(t){return e._loadedConfig=t,t}))):function(t){return new de.a((function(e){return e.error(Ll("Cannot load children because the guard of the route \"path: '".concat(t.path,"'\" returned false")))}))}(e)}))):Object(hc.a)(new Uh([],t))}},{key:"runCanLoadGuards",value:function(t,e,n){var r=this,i=e.canLoad;if(!i||0===i.length)return Object(hc.a)(!0);var o=i.map((function(r){var i,o=t.get(r);if(function(t){return t&&qh(t.canLoad)}(o))i=o.canLoad(e,n);else{if(!qh(o))throw new Error("Invalid CanLoad guard");i=o(e,n)}return Bl(i)}));return Object(hc.a)(o).pipe(Bh(),Object(jc.a)((function(t){if(Vh(t)){var e=Ll('Redirecting to "'.concat(r.urlSerializer.serialize(t),'"'));throw e.url=t,e}})),Object(ve.a)((function(t){return!0===t})))}},{key:"lineralizeSegments",value:function(t,e){for(var n=[],r=e.root;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(hc.a)(n);if(r.numberOfChildren>1||!r.children.primary)return Jh(t.redirectTo);r=r.children.primary}}},{key:"applyRedirectCommands",value:function(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}},{key:"applyRedirectCreatreUrlTree",value:function(t,e,n,r){var i=this.createSegmentGroup(t,e.root,n,r);return new Hl(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}},{key:"createQueryParams",value:function(t,e){var n={};return zl(t,(function(t,r){if("string"==typeof t&&t.startsWith(":")){var i=t.substring(1);n[r]=e[i]}else n[r]=t})),n}},{key:"createSegmentGroup",value:function(t,e,n,r){var i=this,o=this.createSegments(t,e.segments,n,r),a={};return zl(e.children,(function(e,o){a[o]=i.createSegmentGroup(t,e,n,r)})),new Kl(o,a)}},{key:"createSegments",value:function(t,e,n,r){var i=this;return e.map((function(e){return e.path.startsWith(":")?i.findPosParam(t,e,r):i.findOrReturn(e,n)}))}},{key:"findPosParam",value:function(t,e,n){var r=n[e.path.substring(1)];if(!r)throw new Error("Cannot redirect to '".concat(t,"'. Cannot find '").concat(e.path,"'."));return r}},{key:"findOrReturn",value:function(t,e){var n,r=0,i=a(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.path===t.path)return e.splice(r),o;r++}}catch(s){i.e(s)}finally{i.f()}return t}}]),t}();function Yh(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};var r=(e.matcher||Ml)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Xh(t){if(1===t.numberOfChildren&&t.children.primary){var e=t.children.primary;return new Kl(t.segments.concat(e.segments),e.children)}return t}function Zh(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function $h(t){return t.outlet||"primary"}var tf=function t(e){h(this,t),this.path=e,this.route=this.path[this.path.length-1]},ef=function t(e,n){h(this,t),this.component=e,this.route=n};function nf(t,e,n){var r=function(t){if(!t)return null;for(var e=t.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function rf(t,e,n){var r=vh(t),i=t.value;zl(r,(function(t,r){rf(t,i.component?e?e.children.getContext(r):null:e,n)})),n.canDeactivateChecks.push(new ef(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function of(t,e){return null!==t&&e&&e(new Al(t)),Object(hc.a)(!0)}function af(t,e){return null!==t&&e&&e(new xl(t)),Object(hc.a)(!0)}function sf(t,e,n){var r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(hc.a)(!0);var i=r.map((function(r){return lc((function(){var i,o=nf(r,e,n);if(function(t){return t&&qh(t.canActivate)}(o))i=Bl(o.canActivate(e,t));else{if(!qh(o))throw new Error("Invalid CanActivate guard");i=Bl(o(e,t))}return i.pipe(el())}))}));return Object(hc.a)(i).pipe(Bh())}function uf(t,e,n){var r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map((function(t){return function(t){var e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)})).filter((function(t){return null!==t})).map((function(e){return lc((function(){var i=e.guards.map((function(i){var o,a=nf(i,e.node,n);if(function(t){return t&&qh(t.canActivateChild)}(a))o=Bl(a.canActivateChild(r,t));else{if(!qh(a))throw new Error("Invalid CanActivateChild guard");o=Bl(a(r,t))}return o.pipe(el())}));return Object(hc.a)(i).pipe(Bh())}))}));return Object(hc.a)(i).pipe(Bh())}var cf=function t(){h(this,t)},lf=function(){function t(e,n,r,i,o,a){h(this,t),this.rootComponentType=e,this.config=n,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=a}return d(t,[{key:"recognize",value:function(){try{var t=df(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,"primary"),n=new _h([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new ph(n,e),i=new wh(this.url,r);return this.inheritParamsAndData(i._root),Object(hc.a)(i)}catch(VA){return new de.a((function(e){return e.error(VA)}))}}},{key:"inheritParamsAndData",value:function(t){var e=this,n=t.value,r=bh(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach((function(t){return e.inheritParamsAndData(t)}))}},{key:"processSegmentGroup",value:function(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}},{key:"processChildren",value:function(t,e){var n,r=this,i=Ql(e,(function(e,n){return r.processSegmentGroup(t,e,n)}));return n={},i.forEach((function(t){var e=n[t.value.outlet];if(e){var r=e.url.map((function(t){return t.toString()})).join("/"),i=t.value.url.map((function(t){return t.toString()})).join("/");throw new Error("Two segments cannot have the same outlet name: '".concat(r,"' and '").concat(i,"'."))}n[t.value.outlet]=t.value})),i.sort((function(t,e){return"primary"===t.value.outlet?-1:"primary"===e.value.outlet?1:t.value.outlet.localeCompare(e.value.outlet)})),i}},{key:"processSegment",value:function(t,e,n,r){var i,o=a(t);try{for(o.s();!(i=o.n()).done;){var s=i.value;try{return this.processSegmentAgainstRoute(s,e,n,r)}catch(VA){if(!(VA instanceof cf))throw VA}}}catch(u){o.e(u)}finally{o.f()}if(this.noLeftoversInUrl(e,n,r))return[];throw new cf}},{key:"noLeftoversInUrl",value:function(t,e,n){return 0===e.length&&!t.children[n]}},{key:"processSegmentAgainstRoute",value:function(t,e,n,r){if(t.redirectTo)throw new cf;if((t.outlet||"primary")!==r)throw new cf;var i,o=[],a=[];if("**"===t.path){var s=n.length>0?Vl(n).parameters:{};i=new _h(n,s,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,yf(t),r,t.component,t,hf(e),ff(e)+n.length,gf(t))}else{var u=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new cf;return{consumedSegments:[],lastChild:0,parameters:{}}}var r=(e.matcher||Ml)(n,t,e);if(!r)throw new cf;var i={};zl(r.posParams,(function(t,e){i[e]=t.path}));var o=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(e,t,n);o=u.consumedSegments,a=n.slice(u.lastChild),i=new _h(o,u.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,yf(t),r,t.component,t,hf(e),ff(e)+o.length,gf(t))}var c=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),l=df(e,o,a,c,this.relativeLinkResolution),h=l.segmentGroup,f=l.slicedSegments;if(0===f.length&&h.hasChildren()){var d=this.processChildren(c,h);return[new ph(i,d)]}if(0===c.length&&0===f.length)return[new ph(i,[])];var p=this.processSegment(c,h,f,"primary");return[new ph(i,p)]}}]),t}();function hf(t){for(var e=t;e._sourceSegment;)e=e._sourceSegment;return e}function ff(t){for(var e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;e._sourceSegment;)n+=(e=e._sourceSegment)._segmentIndexShift?e._segmentIndexShift:0;return n-1}function df(t,e,n,r,i){if(n.length>0&&function(t,e,n){return n.some((function(n){return pf(t,e,n)&&"primary"!==vf(n)}))}(t,n,r)){var o=new Kl(e,function(t,e,n,r){var i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;var o,s=a(n);try{for(s.s();!(o=s.n()).done;){var u=o.value;if(""===u.path&&"primary"!==vf(u)){var c=new Kl([],{});c._sourceSegment=t,c._segmentIndexShift=e.length,i[vf(u)]=c}}}catch(l){s.e(l)}finally{s.f()}return i}(t,e,r,new Kl(n,t.children)));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some((function(n){return pf(t,e,n)}))}(t,n,r)){var s=new Kl(t.segments,function(t,e,n,r,i,o){var s,u={},c=a(r);try{for(c.s();!(s=c.n()).done;){var l=s.value;if(pf(t,n,l)&&!i[vf(l)]){var h=new Kl([],{});h._sourceSegment=t,h._segmentIndexShift="legacy"===o?t.segments.length:e.length,u[vf(l)]=h}}}catch(f){c.e(f)}finally{c.f()}return Object.assign(Object.assign({},i),u)}(t,e,n,r,t.children,i));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}var u=new Kl(t.segments,t.children);return u._sourceSegment=t,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:n}}function pf(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function vf(t){return t.outlet||"primary"}function yf(t){return t.data||{}}function gf(t){return t.resolve||{}}function mf(t){return function(e){return e.pipe(Cc((function(e){var n=t(e);return n?Object(ge.a)(n).pipe(Object(ve.a)((function(){return e}))):Object(ge.a)([e])})))}}var bf,_f=function(t){p(n,t);var e=y(n);function n(){return h(this,n),e.apply(this,arguments)}return n}(function(){function t(){h(this,t)}return d(t,[{key:"shouldDetach",value:function(t){return!1}},{key:"store",value:function(t,e){}},{key:"shouldAttach",value:function(t){return!1}},{key:"retrieve",value:function(t){return null}},{key:"shouldReuseRoute",value:function(t,e){return t.routeConfig===e.routeConfig}}]),t}()),wf=((bf=function t(){h(this,t)}).\u0275fac=function(t){return new(t||bf)},bf.\u0275cmp=s.Db({type:bf,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&s.Kb(0,"router-outlet")},directives:function(){return[Kf]},encapsulation:2}),bf);function kf(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=0;n<t.length;n++){var r=t[n];Of(r,Cf(e,r))}}function Of(t,e){if(!t)throw new Error("\n      Invalid configuration of route '".concat(e,"': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    "));if(Array.isArray(t))throw new Error("Invalid configuration of route '".concat(e,"': Array cannot be specified"));if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&"primary"!==t.outlet)throw new Error("Invalid configuration of route '".concat(e,"': a componentless route without children or loadChildren cannot have a named outlet set"));if(t.redirectTo&&t.children)throw new Error("Invalid configuration of route '".concat(e,"': redirectTo and children cannot be used together"));if(t.redirectTo&&t.loadChildren)throw new Error("Invalid configuration of route '".concat(e,"': redirectTo and loadChildren cannot be used together"));if(t.children&&t.loadChildren)throw new Error("Invalid configuration of route '".concat(e,"': children and loadChildren cannot be used together"));if(t.redirectTo&&t.component)throw new Error("Invalid configuration of route '".concat(e,"': redirectTo and component cannot be used together"));if(t.path&&t.matcher)throw new Error("Invalid configuration of route '".concat(e,"': path and matcher cannot be used together"));if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error("Invalid configuration of route '".concat(e,"'. One of the following must be provided: component, redirectTo, children or loadChildren"));if(void 0===t.path&&void 0===t.matcher)throw new Error("Invalid configuration of route '".concat(e,"': routes must have either a path or a matcher specified"));if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error("Invalid configuration of route '".concat(e,"': path cannot start with a slash"));if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error("Invalid configuration of route '{path: \"".concat(e,'", redirectTo: "').concat(t.redirectTo,"\"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'."));if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error("Invalid configuration of route '".concat(e,"': pathMatch can only be set to 'prefix' or 'full'"));t.children&&kf(t.children,e)}function Cf(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:"".concat(t,"/").concat(e.path):"":t}function Sf(t){var e=t.children&&t.children.map(Sf),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=wf),n}var Ef=new s.q("ROUTES"),Tf=function(){function t(e,n,r,i){h(this,t),this.loader=e,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=i}return d(t,[{key:"load",value:function(t,e){var n=this;return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(ve.a)((function(r){n.onLoadEndListener&&n.onLoadEndListener(e);var i=r.create(t);return new Uh(ql(i.injector.get(Ef)).map(Sf),i)})))}},{key:"loadModuleFactory",value:function(t){var e=this;return"string"==typeof t?Object(ge.a)(this.loader.load(t)):Bl(t()).pipe(Object(Tc.b)((function(t){return t instanceof s.v?Object(hc.a)(t):Object(ge.a)(e.compiler.compileModuleAsync(t))})))}}]),t}(),If=function t(){h(this,t),this.outlet=null,this.route=null,this.resolver=null,this.children=new xf,this.attachRef=null},xf=function(){function t(){h(this,t),this.contexts=new Map}return d(t,[{key:"onChildOutletCreated",value:function(t,e){var n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}},{key:"onChildOutletDestroyed",value:function(t){var e=this.getContext(t);e&&(e.outlet=null)}},{key:"onOutletDeactivated",value:function(){var t=this.contexts;return this.contexts=new Map,t}},{key:"onOutletReAttached",value:function(t){this.contexts=t}},{key:"getOrCreateContext",value:function(t){var e=this.getContext(t);return e||(e=new If,this.contexts.set(t,e)),e}},{key:"getContext",value:function(t){return this.contexts.get(t)||null}}]),t}(),Nf=function(){function t(){h(this,t)}return d(t,[{key:"shouldProcessUrl",value:function(t){return!0}},{key:"extract",value:function(t){return t}},{key:"merge",value:function(t,e){return t}}]),t}();function Af(t){throw t}function jf(t,e,n){return e.parse("/")}function Pf(t,e){return Object(hc.a)(null)}var Rf,Df,Lf,Mf=((Lf=function(){function t(e,n,r,i,o,a,u,c){var l=this;h(this,t),this.rootComponentType=e,this.urlSerializer=n,this.rootContexts=r,this.location=i,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new $u.a,this.errorHandler=Af,this.malformedUriErrorHandler=jf,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Pf,afterPreactivation:Pf},this.urlHandlingStrategy=new Nf,this.routeReuseStrategy=new _f,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=o.get(s.x),this.console=o.get(s.Y);var f=o.get(s.z);this.isNgZoneEnabled=f instanceof s.z,this.resetConfig(c),this.currentUrlTree=new Hl(new Kl([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Tf(a,u,(function(t){return l.triggerEvent(new Tl(t))}),(function(t){return l.triggerEvent(new Il(t))})),this.routerState=gh(this.currentUrlTree,this.rootComponentType),this.transitions=new ec({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return d(t,[{key:"setupNavigations",value:function(t){var e=this,n=this.events;return t.pipe(gc((function(t){return 0!==t.id})),Object(ve.a)((function(t){return Object.assign(Object.assign({},t),{extractedUrl:e.urlHandlingStrategy.extract(t.rawUrl)})})),Cc((function(t){var r,i,o,s,u=!1,c=!1;return Object(hc.a)(t).pipe(Object(jc.a)((function(t){e.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:e.lastSuccessfulNavigation?Object.assign(Object.assign({},e.lastSuccessfulNavigation),{previousNavigation:null}):null}})),Cc((function(t){var r,i,o,a,s=!e.navigated||t.extractedUrl.toString()!==e.browserUrlTree.toString();if(("reload"===e.onSameUrlNavigation||s)&&e.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(hc.a)(t).pipe(Cc((function(t){var r=e.transitions.getValue();return n.next(new ml(t.id,e.serializeUrl(t.extractedUrl),t.source,t.restoredState)),r!==e.transitions.getValue()?cc.a:[t]})),Cc((function(t){return Promise.resolve(t)})),(r=e.ngModule.injector,i=e.configLoader,o=e.urlSerializer,a=e.config,function(t){return t.pipe(Cc((function(t){return function(t,e,n,r,i){return new Qh(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,a).pipe(Object(ve.a)((function(e){return Object.assign(Object.assign({},t),{urlAfterRedirects:e})})))})))}),Object(jc.a)((function(t){e.currentNavigation=Object.assign(Object.assign({},e.currentNavigation),{finalUrl:t.urlAfterRedirects})})),function(t,n,r,i,o){return function(r){return r.pipe(Object(Tc.b)((function(r){return function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";return new lf(t,e,n,r,i,o).recognize()}(t,n,r.urlAfterRedirects,(a=r.urlAfterRedirects,e.serializeUrl(a)),i,o).pipe(Object(ve.a)((function(t){return Object.assign(Object.assign({},r),{targetSnapshot:t})})));var a})))}}(e.rootComponentType,e.config,0,e.paramsInheritanceStrategy,e.relativeLinkResolution),Object(jc.a)((function(t){"eager"===e.urlUpdateStrategy&&(t.extras.skipLocationChange||e.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),e.browserUrlTree=t.urlAfterRedirects)})),Object(jc.a)((function(t){var r=new kl(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);n.next(r)})));if(s&&e.rawUrlTree&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){var u=t.id,c=t.extractedUrl,l=t.source,h=t.restoredState,f=t.extras,d=new ml(u,e.serializeUrl(c),l,h);n.next(d);var p=gh(c,e.rootComponentType).snapshot;return Object(hc.a)(Object.assign(Object.assign({},t),{targetSnapshot:p,urlAfterRedirects:c,extras:Object.assign(Object.assign({},f),{skipLocationChange:!1,replaceUrl:!1})}))}return e.rawUrlTree=t.rawUrl,e.browserUrlTree=t.urlAfterRedirects,t.resolve(null),cc.a})),mf((function(t){var n=t.targetSnapshot,r=t.id,i=t.extractedUrl,o=t.rawUrl,a=t.extras,s=a.skipLocationChange,u=a.replaceUrl;return e.hooks.beforePreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:o,skipLocationChange:!!s,replaceUrl:!!u})})),Object(jc.a)((function(t){var n=new Ol(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)})),Object(ve.a)((function(t){return Object.assign(Object.assign({},t),{guards:(n=t.targetSnapshot,r=t.currentSnapshot,i=e.rootContexts,o=n._root,function t(e,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},a=vh(n);return e.children.forEach((function(e){!function(e,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},a=e.value,s=n?n.value:null,u=r?r.getContext(e.value.outlet):null;if(s&&a.routeConfig===s.routeConfig){var c=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Jl(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Jl(t.url,e.url)||!Fl(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Sh(t,e)||!Fl(t.queryParams,e.queryParams);case"paramsChange":default:return!Sh(t,e)}}(s,a,a.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new tf(i)):(a.data=s.data,a._resolvedData=s._resolvedData),t(e,n,a.component?u?u.children:null:r,i,o),c&&u&&u.outlet&&u.outlet.isActivated&&o.canDeactivateChecks.push(new ef(u.outlet.component,s))}else s&&rf(n,u,o),o.canActivateChecks.push(new tf(i)),t(e,null,a.component?u?u.children:null:r,i,o)}(e,a[e.value.outlet],r,i.concat([e.value]),o),delete a[e.value.outlet]})),zl(a,(function(t,e){return rf(t,r.getContext(e),o)})),o}(o,r?r._root:null,i,[o.value]))});var n,r,i,o})),function(t,e){return function(n){return n.pipe(Object(Tc.b)((function(n){var r=n.targetSnapshot,i=n.currentSnapshot,o=n.guards,a=o.canActivateChecks,s=o.canDeactivateChecks;return 0===s.length&&0===a.length?Object(hc.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(ge.a)(t).pipe(Object(Tc.b)((function(t){return function(t,e,n,r,i){var o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(hc.a)(!0);var a=o.map((function(o){var a,s=nf(o,e,i);if(function(t){return t&&qh(t.canDeactivate)}(s))a=Bl(s.canDeactivate(t,e,n,r));else{if(!qh(s))throw new Error("Invalid CanDeactivate guard");a=Bl(s(t,e,n,r))}return a.pipe(el())}));return Object(hc.a)(a).pipe(Bh())}(t.component,t.route,n,e,r)})),el((function(t){return!0!==t}),!0))}(s,r,i,t).pipe(Object(Tc.b)((function(n){return n&&"boolean"==typeof n?function(t,e,n,r){return Object(ge.a)(e).pipe(Ic((function(e){return Object(ge.a)([af(e.route.parent,r),of(e.route,r),uf(t,e.path,n),sf(t,e.route,n)]).pipe(cl(),el((function(t){return!0!==t}),!0))})),el((function(t){return!0!==t}),!0))}(r,a,t,e):Object(hc.a)(n)})),Object(ve.a)((function(t){return Object.assign(Object.assign({},n),{guardsResult:t})})))})))}}(e.ngModule.injector,(function(t){return e.triggerEvent(t)})),Object(jc.a)((function(t){if(Vh(t.guardsResult)){var n=Ll('Redirecting to "'.concat(e.serializeUrl(t.guardsResult),'"'));throw n.url=t.guardsResult,n}})),Object(jc.a)((function(t){var n=new Cl(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);e.triggerEvent(n)})),gc((function(t){if(!t.guardsResult){e.resetUrlToCurrentUrlTree();var r=new _l(t.id,e.serializeUrl(t.extractedUrl),"");return n.next(r),t.resolve(!1),!1}return!0})),mf((function(t){if(t.guards.canActivateChecks.length)return Object(hc.a)(t).pipe(Object(jc.a)((function(t){var n=new Sl(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)})),Cc((function(t){var r,i,o=!1;return Object(hc.a)(t).pipe((r=e.paramsInheritanceStrategy,i=e.ngModule.injector,function(t){return t.pipe(Object(Tc.b)((function(t){var e=t.targetSnapshot,n=t.guards.canActivateChecks;if(!n.length)return Object(hc.a)(t);var o=0;return Object(ge.a)(n).pipe(Ic((function(t){return function(t,e,n,r){return function(t,e,n,r){var i=Object.keys(t);if(0===i.length)return Object(hc.a)({});var o={};return Object(ge.a)(i).pipe(Object(Tc.b)((function(i){return function(t,e,n,r){var i=nf(t,e,r);return Bl(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(jc.a)((function(t){o[i]=t})))})),ll(1),Object(Tc.b)((function(){return Object.keys(o).length===i.length?Object(hc.a)(o):cc.a})))}(t._resolve,t,e,r).pipe(Object(ve.a)((function(e){return t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),bh(t,n).resolve),null})))}(t.route,e,r,i)})),Object(jc.a)((function(){return o++})),ll(1),Object(Tc.b)((function(e){return o===n.length?Object(hc.a)(t):cc.a})))})))}),Object(jc.a)({next:function(){return o=!0},complete:function(){if(!o){var r=new _l(t.id,e.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");n.next(r),t.resolve(!1)}}}))})),Object(jc.a)((function(t){var n=new El(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)})))})),mf((function(t){var n=t.targetSnapshot,r=t.id,i=t.extractedUrl,o=t.rawUrl,a=t.extras,s=a.skipLocationChange,u=a.replaceUrl;return e.hooks.afterPreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:o,skipLocationChange:!!s,replaceUrl:!!u})})),Object(ve.a)((function(t){var n=function(t,e,n){var r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){var i=r.value;i._futureSnapshot=n.value;var o=function(e,n,r){return n.children.map((function(n){var i,o=a(r.children);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(e.shouldReuseRoute(s.value.snapshot,n.value))return t(e,n,s)}}catch(u){o.e(u)}finally{o.f()}return t(e,n)}))}(e,n,r);return new ph(i,o)}var s=e.retrieve(n.value);if(s){var u=s.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(var r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,u),u}var c,l=new mh(new ec((c=n.value).url),new ec(c.params),new ec(c.queryParams),new ec(c.fragment),new ec(c.data),c.outlet,c.component,c),h=n.children.map((function(n){return t(e,n)}));return new ph(l,h)}(t,e._root,n?n._root:void 0);return new yh(r,e)}(e.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:n})})),Object(jc.a)((function(t){e.currentUrlTree=t.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(e.currentUrlTree,t.rawUrl),e.routerState=t.targetRouterState,"deferred"===e.urlUpdateStrategy&&(t.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),e.browserUrlTree=t.urlAfterRedirects)})),(i=e.rootContexts,o=e.routeReuseStrategy,s=function(t){return e.triggerEvent(t)},Object(ve.a)((function(t){return new Mh(o,t.targetRouterState,t.currentRouterState,s).activate(i),t}))),Object(jc.a)({next:function(){u=!0},complete:function(){u=!0}}),(r=function(){if(!u&&!c){e.resetUrlToCurrentUrlTree();var r=new _l(t.id,e.serializeUrl(t.extractedUrl),"Navigation ID ".concat(t.id," is not equal to the current navigation id ").concat(e.navigationId));n.next(r),t.resolve(!1)}e.currentNavigation=null},function(t){return t.lift(new vl(r))}),xc((function(r){if(c=!0,(s=r)&&s.ngNavigationCancelingError){var i=Vh(r.url);i||(e.navigated=!0,e.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));var o=new _l(t.id,e.serializeUrl(t.extractedUrl),r.message);n.next(o),i?setTimeout((function(){var n=e.urlHandlingStrategy.merge(r.url,e.rawUrlTree);return e.scheduleNavigation(n,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===e.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})}),0):t.resolve(!1)}else{e.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);var a=new wl(t.id,e.serializeUrl(t.extractedUrl),r);n.next(a);try{t.resolve(e.errorHandler(r))}catch(u){t.reject(u)}}var s;return cc.a})))})))}},{key:"resetRootComponentType",value:function(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}},{key:"getTransition",value:function(){var t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}},{key:"setTransition",value:function(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var t=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe((function(e){var n=t.extractLocationChangeInfoFromEvent(e);t.shouldScheduleNavigation(t.lastLocationChangeInfo,n)&&setTimeout((function(){var e=n.source,r=n.state,i=n.urlTree,o={replaceUrl:!0};if(r){var a=Object.assign({},r);delete a.navigationId,0!==Object.keys(a).length&&(o.state=a)}t.scheduleNavigation(i,e,r,o)}),0),t.lastLocationChangeInfo=n})))}},{key:"extractLocationChangeInfoFromEvent",value:function(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}},{key:"shouldScheduleNavigation",value:function(t,e){if(!t)return!0;var n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(t){this.events.next(t)}},{key:"resetConfig",value:function(t){kf(t),this.config=t.map(Sf),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0)}},{key:"createUrlTree",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.relativeTo,r=e.queryParams,o=e.fragment,a=e.preserveQueryParams,u=e.queryParamsHandling,c=e.preserveFragment;Object(s.V)()&&a&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");var l=n||this.routerState.root,h=c?this.currentUrlTree.fragment:o,f=null;if(u)switch(u){case"merge":f=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=r||null}else f=a?this.currentUrlTree.queryParams:r||null;return null!==f&&(f=this.removeEmptyProps(f)),function(t,e,n,r,o){if(0===n.length)return Ih(e.root,e.root,e,r,o);var a=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new xh(!0,0,t);var e=0,n=!1,r=t.reduce((function(t,r,o){if("object"==typeof r&&null!=r){if(r.outlets){var a={};return zl(r.outlets,(function(t,e){a[e]="string"==typeof t?t.split("/"):t})),[].concat(i(t),[{outlets:a}])}if(r.segmentPath)return[].concat(i(t),[r.segmentPath])}return"string"!=typeof r?[].concat(i(t),[r]):0===o?(r.split("/").forEach((function(r,i){0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))})),t):[].concat(i(t),[r])}),[]);return new xh(n,e,r)}(n);if(a.toRoot())return Ih(e.root,new Kl([],{}),e,r,o);var s=function(t,e,n){if(t.isAbsolute)return new Nh(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){var r=n.snapshot._urlSegment;return new Nh(r,r===e.root,0)}var i=Eh(t.commands[0])?0:1;return function(t,e,n){for(var r=t,i=e,o=n;o>i;){if(o-=i,!(r=r.parent))throw new Error("Invalid number of '../'");i=r.segments.length}return new Nh(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+i,t.numberOfDoubleDots)}(a,e,t),u=s.processChildren?jh(s.segmentGroup,s.index,a.commands):Ah(s.segmentGroup,s.index,a.commands);return Ih(s.segmentGroup,u,e,r,o)}(l,this.currentUrlTree,t,f,h)}},{key:"navigateByUrl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};Object(s.V)()&&this.isNgZoneEnabled&&!s.z.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");var n=Vh(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}},{key:"navigate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return function(t){for(var e=0;e<t.length;e++){var n=t[e];if(null==n)throw new Error("The requested path contains ".concat(n," segment at index ").concat(e))}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}},{key:"serializeUrl",value:function(t){return this.urlSerializer.serialize(t)}},{key:"parseUrl",value:function(t){var e;try{e=this.urlSerializer.parse(t)}catch(VA){e=this.malformedUriErrorHandler(VA,this.urlSerializer,t)}return e}},{key:"isActive",value:function(t,e){if(Vh(t))return Wl(this.currentUrlTree,t,e);var n=this.parseUrl(t);return Wl(this.currentUrlTree,n,e)}},{key:"removeEmptyProps",value:function(t){return Object.keys(t).reduce((function(e,n){var r=t[n];return null!=r&&(e[n]=r),e}),{})}},{key:"processNavigations",value:function(){var t=this;this.navigations.subscribe((function(e){t.navigated=!0,t.lastSuccessfulId=e.id,t.events.next(new bl(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(t.currentUrlTree))),t.lastSuccessfulNavigation=t.currentNavigation,t.currentNavigation=null,e.resolve(!0)}),(function(e){t.console.warn("Unhandled Navigation Error: ")}))}},{key:"scheduleNavigation",value:function(t,e,n,r,i){var o,a,s,u=this.getTransition(),c="imperative"!==e&&"imperative"===(null==u?void 0:u.source),l=(this.lastSuccessfulId===u.id||this.currentNavigation?u.rawUrl:u.urlAfterRedirects).toString()===t.toString();if(c&&l)return Promise.resolve(!0);i?(o=i.resolve,a=i.reject,s=i.promise):s=new Promise((function(t,e){o=t,a=e}));var h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:o,reject:a,promise:s,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),s.catch((function(t){return Promise.reject(t)}))}},{key:"setBrowserUrl",value:function(t,e,n,r){var i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}},{key:"resetStateAndUrl",value:function(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}]),t}()).\u0275fac=function(t){return new(t||Lf)(s.Sb(s.N),s.Sb(Yl),s.Sb(xf),s.Sb(q),s.Sb(s.r),s.Sb(s.w),s.Sb(s.i),s.Sb(void 0))},Lf.\u0275prov=s.Fb({token:Lf,factory:Lf.\u0275fac}),Lf),Ff=((Df=function(){function t(e,n,r,i,o){h(this,t),this.router=e,this.route=n,this.commands=[],this.onChanges=new $u.a,null==r&&i.setAttribute(o.nativeElement,"tabindex","0")}return d(t,[{key:"ngOnChanges",value:function(t){this.onChanges.next(this)}},{key:"routerLink",set:function(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}},{key:"preserveQueryParams",set:function(t){Object(s.V)()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=t}},{key:"onClick",value:function(){var t={skipLocationChange:qf(this.skipLocationChange),replaceUrl:qf(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:qf(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:qf(this.preserveFragment)})}}]),t}()).\u0275fac=function(t){return new(t||Df)(s.Jb(Mf),s.Jb(mh),s.Tb("tabindex"),s.Jb(s.E),s.Jb(s.l))},Df.\u0275dir=s.Eb({type:Df,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&s.Vb("click",(function(){return e.onClick()}))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[s.xb]}),Df),Uf=((Rf=function(){function t(e,n,r){var i=this;h(this,t),this.router=e,this.route=n,this.locationStrategy=r,this.commands=[],this.onChanges=new $u.a,this.subscription=e.events.subscribe((function(t){t instanceof bl&&i.updateTargetUrlAndHref()}))}return d(t,[{key:"routerLink",set:function(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}},{key:"preserveQueryParams",set:function(t){Object(s.V)()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=t}},{key:"ngOnChanges",value:function(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onClick",value:function(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;var o={skipLocationChange:qf(this.skipLocationChange),replaceUrl:qf(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}},{key:"updateTargetUrlAndHref",value:function(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:qf(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:qf(this.preserveFragment)})}}]),t}()).\u0275fac=function(t){return new(t||Rf)(s.Jb(Mf),s.Jb(mh),s.Jb(j))},Rf.\u0275dir=s.Eb({type:Rf,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&s.Vb("click",(function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)})),2&t&&(s.Rb("href",e.href,s.mc),s.Ab("target",e.target))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[s.xb]}),Rf);function qf(t){return""===t||!!t}var Vf,zf,Bf,Wf,Hf=((zf=function(){function t(e,n,r,i,o,a){var s=this;h(this,t),this.router=e,this.element=n,this.renderer=r,this.cdr=i,this.link=o,this.linkWithHref=a,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=e.events.subscribe((function(t){t instanceof bl&&s.update()}))}return d(t,[{key:"ngAfterContentInit",value:function(){var t=this;Object(ge.a)([this.links.changes,this.linksWithHrefs.changes,Object(hc.a)(null)]).pipe(Object(ul.a)()).subscribe((function(e){t.update(),t.subscribeToEachLinkOnChanges()}))}},{key:"subscribeToEachLinkOnChanges",value:function(){var t,e=this;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();var n=[].concat(i(this.links.toArray()),i(this.linksWithHrefs.toArray()),[this.link,this.linkWithHref]).filter((function(t){return!!t})).map((function(t){return t.onChanges}));this.linkInputChangesSubscription=Object(ge.a)(n).pipe(Object(ul.a)()).subscribe((function(t){e.isActive!==e.isLinkActive(e.router)(t)&&e.update()}))}},{key:"routerLinkActive",set:function(t){var e=Array.isArray(t)?t:t.split(" ");this.classes=e.filter((function(t){return!!t}))}},{key:"ngOnChanges",value:function(t){this.update()}},{key:"ngOnDestroy",value:function(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}},{key:"update",value:function(){var t=this;this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then((function(){var e=t.hasActiveLinks();t.isActive!==e&&(t.isActive=e,t.cdr.markForCheck(),t.classes.forEach((function(n){e?t.renderer.addClass(t.element.nativeElement,n):t.renderer.removeClass(t.element.nativeElement,n)})))}))}},{key:"isLinkActive",value:function(t){var e=this;return function(n){return t.isActive(n.urlTree,e.routerLinkActiveOptions.exact)}}},{key:"hasActiveLinks",value:function(){var t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}]),t}()).\u0275fac=function(t){return new(t||zf)(s.Jb(Mf),s.Jb(s.l),s.Jb(s.E),s.Jb(s.h),s.Jb(Ff,8),s.Jb(Uf,8))},zf.\u0275dir=s.Eb({type:zf,selectors:[["","routerLinkActive",""]],contentQueries:function(t,e,n){var r;1&t&&(s.Cb(n,Ff,!0),s.Cb(n,Uf,!0)),2&t&&(s.ic(r=s.Wb())&&(e.links=r),s.ic(r=s.Wb())&&(e.linksWithHrefs=r))},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[s.xb]}),zf),Kf=((Vf=function(){function t(e,n,r,i,o){h(this,t),this.parentContexts=e,this.location=n,this.resolver=r,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new s.n,this.deactivateEvents=new s.n,this.name=i||"primary",e.onChildOutletCreated(this.name,this)}return d(t,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var t=this.activated;return this.activated=null,this._activatedRoute=null,t}},{key:"attach",value:function(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}},{key:"deactivate",value:function(){if(this.activated){var t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}},{key:"activateWith",value:function(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;var n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Gf(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}]),t}()).\u0275fac=function(t){return new(t||Vf)(s.Jb(xf),s.Jb(s.Q),s.Jb(s.j),s.Tb("name"),s.Jb(s.h))},Vf.\u0275dir=s.Eb({type:Vf,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),Vf),Gf=function(){function t(e,n,r){h(this,t),this.route=e,this.childContexts=n,this.parent=r}return d(t,[{key:"get",value:function(t,e){return t===mh?this.route:t===xf?this.childContexts:this.parent.get(t,e)}}]),t}(),Jf=function t(){h(this,t)},Qf=function(){function t(){h(this,t)}return d(t,[{key:"preload",value:function(t,e){return Object(hc.a)(null)}}]),t}(),Yf=((Wf=function(){function t(e,n,r,i,o){h(this,t),this.router=e,this.injector=i,this.preloadingStrategy=o,this.loader=new Tf(n,r,(function(t){return e.triggerEvent(new Tl(t))}),(function(t){return e.triggerEvent(new Il(t))}))}return d(t,[{key:"setUpPreloading",value:function(){var t=this;this.subscription=this.router.events.pipe(gc((function(t){return t instanceof bl})),Ic((function(){return t.preload()}))).subscribe((function(){}))}},{key:"preload",value:function(){var t=this.injector.get(s.x);return this.processRoutes(t,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"processRoutes",value:function(t,e){var n,r=[],i=a(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.loadChildren&&!o.canLoad&&o._loadedConfig){var s=o._loadedConfig;r.push(this.processRoutes(s.module,s.routes))}else o.loadChildren&&!o.canLoad?r.push(this.preloadConfig(t,o)):o.children&&r.push(this.processRoutes(t,o.children))}}catch(u){i.e(u)}finally{i.f()}return Object(ge.a)(r).pipe(Object(ul.a)(),Object(ve.a)((function(t){})))}},{key:"preloadConfig",value:function(t,e){var n=this;return this.preloadingStrategy.preload(e,(function(){return n.loader.load(t.injector,e).pipe(Object(Tc.b)((function(t){return e._loadedConfig=t,n.processRoutes(t.module,t.routes)})))}))}}]),t}()).\u0275fac=function(t){return new(t||Wf)(s.Sb(Mf),s.Sb(s.w),s.Sb(s.i),s.Sb(s.r),s.Sb(Jf))},Wf.\u0275prov=s.Fb({token:Wf,factory:Wf.\u0275fac}),Wf),Xf=((Bf=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};h(this,t),this.router=e,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}return d(t,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var t=this;return this.router.events.subscribe((function(e){e instanceof ml?(t.store[t.lastId]=t.viewportScroller.getScrollPosition(),t.lastSource=e.navigationTrigger,t.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof bl&&(t.lastId=e.id,t.scheduleScrollEvent(e,t.router.parseUrl(e.urlAfterRedirects).fragment))}))}},{key:"consumeScrollEvents",value:function(){var t=this;return this.router.events.subscribe((function(e){e instanceof Pl&&(e.position?"top"===t.options.scrollPositionRestoration?t.viewportScroller.scrollToPosition([0,0]):"enabled"===t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===t.options.anchorScrolling?t.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition([0,0]))}))}},{key:"scheduleScrollEvent",value:function(t,e){this.router.triggerEvent(new Pl(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||Bf)(s.Sb(Mf),s.Sb(Ct),s.Sb(void 0))},Bf.\u0275prov=s.Fb({token:Bf,factory:Bf.\u0275fac}),Bf),Zf=new s.q("ROUTER_CONFIGURATION"),$f=new s.q("ROUTER_FORROOT_GUARD"),td=[q,{provide:Yl,useClass:Xl},{provide:Mf,useFactory:function(t,e,n,r,i,o,a){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},u=arguments.length>8?arguments[8]:void 0,c=arguments.length>9?arguments[9]:void 0,l=new Mf(null,t,e,n,r,i,o,ql(a));if(u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),s.errorHandler&&(l.errorHandler=s.errorHandler),s.malformedUriErrorHandler&&(l.malformedUriErrorHandler=s.malformedUriErrorHandler),s.enableTracing){var h=f();l.events.subscribe((function(t){h.logGroup("Router Event: "+t.constructor.name),h.log(t.toString()),h.log(t),h.logGroupEnd()}))}return s.onSameUrlNavigation&&(l.onSameUrlNavigation=s.onSameUrlNavigation),s.paramsInheritanceStrategy&&(l.paramsInheritanceStrategy=s.paramsInheritanceStrategy),s.urlUpdateStrategy&&(l.urlUpdateStrategy=s.urlUpdateStrategy),s.relativeLinkResolution&&(l.relativeLinkResolution=s.relativeLinkResolution),l},deps:[Yl,xf,q,s.r,s.w,s.i,Ef,Zf,[function(){return function t(){h(this,t)}}(),new s.A],[function(){return function t(){h(this,t)}}(),new s.A]]},xf,{provide:mh,useFactory:function(t){return t.routerState.root},deps:[Mf]},{provide:s.w,useClass:s.K},Yf,Qf,function(){function t(){h(this,t)}return d(t,[{key:"preload",value:function(t,e){return e().pipe(xc((function(){return Object(hc.a)(null)})))}}]),t}(),{provide:Zf,useValue:{enableTracing:!1}}];function ed(){return new s.y("Router",Mf)}var nd,rd=((nd=function(){function t(e,n){h(this,t)}return d(t,null,[{key:"forRoot",value:function(e,n){return{ngModule:t,providers:[td,sd(e),{provide:$f,useFactory:ad,deps:[[Mf,new s.A,new s.J]]},{provide:Zf,useValue:n||{}},{provide:j,useFactory:od,deps:[w,[new s.p(M),new s.A],Zf]},{provide:Xf,useFactory:id,deps:[Mf,Ct,Zf]},{provide:Jf,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Qf},{provide:s.y,multi:!0,useFactory:ed},[cd,{provide:s.d,multi:!0,useFactory:ld,deps:[cd]},{provide:gd,useFactory:hd,deps:[cd]},{provide:s.b,multi:!0,useExisting:gd}]]}}},{key:"forChild",value:function(e){return{ngModule:t,providers:[sd(e)]}}}]),t}()).\u0275mod=s.Hb({type:nd}),nd.\u0275inj=s.Gb({factory:function(t){return new(t||nd)(s.Sb($f,8),s.Sb(Mf,8))}}),nd);function id(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Xf(t,e,n)}function od(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.useHash?new U(t,e):new F(t,e)}function ad(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function sd(t){return[{provide:s.a,multi:!0,useValue:t},{provide:Ef,multi:!0,useValue:t}]}var ud,cd=((ud=function(){function t(e){h(this,t),this.injector=e,this.initNavigation=!1,this.resultOfPreactivationDone=new $u.a}return d(t,[{key:"appInitializer",value:function(){var t=this;return this.injector.get(C,Promise.resolve(null)).then((function(){var e=null,n=new Promise((function(t){return e=t})),r=t.injector.get(Mf),i=t.injector.get(Zf);if(t.isLegacyDisabled(i)||t.isLegacyEnabled(i))e(!0);else if("disabled"===i.initialNavigation)r.setUpLocationChangeListener(),e(!0);else{if("enabled"!==i.initialNavigation)throw new Error("Invalid initialNavigation options: '".concat(i.initialNavigation,"'"));r.hooks.afterPreactivation=function(){return t.initNavigation?Object(hc.a)(null):(t.initNavigation=!0,e(!0),t.resultOfPreactivationDone)},r.initialNavigation()}return n}))}},{key:"bootstrapListener",value:function(t){var e=this.injector.get(Zf),n=this.injector.get(Yf),r=this.injector.get(Xf),i=this.injector.get(Mf),o=this.injector.get(s.g);t===o.components[0]&&(this.isLegacyEnabled(e)?i.initialNavigation():this.isLegacyDisabled(e)&&i.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),i.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}},{key:"isLegacyEnabled",value:function(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}},{key:"isLegacyDisabled",value:function(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}]),t}()).\u0275fac=function(t){return new(t||ud)(s.Sb(s.r))},ud.\u0275prov=s.Fb({token:ud,factory:ud.\u0275fac}),ud);function ld(t){return t.appInitializer.bind(t)}function hd(t){return t.bootstrapListener.bind(t)}var fd,dd,pd,vd,yd,gd=new s.q("Router Initializer"),md=function(){function t(){h(this,t)}return d(t,null,[{key:"createClient",value:function(t){var e=t.get();if(!e)throw new Error("Configuration must be specified either through AuthModule.forRoot or through AuthClientConfig.set");var n=e.redirectUri,r=e.clientId,i=e.maxAge,o=Object(nl.f)(e,["redirectUri","clientId","maxAge","httpInterceptor"]);return new Zu(Object.assign(Object.assign({redirect_uri:n||window.location.origin,client_id:r,max_age:i},o),{auth0Client:{name:"@auth0/auth0-angular",version:"1.5.0"}}))}}]),t}(),bd=new s.q("auth0.client"),_d=((dd=function(){function t(e,n){h(this,t),this.location=e;try{this.router=n.get(Mf)}catch(r){}}return d(t,[{key:"navigateByUrl",value:function(t){this.router?this.router.navigateByUrl(t):this.location.replaceState(t)}}]),t}()).\u0275fac=function(t){return new(t||dd)(s.Sb(q),s.Sb(s.r))},dd.\u0275prov=Object(s.Fb)({factory:function(){return new dd(Object(s.Sb)(q),Object(s.Sb)(s.o))},token:dd,providedIn:"root"}),dd),wd=((fd=function(){function t(e){h(this,t),e&&this.set(e)}return d(t,[{key:"set",value:function(t){this.config=t}},{key:"get",value:function(){return this.config}}]),t}()).\u0275fac=function(t){return new(t||fd)(s.Sb(kd,8))},fd.\u0275prov=Object(s.Fb)({factory:function(){return new fd(Object(s.Sb)(kd,8))},token:fd,providedIn:"root"}),fd),kd=new s.q("auth0-angular.config"),Od=((yd=function(){function t(e,n,r,i){var o,a=this;h(this,t),this.auth0Client=e,this.configFactory=n,this.location=r,this.navigator=i,this.isLoadingSubject$=new ec(!0),this.errorSubject$=new ac(1),this.refreshState$=new $u.a,this.accessToken$=new ac(1),this.ngUnsubscribe$=new $u.a,this.isLoading$=this.isLoadingSubject$.asObservable(),this.accessTokenTrigger$=this.accessToken$.pipe(pc((function(t,e){return{previous:t.current,current:e}}),{current:null,previous:null}),gc((function(t){return t.previous!==t.current}))),this.isAuthenticatedTrigger$=this.isLoading$.pipe(gc((function(t){return!t})),_c(),Cc((function(){return Object(uc.a)(lc((function(){return a.auth0Client.isAuthenticated()})),a.accessTokenTrigger$.pipe(Object(Tc.b)((function(){return a.auth0Client.isAuthenticated()}))),a.refreshState$.pipe(Object(Tc.b)((function(){return a.auth0Client.isAuthenticated()}))))}))),this.isAuthenticated$=this.isAuthenticatedTrigger$.pipe(_c()),this.user$=this.isAuthenticatedTrigger$.pipe(Ic((function(t){return t?a.auth0Client.getUser():Object(hc.a)(null)}))),this.idTokenClaims$=this.isAuthenticatedTrigger$.pipe(Ic((function(t){return t?a.auth0Client.getIdTokenClaims():Object(hc.a)(null)}))),this.error$=this.errorSubject$.asObservable(),this.shouldHandleCallback().pipe(Cc((function(t){return function(t){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cc.a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:cc.a;return lc((function(){return t()?e:n}))}((function(){return t}),a.handleRedirectCallback(),lc((function(){return a.auth0Client.checkSession()})))}(t).pipe(xc((function(t){var e=a.configFactory.get();return a.errorSubject$.next(t),a.navigator.navigateByUrl(e.errorPath||"/"),Object(hc.a)(void 0)})))})),Object(jc.a)((function(){a.isLoadingSubject$.next(!1)})),(o=this.ngUnsubscribe$,function(t){return t.lift(new Pc(o))})).subscribe()}return d(t,[{key:"ngOnDestroy",value:function(){this.ngUnsubscribe$.next(),this.ngUnsubscribe$.complete()}},{key:"loginWithRedirect",value:function(t){return Object(ge.a)(this.auth0Client.loginWithRedirect(t))}},{key:"loginWithPopup",value:function(t,e){var n=this;return Object(ge.a)(this.auth0Client.loginWithPopup(t,e).then((function(){n.refreshState$.next()})))}},{key:"logout",value:function(t){this.auth0Client.logout(t),(null==t?void 0:t.localOnly)&&this.refreshState$.next()}},{key:"getAccessTokenSilently",value:function(t){var e=this;return Object(hc.a)(this.auth0Client).pipe(Ic((function(e){return e.getTokenSilently(t)})),Object(jc.a)((function(t){return e.accessToken$.next(t)})),xc((function(t){return e.errorSubject$.next(t),e.refreshState$.next(),Object(fc.a)(t)})))}},{key:"getAccessTokenWithPopup",value:function(t){var e=this;return Object(hc.a)(this.auth0Client).pipe(Ic((function(e){return e.getTokenWithPopup(t)})),Object(jc.a)((function(t){return e.accessToken$.next(t)})),xc((function(t){return e.errorSubject$.next(t),e.refreshState$.next(),Object(fc.a)(t)})))}},{key:"handleRedirectCallback",value:function(t){var n=this;return lc((function(){return n.auth0Client.handleRedirectCallback(t)})).pipe(Uc(this.isLoadingSubject$),Object(jc.a)((function(t){var r,i,o=e(t,2),a=o[0];o[1]||n.refreshState$.next();var s=null!==(i=null===(r=null==a?void 0:a.appState)||void 0===r?void 0:r.target)&&void 0!==i?i:"/";n.navigator.navigateByUrl(s)})),Object(ve.a)((function(t){return e(t,1)[0]})))}},{key:"buildAuthorizeUrl",value:function(t){var e=this;return lc((function(){return e.auth0Client.buildAuthorizeUrl(t)}))}},{key:"buildLogoutUrl",value:function(t){return Object(hc.a)(this.auth0Client.buildLogoutUrl(t))}},{key:"shouldHandleCallback",value:function(){var t=this;return Object(hc.a)(this.location.path()).pipe(Object(ve.a)((function(e){return(e.includes("code=")||e.includes("error="))&&e.includes("state=")&&!t.configFactory.get().skipRedirectCallback})))}}]),t}()).\u0275fac=function(t){return new(t||yd)(s.Sb(bd),s.Sb(wd),s.Sb(q),s.Sb(_d))},yd.\u0275prov=Object(s.Fb)({factory:function(){return new yd(Object(s.Sb)(bd),Object(s.Sb)(wd),Object(s.Sb)(q),Object(s.Sb)(_d))},token:yd,providedIn:"root"}),yd),Cd=((vd=function(){function t(e){h(this,t),this.auth=e}return d(t,[{key:"canLoad",value:function(t,e){return this.auth.isAuthenticated$.pipe(Bc(1))}},{key:"canActivate",value:function(t,e){return this.redirectIfUnauthenticated(e)}},{key:"canActivateChild",value:function(t,e){return this.redirectIfUnauthenticated(e)}},{key:"redirectIfUnauthenticated",value:function(t){var e=this;return this.auth.isAuthenticated$.pipe(Object(jc.a)((function(n){n||e.auth.loginWithRedirect({appState:{target:t.url}})})))}}]),t}()).\u0275fac=function(t){return new(t||vd)(s.Sb(Od))},vd.\u0275prov=Object(s.Fb)({factory:function(){return new vd(Object(s.Sb)(Od))},token:vd,providedIn:"root"}),vd),Sd=((pd=function(){function t(){h(this,t)}return d(t,null,[{key:"forRoot",value:function(e){return{ngModule:t,providers:[Od,Cd,{provide:kd,useValue:e},{provide:bd,useFactory:md.createClient,deps:[wd]}]}}}]),t}()).\u0275mod=s.Hb({type:pd}),pd.\u0275inj=s.Gb({factory:function(t){return new(t||pd)}}),pd),Ed=function t(){h(this,t)},Td=function t(){h(this,t)},Id=function(){function t(e){var n=this;h(this,t),this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?function(){n.headers=new Map,e.split("\n").forEach((function(t){var e=t.indexOf(":");if(e>0){var r=t.slice(0,e),i=r.toLowerCase(),o=t.slice(e+1).trim();n.maybeSetNormalizedName(r,i),n.headers.has(i)?n.headers.get(i).push(o):n.headers.set(i,[o])}}))}:function(){n.headers=new Map,Object.keys(e).forEach((function(t){var r=e[t],i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(n.headers.set(i,r),n.maybeSetNormalizedName(t,i))}))}:this.headers=new Map}return d(t,[{key:"has",value:function(t){return this.init(),this.headers.has(t.toLowerCase())}},{key:"get",value:function(t){this.init();var e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}},{key:"keys",value:function(){return this.init(),Array.from(this.normalizedNames.values())}},{key:"getAll",value:function(t){return this.init(),this.headers.get(t.toLowerCase())||null}},{key:"append",value:function(t,e){return this.clone({name:t,value:e,op:"a"})}},{key:"set",value:function(t,e){return this.clone({name:t,value:e,op:"s"})}},{key:"delete",value:function(t,e){return this.clone({name:t,value:e,op:"d"})}},{key:"maybeSetNormalizedName",value:function(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}},{key:"init",value:function(){var e=this;this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach((function(t){return e.applyUpdate(t)})),this.lazyUpdate=null))}},{key:"copyFrom",value:function(t){var e=this;t.init(),Array.from(t.headers.keys()).forEach((function(n){e.headers.set(n,t.headers.get(n)),e.normalizedNames.set(n,t.normalizedNames.get(n))}))}},{key:"clone",value:function(e){var n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}},{key:"applyUpdate",value:function(t){var e=t.name.toLowerCase();switch(t.op){case"a":case"s":var n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);var r=("a"===t.op?this.headers.get(e):void 0)||[];r.push.apply(r,i(n)),this.headers.set(e,r);break;case"d":var o=t.value;if(o){var a=this.headers.get(e);if(!a)return;0===(a=a.filter((function(t){return-1===o.indexOf(t)}))).length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,a)}else this.headers.delete(e),this.normalizedNames.delete(e)}}},{key:"forEach",value:function(t){var e=this;this.init(),Array.from(this.normalizedNames.keys()).forEach((function(n){return t(e.normalizedNames.get(n),e.headers.get(n))}))}}]),t}(),xd=function(){function t(){h(this,t)}return d(t,[{key:"encodeKey",value:function(t){return Nd(t)}},{key:"encodeValue",value:function(t){return Nd(t)}},{key:"decodeKey",value:function(t){return decodeURIComponent(t)}},{key:"decodeValue",value:function(t){return decodeURIComponent(t)}}]),t}();function Nd(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var Ad=function(){function t(){var n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(h(this,t),this.updates=null,this.cloneFrom=null,this.encoder=r.encoder||new xd,r.fromString){if(r.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,n){var r=new Map;return t.length>0&&t.split("&").forEach((function(t){var i=t.indexOf("="),o=e(-1==i?[n.decodeKey(t),""]:[n.decodeKey(t.slice(0,i)),n.decodeValue(t.slice(i+1))],2),a=o[0],s=o[1],u=r.get(a)||[];u.push(s),r.set(a,u)})),r}(r.fromString,this.encoder)}else r.fromObject?(this.map=new Map,Object.keys(r.fromObject).forEach((function(t){var e=r.fromObject[t];n.map.set(t,Array.isArray(e)?e:[e])}))):this.map=null}return d(t,[{key:"has",value:function(t){return this.init(),this.map.has(t)}},{key:"get",value:function(t){this.init();var e=this.map.get(t);return e?e[0]:null}},{key:"getAll",value:function(t){return this.init(),this.map.get(t)||null}},{key:"keys",value:function(){return this.init(),Array.from(this.map.keys())}},{key:"append",value:function(t,e){return this.clone({param:t,value:e,op:"a"})}},{key:"set",value:function(t,e){return this.clone({param:t,value:e,op:"s"})}},{key:"delete",value:function(t,e){return this.clone({param:t,value:e,op:"d"})}},{key:"toString",value:function(){var t=this;return this.init(),this.keys().map((function(e){var n=t.encoder.encodeKey(e);return t.map.get(e).map((function(e){return n+"="+t.encoder.encodeValue(e)})).join("&")})).filter((function(t){return""!==t})).join("&")}},{key:"clone",value:function(e){var n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat([e]),n}},{key:"init",value:function(){var t=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach((function(e){return t.map.set(e,t.cloneFrom.map.get(e))})),this.updates.forEach((function(e){switch(e.op){case"a":case"s":var n=("a"===e.op?t.map.get(e.param):void 0)||[];n.push(e.value),t.map.set(e.param,n);break;case"d":if(void 0===e.value){t.map.delete(e.param);break}var r=t.map.get(e.param)||[],i=r.indexOf(e.value);-1!==i&&r.splice(i,1),r.length>0?t.map.set(e.param,r):t.map.delete(e.param)}})),this.cloneFrom=this.updates=null)}}]),t}();function jd(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function Pd(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Rd(t){return"undefined"!=typeof FormData&&t instanceof FormData}var Dd=function(){function t(e,n,r,i){var o;if(h(this,t),this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.params&&(this.params=o.params)),this.headers||(this.headers=new Id),this.params){var a=this.params.toString();if(0===a.length)this.urlWithParams=n;else{var s=n.indexOf("?");this.urlWithParams=n+(-1===s?"?":s<n.length-1?"&":"")+a}}else this.params=new Ad,this.urlWithParams=n}return d(t,[{key:"serializeBody",value:function(){return null===this.body?null:jd(this.body)||Pd(this.body)||Rd(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ad?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}},{key:"detectContentTypeHeader",value:function(){return null===this.body||Rd(this.body)?null:Pd(this.body)?this.body.type||null:jd(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ad?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}},{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,s=void 0!==e.reportProgress?e.reportProgress:this.reportProgress,u=e.headers||this.headers,c=e.params||this.params;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce((function(t,n){return t.set(n,e.setHeaders[n])}),u)),e.setParams&&(c=Object.keys(e.setParams).reduce((function(t,n){return t.set(n,e.setParams[n])}),c)),new t(n,r,o,{params:c,headers:u,reportProgress:s,responseType:i,withCredentials:a})}}]),t}(),Ld=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({}),Md=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"OK";h(this,t),this.headers=e.headers||new Id,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300},Fd=function(t){p(n,t);var e=y(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h(this,n),(t=e.call(this,r)).type=Ld.ResponseHeader,t}return d(n,[{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}]),n}(Md),Ud=function(t){p(n,t);var e=y(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h(this,n),(t=e.call(this,r)).type=Ld.Response,t.body=void 0!==r.body?r.body:null,t}return d(n,[{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}]),n}(Md),qd=function(t){p(n,t);var e=y(n);function n(t){var r;return h(this,n),(r=e.call(this,t,0,"Unknown Error")).name="HttpErrorResponse",r.ok=!1,r.message=r.status>=200&&r.status<300?"Http failure during parsing for "+(t.url||"(unknown url)"):"Http failure response for ".concat(t.url||"(unknown url)",": ").concat(t.status," ").concat(t.statusText),r.error=t.error||null,r}return n}(Md);function Vd(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}var zd,Bd,Wd,Hd,Kd,Gd,Jd,Qd,Yd,Xd=((zd=function(){function t(e){h(this,t),this.handler=e}return d(t,[{key:"request",value:function(t,e){var n,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t instanceof Dd)n=t;else{var o=void 0;o=i.headers instanceof Id?i.headers:new Id(i.headers);var a=void 0;i.params&&(a=i.params instanceof Ad?i.params:new Ad({fromObject:i.params})),n=new Dd(t,e,void 0!==i.body?i.body:null,{headers:o,params:a,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}var s=Object(hc.a)(n).pipe(Ic((function(t){return r.handler.handle(t)})));if(t instanceof Dd||"events"===i.observe)return s;var u=s.pipe(gc((function(t){return t instanceof Ud})));switch(i.observe||"body"){case"body":switch(n.responseType){case"arraybuffer":return u.pipe(Object(ve.a)((function(t){if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body})));case"blob":return u.pipe(Object(ve.a)((function(t){if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body})));case"text":return u.pipe(Object(ve.a)((function(t){if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body})));case"json":default:return u.pipe(Object(ve.a)((function(t){return t.body})))}case"response":return u;default:throw new Error("Unreachable: unhandled observe type ".concat(i.observe,"}"))}}},{key:"delete",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("DELETE",t,e)}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("GET",t,e)}},{key:"head",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("HEAD",t,e)}},{key:"jsonp",value:function(t,e){return this.request("JSONP",t,{params:(new Ad).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}},{key:"options",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("OPTIONS",t,e)}},{key:"patch",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PATCH",t,Vd(n,e))}},{key:"post",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("POST",t,Vd(n,e))}},{key:"put",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PUT",t,Vd(n,e))}}]),t}()).\u0275fac=function(t){return new(t||zd)(s.Sb(Ed))},zd.\u0275prov=s.Fb({token:zd,factory:zd.\u0275fac}),zd),Zd=function(){function t(e,n){h(this,t),this.next=e,this.interceptor=n}return d(t,[{key:"handle",value:function(t){return this.interceptor.intercept(t,this.next)}}]),t}(),$d=new s.q("HTTP_INTERCEPTORS"),tp=((Bd=function(){function t(){h(this,t)}return d(t,[{key:"intercept",value:function(t,e){return e.handle(t)}}]),t}()).\u0275fac=function(t){return new(t||Bd)},Bd.\u0275prov=s.Fb({token:Bd,factory:Bd.\u0275fac}),Bd),ep=/^\)\]\}',?\n/,np=function t(){h(this,t)},rp=((Hd=function(){function t(){h(this,t)}return d(t,[{key:"build",value:function(){return new XMLHttpRequest}}]),t}()).\u0275fac=function(t){return new(t||Hd)},Hd.\u0275prov=s.Fb({token:Hd,factory:Hd.\u0275fac}),Hd),ip=((Wd=function(){function t(e){h(this,t),this.xhrFactory=e}return d(t,[{key:"handle",value:function(t){var e=this;if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new de.a((function(n){var r=e.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach((function(t,e){return r.setRequestHeader(t,e.join(","))})),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){var i=t.detectContentTypeHeader();null!==i&&r.setRequestHeader("Content-Type",i)}if(t.responseType){var o=t.responseType.toLowerCase();r.responseType="json"!==o?o:"text"}var a=t.serializeBody(),s=null,u=function(){if(null!==s)return s;var e=1223===r.status?204:r.status,n=r.statusText||"OK",i=new Id(r.getAllResponseHeaders()),o=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(r)||t.url;return s=new Fd({headers:i,status:e,statusText:n,url:o})},c=function(){var e=u(),i=e.headers,o=e.status,a=e.statusText,s=e.url,c=null;204!==o&&(c=void 0===r.response?r.responseText:r.response),0===o&&(o=c?200:0);var l=o>=200&&o<300;if("json"===t.responseType&&"string"==typeof c){var h=c;c=c.replace(ep,"");try{c=""!==c?JSON.parse(c):null}catch(f){c=h,l&&(l=!1,c={error:f,text:c})}}l?(n.next(new Ud({body:c,headers:i,status:o,statusText:a,url:s||void 0})),n.complete()):n.error(new qd({error:c,headers:i,status:o,statusText:a,url:s||void 0}))},l=function(t){var e=u().url,i=new qd({error:t,status:r.status||0,statusText:r.statusText||"Unknown Error",url:e||void 0});n.error(i)},h=!1,f=function(e){h||(n.next(u()),h=!0);var i={type:Ld.DownloadProgress,loaded:e.loaded};e.lengthComputable&&(i.total=e.total),"text"===t.responseType&&r.responseText&&(i.partialText=r.responseText),n.next(i)},d=function(t){var e={type:Ld.UploadProgress,loaded:t.loaded};t.lengthComputable&&(e.total=t.total),n.next(e)};return r.addEventListener("load",c),r.addEventListener("error",l),t.reportProgress&&(r.addEventListener("progress",f),null!==a&&r.upload&&r.upload.addEventListener("progress",d)),r.send(a),n.next({type:Ld.Sent}),function(){r.removeEventListener("error",l),r.removeEventListener("load",c),t.reportProgress&&(r.removeEventListener("progress",f),null!==a&&r.upload&&r.upload.removeEventListener("progress",d)),r.readyState!==r.DONE&&r.abort()}}))}}]),t}()).\u0275fac=function(t){return new(t||Wd)(s.Sb(np))},Wd.\u0275prov=s.Fb({token:Wd,factory:Wd.\u0275fac}),Wd),op=new s.q("XSRF_COOKIE_NAME"),ap=new s.q("XSRF_HEADER_NAME"),sp=function t(){h(this,t)},up=((Yd=function(){function t(e,n,r){h(this,t),this.doc=e,this.platform=n,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return d(t,[{key:"getToken",value:function(){if("server"===this.platform)return null;var t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=$(t,this.cookieName),this.lastCookieString=t),this.lastToken}}]),t}()).\u0275fac=function(t){return new(t||Yd)(s.Sb(b),s.Sb(s.B),s.Sb(op))},Yd.\u0275prov=s.Fb({token:Yd,factory:Yd.\u0275fac}),Yd),cp=((Qd=function(){function t(e,n){h(this,t),this.tokenService=e,this.headerName=n}return d(t,[{key:"intercept",value:function(t,e){var n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);var r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}]),t}()).\u0275fac=function(t){return new(t||Qd)(s.Sb(sp),s.Sb(ap))},Qd.\u0275prov=s.Fb({token:Qd,factory:Qd.\u0275fac}),Qd),lp=((Jd=function(){function t(e,n){h(this,t),this.backend=e,this.injector=n,this.chain=null}return d(t,[{key:"handle",value:function(t){if(null===this.chain){var e=this.injector.get($d,[]);this.chain=e.reduceRight((function(t,e){return new Zd(t,e)}),this.backend)}return this.chain.handle(t)}}]),t}()).\u0275fac=function(t){return new(t||Jd)(s.Sb(Td),s.Sb(s.r))},Jd.\u0275prov=s.Fb({token:Jd,factory:Jd.\u0275fac}),Jd),hp=((Gd=function(){function t(){h(this,t)}return d(t,null,[{key:"disable",value:function(){return{ngModule:t,providers:[{provide:cp,useClass:tp}]}}},{key:"withOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:t,providers:[e.cookieName?{provide:op,useValue:e.cookieName}:[],e.headerName?{provide:ap,useValue:e.headerName}:[]]}}}]),t}()).\u0275mod=s.Hb({type:Gd}),Gd.\u0275inj=s.Gb({factory:function(t){return new(t||Gd)},providers:[cp,{provide:$d,useExisting:cp,multi:!0},{provide:sp,useClass:up},{provide:op,useValue:"XSRF-TOKEN"},{provide:ap,useValue:"X-XSRF-TOKEN"}]}),Gd),fp=((Kd=function t(){h(this,t)}).\u0275mod=s.Hb({type:Kd}),Kd.\u0275inj=s.Gb({factory:function(t){return new(t||Kd)},providers:[Xd,{provide:Ed,useClass:lp},ip,{provide:Td,useExisting:ip},rp,{provide:np,useExisting:rp}],imports:[[hp.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),Kd);function dp(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(VA){o(VA)}}function s(t){try{u(r.throw(t))}catch(VA){o(VA)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}var pp=o("D0XW"),vp=o("Y7HM");function yp(t){var e=t.index,n=t.period,r=t.subscriber;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}var gp=o("n6bG");o("8Qeq");var mp=function(){function t(e){h(this,t),this.notifier=e}return d(t,[{key:"call",value:function(t,e){var n=new bp(t),r=e.subscribe(n);return r.add(Object(Oc.c)(this.notifier,new Oc.a(n))),r}}]),t}(),bp=function(t){p(n,t);var e=y(n);function n(){var t;return h(this,n),(t=e.apply(this,arguments)).hasValue=!1,t}return d(n,[{key:"_next",value:function(t){this.value=t,this.hasValue=!0}},{key:"notifyNext",value:function(){this.emitValue()}},{key:"notifyComplete",value:function(){this.emitValue()}},{key:"emitValue",value:function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))}}]),n}(Oc.b);function _p(t,e,n){var r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},function(t){return t.lift(function(t){var e,n,r=t.bufferSize,i=void 0===r?Number.POSITIVE_INFINITY:r,o=t.windowTime,a=void 0===o?Number.POSITIVE_INFINITY:o,s=t.refCount,u=t.scheduler,c=0,l=!1,h=!1;return function(t){var r;c++,!e||l?(l=!1,e=new ac(i,a,u),r=e.subscribe(this),n=t.subscribe({next:function(t){e.next(t)},error:function(t){l=!0,e.error(t)},complete:function(){h=!0,n=void 0,e.complete()}}),h&&(n=void 0)):r=e.subscribe(this),this.add((function(){c--,r.unsubscribe(),r=void 0,n&&!h&&s&&0===c&&(n.unsubscribe(),n=void 0,e=void 0)}))}}(r))}}var wp=function(){function t(e){h(this,t),this.total=e}return d(t,[{key:"call",value:function(t,e){return e.subscribe(new kp(t,this.total))}}]),t}(),kp=function(t){p(n,t);var e=y(n);function n(t,r){var i;return h(this,n),(i=e.call(this,t)).total=r,i.count=0,i}return d(n,[{key:"_next",value:function(t){++this.count>this.total&&this.destination.next(t)}}]),n}(dc.a);o("oB13");var Op,Cp,Sp,Ep,Tp,Ip,xp,Np,Ap,jp,Pp,Rp=["*"],Dp=((Tp=function t(){h(this,t)}).\u0275fac=function(t){return new(t||Tp)},Tp.\u0275prov=s.Fb({token:Tp,factory:function(t){return Tp.\u0275fac(t)}}),Tp),Lp=((Ep=function(){function t(e,n){var r=this;h(this,t),this._loader=e,this._zone=n,this._map=new Promise((function(t){r._mapResolver=t}))}return d(t,[{key:"createMap",value:function(t,e){var n=this;return this._zone.runOutsideAngular((function(){return n._loader.load().then((function(){var r=new google.maps.Map(t,e);n._mapResolver(r)}))}))}},{key:"setMapOptions",value:function(t){var e=this;return this._zone.runOutsideAngular((function(){e._map.then((function(e){e.setOptions(t)}))}))}},{key:"createMarker",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._zone.runOutsideAngular((function(){return t._map.then((function(t){return n&&(e.map=t),new google.maps.Marker(e)}))}))}},{key:"createInfoWindow",value:function(t){var e=this;return this._zone.runOutsideAngular((function(){return e._map.then((function(){return new google.maps.InfoWindow(t)}))}))}},{key:"createCircle",value:function(t){var e=this;return this._zone.runOutsideAngular((function(){return e._map.then((function(e){return"string"==typeof t.strokePosition&&(t.strokePosition=google.maps.StrokePosition[t.strokePosition]),t.map=e,new google.maps.Circle(t)}))}))}},{key:"createRectangle",value:function(t){var e=this;return this._zone.runOutsideAngular((function(){return e._map.then((function(e){return t.map=e,new google.maps.Rectangle(t)}))}))}},{key:"createPolyline",value:function(t){var e=this;return this._zone.runOutsideAngular((function(){return e.getNativeMap().then((function(e){var n=new google.maps.Polyline(t);return n.setMap(e),n}))}))}},{key:"createPolygon",value:function(t){var e=this;return this._zone.runOutsideAngular((function(){return e.getNativeMap().then((function(e){var n=new google.maps.Polygon(t);return n.setMap(e),n}))}))}},{key:"createDataLayer",value:function(t){var e=this;return this._zone.runOutsideAngular((function(){return e._map.then((function(e){var n=new google.maps.Data(t);return n.setMap(e),n}))}))}},{key:"createTransitLayer",value:function(t){var e=this;return this._zone.runOutsideAngular((function(){return e._map.then((function(e){var n=new google.maps.TransitLayer;return n.setMap(t.visible?e:null),n}))}))}},{key:"createBicyclingLayer",value:function(t){var e=this;return this._zone.runOutsideAngular((function(){return e._map.then((function(e){var n=new google.maps.BicyclingLayer;return n.setMap(t.visible?e:null),n}))}))}},{key:"containsLocation",value:function(t,e){return google.maps.geometry.poly.containsLocation(t,e)}},{key:"subscribeToMapEvent",value:function(t){var e=this;return new de.a((function(n){e._map.then((function(r){r.addListener(t,(function(t){e._zone.run((function(){return n.next(t)}))}))}))}))}},{key:"clearInstanceListeners",value:function(){var t=this;return this._zone.runOutsideAngular((function(){t._map.then((function(t){google.maps.event.clearInstanceListeners(t)}))}))}},{key:"setCenter",value:function(t){var e=this;return this._zone.runOutsideAngular((function(){return e._map.then((function(e){return e.setCenter(t)}))}))}},{key:"getZoom",value:function(){var t=this;return this._zone.runOutsideAngular((function(){return t._map.then((function(t){return t.getZoom()}))}))}},{key:"getBounds",value:function(){var t=this;return this._zone.runOutsideAngular((function(){return t._map.then((function(t){return t.getBounds()}))}))}},{key:"getMapTypeId",value:function(){var t=this;return this._zone.runOutsideAngular((function(){return t._map.then((function(t){return t.getMapTypeId()}))}))}},{key:"setZoom",value:function(t){var e=this;return this._zone.runOutsideAngular((function(){return e._map.then((function(e){return e.setZoom(t)}))}))}},{key:"getCenter",value:function(){var t=this;return this._zone.runOutsideAngular((function(){return t._map.then((function(t){return t.getCenter()}))}))}},{key:"panTo",value:function(t){var e=this;return this._zone.runOutsideAngular((function(){return e._map.then((function(e){return e.panTo(t)}))}))}},{key:"panBy",value:function(t,e){var n=this;return this._zone.runOutsideAngular((function(){return n._map.then((function(n){return n.panBy(t,e)}))}))}},{key:"fitBounds",value:function(t,e){var n=this;return this._zone.runOutsideAngular((function(){return n._map.then((function(n){return n.fitBounds(t,e)}))}))}},{key:"panToBounds",value:function(t,e){var n=this;return this._zone.runOutsideAngular((function(){return n._map.then((function(n){return n.panToBounds(t,e)}))}))}},{key:"getNativeMap",value:function(){return this._map}},{key:"triggerMapEvent",value:function(t){return this._map.then((function(e){return google.maps.event.trigger(e,t)}))}}]),t}()).\u0275fac=function(t){return new(t||Ep)(s.Sb(Dp),s.Sb(s.z))},Ep.\u0275prov=s.Fb({token:Ep,factory:function(t){return Ep.\u0275fac(t)}}),Ep),Mp=((Sp=function(){function t(e){h(this,t),this._wrapper=e,this._layers=new Map}return d(t,[{key:"addTransitLayer",value:function(t,e){var n=this._wrapper.createTransitLayer(e);this._layers.set(t,n)}},{key:"addBicyclingLayer",value:function(t,e){var n=this._wrapper.createBicyclingLayer(e);this._layers.set(t,n)}},{key:"deleteLayer",value:function(t){var e=this;return this._layers.get(t).then((function(n){n.setMap(null),e._layers.delete(t)}))}},{key:"toggleLayerVisibility",value:function(t,e){var n=this;return this._layers.get(t).then((function(t){return e.visible?n._wrapper.getNativeMap().then((function(e){t.setMap(e)})):void t.setMap(null)}))}}]),t}()).\u0275fac=function(t){return new(t||Sp)(s.Sb(Lp))},Sp.\u0275prov=s.Fb({token:Sp,factory:function(t){return Sp.\u0275fac(t)}}),Sp),Fp=((Cp=function(){function t(e,n){h(this,t),this._apiWrapper=e,this._zone=n,this._circles=new Map}return d(t,[{key:"addCircle",value:function(t){this._circles.set(t,this._apiWrapper.createCircle({center:{lat:t.latitude,lng:t.longitude},clickable:t.clickable,draggable:t.draggable,editable:t.editable,fillColor:t.fillColor,fillOpacity:t.fillOpacity,radius:t.radius,strokeColor:t.strokeColor,strokeOpacity:t.strokeOpacity,strokePosition:t.strokePosition,strokeWeight:t.strokeWeight,visible:t.visible,zIndex:t.zIndex}))}},{key:"removeCircle",value:function(t){var e=this;return this._circles.get(t).then((function(n){n.setMap(null),e._circles.delete(t)}))}},{key:"setOptions",value:function(t,e){return this._circles.get(t).then((function(t){"string"==typeof e.strokePosition&&(e.strokePosition=google.maps.StrokePosition[e.strokePosition]),t.setOptions(e)}))}},{key:"getBounds",value:function(t){return this._circles.get(t).then((function(t){return t.getBounds()}))}},{key:"getCenter",value:function(t){return this._circles.get(t).then((function(t){return t.getCenter()}))}},{key:"getRadius",value:function(t){return this._circles.get(t).then((function(t){return t.getRadius()}))}},{key:"setCenter",value:function(t){return this._circles.get(t).then((function(e){return e.setCenter({lat:t.latitude,lng:t.longitude})}))}},{key:"setEditable",value:function(t){return this._circles.get(t).then((function(e){return e.setEditable(t.editable)}))}},{key:"setDraggable",value:function(t){return this._circles.get(t).then((function(e){return e.setDraggable(t.draggable)}))}},{key:"setVisible",value:function(t){return this._circles.get(t).then((function(e){return e.setVisible(t.visible)}))}},{key:"setRadius",value:function(t){return this._circles.get(t).then((function(e){return e.setRadius(t.radius)}))}},{key:"getNativeCircle",value:function(t){return this._circles.get(t)}},{key:"createEventObservable",value:function(t,e){var n=this;return new de.a((function(r){var i=null;return n._circles.get(e).then((function(e){i=e.addListener(t,(function(t){return n._zone.run((function(){return r.next(t)}))}))})),function(){null!==i&&i.remove()}}))}}]),t}()).\u0275fac=function(t){return new(t||Cp)(s.Sb(Lp),s.Sb(s.z))},Cp.\u0275prov=s.Fb({token:Cp,factory:function(t){return Cp.\u0275fac(t)}}),Cp),Up=((Op=function(){function t(e,n){h(this,t),this._wrapper=e,this._zone=n,this._layers=new Map}return d(t,[{key:"addDataLayer",value:function(t){var e=this,n=this._wrapper.createDataLayer({style:t.style}).then((function(n){return t.geoJson&&e.getDataFeatures(n,t.geoJson).then((function(t){return n.features=t})),n}));this._layers.set(t,n)}},{key:"deleteDataLayer",value:function(t){var e=this;this._layers.get(t).then((function(n){n.setMap(null),e._layers.delete(t)}))}},{key:"updateGeoJson",value:function(t,e){var n=this;this._layers.get(t).then((function(t){t.forEach((function(e){t.remove(e);var n=t.features.indexOf(e,0);n>-1&&t.features.splice(n,1)})),n.getDataFeatures(t,e).then((function(e){return t.features=e}))}))}},{key:"setDataOptions",value:function(t,e){this._layers.get(t).then((function(t){t.setControlPosition(e.controlPosition),t.setControls(e.controls),t.setDrawingMode(e.drawingMode),t.setStyle(e.style)}))}},{key:"createEventObservable",value:function(t,e){var n=this;return new de.a((function(r){n._layers.get(e).then((function(e){e.addListener(t,(function(t){return n._zone.run((function(){return r.next(t)}))}))}))}))}},{key:"getDataFeatures",value:function(t,e){return new Promise((function(n,r){if("object"==typeof e)try{n(t.addGeoJson(e))}catch(VA){r(VA)}else"string"==typeof e?t.loadGeoJson(e,null,n):r("Impossible to extract features from geoJson: wrong argument type")}))}}]),t}()).\u0275fac=function(t){return new(t||Op)(s.Sb(Lp),s.Sb(s.z))},Op.\u0275prov=s.Fb({token:Op,factory:function(t){return Op.\u0275fac(t)}}),Op),qp=function t(){h(this,t)},Vp=((Np=function(){function t(e){var n,r=this;h(this,t),this._boundsChangeSampleTime$=new ec(200),this._includeInBounds$=new ec(new Map),this.bounds$=Object(ge.a)(e.load()).pipe(Object(Tc.a)((function(){return r._includeInBounds$})),(n=this._boundsChangeSampleTime$.pipe(Cc((function(t){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=-1;return Object(vp.a)(e)?r=Number(e)<1?1:Number(e):Object(rl.a)(e)&&(n=e),Object(rl.a)(n)||(n=pp.a),new de.a((function(e){var i=Object(vp.a)(t)?t:+t-n.now();return n.schedule(yp,i,{index:0,period:r,subscriber:e})}))}(0,t)}))),function(t){return t.lift(new mp(n))}),Object(ve.a)((function(t){return r._generateBounds(t)})),_p(1))}return d(t,[{key:"_generateBounds",value:function(t){var e=new google.maps.LatLngBounds;return t.forEach((function(t){return e.extend(t)})),e}},{key:"addToBounds",value:function(t){var e=this._createIdentifier(t);if(!this._includeInBounds$.value.has(e)){var n=this._includeInBounds$.value;n.set(e,t),this._includeInBounds$.next(n)}}},{key:"removeFromBounds",value:function(t){var e=this._includeInBounds$.value;e.delete(this._createIdentifier(t)),this._includeInBounds$.next(e)}},{key:"changeFitBoundsChangeSampleTime",value:function(t){this._boundsChangeSampleTime$.next(t)}},{key:"getBounds$",value:function(){return this.bounds$}},{key:"_createIdentifier",value:function(t){return"".concat(t.lat,"+").concat(t.lng)}}]),t}()).\u0275fac=function(t){return new(t||Np)(s.Sb(Dp))},Np.\u0275prov=s.Fb({token:Np,factory:function(t){return Np.\u0275fac(t)}}),Np),zp=((xp=function(){function t(e,n){h(this,t),this._mapsWrapper=e,this._zone=n,this._markers=new Map}return d(t,[{key:"convertAnimation",value:function(t){return dp(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===t?null:this._mapsWrapper.getNativeMap().then((function(){return google.maps.Animation[t]})));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"deleteMarker",value:function(t){var e=this,n=this._markers.get(t);return null==n?Promise.resolve():n.then((function(n){return e._zone.run((function(){n.setMap(null),e._markers.delete(t)}))}))}},{key:"updateMarkerPosition",value:function(t){return this._markers.get(t).then((function(e){return e.setPosition({lat:t.latitude,lng:t.longitude})}))}},{key:"updateTitle",value:function(t){return this._markers.get(t).then((function(e){return e.setTitle(t.title)}))}},{key:"updateLabel",value:function(t){return this._markers.get(t).then((function(e){e.setLabel(t.label)}))}},{key:"updateDraggable",value:function(t){return this._markers.get(t).then((function(e){return e.setDraggable(t.draggable)}))}},{key:"updateIcon",value:function(t){return this._markers.get(t).then((function(e){return e.setIcon(t.iconUrl)}))}},{key:"updateOpacity",value:function(t){return this._markers.get(t).then((function(e){return e.setOpacity(t.opacity)}))}},{key:"updateVisible",value:function(t){return this._markers.get(t).then((function(e){return e.setVisible(t.visible)}))}},{key:"updateZIndex",value:function(t){return this._markers.get(t).then((function(e){return e.setZIndex(t.zIndex)}))}},{key:"updateClickable",value:function(t){return this._markers.get(t).then((function(e){return e.setClickable(t.clickable)}))}},{key:"updateAnimation",value:function(t){return dp(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._markers.get(t);case 2:return e.t0=e.sent,e.next=5,this.convertAnimation(t.animation);case 5:e.t1=e.sent,e.t0.setAnimation.call(e.t0,e.t1);case 7:case"end":return e.stop()}}),e,this)})))}},{key:"addMarker",value:function(t){var e=this,n=new Promise((function(n){return dp(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this._mapsWrapper,e.t1={lat:t.latitude,lng:t.longitude},e.t2=t.label,e.t3=t.draggable,e.t4=t.iconUrl,e.t5=t.opacity,e.t6=t.visible,e.t7=t.zIndex,e.t8=t.title,e.t9=t.clickable,e.next=12,this.convertAnimation(t.animation);case 12:return e.t10=e.sent,e.t11={position:e.t1,label:e.t2,draggable:e.t3,icon:e.t4,opacity:e.t5,visible:e.t6,zIndex:e.t7,title:e.t8,clickable:e.t9,animation:e.t10},e.abrupt("return",e.t0.createMarker.call(e.t0,e.t11).then(n));case 15:case"end":return e.stop()}}),e,this)})))}));this._markers.set(t,n)}},{key:"getNativeMarker",value:function(t){return this._markers.get(t)}},{key:"createEventObservable",value:function(t,e){var n=this;return new de.a((function(r){n._markers.get(e).then((function(e){e.addListener(t,(function(t){return n._zone.run((function(){return r.next(t)}))}))}))}))}}]),t}()).\u0275fac=function(t){return new(t||xp)(s.Sb(Lp),s.Sb(s.z))},xp.\u0275prov=s.Fb({token:xp,factory:function(t){return xp.\u0275fac(t)}}),xp),Bp=((Ip=function(){function t(e,n,r){h(this,t),this._mapsWrapper=e,this._zone=n,this._markerManager=r,this._infoWindows=new Map}return d(t,[{key:"deleteInfoWindow",value:function(t){var e=this,n=this._infoWindows.get(t);return null==n?Promise.resolve():n.then((function(n){return e._zone.run((function(){n.close(),e._infoWindows.delete(t)}))}))}},{key:"setPosition",value:function(t){return this._infoWindows.get(t).then((function(e){return e.setPosition({lat:t.latitude,lng:t.longitude})}))}},{key:"setZIndex",value:function(t){return this._infoWindows.get(t).then((function(e){return e.setZIndex(t.zIndex)}))}},{key:"open",value:function(t){var e=this;return this._infoWindows.get(t).then((function(n){return null!=t.hostMarker?e._markerManager.getNativeMarker(t.hostMarker).then((function(t){return e._mapsWrapper.getNativeMap().then((function(e){return n.open(e,t)}))})):e._mapsWrapper.getNativeMap().then((function(t){return n.open(t)}))}))}},{key:"close",value:function(t){return this._infoWindows.get(t).then((function(t){return t.close()}))}},{key:"setOptions",value:function(t,e){return this._infoWindows.get(t).then((function(t){return t.setOptions(e)}))}},{key:"addInfoWindow",value:function(t){var e={content:t.content,maxWidth:t.maxWidth,zIndex:t.zIndex,disableAutoPan:t.disableAutoPan};"number"==typeof t.latitude&&"number"==typeof t.longitude&&(e.position={lat:t.latitude,lng:t.longitude});var n=this._mapsWrapper.createInfoWindow(e);this._infoWindows.set(t,n)}},{key:"createEventObservable",value:function(t,e){var n=this;return new de.a((function(r){n._infoWindows.get(e).then((function(e){e.addListener(t,(function(t){return n._zone.run((function(){return r.next(t)}))}))}))}))}}]),t}()).\u0275fac=function(t){return new(t||Ip)(s.Sb(Lp),s.Sb(s.z),s.Sb(zp))},Ip.\u0275prov=s.Fb({token:Ip,factory:function(t){return Ip.\u0275fac(t)}}),Ip),Wp=0,Hp=((Pp=Ap=function(){function t(e,n){h(this,t),this._infoWindowManager=e,this._el=n,this.isOpen=!1,this.infoWindowClose=new s.n,this._infoWindowAddedToManager=!1,this._id=(Wp++).toString()}return d(t,[{key:"ngOnInit",value:function(){this.content=this._el.nativeElement.querySelector(".agm-info-window-content"),this._infoWindowManager.addInfoWindow(this),this._infoWindowAddedToManager=!0,this._updateOpenState(),this._registerEventListeners()}},{key:"ngOnChanges",value:function(t){this._infoWindowAddedToManager&&((t.latitude||t.longitude)&&"number"==typeof this.latitude&&"number"==typeof this.longitude&&this._infoWindowManager.setPosition(this),t.zIndex&&this._infoWindowManager.setZIndex(this),t.isOpen&&this._updateOpenState(),this._setInfoWindowOptions(t))}},{key:"_registerEventListeners",value:function(){var t=this;this._infoWindowManager.createEventObservable("closeclick",this).subscribe((function(){t.isOpen=!1,t.infoWindowClose.emit()}))}},{key:"_updateOpenState",value:function(){this.isOpen?this.open():this.close()}},{key:"_setInfoWindowOptions",value:function(t){var e={};Object.keys(t).filter((function(t){return-1!==Ap._infoWindowOptionsInputs.indexOf(t)})).forEach((function(n){e[n]=t[n].currentValue})),this._infoWindowManager.setOptions(this,e)}},{key:"open",value:function(){return this._infoWindowManager.open(this)}},{key:"close",value:function(){var t=this;return this._infoWindowManager.close(this).then((function(){t.infoWindowClose.emit()}))}},{key:"id",value:function(){return this._id}},{key:"toString",value:function(){return"AgmInfoWindow-"+this._id.toString()}},{key:"ngOnDestroy",value:function(){this._infoWindowManager.deleteInfoWindow(this)}}]),t}()).\u0275fac=function(t){return new(t||Pp)(s.Jb(Bp),s.Jb(s.l))},Pp.\u0275cmp=s.Db({type:Pp,selectors:[["agm-info-window"]],inputs:{isOpen:"isOpen",latitude:"latitude",longitude:"longitude",disableAutoPan:"disableAutoPan",zIndex:"zIndex",maxWidth:"maxWidth"},outputs:{infoWindowClose:"infoWindowClose"},features:[s.xb],ngContentSelectors:Rp,decls:2,vars:0,consts:[[1,"agm-info-window-content"]],template:function(t,e){1&t&&(s.cc(),s.Ob(0,"div",0),s.bc(1),s.Nb())},encapsulation:2}),Pp._infoWindowOptionsInputs=["disableAutoPan","maxWidth"],Pp),Kp=((jp=function(){function t(e,n){h(this,t),this._wrapper=e,this._zone=n,this._layers=new Map}return d(t,[{key:"addKmlLayer",value:function(t){var e=this._wrapper.getNativeMap().then((function(e){return new google.maps.KmlLayer({clickable:t.clickable,map:e,preserveViewport:t.preserveViewport,screenOverlays:t.screenOverlays,suppressInfoWindows:t.suppressInfoWindows,url:t.url,zIndex:t.zIndex})}));this._layers.set(t,e)}},{key:"setOptions",value:function(t,e){this._layers.get(t).then((function(t){return t.setOptions(e)}))}},{key:"deleteKmlLayer",value:function(t){var e=this;this._layers.get(t).then((function(n){n.setMap(null),e._layers.delete(t)}))}},{key:"createEventObservable",value:function(t,e){var n=this;return new de.a((function(r){n._layers.get(e).then((function(e){e.addListener(t,(function(t){return n._zone.run((function(){return r.next(t)}))}))}))}))}}]),t}()).\u0275fac=function(t){return new(t||jp)(s.Sb(Lp),s.Sb(s.z))},jp.\u0275prov=s.Fb({token:jp,factory:function(t){return jp.\u0275fac(t)}}),jp);function Gp(t){var e=["insert_at","remove_at","set_at"];return function t(e,n,r){return r?t(e,n).pipe(Object(ve.a)((function(t){return Object(pe.a)(t)?r.apply(void 0,i(t)):r(t)}))):new de.a((function(t){var r,i=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.next(1===n.length?n[0]:n)};try{r=e(i)}catch(o){return void t.error(o)}if(Object(gp.a)(n))return function(){return n(i,r)}}))}((function(n){return e.map((function(e){return t.addListener(e,(function(r,i){return n.apply(t,[{newArr:t.getArray(),evName:e,index:r,previous:i}])}))}))}),(function(t,e){return e.forEach((function(t){return t.remove()}))}))}var Jp,Qp,Yp,Xp,Zp,$p,tv,ev,nv,rv,iv,ov=((Jp=function(){function t(e,n){h(this,t),this._mapsWrapper=e,this._zone=n,this._polygons=new Map}return d(t,[{key:"addPolygon",value:function(t){var e=this._mapsWrapper.createPolygon({clickable:t.clickable,draggable:t.draggable,editable:t.editable,fillColor:t.fillColor,fillOpacity:t.fillOpacity,geodesic:t.geodesic,paths:t.paths,strokeColor:t.strokeColor,strokeOpacity:t.strokeOpacity,strokeWeight:t.strokeWeight,visible:t.visible,zIndex:t.zIndex});this._polygons.set(t,e)}},{key:"updatePolygon",value:function(t){var e=this,n=this._polygons.get(t);return null==n?Promise.resolve():n.then((function(n){return e._zone.run((function(){n.setPaths(t.paths)}))}))}},{key:"setPolygonOptions",value:function(t,e){return this._polygons.get(t).then((function(t){t.setOptions(e)}))}},{key:"deletePolygon",value:function(t){var e=this,n=this._polygons.get(t);return null==n?Promise.resolve():n.then((function(n){return e._zone.run((function(){n.setMap(null),e._polygons.delete(t)}))}))}},{key:"getPath",value:function(t){return this._polygons.get(t).then((function(t){return t.getPath().getArray()}))}},{key:"getPaths",value:function(t){return this._polygons.get(t).then((function(t){return t.getPaths().getArray().map((function(t){return t.getArray()}))}))}},{key:"createEventObservable",value:function(t,e){var n=this;return new de.a((function(r){n._polygons.get(e).then((function(e){e.addListener(t,(function(t){return n._zone.run((function(){return r.next(t)}))}))}))}))}},{key:"createPathEventObservable",value:function(t){return dp(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._polygons.get(t);case 2:return n=e.sent.getPaths(),e.abrupt("return",Gp(n).pipe(pl({newArr:n.getArray()}),Cc((function(t){return Object(uc.a).apply(void 0,i(t.newArr.map((function(e,n){return Gp(e).pipe(Object(ve.a)((function(e){return{parentMVEvent:t,chMVCEvent:e,pathIndex:n}})))})))).pipe(pl({parentMVEvent:t,chMVCEvent:null,pathIndex:null}))})),(function(t){return t.lift(new wp(1))}),Object(ve.a)((function(t){var e,n=t.parentMVEvent,r=t.chMVCEvent,i=t.pathIndex;return r?(e={newArr:n.newArr.map((function(t){return t.getArray().map((function(t){return t.toJSON()}))})),pathIndex:i,eventName:r.evName,index:r.index},r.previous&&(e.previous=r.previous)):(e={newArr:n.newArr.map((function(t){return t.getArray().map((function(t){return t.toJSON()}))})),eventName:n.evName,index:n.index},n.previous&&(e.previous=n.previous.getArray())),e}))));case 4:case"end":return e.stop()}}),e,this)})))}}]),t}()).\u0275fac=function(t){return new(t||Jp)(s.Sb(Lp),s.Sb(s.z))},Jp.\u0275prov=s.Fb({token:Jp,factory:function(t){return Jp.\u0275fac(t)}}),Jp),av=((Xp=Qp=function(){function t(e,n){h(this,t),this._mapsWrapper=e,this._zone=n,this._polylines=new Map}return d(t,[{key:"addPolyline",value:function(t){var n=this,r=this._mapsWrapper.getNativeMap().then((function(){return[Qp._convertPoints(t),Qp._convertIcons(t)]})).then((function(r){var i=e(r,2),o=i[0],a=i[1];return n._mapsWrapper.createPolyline({clickable:t.clickable,draggable:t.draggable,editable:t.editable,geodesic:t.geodesic,strokeColor:t.strokeColor,strokeOpacity:t.strokeOpacity,strokeWeight:t.strokeWeight,visible:t.visible,zIndex:t.zIndex,path:o,icons:a})}));this._polylines.set(t,r)}},{key:"updatePolylinePoints",value:function(t){var e=this,n=Qp._convertPoints(t),r=this._polylines.get(t);return null==r?Promise.resolve():r.then((function(t){return e._zone.run((function(){t.setPath(n)}))}))}},{key:"updateIconSequences",value:function(t){return dp(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,r,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._mapsWrapper.getNativeMap();case 2:if(n=Qp._convertIcons(t),null==(r=this._polylines.get(t))){e.next=5;break}return e.abrupt("return",r.then((function(t){return i._zone.run((function(){return t.setOptions({icons:n})}))})));case 5:case"end":return e.stop()}}),e,this)})))}},{key:"setPolylineOptions",value:function(t,e){return this._polylines.get(t).then((function(t){t.setOptions(e)}))}},{key:"deletePolyline",value:function(t){var e=this,n=this._polylines.get(t);return null==n?Promise.resolve():n.then((function(n){return e._zone.run((function(){n.setMap(null),e._polylines.delete(t)}))}))}},{key:"getMVCPath",value:function(t){return dp(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._polylines.get(t);case 2:return e.abrupt("return",e.sent.getPath());case 3:case"end":return e.stop()}}),e,this)})))}},{key:"getPath",value:function(t){return dp(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMVCPath(t);case 2:return e.abrupt("return",e.sent.getArray());case 3:case"end":return e.stop()}}),e,this)})))}},{key:"createEventObservable",value:function(t,e){var n=this;return new de.a((function(r){n._polylines.get(e).then((function(e){e.addListener(t,(function(t){return n._zone.run((function(){return r.next(t)}))}))}))}))}},{key:"createPathEventObservable",value:function(t){return dp(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Gp,e.next=3,this.getMVCPath(t);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e,this)})))}}],[{key:"_convertPoints",value:function(t){return t._getPoints().map((function(t){return{lat:t.latitude,lng:t.longitude}}))}},{key:"_convertPath",value:function(t){var e=google.maps.SymbolPath[t];return"number"==typeof e?e:t}},{key:"_convertIcons",value:function(t){var n=t._getIcons().map((function(t){return{fixedRotation:t.fixedRotation,offset:t.offset,repeat:t.repeat,icon:{anchor:new google.maps.Point(t.anchorX,t.anchorY),fillColor:t.fillColor,fillOpacity:t.fillOpacity,path:Qp._convertPath(t.path),rotation:t.rotation,scale:t.scale,strokeColor:t.strokeColor,strokeOpacity:t.strokeOpacity,strokeWeight:t.strokeWeight}}}));return n.forEach((function(t){Object.entries(t).forEach((function(n){var r=e(n,2),i=r[0];void 0===r[1]&&delete t[i]})),void 0!==t.icon.anchor.x&&void 0!==t.icon.anchor.y||delete t.icon.anchor})),n}}]),t}()).\u0275fac=function(t){return new(t||Xp)(s.Sb(Lp),s.Sb(s.z))},Xp.\u0275prov=s.Fb({token:Xp,factory:function(t){return Xp.\u0275fac(t)}}),Xp),sv=((Yp=function(){function t(e,n){h(this,t),this._apiWrapper=e,this._zone=n,this._rectangles=new Map}return d(t,[{key:"addRectangle",value:function(t){this._rectangles.set(t,this._apiWrapper.createRectangle({bounds:{north:t.north,east:t.east,south:t.south,west:t.west},clickable:t.clickable,draggable:t.draggable,editable:t.editable,fillColor:t.fillColor,fillOpacity:t.fillOpacity,strokeColor:t.strokeColor,strokeOpacity:t.strokeOpacity,strokePosition:t.strokePosition,strokeWeight:t.strokeWeight,visible:t.visible,zIndex:t.zIndex}))}},{key:"removeRectangle",value:function(t){var e=this;return this._rectangles.get(t).then((function(n){n.setMap(null),e._rectangles.delete(t)}))}},{key:"setOptions",value:function(t,e){return this._rectangles.get(t).then((function(t){return t.setOptions(e)}))}},{key:"getBounds",value:function(t){return this._rectangles.get(t).then((function(t){return t.getBounds()}))}},{key:"setBounds",value:function(t){return this._rectangles.get(t).then((function(e){return e.setBounds({north:t.north,east:t.east,south:t.south,west:t.west})}))}},{key:"setEditable",value:function(t){return this._rectangles.get(t).then((function(e){return e.setEditable(t.editable)}))}},{key:"setDraggable",value:function(t){return this._rectangles.get(t).then((function(e){return e.setDraggable(t.draggable)}))}},{key:"setVisible",value:function(t){return this._rectangles.get(t).then((function(e){return e.setVisible(t.visible)}))}},{key:"createEventObservable",value:function(t,e){var n=this;return de.a.create((function(r){var i=null;return n._rectangles.get(e).then((function(e){i=e.addListener(t,(function(t){return n._zone.run((function(){return r.next(t)}))}))})),function(){null!==i&&i.remove()}}))}}]),t}()).\u0275fac=function(t){return new(t||Yp)(s.Sb(Lp),s.Sb(s.z))},Yp.\u0275prov=s.Fb({token:Yp,factory:function(t){return Yp.\u0275fac(t)}}),Yp),uv=(($p=Zp=function(){function t(e,n,r,i,o){h(this,t),this._elem=e,this._mapsWrapper=n,this._platformId=r,this._fitBoundsService=i,this._zone=o,this.longitude=0,this.latitude=0,this.zoom=8,this.draggable=!0,this.disableDoubleClickZoom=!1,this.disableDefaultUI=!1,this.scrollwheel=!0,this.keyboardShortcuts=!0,this.styles=[],this.usePanning=!1,this.fitBounds=!1,this.scaleControl=!1,this.mapTypeControl=!1,this.panControl=!1,this.rotateControl=!1,this.fullscreenControl=!1,this.mapTypeId="roadmap",this.clickableIcons=!0,this.showDefaultInfoWindow=!0,this.gestureHandling="auto",this.tilt=0,this._observableSubscriptions=[],this.mapClick=new s.n,this.mapRightClick=new s.n,this.mapDblClick=new s.n,this.centerChange=new s.n,this.boundsChange=new s.n,this.mapTypeIdChange=new s.n,this.idle=new s.n,this.zoomChange=new s.n,this.mapReady=new s.n,this.tilesLoaded=new s.n}return d(t,[{key:"ngOnInit",value:function(){if(!kt(this._platformId)){var t=this._elem.nativeElement.querySelector(".agm-map-container-inner");this._initMapInstance(t)}}},{key:"_initMapInstance",value:function(t){var e=this;this._mapsWrapper.createMap(t,{center:{lat:this.latitude||0,lng:this.longitude||0},zoom:this.zoom,minZoom:this.minZoom,maxZoom:this.maxZoom,controlSize:this.controlSize,disableDefaultUI:this.disableDefaultUI,disableDoubleClickZoom:this.disableDoubleClickZoom,scrollwheel:this.scrollwheel,backgroundColor:this.backgroundColor,draggable:this.draggable,draggableCursor:this.draggableCursor,draggingCursor:this.draggingCursor,keyboardShortcuts:this.keyboardShortcuts,styles:this.styles,zoomControl:this.zoomControl,zoomControlOptions:this.zoomControlOptions,streetViewControl:this.streetViewControl,streetViewControlOptions:this.streetViewControlOptions,scaleControl:this.scaleControl,scaleControlOptions:this.scaleControlOptions,mapTypeControl:this.mapTypeControl,mapTypeControlOptions:this.mapTypeControlOptions,panControl:this.panControl,panControlOptions:this.panControlOptions,rotateControl:this.rotateControl,rotateControlOptions:this.rotateControlOptions,fullscreenControl:this.fullscreenControl,fullscreenControlOptions:this.fullscreenControlOptions,mapTypeId:this.mapTypeId,clickableIcons:this.clickableIcons,gestureHandling:this.gestureHandling,tilt:this.tilt,restriction:this.restriction}).then((function(){return e._mapsWrapper.getNativeMap()})).then((function(t){return e.mapReady.emit(t)})),this._handleMapCenterChange(),this._handleMapZoomChange(),this._handleMapMouseEvents(),this._handleBoundsChange(),this._handleMapTypeIdChange(),this._handleTilesLoadedEvent(),this._handleIdleEvent()}},{key:"ngOnDestroy",value:function(){this._observableSubscriptions.forEach((function(t){return t.unsubscribe()})),this._mapsWrapper.clearInstanceListeners(),this._fitBoundsSubscription&&this._fitBoundsSubscription.unsubscribe()}},{key:"ngOnChanges",value:function(t){this._updateMapOptionsChanges(t),this._updatePosition(t)}},{key:"_updateMapOptionsChanges",value:function(t){var e={};Object.keys(t).filter((function(t){return-1!==Zp._mapOptionsAttributes.indexOf(t)})).forEach((function(n){e[n]=t[n].currentValue})),this._mapsWrapper.setMapOptions(e)}},{key:"triggerResize",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return new Promise((function(n){setTimeout((function(){return t._mapsWrapper.triggerMapEvent("resize").then((function(){e&&(null!=t.fitBounds?t._fitBounds():t._setCenter()),n()}))}))}))}},{key:"_updatePosition",value:function(t){(null!=t.latitude||null!=t.longitude||t.fitBounds)&&("fitBounds"in t?this._fitBounds():"number"==typeof this.latitude&&"number"==typeof this.longitude&&this._setCenter())}},{key:"_setCenter",value:function(){var t={lat:this.latitude,lng:this.longitude};this.usePanning?this._mapsWrapper.panTo(t):this._mapsWrapper.setCenter(t)}},{key:"_fitBounds",value:function(){switch(this.fitBounds){case!0:this._subscribeToFitBoundsUpdates();break;case!1:this._fitBoundsSubscription&&this._fitBoundsSubscription.unsubscribe();break;default:this._updateBounds(this.fitBounds,this.fitBoundsPadding)}}},{key:"_subscribeToFitBoundsUpdates",value:function(){var t=this;this._zone.runOutsideAngular((function(){t._fitBoundsSubscription=t._fitBoundsService.getBounds$().subscribe((function(e){t._zone.run((function(){return t._updateBounds(e,t.fitBoundsPadding)}))}))}))}},{key:"_updateBounds",value:function(t,e){if(t){if(this._isLatLngBoundsLiteral(t)&&"undefined"!=typeof google&&google&&google.maps&&google.maps.LatLngBounds){var n=new google.maps.LatLngBounds;n.union(t),t=n}this.usePanning?this._mapsWrapper.panToBounds(t,e):this._mapsWrapper.fitBounds(t,e)}}},{key:"_isLatLngBoundsLiteral",value:function(t){return null!=t&&void 0===t.extend}},{key:"_handleMapCenterChange",value:function(){var t=this,e=this._mapsWrapper.subscribeToMapEvent("center_changed").subscribe((function(){t._mapsWrapper.getCenter().then((function(e){t.latitude=e.lat(),t.longitude=e.lng(),t.centerChange.emit({lat:t.latitude,lng:t.longitude})}))}));this._observableSubscriptions.push(e)}},{key:"_handleBoundsChange",value:function(){var t=this,e=this._mapsWrapper.subscribeToMapEvent("bounds_changed").subscribe((function(){t._mapsWrapper.getBounds().then((function(e){t.boundsChange.emit(e)}))}));this._observableSubscriptions.push(e)}},{key:"_handleMapTypeIdChange",value:function(){var t=this,e=this._mapsWrapper.subscribeToMapEvent("maptypeid_changed").subscribe((function(){t._mapsWrapper.getMapTypeId().then((function(e){t.mapTypeIdChange.emit(e)}))}));this._observableSubscriptions.push(e)}},{key:"_handleMapZoomChange",value:function(){var t=this,e=this._mapsWrapper.subscribeToMapEvent("zoom_changed").subscribe((function(){t._mapsWrapper.getZoom().then((function(e){t.zoom=e,t.zoomChange.emit(e)}))}));this._observableSubscriptions.push(e)}},{key:"_handleIdleEvent",value:function(){var t=this,e=this._mapsWrapper.subscribeToMapEvent("idle").subscribe((function(){t.idle.emit(void 0)}));this._observableSubscriptions.push(e)}},{key:"_handleTilesLoadedEvent",value:function(){var t=this,e=this._mapsWrapper.subscribeToMapEvent("tilesloaded").subscribe((function(){return t.tilesLoaded.emit(void 0)}));this._observableSubscriptions.push(e)}},{key:"_handleMapMouseEvents",value:function(){var t=this;[{name:"click",emitter:this.mapClick},{name:"rightclick",emitter:this.mapRightClick},{name:"dblclick",emitter:this.mapDblClick}].forEach((function(e){var n=t._mapsWrapper.subscribeToMapEvent(e.name).subscribe((function(n){var r={coords:{lat:n.latLng.lat(),lng:n.latLng.lng()},placeId:n.placeId};r.placeId&&!t.showDefaultInfoWindow&&n.stop(),e.emitter.emit(r)}));t._observableSubscriptions.push(n)}))}}]),t}()).\u0275fac=function(t){return new(t||$p)(s.Jb(s.l),s.Jb(Lp),s.Jb(s.B),s.Jb(Vp),s.Jb(s.z))},$p.\u0275cmp=s.Db({type:$p,selectors:[["agm-map"]],hostVars:2,hostBindings:function(t,e){2&t&&s.Bb("sebm-google-map-container",!0)},inputs:{longitude:"longitude",latitude:"latitude",zoom:"zoom",draggable:["mapDraggable","draggable"],disableDoubleClickZoom:"disableDoubleClickZoom",disableDefaultUI:"disableDefaultUI",scrollwheel:"scrollwheel",keyboardShortcuts:"keyboardShortcuts",styles:"styles",usePanning:"usePanning",fitBounds:"fitBounds",scaleControl:"scaleControl",mapTypeControl:"mapTypeControl",panControl:"panControl",rotateControl:"rotateControl",fullscreenControl:"fullscreenControl",mapTypeId:"mapTypeId",clickableIcons:"clickableIcons",showDefaultInfoWindow:"showDefaultInfoWindow",gestureHandling:"gestureHandling",tilt:"tilt",minZoom:"minZoom",maxZoom:"maxZoom",controlSize:"controlSize",backgroundColor:"backgroundColor",draggableCursor:"draggableCursor",draggingCursor:"draggingCursor",zoomControl:"zoomControl",zoomControlOptions:"zoomControlOptions",streetViewControl:"streetViewControl",streetViewControlOptions:"streetViewControlOptions",fitBoundsPadding:"fitBoundsPadding",scaleControlOptions:"scaleControlOptions",mapTypeControlOptions:"mapTypeControlOptions",panControlOptions:"panControlOptions",rotateControlOptions:"rotateControlOptions",fullscreenControlOptions:"fullscreenControlOptions",restriction:"restriction"},outputs:{mapClick:"mapClick",mapRightClick:"mapRightClick",mapDblClick:"mapDblClick",centerChange:"centerChange",boundsChange:"boundsChange",mapTypeIdChange:"mapTypeIdChange",idle:"idle",zoomChange:"zoomChange",mapReady:"mapReady",tilesLoaded:"tilesLoaded"},features:[s.yb([Fp,Up,Up,Vp,Lp,Bp,Kp,Mp,zp,ov,av,sv]),s.xb],ngContentSelectors:Rp,decls:3,vars:0,consts:[[1,"agm-map-container-inner","sebm-google-map-container-inner"],[1,"agm-map-content"]],template:function(t,e){1&t&&(s.cc(),s.Kb(0,"div",0),s.Ob(1,"div",1),s.bc(2),s.Nb())},styles:[".agm-map-container-inner[_ngcontent-%COMP%] {\n      width: inherit;\n      height: inherit;\n    }\n    .agm-map-content[_ngcontent-%COMP%] {\n      display:none;\n    }"]}),$p._mapOptionsAttributes=["disableDoubleClickZoom","scrollwheel","draggable","draggableCursor","draggingCursor","keyboardShortcuts","zoomControl","zoomControlOptions","styles","streetViewControl","streetViewControlOptions","zoom","mapTypeControl","mapTypeControlOptions","minZoom","maxZoom","panControl","panControlOptions","rotateControl","rotateControlOptions","fullscreenControl","fullscreenControlOptions","scaleControl","scaleControlOptions","mapTypeId","clickableIcons","gestureHandling","tilt","restriction"],$p),cv=0,lv=((ev=tv=function(){function t(e){h(this,t),this._markerManager=e,this.draggable=!1,this.visible=!0,this.openInfoWindow=!0,this.opacity=1,this.zIndex=1,this.clickable=!0,this.animationChange=new s.n,this.markerClick=new s.n,this.markerDblClick=new s.n,this.markerRightClick=new s.n,this.dragStart=new s.n,this.drag=new s.n,this.dragEnd=new s.n,this.mouseOver=new s.n,this.mouseOut=new s.n,this.infoWindow=new s.D,this._markerAddedToManger=!1,this._observableSubscriptions=[],this._fitBoundsDetails$=new ac(1),this._id=(cv++).toString()}return d(t,[{key:"ngAfterContentInit",value:function(){var t=this;this.handleInfoWindowUpdate(),this.infoWindow.changes.subscribe((function(){return t.handleInfoWindowUpdate()}))}},{key:"handleInfoWindowUpdate",value:function(){var t=this;if(this.infoWindow.length>1)throw new Error("Expected no more than one info window.");this.infoWindow.forEach((function(e){e.hostMarker=t}))}},{key:"ngOnChanges",value:function(t){if("string"==typeof this.latitude&&(this.latitude=Number(this.latitude)),"string"==typeof this.longitude&&(this.longitude=Number(this.longitude)),"number"==typeof this.latitude&&"number"==typeof this.longitude){if(!this._markerAddedToManger)return this._markerManager.addMarker(this),this._updateFitBoundsDetails(),this._markerAddedToManger=!0,void this._addEventListeners();(t.latitude||t.longitude)&&(this._markerManager.updateMarkerPosition(this),this._updateFitBoundsDetails()),t.title&&this._markerManager.updateTitle(this),t.label&&this._markerManager.updateLabel(this),t.draggable&&this._markerManager.updateDraggable(this),t.iconUrl&&this._markerManager.updateIcon(this),t.opacity&&this._markerManager.updateOpacity(this),t.visible&&this._markerManager.updateVisible(this),t.zIndex&&this._markerManager.updateZIndex(this),t.clickable&&this._markerManager.updateClickable(this),t.animation&&this._markerManager.updateAnimation(this)}}},{key:"getFitBoundsDetails$",value:function(){return this._fitBoundsDetails$.asObservable()}},{key:"_updateFitBoundsDetails",value:function(){this._fitBoundsDetails$.next({latLng:{lat:this.latitude,lng:this.longitude}})}},{key:"_addEventListeners",value:function(){var t=this,e=this._markerManager.createEventObservable("click",this).subscribe((function(){t.openInfoWindow&&t.infoWindow.forEach((function(t){return t.open()})),t.markerClick.emit(t)}));this._observableSubscriptions.push(e);var n=this._markerManager.createEventObservable("dblclick",this).subscribe((function(){t.markerDblClick.emit(null)}));this._observableSubscriptions.push(n);var r=this._markerManager.createEventObservable("rightclick",this).subscribe((function(){t.markerRightClick.emit(null)}));this._observableSubscriptions.push(r);var i=this._markerManager.createEventObservable("dragstart",this).subscribe((function(e){t.dragStart.emit({coords:{lat:e.latLng.lat(),lng:e.latLng.lng()}})}));this._observableSubscriptions.push(i);var o=this._markerManager.createEventObservable("drag",this).subscribe((function(e){t.drag.emit({coords:{lat:e.latLng.lat(),lng:e.latLng.lng()}})}));this._observableSubscriptions.push(o);var a=this._markerManager.createEventObservable("dragend",this).subscribe((function(e){t.dragEnd.emit({coords:{lat:e.latLng.lat(),lng:e.latLng.lng()}})}));this._observableSubscriptions.push(a);var s=this._markerManager.createEventObservable("mouseover",this).subscribe((function(e){t.mouseOver.emit({coords:{lat:e.latLng.lat(),lng:e.latLng.lng()}})}));this._observableSubscriptions.push(s);var u=this._markerManager.createEventObservable("mouseout",this).subscribe((function(e){t.mouseOut.emit({coords:{lat:e.latLng.lat(),lng:e.latLng.lng()}})}));this._observableSubscriptions.push(u);var c=this._markerManager.createEventObservable("animation_changed",this).subscribe((function(){t.animationChange.emit(t.animation)}));this._observableSubscriptions.push(c)}},{key:"id",value:function(){return this._id}},{key:"toString",value:function(){return"AgmMarker-"+this._id.toString()}},{key:"ngOnDestroy",value:function(){this._markerManager.deleteMarker(this),this._observableSubscriptions.forEach((function(t){return t.unsubscribe()}))}}]),t}()).\u0275fac=function(t){return new(t||ev)(s.Jb(zp))},ev.\u0275dir=s.Eb({type:ev,selectors:[["agm-marker"]],contentQueries:function(t,e,n){var r;1&t&&s.Cb(n,Hp,!1),2&t&&s.ic(r=s.Wb())&&(e.infoWindow=r)},inputs:{latitude:"latitude",longitude:"longitude",title:"title",label:"label",draggable:["markerDraggable","draggable"],iconUrl:"iconUrl",openInfoWindow:"openInfoWindow",opacity:"opacity",visible:"visible",zIndex:"zIndex",animation:"animation",clickable:["markerClickable","clickable"]},outputs:{markerClick:"markerClick",dragStart:"dragStart",drag:"drag",dragEnd:"dragEnd",mouseOver:"mouseOver",mouseOut:"mouseOut",animationChange:"animationChange",markerDblClick:"markerDblClick",markerRightClick:"markerRightClick"},features:[s.yb([{provide:qp,useExisting:Object(s.U)((function(){return tv}))}]),s.xb]}),ev),hv=function(){function t(){h(this,t)}return d(t,[{key:"getNativeWindow",value:function(){return window}}]),t}(),fv=function(){function t(){h(this,t)}return d(t,[{key:"getNativeDocument",value:function(){return document}}]),t}(),dv=[hv,fv],pv=function(t){return t[t.HTTP=1]="HTTP",t[t.HTTPS=2]="HTTPS",t[t.AUTO=3]="AUTO",t}({}),vv=new s.q("angular-google-maps LAZY_MAPS_API_CONFIG"),yv=((nv=function(t){p(n,t);var e=y(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;return h(this,n),(t=e.call(this)).localeId=a,t._SCRIPT_ID="agmGoogleMapsApiScript",t.callbackName="agmLazyMapsAPILoader",t._config=r||{},t._windowRef=i,t._documentRef=o,t}return d(n,[{key:"load",value:function(){var t=this._windowRef.getNativeWindow();if(t.google&&t.google.maps)return Promise.resolve();if(this._scriptLoadingPromise)return this._scriptLoadingPromise;var e=this._documentRef.getNativeDocument().getElementById(this._SCRIPT_ID);if(e)return this._assignScriptLoadingPromise(e),this._scriptLoadingPromise;var n=this._documentRef.getNativeDocument().createElement("script");return n.type="text/javascript",n.async=!0,n.defer=!0,n.id=this._SCRIPT_ID,n.src=this._getScriptSrc(this.callbackName),this._assignScriptLoadingPromise(n),this._documentRef.getNativeDocument().body.appendChild(n),this._scriptLoadingPromise}},{key:"_assignScriptLoadingPromise",value:function(t){var e=this;this._scriptLoadingPromise=new Promise((function(n,r){e._windowRef.getNativeWindow()[e.callbackName]=function(){n()},t.onerror=function(t){r(t)}}))}},{key:"_getScriptSrc",value:function(t){var e;switch(this._config&&this._config.protocol||pv.HTTPS){case pv.AUTO:e="";break;case pv.HTTP:e="http:";break;case pv.HTTPS:e="https:"}var n={v:this._config.apiVersion||"quarterly",callback:t,key:this._config.apiKey,client:this._config.clientId,channel:this._config.channel,libraries:this._config.libraries,region:this._config.region,language:this._config.language||"en-US"!==this.localeId?this.localeId:null};return"".concat(e,"//").concat(this._config.hostAndPath||"maps.googleapis.com/maps/api/js","?").concat(Object.keys(n).filter((function(t){return null!=n[t]})).filter((function(t){return!Array.isArray(n[t])||Array.isArray(n[t])&&n[t].length>0})).map((function(t){var e=n[t];return Array.isArray(e)?{key:t,value:e.join(",")}:{key:t,value:n[t]}})).map((function(t){return"".concat(t.key,"=").concat(t.value)})).join("&"))}}]),n}(Dp)).\u0275fac=function(t){return new(t||nv)(s.Sb(vv,8),s.Sb(hv),s.Sb(fv),s.Sb(s.u))},nv.\u0275prov=s.Fb({token:nv,factory:function(t){return nv.\u0275fac(t)}}),nv),gv=((iv=rv=function(){function t(){h(this,t)}return d(t,null,[{key:"forRoot",value:function(t){return{ngModule:rv,providers:[].concat(dv,[{provide:Dp,useClass:yv},{provide:vv,useValue:t}])}}}]),t}()).\u0275mod=s.Hb({type:iv}),iv.\u0275inj=s.Gb({factory:function(t){return new(t||iv)}}),iv),mv=o("spgP"),bv=o("w1tV"),_v=function(){function t(e){h(this,t),this.predicate=e}return d(t,[{key:"call",value:function(t,e){return e.subscribe(new wv(t,this.predicate))}}]),t}(),wv=function(t){p(n,t);var e=y(n);function n(t,r){var i;return h(this,n),(i=e.call(this,t)).predicate=r,i.skipping=!0,i.index=0,i}return d(n,[{key:"_next",value:function(t){var e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}},{key:"tryCallPredicate",value:function(t){try{var e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(n){this.destination.error(n)}}}]),n}(dc.a);function kv(t,e){return e?Cc((function(){return t}),e):Cc((function(){return t}))}o("6Uf2");var Ov,Cv,Sv=o("tf+s"),Ev=new s.q("angularfire2.auth.use-emulator"),Tv=new s.q("angularfire2.auth.settings"),Iv=new s.q("angularfire2.auth.tenant-id"),xv=new s.q("angularfire2.auth.langugage-code"),Nv=new s.q("angularfire2.auth.use-device-language"),Av=new s.q("angularfire.auth.persistence"),jv=((Cv=function t(n,r,i,a,s,u,c,l,f,d){h(this,t);var p=new mv.d(a),v=Object(mv.h)(p),y=new $u.a,g=Object(hc.a)(void 0).pipe(Object(ic.b)(p.outsideAngular),Cc((function(){return a.runOutsideAngular((function(){return o.e(5).then(o.bind(null,"6nsN"))}))})),Object(ve.a)((function(){return Object(mv.g)(n,a,r)})),Object(ve.a)((function(t){return a.runOutsideAngular((function(){var n=s,r=u;return Object(mv.f)(t.name+".auth","AngularFireAuth",t,(function(){var i=a.runOutsideAngular((function(){return t.auth()}));if(n&&i.useEmulator("http://"+n.join(":")),c&&(i.tenantId=c),i.languageCode=l,f&&i.useDeviceLanguage(),r)for(var o=0,s=Object.entries(r);o<s.length;o++){var u=e(s[o],2),h=u[0],p=u[1];i.settings[h]=p}return d&&i.setPersistence(d),i}),[n,c,l,f,r,d])}))})),_p({bufferSize:1,refCount:!1}));if(kt(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(hc.a)(null);else{g.pipe(el()).subscribe();var m=g.pipe(Cc((function(t){return t.getRedirectResult().then((function(t){return t}),(function(){return null}))})),v,_p({bufferSize:1,refCount:!1})),b=function(t){return new de.a((function(e){return{unsubscribe:a.runOutsideAngular((function(){return t(e)}))}}))},_=g.pipe(Cc((function(t){return b(t.onAuthStateChanged.bind(t))}))),w=g.pipe(Cc((function(t){return b(t.onIdTokenChanged.bind(t))})));this.authState=m.pipe(kv(_),Object(Sv.a)(p.outsideAngular),Object(ic.b)(p.insideAngular)),this.user=m.pipe(kv(w),Object(Sv.a)(p.outsideAngular),Object(ic.b)(p.insideAngular)),this.idToken=this.user.pipe(Cc((function(t){return t?Object(ge.a)(t.getIdToken()):Object(hc.a)(null)}))),this.idTokenResult=this.user.pipe(Cc((function(t){return t?Object(ge.a)(t.getIdTokenResult()):Object(hc.a)(null)}))),this.credential=Object(uc.a)(m,y,this.authState.pipe(gc((function(t){return!t})))).pipe(Object(ve.a)((function(t){return(null==t?void 0:t.user)?t:null})),Object(Sv.a)(p.outsideAngular),Object(ic.b)(p.insideAngular))}return Object(mv.i)(this,g,a,{spy:{apply:function(t,e,n){(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then((function(t){return y.next(t)}))}}})}).\u0275fac=function(t){return new(t||Cv)(s.Sb(mv.c),s.Sb(mv.b,8),s.Sb(s.B),s.Sb(s.z),s.Sb(Ev,8),s.Sb(Tv,8),s.Sb(Iv,8),s.Sb(xv,8),s.Sb(Nv,8),s.Sb(Av,8))},Cv.\u0275prov=s.Fb({factory:function(){return new Cv(s.Sb(mv.c),s.Sb(mv.b,8),s.Sb(s.B),s.Sb(s.z),s.Sb(Ev,8),s.Sb(Tv,8),s.Sb(Iv,8),s.Sb(xv,8),s.Sb(Nv,8),s.Sb(Av,8))},token:Cv,providedIn:"any"}),Cv),Pv=((Ov=function t(){h(this,t)}).\u0275mod=s.Hb({type:Ov}),Ov.\u0275inj=s.Gb({factory:function(t){return new(t||Ov)},providers:[jv]}),Ov),Rv=o("Jgta");function Dv(t){return null==t}function Lv(t){return"function"==typeof t.set}function Mv(t,e){return Lv(e)?e:t.ref(e)}function Fv(t,e){if("string"==typeof t)return e.stringCase();if(Lv(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function Uv(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"on",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:pp.b;return new de.a((function(i){var o;return o=t[n](e,(function(t,e){r.schedule((function(){i.next({snapshot:t,prevKey:e})})),"once"===n&&r.schedule((function(){return i.complete()}))}),(function(t){r.schedule((function(){return i.error(t)}))})),"on"===n?{unsubscribe:function(){null!=o&&t.off(e,o)}}:{unsubscribe:function(){}}})).pipe(Object(ve.a)((function(t){var n=t.snapshot,r=t.prevKey,i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}})),Object(bv.a)())}function qv(t,e){for(var n=t.length,r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function Vv(t,e){var n=e.payload,r=e.prevKey,o=e.key,a=qv(t,o),s=function(t,e){if(Dv(e))return 0;var n=qv(t,e);return-1===n?t.length:n+1}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){var u=null;e.payload.forEach((function(e){var n={payload:e,type:"value",prevKey:u,key:e.key};return u=e.key,t=[].concat(i(t),[n]),!1}))}return t;case"child_added":if(a>-1){var c=t[a-1];(c&&c.key||null)!==r&&(t=t.filter((function(t){return t.payload.key!==n.key}))).splice(s,0,e)}else{if(null==r)return[e].concat(i(t));(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter((function(t){return t.payload.key!==n.key}));case"child_changed":return t.map((function(t){return t.payload.key===o?e:t}));case"child_moved":if(a>-1){var l=t.splice(a,1)[0];return(t=t.slice()).splice(s,0,l),t}return t;default:return t}}function zv(t){return(Dv(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function Bv(t,e,n){return function(t,e,n){return Uv(t,"value","once",n).pipe(Cc((function(r){var i=[Object(hc.a)(r)];return e.forEach((function(e){return i.push(Uv(t,e,"on",n))})),Object(uc.a).apply(void 0,i).pipe(pc(Vv,[]))})),_c())}(t,e=zv(e),n)}function Wv(t,e,n){var r=(e=zv(e)).map((function(e){return Uv(t,e,"on",n)}));return Object(uc.a).apply(void 0,i(r))}function Hv(t,e){return function(n,r){return Fv(n,{stringCase:function(){return t.child(n)[e](r)},firebaseCase:function(){return n[e](r)},snapshotCase:function(){return n.ref[e](r)}})}}function Kv(t,e){return function(){return Uv(t,"value","on",e)}}var Gv,Jv,Qv,Yv,Xv,Zv=new s.q("angularfire2.realtimeDatabaseURL"),$v=new s.q("angularfire2.database.use-emulator"),ty=((Xv=function(){function n(t,e,r,o,a,s,u){h(this,n),this.schedulers=new mv.d(a),this.keepUnstableUntilFirst=Object(mv.h)(this.schedulers);var c=s,l=Object(mv.g)(t,a,e);!Rv.a.auth&&u&&Object(mv.j)(),this.database=Object(mv.f)("".concat(l.name,".database.").concat(r),"AngularFireDatabase",l,(function(){var t=a.runOutsideAngular((function(){return l.database(r||void 0)}));return c&&t.useEmulator.apply(t,i(c)),t}),[c])}return d(n,[{key:"list",value:function(n,r){var o=this,a=this.schedulers.ngZone.runOutsideAngular((function(){return Mv(o.database,n)})),s=a;return r&&(s=r(a)),function(n,r){var o,a=r.schedulers.outsideAngular,s=r.schedulers.ngZone.run((function(){return n.ref}));return{query:n,update:Hv(s,"update"),set:Hv(s,"set"),push:function(t){return s.push(t)},remove:(o=s,function(t){return t?Fv(t,{stringCase:function(){return o.child(t).remove()},firebaseCase:function(){return t.remove()},snapshotCase:function(){return t.ref.remove()}}):o.remove()}),snapshotChanges:function(t){return Bv(n,t,a).pipe(r.keepUnstableUntilFirst)},stateChanges:function(t){return Wv(n,t,a).pipe(r.keepUnstableUntilFirst)},auditTrail:function(t){return function(t,n,r){return function(t,n,r){return function(t,e){return Uv(t,"value","on",e).pipe(Object(ve.a)((function(t){var e;return t.payload.forEach((function(t){return e=t.key,!1})),{data:t,lastKeyToLoad:e}})))}(t,r).pipe(Uc(n),Object(ve.a)((function(t){var n=e(t,2),r=n[0],i=n[1],o=r.lastKeyToLoad,a=i.map((function(t){return t.key}));return{actions:i,lastKeyToLoad:o,loadedKeys:a}})),(i=function(t){return-1===t.loadedKeys.indexOf(t.lastKeyToLoad)},function(t){return t.lift(new _v(i))}),Object(ve.a)((function(t){return t.actions})));var i}(t,Wv(t,n).pipe(pc((function(t,e){return[].concat(i(t),[e])}),[])),r)}(n,t,a).pipe(r.keepUnstableUntilFirst)},valueChanges:function(e,i){return Bv(n,e,a).pipe(Object(ve.a)((function(e){return e.map((function(e){return i&&i.idField?Object.assign(Object.assign({},e.payload.val()),t({},i.idField,e.key)):e.payload.val()}))})),r.keepUnstableUntilFirst)}}}(s,this)}},{key:"object",value:function(t){var e,n,r=this,i=this.schedulers.ngZone.runOutsideAngular((function(){return Mv(r.database,t)}));return n=this,{query:e=i,snapshotChanges:function(){return Kv(e,n.schedulers.outsideAngular)().pipe(n.keepUnstableUntilFirst)},update:function(t){return e.ref.update(t)},set:function(t){return e.ref.set(t)},remove:function(){return e.ref.remove()},valueChanges:function(){return Kv(e,n.schedulers.outsideAngular)().pipe(n.keepUnstableUntilFirst,Object(ve.a)((function(t){return t.payload.exists()?t.payload.val():null})))}}}},{key:"createPushId",value:function(){var t=this;return this.schedulers.ngZone.runOutsideAngular((function(){return t.database.ref()})).push().key}}]),n}()).\u0275fac=function(t){return new(t||Xv)(s.Sb(mv.c),s.Sb(mv.b,8),s.Sb(Zv,8),s.Sb(s.B),s.Sb(s.z),s.Sb($v,8),s.Sb(Ev,8))},Xv.\u0275prov=s.Fb({factory:function(){return new Xv(s.Sb(mv.c),s.Sb(mv.b,8),s.Sb(Zv,8),s.Sb(s.B),s.Sb(s.z),s.Sb($v,8),s.Sb(Ev,8))},token:Xv,providedIn:"any"}),Xv),ey=((Yv=function t(){h(this,t)}).\u0275mod=s.Hb({type:Yv}),Yv.\u0275inj=s.Gb({factory:function(t){return new(t||Yv)},providers:[ty]}),Yv),ny=((Qv=function(){function t(){h(this,t),this.marcadores=[],this.marcadores.push({lat:38.484202837,lng:-.7677831,titulo:"Explanada de Petrer",draggable:!0})}return d(t,[{key:"insertarMarcador",value:function(t){this.marcadores.push(t),this.guardarMarcadores()}},{key:"borrarMarcador",value:function(t){this.marcadores.splice(t,1),this.guardarMarcadores()}},{key:"guardarMarcadores",value:function(){localStorage.setItem("marcadores",JSON.stringify(this.marcadores))}},{key:"cargarMarcadores",value:function(){this.marcadores=localStorage.getItem("marcadores")?JSON.parse(localStorage.getItem("marcadores")):[]}}]),t}()).\u0275fac=function(t){return new(t||Qv)},Qv.\u0275prov=s.Fb({token:Qv,factory:Qv.\u0275fac,providedIn:"root"}),Qv),ry=((Jv=function(){function t(e){h(this,t),this.http=e,this.token="",this.artistas=[],this.releases=[],this.urlBusqueda="https://api.spotify.com/v1/search",this.urlArtista="\thttps://api.spotify.com/v1/artists/"}return d(t,[{key:"createToken",value:function(){var t=this,e=new Id;e=e.append("Content-Type","application/x-www-form-urlencoded");var n=o("r8II");return this.http.post("https://accounts.spotify.com/api/token",n.stringify({client_id:"ad2f9818fba04d479254743b6ef212b2",client_secret:"ff56ddc57168440189e3203ef02b07e1",grant_type:"client_credentials"}),{headers:e}).pipe(Object(ve.a)((function(e){return t.token="Bearer "+e.access_token,t.token})))}},{key:"getArtistas",value:function(t){var e=this,n=new Id;return n=n.append("Authorization",this.token),this.http.get(this.urlBusqueda+"?query=".concat(t,"&type=artist"),{headers:n}).pipe(Object(ve.a)((function(t){e.artistas=t.artists.items})))}},{key:"getNewReleasesS",value:function(t){var e=this,n=new Id;return n=n.append("Authorization",null!=t&&""!=t?t:this.token),this.http.get("https://api.spotify.com/v1/browse/new-releases",{headers:n}).pipe(Object(ve.a)((function(t){e.releases=t.albums.items})))}},{key:"getArtista",value:function(t){var e=new Id;return e=e.append("Authorization",this.token),this.http.get(this.urlArtista+""+t,{headers:e}).pipe(Object(ve.a)((function(t){return t})))}},{key:"getTop",value:function(t){var e=new Id;return e=e.append("Authorization",this.token),this.http.get(this.urlArtista+(t+"/top-tracks?country=US"),{headers:e}).pipe(Object(ve.a)((function(t){return t.tracks})))}}]),t}()).\u0275fac=function(t){return new(t||Jv)(s.Sb(Xd))},Jv.\u0275prov=s.Fb({token:Jv,factory:Jv.\u0275fac,providedIn:"root"}),Jv),iy=((Gv=function(){function t(e){h(this,t),this.http=e,this.youtubeUrl="https://www.googleapis.com/youtube/v3/videos",this.apikeyYT="AIzaSyAUIyXVQEA2dXfwW7U37yDFcfPsrx5qc4k",this.nextPageToken=""}return d(t,[{key:"getVideos",value:function(){var t=this,e=new Ad;return e=(e=(e=(e=(e=e.append("part","snippet")).set("chart","mostPopular")).set("maxResults","10")).set("regionCode","ES")).set("key",this.apikeyYT),this.nextPageToken&&(e=e.set("pageToken",this.nextPageToken)),this.http.get(this.youtubeUrl,{params:e}).pipe(Object(ve.a)((function(e){t.nextPageToken=e.nextPageToken;var n,r=[],i=a(e.items);try{for(i.s();!(n=i.n()).done;){var o=n.value;r.push(o)}}catch(s){i.e(s)}finally{i.f()}return r})))}}]),t}()).\u0275fac=function(t){return new(t||Gv)(s.Sb(Xd))},Gv.\u0275prov=s.Fb({token:Gv,factory:Gv.\u0275fac,providedIn:"root"}),Gv),oy=o("zIRd"),ay=o("qOnz"),sy=o("/6Yf"),uy=function(t){function e(n,r){var i=t.call(this,cy(n),"Firebase Storage: "+r+" ("+cy(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return Object(nl.c)(e,t),e.prototype._codeEquals=function(t){return cy(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?this._baseMessage+"\n"+this.customData.serverResponse:this._baseMessage},enumerable:!1,configurable:!0}),e}(ay.c);function cy(t){return"storage/"+t}function ly(){return new uy("unknown","An unknown error occurred, please check the error payload for server response.")}function hy(){return new uy("canceled","User canceled the upload/download.")}function fy(){return new uy("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function dy(t){return new uy("invalid-argument",t)}function py(){return new uy("app-deleted","The Firebase app was deleted.")}function vy(t){return new uy("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function yy(t,e){return new uy("invalid-format","String does not match format '"+t+"': "+e)}function gy(t){throw new uy("internal-error","Internal error: "+t)}var my={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},by=function(t,e){this.data=t,this.contentType=e||null};function _y(t,e){switch(t){case my.RAW:return new by(wy(e));case my.BASE64:case my.BASE64URL:return new by(ky(t,e));case my.DATA_URL:return new by((n=new Oy(e)).base64?ky(my.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(VA){throw yy(my.DATA_URL,"Malformed data URL.")}return wy(e)}(n.rest),new Oy(e).contentType)}var n;throw ly()}function wy(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function ky(t,e){switch(t){case my.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw yy(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case my.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw yy(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(e)}catch(VA){throw yy(t,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var Oy=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw yy(my.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r=e[1]||null;null!=r&&(this.base64=(n=r).length>=";base64".length&&";base64"===n.substring(n.length-";base64".length),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)},Cy={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Sy(t){switch(t){case"running":case"pausing":case"canceling":return Cy.RUNNING;case"paused":return Cy.PAUSED;case"success":return Cy.SUCCESS;case"canceled":return Cy.CANCELED;case"error":default:return Cy.ERROR}}var Ey=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),Ty=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Ey.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=Ey.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=Ey.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw gy("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw gy("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw gy("cannot .getStatus() before sending");try{return this.xhr_.status}catch(VA){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw gy("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),Iy=function(){function t(){}return t.prototype.createXhrIo=function(){return new Ty},t}(),xy=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(VA){return new t(e,"")}if(""===r.path)return r;throw new uy("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}for(var a=n.replace(/[.]/g,"\\."),s=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://"+("firebasestorage.googleapis.com"===n?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/([A-Za-z0-9.\\-_]+)/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],u=0;u<s.length;u++){var c=s[u],l=c.regex.exec(e);if(l){var h=l[c.indices.path];h||(h=""),r=new t(l[c.indices.bucket],h),c.postModify(r);break}}if(null==r)throw function(t){return new uy("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),Ny=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function Ay(t){return"string"==typeof t||t instanceof String}function jy(t){return Py()&&t instanceof Blob}function Py(){return"undefined"!=typeof Blob}function Ry(t,e,n,r){if(r<e)throw dy("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw dy("Invalid value for '"+t+"'. Expected "+n+" or less.")}function Dy(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null==n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function Ly(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}var My=function(){function t(t,e,n,r,i,o,a,s,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,a=n.xhr;if(n.wasSuccessCode)try{var s=t.callback_(a,a.getResponseText());void 0!==s?i(s):i()}catch(VA){o(VA)}else null!==a?((r=ly()).serverResponse=a.getResponseText(),o(t.errorCallback_?t.errorCallback_(a,r):r)):o(r=n.canceled?t.appDelete_?py():hy():new uy("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new Fy(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,a=!1,s=0;function u(){return 2===s}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout((function(){o=null,function(e,n){if(n)e(!1,new Fy(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===Ey.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var a=-1!==t.successCodes_.indexOf(o);e(!0,new Fy(a,n))}else{var s=n.getErrorCode()===Ey.ABORT;e(!1,new Fy(!1,null,s))}}))}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(f,u())}),e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,Object(nl.g)([null,t],e));else{var r;u()||a?l.call.apply(l,Object(nl.g)([null,t],e)):(i<64&&(i*=2),1===s?(s=2,r=0):r=1e3*(i+Math.random()),h(r))}}var d=!1;function p(t){d||(d=!0,c||(null!==o?(t||(s=2),clearTimeout(o),h(0)):t||(s=1)))}return h(0),setTimeout((function(){a=!0,p(!0)}),r),p}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),Fy=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function Uy(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function qy(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Uy();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(Py())return new Blob(t);throw new uy("unsupported-environment","This browser doesn't seem to support creating Blobs")}var Vy=function(){function t(t,e){var n=0,r="";jy(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(jy(this.data_)){var r=(o=e,a=n,(i=this.data_).webkitSlice?i.webkitSlice(o,a):i.mozSlice?i.mozSlice(o,a):i.slice?i.slice(o,a):null);return null===r?null:new t(r)}var i,o,a;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(Py()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(qy.apply(null,r))}var i=e.map((function(t){return Ay(t)?_y(my.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]})),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}();function zy(t){var e,n;try{e=JSON.parse(t)}catch(VA){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function By(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Wy(t,e){return e}var Hy=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Wy},Ky=null;function Gy(){if(Ky)return Ky;var t=[];t.push(new Hy("bucket")),t.push(new Hy("generation")),t.push(new Hy("metageneration")),t.push(new Hy("name","fullPath",!0));var e=new Hy("name");e.xform=function(t,e){return function(t){return!Ay(t)||t.length<2?t:By(t)}(e)},t.push(e);var n=new Hy("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new Hy("timeCreated")),t.push(new Hy("updated")),t.push(new Hy("md5Hash",null,!0)),t.push(new Hy("cacheControl",null,!0)),t.push(new Hy("contentDisposition",null,!0)),t.push(new Hy("contentEncoding",null,!0)),t.push(new Hy("contentLanguage",null,!0)),t.push(new Hy("contentType",null,!0)),t.push(new Hy("metadata","customMetadata",!0)),Ky=t}function Jy(t,e,n){var r=zy(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new xy(t.bucket,t.fullPath);return e._makeStorageReference(n)}})}(r,t),r}(t,r,n)}function Qy(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var Yy=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function Xy(t){if(!t)throw ly()}function Zy(t,e){return function(n,r){var i=Jy(t,r,e);return Xy(null!==i),i}}function $y(t){return function(e,n){var r;return(r=401===e.getStatus()?e.getResponseText().includes("Firebase App Check token is invalid")?new uy("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new uy("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new uy("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new uy("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function tg(t){var e=$y(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new uy("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function eg(t,e,n){var r=Dy(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new Yy(r,"GET",Zy(t,n),i);return o.errorHandler=tg(e),o}function ng(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var rg=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function ig(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(VA){Xy(!1)}return Xy(!!n&&-1!==(e||["active"]).indexOf(n)),n}var og=function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}};function ag(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var sg=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=Gy(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=ng(e,r,i),s={name:a.fullPath},u=Dy(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},l=Qy(a,n),h=new Yy(u,"POST",(function(t){var e;ig(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(VA){Xy(!1)}return Xy(Ay(e)),e}),t.maxUploadRetryTime);return h.urlParams=s,h.headers=c,h.body=l,h.errorHandler=$y(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n,r){var i=function(t,e,n,r){var i=new Yy(n,"POST",(function(t){var e=ig(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(VA){Xy(!1)}n||Xy(!1);var i=Number(n);return Xy(!isNaN(i)),new rg(i,r.size(),"final"===e)}),t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=$y(e),i}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=262144*this._chunkMultiplier,n=new rg(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var a;try{a=function(t,e,n,r,i,o,a,s){var u=new rg(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new uy("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},d=r.slice(h,h+l);if(null===d)throw fy();var p=new Yy(n,"POST",(function(t,n){var i,a=ig(t,["active","final"]),s=u.current+l,c=r.size();return i="final"===a?Zy(e,o)(t,n):null,new rg(s,c,"final"===a,i)}),e.maxUploadRetryTime);return p.headers=f,p.body=d.uploadData(),p.progressCallback=s||null,p.errorHandler=$y(t),p}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(VA){return t._error=VA,void t._transition("error")}var s=t._ref.storage._makeRequest(a,i,o);t._request=s,s.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e,n){var r=eg(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=ng(e,r,i),c=Qy(u,n),l=Vy.getBlob("--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+s+"--");if(null===l)throw fy();var h={name:u.fullPath},f=Dy(o,t.host),d=t.maxUploadRetryTime,p=new Yy(f,"POST",Zy(t,n),d);return p.urlParams=h,p.headers=a,p.body=l.uploadData(),p.errorHandler=$y(e),p}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=hy(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Sy(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new og(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(Sy(this._state)){case Cy.SUCCESS:ag(this._resolve.bind(null,this.snapshot))();break;case Cy.CANCELED:case Cy.ERROR:ag(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(Sy(this._state)){case Cy.RUNNING:case Cy.PAUSED:t.next&&ag(t.next.bind(t,this.snapshot))();break;case Cy.SUCCESS:t.complete&&ag(t.complete.bind(t))();break;case Cy.CANCELED:case Cy.ERROR:t.error&&ag(t.error.bind(t,this._error))();break;default:t.error&&ag(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),ug=function(){function t(t,e){this._service=t,this._location=e instanceof xy?e:xy.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new xy(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return By(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new xy(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw vy(t)},t}();function cg(t,e){return Object(nl.b)(this,void 0,void 0,(function(){var n,r;return Object(nl.d)(this,(function(i){switch(i.label){case 0:return null!=e&&"number"==typeof e.maxResults&&Ry("options.maxResults",1,1e3,e.maxResults),r=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/","/".length>0&&(o.delimiter="/"),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=Dy(e.bucketOnlyServerUrl(),t.host),s=t.maxOperationRetryTime,u=new Yy(a,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=zy(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var a=o[i].replace(/\/$/,""),s=t._makeStorageReference(new xy(e,a));r.prefixes.push(s)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)s=t._makeStorageReference(new xy(e,c[u].name)),r.items.push(s);return r}(t,e,r)}(t,e,r);return Xy(null!==i),i}}(t,e.bucket),s);return u.urlParams=o,u.errorHandler=$y(e),u}(t.storage,t._location,0,(n=e||{}).pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}}))}))}function lg(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new xy(t._location.bucket,n);return new ug(t.storage,r)}function hg(t){return/^[A-Za-z]+:\/\//.test(t)}function fg(t,e){var n=null==e?void 0:e.storageBucket;return null==n?null:xy.makeFromBucketSpec(n,t)}var dg=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host="firebasestorage.googleapis.com",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?xy.makeFromBucketSpec(i,this._host):fg(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,this._bucket=null!=this._url?xy.makeFromBucketSpec(this._url,t):fg(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){Ry("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){Ry("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return Object(nl.b)(this,void 0,void 0,(function(){var t,e;return Object(nl.d)(this,(function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._getAppCheckToken=function(){return Object(nl.b)(this,void 0,void 0,(function(){var t;return Object(nl.d)(this,(function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new ug(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new Ny(py());var i=function(t,e,n,r,i,o){var a=Ly(t.urlParams),s=t.url+a,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new My(s,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return r._requests.delete(i)}),(function(){return r._requests.delete(i)})),i},t.prototype.makeRequestWithTokens=function(t){return Object(nl.b)(this,void 0,void 0,(function(){var e;return Object(nl.d)(this,(function(n){switch(n.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=n.sent(),[2,this._makeRequest(t,e[0],e[1])]}}))}))},t}();function pg(t,e){return function(t,e){if(e&&hg(e)){if(t instanceof dg)return new ug(t,e);throw dy("To use ref(service, url), the first argument must be a Storage instance.")}return function t(e,n){if(e instanceof dg){var r=e;if(null==r._bucket)throw new uy("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var i=new ug(r,r._bucket);return null!=n?t(i,n):i}if(void 0!==n){if(n.includes(".."))throw dy('`path` param cannot contain ".."');return lg(e,n)}return e}(t,e)}(t=Object(ay.o)(t),e)}var vg,yg,gg=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),mg=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new gg(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new gg(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new gg(t,i,i._ref))}:{next:e.next?function(t){return e.next(new gg(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),bg=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new _g(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new _g(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),_g=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return lg(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new mg(function(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new sg(t,new Vy(e),n)}(t=Object(ay.o)(t),e,n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=my.RAW),this._throwIfRoot("putString");var r=_y(e,t),i=Object(nl.a)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new mg(new sg(this._delegate,new Vy(r.data,!0),i),this)},t.prototype.listAll=function(){var t,e=this;return(t=this._delegate,function(t){var e={prefixes:[],items:[]};return function t(e,n,r){return Object(nl.b)(this,void 0,void 0,(function(){var i,o,a;return Object(nl.d)(this,(function(s){switch(s.label){case 0:return[4,cg(e,{pageToken:r})];case 1:return i=s.sent(),(o=n.prefixes).push.apply(o,i.prefixes),(a=n.items).push.apply(a,i.items),null==i.nextPageToken?[3,3]:[4,t(e,n,i.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}(t,e).then((function(){return e}))}(t=Object(ay.o)(t))).then((function(t){return new bg(t,e.storage)}))},t.prototype.list=function(t){var e=this;return function(t,e){return cg(t=Object(ay.o)(t),e)}(this._delegate,t||void 0).then((function(t){return new bg(t,e.storage)}))},t.prototype.getMetadata=function(){return t=this._delegate,function(t){return Object(nl.b)(this,void 0,void 0,(function(){var e;return Object(nl.d)(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=eg(t.storage,t._location,Gy()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}(t=Object(ay.o)(t));var t},t.prototype.updateMetadata=function(t){return function(t,e){return function(t,e){return Object(nl.b)(this,void 0,void 0,(function(){var n;return Object(nl.d)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=Dy(e.fullServerUrl(),t.host),o=Qy(n,r),a=t.maxOperationRetryTime,s=new Yy(i,"PATCH",Zy(t,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=tg(e),s}(t.storage,t._location,e,Gy()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}}))}))}(t=Object(ay.o)(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return t=this._delegate,function(t){return Object(nl.b)(this,void 0,void 0,(function(){var e;return Object(nl.d)(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=Dy(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new Yy(r,"GET",function(t,e){return function(n,r){var i=Jy(t,r,e);return Xy(null!==i),function(t,e,n){var r=zy(e);if(null===r)return null;if(!Ay(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map((function(e){var r=t.fullPath;return Dy("/b/"+o(t.bucket)+"/o/"+o(r),n)+Ly({alt:"media",token:e})}))[0]}(i,r,t.host)}}(t,n),i);return o.errorHandler=tg(e),o}(t.storage,t._location,Gy()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then((function(t){if(null===t)throw new uy("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}(t=Object(ay.o)(t));var t},t.prototype.delete=function(){return this._throwIfRoot("delete"),t=this._delegate,function(t){return Object(nl.b)(this,void 0,void 0,(function(){var e;return Object(nl.d)(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=Dy(e.fullServerUrl(),t.host),r=new Yy(n,"DELETE",(function(t,e){}),t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=tg(e),r}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}(t=Object(ay.o)(t));var t},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw vy(t)},t}(),wg=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(hg(t))throw dy("ref() expected a child path but got a URL, use refFromURL instead.");return new _g(pg(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!hg(t))throw dy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{xy.makeFromUrl(t,this._delegate.host)}catch(VA){throw dy("refFromUrl() expected a valid full URL but got an invalid one.")}return new _g(pg(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){!function(t,e,n){t.host="http://"+e+":"+n}(this._delegate,t,e)},t}();yg={TaskState:Cy,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:my,Storage:dg,Reference:_g},(vg=oy.a).INTERNAL.registerComponent(new sy.a("storage",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new wg(r,new dg(r,i,o,new Iy,n,oy.a.SDK_VERSION))}),"PUBLIC").setServiceProps(yg).setMultipleInstances(!0)),vg.registerVersion("@firebase/storage","0.5.2");var kg,Og,Cg,Sg,Eg,Tg=((Sg=function(){function t(e){h(this,t),this.af=e,this.CARPETA_IMAGENES="img"}return d(t,[{key:"getAllImages",value:function(){return this.af.database.ref("img").orderByKey().once("value",(function(){}))}},{key:"fromStartToEnd",value:function(t){return this.af.database.ref("img").orderByKey().startAt(t).limitToLast(9).once("value",(function(){}))}},{key:"listaUltimasImagenes",value:function(){Rv.a.database().ref().get().then((function(t){t.exists()?console.log(t.val()):console.log("No data available")})).catch((function(t){console.error(t)}))}},{key:"newcharge",value:function(t){var e=t.map((function(t,e){var n=Rv.a.storage().ref("img/"+t.archivo.name);return n.put(t[e]).then((function(){return n.getDownloadURL()}))}));Promise.all(e).then((function(t){console.log(t,"all")})).catch((function(t){return alert(t.code)}))}},{key:"charge_images",value:function(t){var e=this;t.map((function(t,n){var r=o("je4i");t.nombreArchivo=r.generate();var i=Rv.a.storage().ref().child("".concat(e.CARPETA_IMAGENES,"/").concat(t.nombreArchivo));i.put(t.archivo).on(Rv.a.storage.TaskEvent.STATE_CHANGED,(function(e){switch(t.progreso=e.bytesTransferred/e.totalBytes*100,e.state){case Rv.a.storage.TaskState.PAUSED:console.log("Upload is paused");break;case Rv.a.storage.TaskState.RUNNING:console.log("Upload is running")}}),(function(t){console.log("Error: ",t)}),(function(){console.log("upload completed successfully"),i.getDownloadURL().then((function(n){t.url=n,e.guardarImagen({nombre:t.nombreArchivo,url:t.url,user:t.user}),t.estaSubiendo=!1}))}))}))}},{key:"old_charge_images",value:function(t){var e,n=this,r=Rv.a.storage().ref(),i=a(t);try{var o=function(){var t=e.value;t.estaSubiendo=!0,(s=r.child("".concat(n.CARPETA_IMAGENES,"/").concat(t.nombreArchivo)).put(t.archivo)).on(Rv.a.storage.TaskEvent.STATE_CHANGED,(function(e){switch(t.progreso=e.bytesTransferred/e.totalBytes*100,e.state){case Rv.a.storage.TaskState.PAUSED:console.log("Upload is paused");break;case Rv.a.storage.TaskState.RUNNING:console.log("Upload is running");break;case Rv.a.storage.TaskState.SUCCESS:console.log("Upload is SUCCESS")}}),(function(t){console.log("Error: ",t)}),(function(){console.log("upload completed successfully"),s.snapshot.ref.getDownloadURL().then((function(e){t.url=e,n.guardarImagen({nombre:t.nombreArchivo,url:t.url,user:t.user}),t.estaSubiendo=!1}))}))};for(i.s();!(e=i.n()).done;){var s;o()}}catch(u){i.e(u)}finally{i.f()}}},{key:"guardarImagen",value:function(t){this.af.list("/"+this.CARPETA_IMAGENES).push(t)}}]),t}()).\u0275fac=function(t){return new(t||Sg)(s.Sb(ty))},Sg.\u0275prov=s.Fb({token:Sg,factory:Sg.\u0275fac,providedIn:"root"}),Sg),Ig=((Cg=function(){function t(e,n,r){var i=this;h(this,t),this.afAuth=e,this.router=n,this.ngZone=r,this.afAuth.authState.subscribe((function(t){if(t){if(i.userData=t,null==i.userData.displayname){var e=JSON.parse(localStorage.getItem("user"));Object.defineProperty(i.userData,"displayName",{writable:!0,value:e.displayName})}localStorage.setItem("user",JSON.stringify(i.userData))}else localStorage.setItem("user",null)}))}return d(t,[{key:"SignIn",value:function(t,e,n){var r=this;return this.afAuth.signInWithEmailAndPassword(t,e).then((function(t){r.SetUserData(t.user,n)&&r.ngZone.run((function(){r.router.navigate(["dashboard"])}))})).catch((function(t){window.alert(t.message)}))}},{key:"SignInFileWithReload",value:function(t,e){var n=this;return this.afAuth.signInWithEmailAndPassword(t,e).then((function(t){n.ngZone.run((function(){window.location.reload()})),n.SetUserData(t.user)})).catch((function(t){window.alert(t.message)}))}},{key:"SignUp",value:function(t,e,n){var r=this;return this.afAuth.createUserWithEmailAndPassword(t,e).then((function(t){r.SendVerificationMail(),r.SetUserData(t.user,n)})).catch((function(t){window.alert(t.message)}))}},{key:"SignUpFileWithReload",value:function(t,e){var n=this;return this.afAuth.createUserWithEmailAndPassword(t,e).then((function(t){n.SetUserData(t.user),window.location.reload()})).catch((function(t){window.alert(t.message)}))}},{key:"SendVerificationMail",value:function(){var t=this;return this.afAuth.currentUser.then((function(t){return t.sendEmailVerification()})).then((function(){t.router.navigate(["verify-email"])}))}},{key:"ForgotPassword",value:function(t){return this.afAuth.sendPasswordResetEmail(t).then((function(){window.alert("Password reset email sent, check your inbox.")})).catch((function(t){window.alert(t)}))}},{key:"isLoggedInAndVerified",get:function(){var t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}},{key:"isLoggedIn",get:function(){return null!==JSON.parse(localStorage.getItem("user"))}},{key:"GoogleAuth",value:function(){this.AuthLogin(new Rv.a.auth.GoogleAuthProvider)}},{key:"GoogleAuthWithReload",value:function(){return this.AuthLoginWithReload(new Rv.a.auth.GoogleAuthProvider)}},{key:"AuthLogin",value:function(t){var e=this;return this.afAuth.signInWithPopup(t).then((function(t){e.ngZone.run((function(){e.router.navigate(["dashboard"])})),e.SetUserData(t.user)})).catch((function(t){window.alert(t)}))}},{key:"AuthLoginWithReload",value:function(t){var e=this;return this.afAuth.signInWithPopup(t).then((function(t){e.ngZone.run((function(){window.location.reload()})),e.SetUserData(t.user)})).catch((function(t){window.alert(t)}))}},{key:"SetUserData",value:function(t,e){return this.userData=null!=e?{uid:t.uid,email:t.email,displayName:e,photoURL:t.photoURL,emailVerified:t.emailVerified}:{uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},localStorage.setItem("user",JSON.stringify(this.userData)),!0}},{key:"SignOut",value:function(){var t=this;return this.afAuth.signOut().then((function(){localStorage.removeItem("user"),t.router.navigate(["sign-in"]),window.location.reload()}))}}]),t}()).\u0275fac=function(t){return new(t||Cg)(s.Sb(jv),s.Sb(Mf),s.Sb(s.z))},Cg.\u0275prov=s.Fb({token:Cg,factory:Cg.\u0275fac,providedIn:"platform"}),Cg),xg=((Og=function(){function t(e,n){h(this,t),this.authService=e,this.router=n}return d(t,[{key:"canActivate",value:function(){return!0!==this.authService.isLoggedIn&&this.router.navigate(["sign-in"]),!0}}]),t}()).\u0275fac=function(t){return new(t||Og)(s.Sb(Ig),s.Sb(Mf))},Og.\u0275prov=s.Fb({token:Og,factory:Og.\u0275fac,providedIn:"root"}),Og),Ng=((kg=function(){function t(e,n){h(this,t),this.authService=e,this.router=n}return d(t,[{key:"canActivate",value:function(){return!0===this.authService.isLoggedIn&&this.router.navigate(["/dashboard"]),!0}}]),t}()).\u0275fac=function(t){return new(t||kg)(s.Sb(Ig),s.Sb(Mf))},kg.\u0275prov=s.Fb({token:kg,factory:kg.\u0275fac,providedIn:"root"}),kg),Ag=o("Iab2"),jg=((Eg=function(){function t(e){var n=this;h(this,t),this.http=e;var r=Rv.a.storage();r.ref("CV/jrp-cv.jpg").getDownloadURL().then((function(t){n.cvImageUrl=t})),r.ref("CV/jrpCV.pdf").getDownloadURL().then((function(t){n.cvURL=t}))}return d(t,[{key:"ngOnInit",value:function(){}},{key:"downloadPDF",value:function(){return this.http.get(this.cvURL,{responseType:"blob"}).pipe(Object(ve.a)((function(t){return new Blob([t],{type:"application/pdf"})})))}},{key:"downloadAndOpenPDF",value:function(){this.downloadPDF().subscribe((function(t){Ag.saveAs(t,"Javier R\xf3denas P\xe9rez CV.pdf")}))}}]),t}()).\u0275fac=function(t){return new(t||Eg)(s.Jb(Xd))},Eg.\u0275cmp=s.Db({type:Eg,selectors:[["app-home"]],decls:346,vars:1,consts:[[1,"container","pinkContainer","fadeIn","slow"],[1,"h1container"],["role","alert",1,"alert","alert-warning","text-center","mx-5","mb-4","mt-2"],[1,"btn","btn-outline-danger",3,"click"],[1,"h1cv","mt-4","mb-5"],[1,"personalInfo","row","py-4","animated","fadeIn"],[1,"col-md-4","circularImageDiv","fadeIn","slow"],["alt","Foto de Javier R\xf3denas",1,"cvImage",3,"src"],[1,"col-md-8","personalInfoData"],[1,"wavecomen"],[1,"row","salmonContainer"],[1,"wavecomen2"],["href","https://www.linkedin.com/in/javier-rodenas-perez-28409118b/"],[1,"body"],[1,"waveBody"],[1,"sectionBody","row"],[1,"headerBody"],[1,"waveHeaderSection"],[1,"containerBody","text-start"],[1,"headerContainerBody"],[1,"dateContainer"],[1,"infoContainer"],[1,"headerContainerBody","mbNegative20"],[1,"infoContainer","lh30px"],[1,"fs-1","pr-top5"],[1,"fs-1","pr-top6"],[1,"fs-5","pr-bottom"],[1,"fs-1","pr-top7"],[1,"waveFooter"],[1,"footer","fs-3"]],template:function(t,e){1&t&&(s.Ob(0,"div",0),s.Ob(1,"div",1),s.Ob(2,"div",2),s.qc(3," Si eres muy Backend Developer tambi\xe9n puedes descargarlo en un formato menos colorido "),s.Ob(4,"a",3),s.Vb("click",(function(){return e.downloadAndOpenPDF()})),s.qc(5,"CLICKANDO AQU\xcd"),s.Nb(),s.Nb(),s.Ob(6,"h1",4),s.qc(7,"Javier R\xf3denas P\xe9rez CV"),s.Nb(),s.Nb(),s.Ob(8,"div",5),s.Ob(9,"div",6),s.Kb(10,"img",7),s.Nb(),s.Ob(11,"div",8),s.Kb(12,"div",9),s.Ob(13,"div",10),s.Ob(14,"b"),s.qc(15,"Calle Sierra Mariola, 10, 03610, Petrer, Alicante, Espa\xf1a"),s.Nb(),s.Ob(16,"b"),s.qc(17,"javirodenas.javirodenas@gmail.com"),s.Nb(),s.Ob(18,"b"),s.qc(19,"608 682 831"),s.Nb(),s.Nb(),s.Kb(20,"div",11),s.Kb(21,"div",9),s.Ob(22,"div",10),s.Ob(23,"b"),s.qc(24,"26/04/1996; Elda, Alicante, Espa\xf1a"),s.Nb(),s.Ob(25,"b"),s.qc(26,"Nacionalidad: Espa\xf1ola"),s.Nb(),s.Ob(27,"b"),s.qc(28,"Sexo: Masculino"),s.Nb(),s.Nb(),s.Kb(29,"div",11),s.Kb(30,"div",9),s.Ob(31,"div",10),s.Ob(32,"b"),s.qc(33,"Permiso de conducci\xf3n: B"),s.Nb(),s.Ob(34,"a",12),s.Ob(35,"b"),s.qc(36,"Linkedin"),s.Nb(),s.Nb(),s.Nb(),s.Kb(37,"div",11),s.Nb(),s.Nb(),s.Ob(38,"div",13),s.Kb(39,"div",14),s.Ob(40,"div",15),s.Ob(41,"div",16),s.Ob(42,"h2"),s.qc(43,"Experiencia laboral"),s.Nb(),s.Nb(),s.Kb(44,"div",17),s.Ob(45,"div",18),s.Ob(46,"p",19),s.Ob(47,"b"),s.qc(48,"Programador web"),s.Nb(),s.qc(49," - Nicripsia Internet SL"),s.Nb(),s.Ob(50,"p",20),s.qc(51,"05/2020 - 09/2020"),s.Nb(),s.Ob(52,"ul",21),s.Ob(53,"li"),s.qc(54,"Desarrollo de m\xf3odulos para PrestaShop mediante PHP, JavaScript, jQuery, MySQL, HTML5."),s.Nb(),s.Ob(55,"li"),s.qc(56,"Maquetaci\xf3n HTML5, Sass, Bootstrap."),s.Nb(),s.Ob(57,"li"),s.qc(58,"Mantenimiento de Bases de Datos (phpMyAdmin)"),s.Nb(),s.Ob(59,"li"),s.qc(60,"Gesti\xf3n de CMS's (WordPress y PrestaShop"),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Ob(61,"div",15),s.Ob(62,"div",16),s.Ob(63,"h2"),s.qc(64,"Educaci\xf3n y Formaci\xf3n"),s.Nb(),s.Nb(),s.Kb(65,"div",17),s.Ob(66,"div",18),s.Ob(67,"p",19),s.Ob(68,"b"),s.qc(69,"Educaci\xf3n Secundaria Obligatoria"),s.Nb(),s.qc(70," - IES Poeta Paco Moll\xe1"),s.Nb(),s.Ob(71,"p",20),s.qc(72,"2008 - 2012"),s.Nb(),s.Nb(),s.Ob(73,"div",18),s.Ob(74,"p",19),s.Ob(75,"b"),s.qc(76,"Bachillerato de Ciencias"),s.Nb(),s.qc(77," - IES Poeta Paco Moll\xe1"),s.Nb(),s.Ob(78,"p",20),s.qc(79,"2012 - 2014"),s.Nb(),s.Nb(),s.Ob(80,"div",18),s.Ob(81,"p",19),s.Ob(82,"b"),s.qc(83,"Grado en Ingenier\xeda Multimedia, especializaci\xf3n Gesti\xf3n de Contenidos"),s.Nb(),s.qc(84," - Universidad de Alicante"),s.Nb(),s.Ob(85,"p",20),s.qc(86,"2014 - 2019"),s.Nb(),s.Nb(),s.Nb(),s.Ob(87,"div",15),s.Ob(88,"div",16),s.Ob(89,"h2"),s.qc(90,"Competencias de Idiomas"),s.Nb(),s.Nb(),s.Kb(91,"div",17),s.Ob(92,"div",18),s.Ob(93,"p",19),s.Ob(94,"b"),s.qc(95,"Espa\xf1ol, Valenciano"),s.Nb(),s.qc(96," - Lenguas Maternas"),s.Nb(),s.Nb(),s.Ob(97,"div",18),s.Ob(98,"p",19),s.Ob(99,"b"),s.qc(100,"Ingl\xe9s"),s.Nb(),s.qc(101," - First Certificate of Cambridge Assessment"),s.Nb(),s.Ob(102,"p",20),s.qc(103,"06/2019"),s.Nb(),s.Nb(),s.Nb(),s.Ob(104,"div",15),s.Ob(105,"div",16),s.Ob(106,"h2"),s.qc(107,"Habilidades T\xe9cnicas"),s.Nb(),s.Nb(),s.Kb(108,"div",17),s.Ob(109,"div",18),s.Ob(110,"p",22),s.Ob(111,"b"),s.qc(112,"Web"),s.Nb(),s.Nb(),s.Ob(113,"ul",23),s.Ob(114,"li"),s.qc(115,"PHP "),s.Ob(116,"span",24),s.qc(117,"\u25cf\u25cf\u25cf"),s.Nb(),s.Nb(),s.Ob(118,"li"),s.qc(119,"JavaScript "),s.Ob(120,"span",25),s.qc(121,"\u25cf\u25cf"),s.Nb(),s.Ob(122,"span",26),s.qc(123,"\u25ef"),s.Nb(),s.Nb(),s.Ob(124,"li"),s.qc(125,"TypeScript "),s.Ob(126,"span",27),s.qc(127,"\u25cf"),s.Nb(),s.Ob(128,"span",26),s.qc(129,"\u25ef\u25ef"),s.Nb(),s.Nb(),s.Ob(130,"li"),s.qc(131,"jQuery "),s.Ob(132,"span",27),s.qc(133,"\u25cf"),s.Nb(),s.Ob(134,"span",26),s.qc(135,"\u25ef\u25ef"),s.Nb(),s.Nb(),s.Ob(136,"li"),s.qc(137,"HTML5 "),s.Ob(138,"span",25),s.qc(139,"\u25cf\u25cf\u25cf"),s.Nb(),s.Nb(),s.Ob(140,"li"),s.qc(141,"CSS "),s.Ob(142,"span",25),s.qc(143,"\u25cf\u25cf"),s.Nb(),s.Ob(144,"span",26),s.qc(145,"\u25ef"),s.Nb(),s.Nb(),s.Ob(146,"li"),s.qc(147,"Sass "),s.Ob(148,"span",25),s.qc(149,"\u25cf\u25cf"),s.Nb(),s.Ob(150,"span",26),s.qc(151,"\u25ef"),s.Nb(),s.Nb(),s.Ob(152,"li"),s.qc(153,"Bootstrap "),s.Ob(154,"span",25),s.qc(155,"\u25cf\u25cf"),s.Nb(),s.Ob(156,"span",26),s.qc(157,"\u25ef"),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Ob(158,"div",18),s.Ob(159,"p",22),s.Ob(160,"b"),s.qc(161,"Frameworks"),s.Nb(),s.Nb(),s.Ob(162,"ul",23),s.Ob(163,"li"),s.qc(164,"Angular "),s.Ob(165,"span",25),s.qc(166,"\u25cf\u25cf"),s.Nb(),s.Ob(167,"span",26),s.qc(168,"\u25ef"),s.Nb(),s.Nb(),s.Ob(169,"li"),s.qc(170,"Laravel "),s.Ob(171,"span",27),s.qc(172,"\u25cf"),s.Nb(),s.Ob(173,"span",26),s.qc(174,"\u25ef\u25ef"),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Ob(175,"div",18),s.Ob(176,"p",22),s.Ob(177,"b"),s.qc(178,"Bases de Datos"),s.Nb(),s.Nb(),s.Ob(179,"ul",23),s.Ob(180,"li"),s.qc(181,"MySql "),s.Ob(182,"span",24),s.qc(183,"\u25cf\u25cf\u25cf"),s.Nb(),s.Nb(),s.Ob(184,"li"),s.qc(185,"MongoDB "),s.Ob(186,"span",25),s.qc(187,"\u25cf\u25cf"),s.Nb(),s.Ob(188,"span",26),s.qc(189,"\u25ef"),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Ob(190,"div",18),s.Ob(191,"p",22),s.Ob(192,"b"),s.qc(193,"CMS"),s.Nb(),s.Nb(),s.Ob(194,"ul",23),s.Ob(195,"li"),s.qc(196,"WordPress "),s.Ob(197,"span",25),s.qc(198,"\u25cf\u25cf"),s.Nb(),s.Ob(199,"span",26),s.qc(200,"\u25ef"),s.Nb(),s.Nb(),s.Ob(201,"li"),s.qc(202,"PrestaShop "),s.Ob(203,"span",25),s.qc(204,"\u25cf\u25cf"),s.Nb(),s.Ob(205,"span",26),s.qc(206,"\u25ef"),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Ob(207,"div",18),s.Ob(208,"p",22),s.Ob(209,"b"),s.qc(210,"Git"),s.Nb(),s.Nb(),s.Ob(211,"ul",23),s.Ob(212,"li"),s.qc(213,"CMD "),s.Ob(214,"span",27),s.qc(215,"\u25cf"),s.Nb(),s.Ob(216,"span",26),s.qc(217,"\u25ef\u25ef"),s.Nb(),s.Nb(),s.Ob(218,"li"),s.qc(219,"Github "),s.Ob(220,"span",25),s.qc(221,"\u25cf\u25cf"),s.Nb(),s.Ob(222,"span",26),s.qc(223,"\u25ef"),s.Nb(),s.Nb(),s.Ob(224,"li"),s.qc(225,"Gitkraken "),s.Ob(226,"span",25),s.qc(227,"\u25cf\u25cf"),s.Nb(),s.Ob(228,"span",26),s.qc(229,"\u25ef"),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Ob(230,"div",18),s.Ob(231,"p",22),s.Ob(232,"b"),s.qc(233,"Metdolog\xedas \xc1giles"),s.Nb(),s.Nb(),s.Ob(234,"ul",23),s.Ob(235,"li"),s.qc(236,"SCRUM, Kanban, XP "),s.Ob(237,"span",25),s.qc(238,"\u25cf\u25cf"),s.Nb(),s.Ob(239,"span",26),s.qc(240,"\u25ef"),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Ob(241,"div",18),s.Ob(242,"p",22),s.Ob(243,"b"),s.qc(244,"Otros Lenguajes"),s.Nb(),s.Nb(),s.Ob(245,"ul",23),s.Ob(246,"li"),s.qc(247,"Java "),s.Ob(248,"span",24),s.qc(249,"\u25cf\u25cf\u25cf"),s.Nb(),s.Nb(),s.Ob(250,"li"),s.qc(251,"C++ "),s.Ob(252,"span",24),s.qc(253,"\u25cf\u25cf\u25cf"),s.Nb(),s.Nb(),s.Ob(254,"li"),s.qc(255,"Python "),s.Ob(256,"span",25),s.qc(257,"\u25cf\u25cf"),s.Nb(),s.Ob(258,"span",26),s.qc(259,"\u25ef"),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Ob(260,"div",15),s.Ob(261,"div",16),s.Ob(262,"h2"),s.qc(263,"Otros Cursos"),s.Nb(),s.Nb(),s.Kb(264,"div",17),s.Ob(265,"div",18),s.Ob(266,"p",19),s.Ob(267,"b"),s.qc(268,"Introducci\xf3n al Desarrollo Web (primera parte)"),s.Nb(),s.qc(269," - Google Act\xedvate (40H) "),s.Nb(),s.Ob(270,"p",20),s.qc(271,"10/2017"),s.Nb(),s.Nb(),s.Ob(272,"div",18),s.Ob(273,"p",19),s.Ob(274,"b"),s.qc(275,"Introducci\xf3n al Desarrollo Web (segunda parte)"),s.Nb(),s.qc(276," - Google Act\xedvate (40H) "),s.Nb(),s.Ob(277,"p",20),s.qc(278,"10/2017"),s.Nb(),s.Nb(),s.Ob(279,"div",18),s.Ob(280,"p",19),s.Ob(281,"b"),s.qc(282,"Fundamentos del Marketing Digital"),s.Nb(),s.qc(283," - Google Act\xedvate (40H) "),s.Nb(),s.Ob(284,"p",20),s.qc(285,"02/2020"),s.Nb(),s.Nb(),s.Ob(286,"div",18),s.Ob(287,"p",19),s.Ob(288,"b"),s.qc(289,"Desarrollo de M\xf3dulos para PrestaShop"),s.Nb(),s.qc(290," - Udemy (2H) "),s.Nb(),s.Ob(291,"p",20),s.qc(292,"4/2020"),s.Nb(),s.Nb(),s.Ob(293,"div",18),s.Ob(294,"p",19),s.Ob(295,"b"),s.qc(296,"Complete Python Course-Learn From Scratch"),s.Nb(),s.qc(297," - Udemy (3H) "),s.Nb(),s.Ob(298,"p",20),s.qc(299,"4/2020"),s.Nb(),s.Nb(),s.Ob(300,"div",18),s.Ob(301,"p",19),s.Ob(302,"b"),s.qc(303,"Learn PHP - For Beginners"),s.Nb(),s.qc(304," - Udemy (2H) "),s.Nb(),s.Ob(305,"p",20),s.qc(306,"4/2020"),s.Nb(),s.Nb(),s.Ob(307,"div",18),s.Ob(308,"p",19),s.Ob(309,"b"),s.qc(310,"Aprende a dominar Git de cero a expero!"),s.Nb(),s.qc(311," - Udemy (3H) "),s.Nb(),s.Ob(312,"p",20),s.qc(313,"4/2020"),s.Nb(),s.Nb(),s.Ob(314,"div",18),s.Ob(315,"p",19),s.Ob(316,"b"),s.qc(317,"Curso de Coronavirus COVID-19"),s.Nb(),s.qc(318," - IDUE (2H) "),s.Nb(),s.Ob(319,"p",20),s.qc(320,"7/2020"),s.Nb(),s.Nb(),s.Ob(321,"div",18),s.Ob(322,"p",19),s.Ob(323,"b"),s.qc(324,"Aprende Edici\xf3n de Video con Adobe Premiere desde cero"),s.Nb(),s.qc(325," - Udemy (3.5H) "),s.Nb(),s.Ob(326,"p",20),s.qc(327,"9/2020"),s.Nb(),s.Nb(),s.Ob(328,"div",18),s.Ob(329,"p",19),s.Ob(330,"b"),s.qc(331,"Aprende Javascript y crea APIs con NodeJS, Angular y MongoDB - Udemy"),s.Nb(),s.qc(332," - Udemy (30H) "),s.Nb(),s.Ob(333,"p",20),s.qc(334,"12/2020"),s.Nb(),s.Nb(),s.Ob(335,"div",18),s.Ob(336,"p",19),s.Ob(337,"b"),s.qc(338,"Angular: De cero a experto (Legacy) por Fernando Herrera"),s.Nb(),s.qc(339," - Udemy (30H) "),s.Nb(),s.Ob(340,"p",20),s.qc(341,"4/2021"),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Kb(342,"div",28),s.Ob(343,"div",29),s.Ob(344,"p"),s.qc(345,"\xa9 2021 Javier R\xf3denas P\xe9rez"),s.Nb(),s.Nb(),s.Nb()),2&t&&(s.zb(10),s.dc("src",e.cvImageUrl,s.mc))},styles:['@font-face{font-family:pacifico;src:local("Pacifico"),url(Pacifico-Regular.93cd59fff879b8bdd57d.ttf) format("truetype")}@font-face{font-family:muli;src:local("Muli"),url(Mulish-VariableFont_wght.894f3c22a68a382bf451.ttf) format("truetype")}.h1cv[_ngcontent-%COMP%]{cursor:pointer;padding:0;border:none;font:normal 75px/1 pacifico,Helvetica,sans-serif;color:#bbded6;text-align:center;text-overflow:clip;text-shadow:2px 2px 0 #1f6bb6,3px 3px 0 #ffb6b9,4px 4px 0 #ffb6b9,5px 5px 0 #ffb6b9,5px 6px 0 #ffb6b9,8px 8px 0 #1f6bb6;margin-bottom:1.7em!important}.container[_ngcontent-%COMP%]{margin:0;padding:0;width:100%;max-width:100%}.h1container[_ngcontent-%COMP%]{background-color:#61c0bf;padding-top:1.5em;padding-bottom:2em;position:relative;justify-content:center}.h1container[_ngcontent-%COMP%], .h1container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.h1container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-variant-caps:all-petite-caps;font-size:14.4px;font-weight:700}.h1container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:60%}.h1container[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;bottom:0;right:0;background-repeat:repeat;height:20px;background-size:20px 20px;background-image:radial-gradient(circle at 10px -5px,transparent 12px,#fae3d9 13px)}.cvImage[_ngcontent-%COMP%]{width:auto;height:100%;margin-left:-20px}.circularImageDiv[_ngcontent-%COMP%]{display:inline-block;position:relative;width:363px;height:363px;overflow:hidden;border-radius:50%;margin-left:2em;border:6px solid #ffb6b9}.personalInfo[_ngcontent-%COMP%]{font-family:muli}.personalInfo[_ngcontent-%COMP%], .pinkContainer[_ngcontent-%COMP%]{background-color:#fae3d9}.greenContainer[_ngcontent-%COMP%]{background-color:#bbded6}.salmonContainer[_ngcontent-%COMP%]{background-color:#ffb6b9;color:#fff1e4;text-align:center}.wavecomen[_ngcontent-%COMP%]{background-color:#fae3d9;height:20px;position:relative}.wavecomen[_ngcontent-%COMP%]:before{background-size:20px 20px;background-image:radial-gradient(circle at 10px -5px,transparent 12px,#ffb6b9 13px)}.wavecomen[_ngcontent-%COMP%]:after, .wavecomen[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;bottom:0;right:0;background-repeat:repeat;height:15px}.wavecomen[_ngcontent-%COMP%]:after{background-size:30px 10px;background-image:radial-gradient(circle at 10px 15px,#ffb6b9 12px,transparent 13px)}.waveFooter[_ngcontent-%COMP%]{background-color:#bbded6;height:20px;position:relative}.waveFooter[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;bottom:0;right:0;background-repeat:repeat;height:20px;background-size:20px 20px;background-image:radial-gradient(circle at 10px -5px,transparent 12px,#61c0bf 13px)}.wavecomen2[_ngcontent-%COMP%]{background-color:#ffb6b9;height:30px;position:relative;margin-bottom:10px}.wavecomen2[_ngcontent-%COMP%]:after{background-size:20px 20px;background-image:radial-gradient(circle at 10px -5px,transparent 12px,#fae3d9 13px)}.wavecomen2[_ngcontent-%COMP%]:after, .wavecomen2[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;bottom:0;right:0;background-repeat:repeat;height:15px}.wavecomen2[_ngcontent-%COMP%]:before{background-size:30px 10px;background-image:radial-gradient(circle at 10px 15px,#fae3d9 12px,transparent 13px)}.body[_ngcontent-%COMP%]{background-color:#bbded6;padding-bottom:3em}.waveBody[_ngcontent-%COMP%]{background-color:#fae3d9;padding-top:.3em;padding-bottom:2em;position:relative}.waveBody[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;bottom:0;right:0;background-repeat:repeat;height:20px;background-size:20px 20px;background-image:radial-gradient(circle at 10px -5px,transparent 12px,#bbded6 13px)}.sectionBody[_ngcontent-%COMP%]{background-color:#61c0bf;margin:5em;border-radius:8px;border:5px solid #ffb6b9;text-align:center;font-family:muli}.headerBody[_ngcontent-%COMP%]{background-color:#ffb6b9;color:#1f6bb6;font-family:pacifico;font-style:italic;font-weight:700;padding-top:1em;padding-bottom:1em}.waveHeaderSection[_ngcontent-%COMP%]{background-color:#ffb6b9;height:15px;position:relative;z-index:2}.waveHeaderSection[_ngcontent-%COMP%]:before{height:10px;background-size:20px 20px;background-image:radial-gradient(circle at 10px -5px,transparent 12px,#61c0bf 13px)}.waveHeaderSection[_ngcontent-%COMP%]:after, .waveHeaderSection[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;bottom:0;right:0;background-repeat:repeat}.waveHeaderSection[_ngcontent-%COMP%]:after{height:15px;background-size:40px 20px;background-image:radial-gradient(circle at 10px 15px,#61c0bf 12px,transparent 13px)}.containerBody[_ngcontent-%COMP%]{padding-left:1em;border-bottom:#ffb6b9;border-bottom-width:2px;border-bottom-style:solid;padding-bottom:10px}.headerContainerBody[_ngcontent-%COMP%]{font-size:1.4em;margin-top:.8em;text-transform:uppercase}.mbNegative20[_ngcontent-%COMP%]{margin-bottom:-20px}.dateContainer[_ngcontent-%COMP%]{font-weight:100;font-size:1em;text-transform:uppercase;margin-top:-18px;font-style:italic}.containerBody[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:-8px}.pr-top5[_ngcontent-%COMP%]{position:relative;top:5px}.pr-top6[_ngcontent-%COMP%]{position:relative;top:6px}.pr-top7[_ngcontent-%COMP%]{position:relative;top:7px}.pr-bottom[_ngcontent-%COMP%]{position:relative;bottom:0;padding-left:4px}.lh30px[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{max-height:30px}.fs-1[_ngcontent-%COMP%]{font-size:2.5rem!important}.footer[_ngcontent-%COMP%]{text-align:center;background-color:#61c0bf;padding:3em 0 2em}@media (max-width:1210px){.personalInfo[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.circularImageDiv[_ngcontent-%COMP%]{width:500px;height:500px;margin-bottom:1.8em}.personalInfoData[_ngcontent-%COMP%]{width:90%}}@media (min-width:480px) and (max-width:768px){.circularImageDiv[_ngcontent-%COMP%]{width:400px;height:400px;margin:0}.personalInfoData[_ngcontent-%COMP%]{width:95%}.sectionBody[_ngcontent-%COMP%]{margin:3em 1.5em 1em}}@media (max-width:480px){.circularImageDiv[_ngcontent-%COMP%]{width:330px;height:330px;margin:0}.personalInfoData[_ngcontent-%COMP%]{width:98%}.sectionBody[_ngcontent-%COMP%]{margin:3em 0 1em}}@media (min-width:0px) and (max-width:350px){.circularImageDiv[_ngcontent-%COMP%]{width:240px;height:240px}}']}),Eg);function Pg(t,e){if(1&t&&(s.Ob(0,"div",1),s.Ob(1,"h1"),s.qc(2),s.Nb(),s.Ob(3,"h3"),s.qc(4,"Ahora est\xe1s logeado, aunque lamentablemente con este Loggin no hay ninguna funcionalidad extra."),s.Nb(),s.Kb(5,"br"),s.Ob(6,"table",2),s.Ob(7,"thead",3),s.Ob(8,"tr"),s.Kb(9,"th"),s.Ob(10,"th"),s.qc(11,"Tus datos"),s.Nb(),s.Nb(),s.Nb(),s.Ob(12,"tbody"),s.Ob(13,"tr"),s.Ob(14,"td"),s.qc(15,"Nombre: "),s.Nb(),s.Ob(16,"td"),s.qc(17),s.Nb(),s.Nb(),s.Ob(18,"tr"),s.Ob(19,"td"),s.qc(20,"Email: "),s.Nb(),s.Ob(21,"td"),s.qc(22),s.Nb(),s.Nb(),s.Ob(23,"tr"),s.Ob(24,"td"),s.qc(25,"Nick: "),s.Nb(),s.Ob(26,"td"),s.qc(27),s.Nb(),s.Nb(),s.Ob(28,"tr"),s.Ob(29,"td"),s.qc(30,"Imagen de perfil: "),s.Nb(),s.Ob(31,"td"),s.Kb(32,"img",4),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Nb()),2&t){var n=e.ngIf;s.zb(2),s.sc("\xa1Hola ",n.given_name,"!"),s.zb(15),s.rc(n.name),s.zb(5),s.rc(n.email),s.zb(5),s.rc(n.nickname),s.zb(5),s.dc("src",n.picture,s.mc)}}var Rg,Dg=((Rg=function(){function t(e){h(this,t),this.auth=e}return d(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||Rg)(s.Jb(Od))},Rg.\u0275cmp=s.Db({type:Rg,selectors:[["app-autenticado"]],decls:2,vars:3,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"table","text-light"],[1,"table-dark"],["alt","",3,"src"]],template:function(t,e){1&t&&(s.oc(0,Pg,33,5,"div",0),s.Yb(1,"async")),2&t&&s.dc("ngIf",s.Zb(1,1,null==e.auth?null:e.auth.user$))},directives:[st],pipes:[bt],encapsulation:2}),Rg);function Lg(){return function(t){return t.lift(new Mg)}}var Mg=function(){function t(){h(this,t)}return d(t,[{key:"call",value:function(t,e){return e.subscribe(new Fg(t))}}]),t}(),Fg=function(t){p(n,t);var e=y(n);function n(t){var r;return h(this,n),(r=e.call(this,t)).hasPrev=!1,r}return d(n,[{key:"_next",value:function(t){var e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}]),n}(dc.a),Ug=o("q/0M"),qg=function(t,e){return(qg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Vg(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var zg,Bg="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Wg=Wg||{},Hg=Bg||self;function Kg(){}function Gg(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Jg(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Qg="closure_uid_"+(1e9*Math.random()>>>0),Yg=0;function Xg(t,e,n){return t.call.apply(t.bind,arguments)}function Zg(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function $g(t,e,n){return($g=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Xg:Zg).apply(null,arguments)}function tm(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function em(){return Date.now()}function nm(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function rm(){this.j=this.j,this.i=this.i}rm.prototype.j=!1,rm.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,Qg)&&t[Qg]||(t[Qg]=++Yg)}(this)},rm.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var im=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},om=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function am(t){return Array.prototype.concat.apply([],arguments)}function sm(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function um(t){return/^[\s\xa0]*$/.test(t)}var cm,lm=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function hm(t,e){return-1!=t.indexOf(e)}function fm(t,e){return t<e?-1:t>e?1:0}t:{var dm=Hg.navigator;if(dm){var pm=dm.userAgent;if(pm){cm=pm;break t}}cm=""}function vm(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function ym(t){var e={};for(var n in t)e[n]=t[n];return e}var gm="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function mm(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<gm.length;o++)n=gm[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function bm(t){return bm[" "](t),t}bm[" "]=Kg;var _m,wm,km=hm(cm,"Opera"),Om=hm(cm,"Trident")||hm(cm,"MSIE"),Cm=hm(cm,"Edge"),Sm=Cm||Om,Em=hm(cm,"Gecko")&&!(hm(cm.toLowerCase(),"webkit")&&!hm(cm,"Edge"))&&!(hm(cm,"Trident")||hm(cm,"MSIE"))&&!hm(cm,"Edge"),Tm=hm(cm.toLowerCase(),"webkit")&&!hm(cm,"Edge");function Im(){var t=Hg.document;return t?t.documentMode:void 0}t:{var xm="",Nm=(wm=cm,Em?/rv:([^\);]+)(\)|;)/.exec(wm):Cm?/Edge\/([\d\.]+)/.exec(wm):Om?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(wm):Tm?/WebKit\/(\S+)/.exec(wm):km?/(?:Version)[ \/]?(\S+)/.exec(wm):void 0);if(Nm&&(xm=Nm?Nm[1]:""),Om){var Am=Im();if(null!=Am&&Am>parseFloat(xm)){_m=String(Am);break t}}_m=xm}var jm={};function Pm(t){return function(t,e){var n=jm;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=lm(String(_m)).split("."),r=lm(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=fm(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||fm(0==a[2].length,0==s[2].length)||fm(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}var Rm=Hg.document&&Om&&(Im()||parseInt(_m,10))||void 0,Dm=!Om||9<=Number(Rm),Lm=Om&&!Pm("9"),Mm=function(){if(!Hg.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Hg.addEventListener("test",Kg,e),Hg.removeEventListener("test",Kg,e)}catch(n){}return t}();function Fm(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Um(t,e){if(Fm.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Em){t:{try{bm(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:qm[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Fm.prototype.b=function(){this.defaultPrevented=!0},nm(Um,Fm);var qm={2:"touch",3:"pen",4:"mouse"};Um.prototype.b=function(){Um.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Lm)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Vm="closure_listenable_"+(1e6*Math.random()|0),zm=0;function Bm(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++zm,this.Y=this.Z=!1}function Wm(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Hm(t){this.src=t,this.a={},this.b=0}function Km(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=im(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Wm(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Gm(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Hm.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=Gm(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):((e=new Bm(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Jm="closure_lm_"+(1e6*Math.random()|0),Qm={};function Ym(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);return null}return r=ib(r),e&&e[Vm]?e.wa(n,r,Jg(i)?!!i.capture:!!i,o):Xm(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Ym(t,e[o],n,r,i);return null}return n=ib(n),t&&t[Vm]?t.va(e,n,Jg(r)?!!r.capture:!!r,i):Xm(t,e,n,!1,r,i)}function Xm(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=Jg(i)?!!i.capture:!!i;if(a&&!Dm)return null;var s=nb(t);if(s||(t[Jm]=s=new Hm(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=eb,e=Dm?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Mm||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent($m(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Zm(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Vm])Km(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent($m(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=nb(e))?(Km(n,t),0==n.b&&(n.src=null,e[Jm]=null)):Wm(t)}}}function $m(t){return t in Qm?Qm[t]:Qm[t]="on"+t}function tb(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Zm(t),n.call(r,e)}function eb(t,e){if(t.Y)return!0;if(!Dm){if(!e)t:{e=["window","event"];for(var n=Hg,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return tb(t,e=new Um(e,this))}return tb(t,new Um(e,this))}function nb(t){return(t=t[Jm])instanceof Hm?t:null}var rb="__closure_events_fn_"+(1e9*Math.random()>>>0);function ib(t){return"function"==typeof t?t:(t[rb]||(t[rb]=function(e){return t.handleEvent(e)}),t[rb])}function ob(){rm.call(this),this.c=new Hm(this),this.J=this,this.C=null}function ab(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Fm(e,t);else if(e instanceof Fm)e.target=e.target||t;else{var i=e;mm(e=new Fm(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.a=n[o];i=sb(a,r,!0,e)&&i}if(i=sb(a=e.a=t,r,!0,e)&&i,i=sb(a,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=sb(a=e.a=n[o],r,!1,e)&&i}function sb(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.Y&&a.capture==n){var s=a.listener,u=a.ca||a.src;a.Z&&Km(t.c,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}nm(ob,rm),ob.prototype[Vm]=!0,(zg=ob.prototype).addEventListener=function(t,e,n,r){Ym(this,t,e,n,r)},zg.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);else i=Jg(i)?!!i.capture:!!i,r=ib(r),e&&e[Vm]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=Gm(a=e.a[n],r,i,o))&&(Wm(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete e.a[n],e.b--))):e&&(e=nb(e))&&(n=e.a[n.toString()],e=-1,n&&(e=Gm(n,r,i,o)),(r=-1<e?n[e]:null)&&Zm(r))}(this,t,e,n,r)},zg.G=function(){if(ob.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Wm(n[r]);delete e.a[t],e.b--}}this.C=null},zg.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},zg.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var ub=Hg.JSON.stringify;function cb(){this.b=this.a=null}var lb,hb=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())((function(){return new db}),(function(t){t.reset()}));function fb(){var t=gb,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function db(){this.next=this.b=this.a=null}function pb(t){Hg.setTimeout((function(){throw t}),0)}function vb(t,e){lb||function(){var t=Hg.Promise.resolve(void 0);lb=function(){t.then(mb)}}(),yb||(lb(),yb=!0),gb.add(t,e)}cb.prototype.add=function(t,e){var n=hb.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},db.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},db.prototype.reset=function(){this.next=this.b=this.a=null};var yb=!1,gb=new cb;function mb(){for(var t;t=fb();){try{t.a.call(t.b)}catch(n){pb(n)}var e=hb;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}yb=!1}function bb(t,e){ob.call(this),this.b=t||1,this.a=e||Hg,this.f=$g(this.Za,this),this.g=em()}function _b(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function wb(t,e,n){if("function"==typeof t)n&&(t=$g(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=$g(t.handleEvent,t)}return 2147483647<Number(e)?-1:Hg.setTimeout(t,e||0)}function kb(t){t.a=wb((function(){t.a=null,t.c&&(t.c=!1,kb(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}nm(bb,ob),(zg=bb.prototype).aa=!1,zg.M=null,zg.Za=function(){if(this.aa){var t=em()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),ab(this,"tick"),this.aa&&(_b(this),this.start()))}},zg.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=em())},zg.G=function(){bb.X.G.call(this),_b(this),delete this.a};var Ob=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}qg(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:kb(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(Hg.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(rm);function Cb(t){rm.call(this),this.b=t,this.a={}}nm(Cb,rm);var Sb=[];function Eb(t,e,n,r){Array.isArray(n)||(n&&(Sb[0]=n.toString()),n=Sb);for(var i=0;i<n.length;i++){var o=Ym(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Tb(t){vm(t.a,(function(t,e){this.a.hasOwnProperty(e)&&Zm(t)}),t),t.a={}}function Ib(){this.a=!0}function xb(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return ub(n)}catch(s){return e}}(t,n)+(r?" "+r:"")}))}Cb.prototype.G=function(){Cb.X.G.call(this),Tb(this)},Cb.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ib.prototype.info=function(){};var Nb={},Ab=null;function jb(){return Ab=Ab||new ob}function Pb(t){Fm.call(this,Nb.Fa,t)}function Rb(t){var e=jb();ab(e,new Pb(e,t))}function Db(t,e){Fm.call(this,Nb.STAT_EVENT,t),this.stat=e}function Lb(t){var e=jb();ab(e,new Db(e,t))}function Mb(t){Fm.call(this,Nb.Ga,t)}function Fb(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Hg.setTimeout((function(){t()}),e)}Nb.Fa="serverreachability",nm(Pb,Fm),Nb.STAT_EVENT="statevent",nm(Db,Fm),Nb.Ga="timingevent",nm(Mb,Fm);var Ub={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},qb={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Vb(){}function zb(){}Vb.prototype.a=null;var Bb,Wb={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Hb(){Fm.call(this,"d")}function Kb(){Fm.call(this,"c")}function Gb(){}function Jb(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Cb(this),this.P=Qb,this.R=new bb(t=Sm?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}nm(Hb,Fm),nm(Kb,Fm),nm(Gb,Vb),Bb=new Gb;var Qb=45e3,Yb={},Xb={};function Zb(t,e,n){t.H=1,t.i=__(p_(e)),t.j=n,t.I=!0,$b(t,null)}function $b(t,e){t.u=em(),n_(t),t.l=p_(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),P_(n.b,"t",r),t.D=0,t.a=Tw(t.g,t.g.C?e:null),0<t.O&&(t.F=new Ob($g(t.Ca,t,t.a),t.O)),Eb(t.J,t.a,"readystatechange",t.Xa),e=t.B?ym(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Rb(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");a=2<=h.length&&"type"==h[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function t_(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=e_(t,n);if(i==Xb){4==e&&(t.h=4,Lb(14),r=!1),xb(t.c,t.f,null,"[Incomplete Response]");break}if(i==Yb){t.h=4,Lb(15),xb(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}xb(t.c,t.f,i,null),s_(t,i)}4==e&&0==n.length&&(t.h=1,Lb(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),bw(e),e.F=!0,Lb(11))):(xb(t.c,t.f,n,"[Invalid Chunked Response]"),a_(t),o_(t))}function e_(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Xb:(n=Number(e.substring(n,r)),isNaN(n)?Yb:(r+=1)+n>e.length?Xb:(e=e.substr(r,n),t.D=r+n,e))}function n_(t){t.T=em()+t.P,r_(t,t.P)}function r_(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Fb($g(t.Va,t),e)}function i_(t){t.o&&(Hg.clearTimeout(t.o),t.o=null)}function o_(t){0==t.g.v||t.A||kw(t.g,t)}function a_(t){i_(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,_b(t.R),Tb(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function s_(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||q_(n.b,t)))if(n.I=t.N,!t.C&&q_(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(iA){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;ww(n),lw(n)}mw(n),Lb(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Fb($g(n.Sa,n),6e3));if(1>=U_(n.b)&&n.ea){try{n.ea()}catch(iA){}n.ea=void 0}}else Cw(n,11)}else if((t.C||n.a==t)&&ww(n),!um(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var a=i[4];null!=a&&(n.pa=a,n.c.info("SVER="+n.pa));var s=i[5];if(null!=s&&"number"==typeof s&&0<s){var u=1.5*s;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(hm(l,"spdy")||hm(l,"quic")||hm(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(V_(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,b_(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=em()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=Ew(u,u.C?u.ga:null,u.fa),d.C){z_(u.b,d);var p=d,v=u.D;v&&p.setTimeout(v),p.o&&(i_(p),n_(p)),u.a=d}else gw(u);0<n.g.length&&dw(n)}else"stop"!=i[0]&&"close"!=i[0]||Cw(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Cw(n,7):cw(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Rb(4)}catch(iA){}}function u_(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Gg(t)||"string"==typeof t)om(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Gg(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Gg(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function c_(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof c_)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function l_(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];h_(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)h_(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function h_(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(zg=Jb.prototype).setTimeout=function(t){this.P=t},zg.Xa=function(t){t=t.target;var e=this.F;e&&3==ow(t)?e.f():this.Ca(t)},zg.Ca=function(t){try{if(t==this.a)t:{var e=ow(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Sm&&!this.a.$())){this.A||4!=e||7==n||Rb(8==n||0>=r?3:2),i_(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,a){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var a,s=this.a;if((a=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!um(a)){var u=a;break e}}u=null}if(!u){this.b=!1,this.h=3,Lb(12),a_(this),o_(this);break t}xb(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,s_(this,u)}this.I?(t_(this,e,o),Sm&&this.b&&3==e&&(Eb(this.J,this.R,"tick",this.Wa),this.R.start())):(xb(this.c,this.f,o,null),s_(this,o)),4==e&&a_(this),this.b&&!this.A&&(4==e?kw(this.g,this):(this.b=!1,n_(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Lb(12)):(this.h=0,Lb(13)),a_(this),o_(this)}}}catch(c){}},zg.Wa=function(){if(this.a){var t=ow(this.a),e=this.a.$();this.D<e.length&&(i_(this),t_(this,t,e),this.b&&4!=t&&n_(this))}},zg.cancel=function(){this.A=!0,a_(this)},zg.Va=function(){this.o=null;var t=em();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(Rb(3),Lb(17)),a_(this),this.h=2,o_(this)):r_(this,this.T-t)},(zg=c_.prototype).K=function(){l_(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},zg.L=function(){return l_(this),this.a.concat()},zg.get=function(t,e){return h_(this.b,t)?this.b[t]:e},zg.set=function(t,e){h_(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},zg.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var f_=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function d_(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof d_){this.a=void 0!==e?e:t.a,v_(this,t.f),this.j=t.j,y_(this,t.c),g_(this,t.h),this.g=t.g,e=t.b;var n=new x_;n.c=e.c,e.a&&(n.a=new c_(e.a),n.b=e.b),m_(this,n),this.i=t.i}else t&&(n=String(t).match(f_))?(this.a=!!e,v_(this,n[1]||"",!0),this.j=w_(n[2]||""),y_(this,n[3]||"",!0),g_(this,n[4]),this.g=w_(n[5]||"",!0),m_(this,n[6]||"",!0),this.i=w_(n[7]||"")):(this.a=!!e,this.b=new x_(null,this.a))}function p_(t){return new d_(t)}function v_(t,e,n){t.f=n?w_(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function y_(t,e,n){t.c=n?w_(e,!0):e}function g_(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function m_(t,e,n){e instanceof x_?(t.b=e,function(t,e){e&&!t.f&&(N_(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(A_(this,e),P_(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=k_(e,T_)),t.b=new x_(e,t.a))}function b_(t,e,n){t.b.set(e,n)}function __(t){return b_(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^em()).toString(36)),t}function w_(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function k_(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,O_),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function O_(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}d_.prototype.toString=function(){var t=[],e=this.f;e&&t.push(k_(e,C_,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(k_(e,C_,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(k_(n,"/"==n.charAt(0)?E_:S_,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",k_(n,I_)),t.join("")};var C_=/[#\/\?@]/g,S_=/[#\?:]/g,E_=/[#\?]/g,T_=/[#\?@]/g,I_=/#/g;function x_(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function N_(t){t.a||(t.a=new c_,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function A_(t,e){N_(t),e=R_(t,e),h_(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,h_((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&l_(t)))}function j_(t,e){return N_(t),e=R_(t,e),h_(t.a.b,e)}function P_(t,e,n){A_(t,e),0<n.length&&(t.c=null,t.a.set(R_(t,e),sm(n)),t.b+=n.length)}function R_(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(zg=x_.prototype).add=function(t,e){N_(this),this.c=null,t=R_(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},zg.forEach=function(t,e){N_(this),this.a.forEach((function(n,r){om(n,(function(n){t.call(e,n,r,this)}),this)}),this)},zg.L=function(){N_(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},zg.K=function(t){N_(this);var e=[];if("string"==typeof t)j_(this,t)&&(e=am(e,this.a.get(R_(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=am(e,t[n])}return e},zg.set=function(t,e){return N_(this),this.c=null,j_(this,t=R_(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},zg.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},zg.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var D_=function(t,e){this.b=t,this.a=e};function L_(t){this.g=t||M_,t=Hg.PerformanceNavigationTiming?0<(t=Hg.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Hg.ia&&Hg.ia.ya&&Hg.ia.ya()&&Hg.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var M_=10;function F_(t){return!!t.b||!!t.a&&t.a.size>=t.f}function U_(t){return t.b?1:t.a?t.a.size:0}function q_(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function V_(t,e){t.a?t.a.add(e):t.b=e}function z_(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function B_(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Vg(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return sm(t.c)}function W_(){}function H_(){this.a=new W_}function K_(t,e,n){var r=n||"";try{u_(t,(function(t,n){var i=t;Jg(t)&&(i=ub(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(VA){throw e.push(r+"type="+encodeURIComponent("_badmap")),VA}}function G_(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}L_.prototype.cancel=function(){var t,e;if(this.c=B_(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Vg(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},W_.prototype.stringify=function(t){return Hg.JSON.stringify(t,void 0)},W_.prototype.parse=function(t){return Hg.JSON.parse(t,void 0)};var J_=Hg.JSON.parse;function Q_(t){ob.call(this),this.headers=new c_,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Y_,this.D=this.F=!1}nm(Q_,ob);var Y_="",X_=/^https?$/i,Z_=["POST","PUT"];function $_(t){return"content-type"==t.toLowerCase()}function tw(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,ew(t),rw(t)}function ew(t){t.u||(t.u=!0,ab(t,"complete"),ab(t,"error"))}function nw(t){if(t.b&&void 0!==Wg&&(!t.s[1]||4!=ow(t)||2!=t.W()))if(t.l&&4==ow(t))wb(t.za,0,t);else if(ab(t,"readystatechange"),4==ow(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(f_)[1]||null;if(!o&&Hg.self&&Hg.self.location){var a=Hg.self.location.protocol;o=a.substr(0,a.length-1)}i=!X_.test(o?o.toLowerCase():"")}e=i}if(e)ab(t,"complete"),ab(t,"success");else{t.h=6;try{var s=2<ow(t)?t.a.statusText:""}catch(n){s=""}t.f=s+" ["+t.W()+"]",ew(t)}}finally{rw(t)}}}function rw(t,e){if(t.a){iw(t);var n=t.a,r=t.s[0]?Kg:null;t.a=null,t.s=null,e||ab(t,"ready");try{n.onreadystatechange=r}catch(VA){}}}function iw(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Hg.clearTimeout(t.m),t.m=null)}function ow(t){return t.a?t.a.readyState:0}function aw(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return vm(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):b_(t,e,n))}function sw(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function uw(t){this.pa=0,this.g=[],this.c=new Ib,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=sw("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=sw("baseRetryDelayMs",5e3,t),this.Ra=sw("retryDelaySeedMs",1e4,t),this.Ma=sw("forwardChannelMaxRetries",2,t),this.ma=sw("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new L_(t&&t.concurrentRequestLimit),this.ka=new H_,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function cw(t){if(hw(t),3==t.v){var e=t.R++,n=p_(t.B);b_(n,"SID",t.J),b_(n,"RID",e),b_(n,"TYPE","terminate"),vw(t,n),(e=new Jb(t,t.c,e,void 0)).H=2,e.i=__(p_(n)),n=!1,Hg.navigator&&Hg.navigator.sendBeacon&&(n=Hg.navigator.sendBeacon(e.i.toString(),"")),!n&&Hg.Image&&((new Image).src=e.i,n=!0),n||(e.a=Tw(e.g,null),e.a.ba(e.i)),e.u=em(),n_(e)}Sw(t)}function lw(t){t.a&&(bw(t),t.a.cancel(),t.a=null)}function hw(t){lw(t),t.j&&(Hg.clearTimeout(t.j),t.j=null),ww(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Hg.clearTimeout(t.h),t.h=null)}function fw(t,e){t.g.push(new D_(t.Oa++,e)),3==t.v&&dw(t)}function dw(t){F_(t.b)||t.h||(t.h=!0,vb(t.Ba,t),t.u=0)}function pw(t,e){var n;n=e?e.f:t.R++;var r=p_(t.B);b_(r,"SID",t.J),b_(r,"RID",n),b_(r,"AID",t.P),vw(t,r),t.i&&t.l&&aw(r,t.i,t.l),n=new Jb(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=yw(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),V_(t.b,n),Zb(n,r,e)}function vw(t,e){t.f&&u_({},(function(t,n){b_(e,n,t)}))}function yw(t,e,n){n=Math.min(t.g.length,n);var r=t.f?$g(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var a=["count="+n];-1==o?0<n?a.push("ofs="+(o=i[0].b)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{K_(l,a,"req"+c+"_")}catch(Lr){r&&r(l)}}if(s){r=a.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function gw(t){t.a||t.j||(t.T=1,vb(t.Aa,t),t.o=0)}function mw(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Fb($g(t.Aa,t),Ow(t,t.o)),t.o++,0))}function bw(t){null!=t.s&&(Hg.clearTimeout(t.s),t.s=null)}function _w(t){t.a=new Jb(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=p_(t.la);b_(e,"RID","rpc"),b_(e,"SID",t.J),b_(e,"CI",t.H?"0":"1"),b_(e,"AID",t.P),vw(t,e),b_(e,"TYPE","xmlhttp"),t.i&&t.l&&aw(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=__(p_(e)),n.j=null,n.I=!0,$b(n,t)}function ww(t){null!=t.m&&(Hg.clearTimeout(t.m),t.m=null)}function kw(t,e){var n=null;if(t.a==e){ww(t),bw(t),t.a=null;var r=2}else{if(!q_(t.b,e))return;n=e.s,z_(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=em()-e.u;var i=t.u;ab(r=jb(),new Mb(r,n,e,i)),dw(t)}else gw(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(U_(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Fb($g(t.Ba,t,e),Ow(t,t.u)),t.u++,0)))}(t,e)||2==r&&mw(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Cw(t,5);break;case 4:Cw(t,10);break;case 3:Cw(t,6);break;default:Cw(t,2)}}function Ow(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Cw(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=$g(t.Ya,t);n||(n=new d_("//www.google.com/images/cleardot.gif"),Hg.location&&"http"==Hg.location.protocol||v_(n,"https"),__(n)),function(t,e){var n=new Ib;if(Hg.Image){var r=new Image;r.onload=tm(G_,n,r,"TestLoadImage: loaded",!0,e),r.onerror=tm(G_,n,r,"TestLoadImage: error",!1,e),r.onabort=tm(G_,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=tm(G_,n,r,"TestLoadImage: timeout",!1,e),Hg.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Lb(2);t.v=0,t.f&&t.f.ra(e),Sw(t),hw(t)}function Sw(t){t.v=0,t.I=-1,t.f&&(0==B_(t.b).length&&0==t.g.length||(t.b.c.length=0,sm(t.g),t.g.length=0),t.f.qa())}function Ew(t,e,n){var r=function(t){return t instanceof d_?p_(t):new d_(t,void 0)}(n);if(""!=r.c)e&&y_(r,e+"."+r.c),g_(r,r.h);else{var i=Hg.location;r=function(t,e,n,r){var i=new d_(null,void 0);return t&&v_(i,t),e&&y_(i,e),n&&g_(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&vm(t.V,(function(t,e){b_(r,e,t)})),n=t.na,(e=t.A)&&n&&b_(r,e,n),b_(r,"VER",t.ha),vw(t,r),r}function Tw(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Q_(t.Na)).F=t.C,e}function Iw(){}function xw(){if(Om&&!(10<=Number(Rm)))throw Error("Environmental error: no available transport.")}function Nw(t,e){ob.call(this),this.a=new uw(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!um(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!um(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Pw(this)}function Aw(t){Hb.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function jw(){Kb.call(this),this.status=1}function Pw(t){this.a=t}(zg=Q_.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:Bb),this.a.onreadystatechange=$g(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void tw(this,o)}t=n||"";var i=new c_(this.headers);r&&u_(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=$_,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Hg.FormData&&t instanceof Hg.FormData,!(0<=im(Z_,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{iw(this),0<this.o&&((this.D=function(t){return Om&&Pm(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=$g(this.xa,this)):this.m=wb(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){tw(this,o)}},zg.xa=function(){void 0!==Wg&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,ab(this,"timeout"),this.abort(8))},zg.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,ab(this,"complete"),ab(this,"abort"),rw(this))},zg.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),rw(this,!0)),Q_.X.G.call(this)},zg.za=function(){this.j||(this.A||this.l||this.g?nw(this):this.Ua())},zg.Ua=function(){nw(this)},zg.W=function(){try{return 2<ow(this)?this.a.status:-1}catch(wm){return-1}},zg.$=function(){try{return this.a?this.a.responseText:""}catch(wm){return""}},zg.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),J_(e)}},zg.ua=function(){return this.h},zg.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(zg=uw.prototype).ha=8,zg.v=1,zg.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Jb(this,this.c,t,void 0),r=this.l;if(this.O&&(r?mm(r=ym(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=yw(this,n,e),b_(i=p_(this.B),"RID",t),b_(i,"CVER",22),this.A&&b_(i,"X-HTTP-Session-Id",this.A),vw(this,i),this.i&&r&&aw(i,this.i,r),V_(this.b,n),this.Ia&&b_(i,"TYPE","init"),this.da?(b_(i,"$req",e),b_(i,"SID","null"),n.U=!0,Zb(n,i,null)):Zb(n,i,e),this.v=2}}else 3==this.v&&(t?pw(this,t):0==this.g.length||F_(this.b)||pw(this))},zg.Aa=function(){if(this.j=null,_w(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Fb($g(this.Ta,this),t)}},zg.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Lb(10),lw(this),_w(this))},zg.Sa=function(){null!=this.m&&(this.m=null,lw(this),mw(this),Lb(19))},zg.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Lb(2)):(this.c.info("Failed to ping google.com"),Lb(1))},(zg=Iw.prototype).ta=function(){},zg.sa=function(){},zg.ra=function(){},zg.qa=function(){},zg.Ja=function(){},xw.prototype.a=function(t,e){return new Nw(t,e)},nm(Nw,ob),Nw.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Lb(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Ew(t,null,t.fa),dw(t)},Nw.prototype.close=function(){cw(this.a)},Nw.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,fw(this.a,e)}else this.l?((e={}).__data__=ub(t),fw(this.a,e)):fw(this.a,t)},Nw.prototype.G=function(){this.a.f=null,delete this.f,cw(this.a),delete this.a,Nw.X.G.call(this)},nm(Aw,Hb),nm(jw,Kb),nm(Pw,Iw),Pw.prototype.ta=function(){ab(this.a,"a")},Pw.prototype.sa=function(t){ab(this.a,new Aw(t))},Pw.prototype.ra=function(t){ab(this.a,new jw(t))},Pw.prototype.qa=function(){ab(this.a,"b")},xw.prototype.createWebChannel=xw.prototype.a,Nw.prototype.send=Nw.prototype.h,Nw.prototype.open=Nw.prototype.g,Nw.prototype.close=Nw.prototype.close,Ub.NO_ERROR=0,Ub.TIMEOUT=8,Ub.HTTP_ERROR=6,qb.COMPLETE="complete",zb.EventType=Wb,Wb.OPEN="a",Wb.CLOSE="b",Wb.ERROR="c",Wb.MESSAGE="d",ob.prototype.listen=ob.prototype.va,Q_.prototype.listenOnce=Q_.prototype.wa,Q_.prototype.getLastError=Q_.prototype.Qa,Q_.prototype.getLastErrorCode=Q_.prototype.ua,Q_.prototype.getStatus=Q_.prototype.W,Q_.prototype.getResponseJson=Q_.prototype.Pa,Q_.prototype.getResponseText=Q_.prototype.$,Q_.prototype.send=Q_.prototype.ba;var Rw=Ub,Dw=qb,Lw=Nb,Mw=zb,Fw=Q_,Uw=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Uw.o=-1;var qw={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Vw=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(nl.c)(e,t),e}(Error),zw=new Ug.b("@firebase/firestore");function Bw(){return zw.logLevel}function Ww(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(zw.logLevel<=Ug.a.DEBUG){var r=e.map(Gw);zw.debug.apply(zw,Object(nl.g)(["Firestore (8.6.2): "+t],r))}}function Hw(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(zw.logLevel<=Ug.a.ERROR){var r=e.map(Gw);zw.error.apply(zw,Object(nl.g)(["Firestore (8.6.2): "+t],r))}}function Kw(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(zw.logLevel<=Ug.a.WARN){var r=e.map(Gw);zw.warn.apply(zw,Object(nl.g)(["Firestore (8.6.2): "+t],r))}}function Gw(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(VA){return t}}function Jw(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.6.2) INTERNAL ASSERTION FAILED: "+t;throw Hw(e),new Error(e)}function Qw(t,e){t||Jw()}function Yw(t,e){return t}function Xw(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Zw=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Xw(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function $w(t,e){return t<e?-1:t>e?1:0}function tk(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function ek(t){return t+"\0"}var nk=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Vw(qw.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Vw(qw.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Vw(qw.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Vw(qw.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?$w(this.nanoseconds,t.nanoseconds):$w(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),rk=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new nk(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function ik(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ok(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ak(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var sk=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Jw(),void 0===n?n=t.length-e:n>t.length-e&&Jw(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),uk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(nl.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new Vw(qw.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(sk),ck=/^[_a-zA-Z][_a-zA-Z0-9]*$/,lk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(nl.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return ck.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Vw(qw.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new Vw(qw.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Vw(qw.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new Vw(qw.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(sk),hk=function(){function t(t){this.fields=t,t.sort(lk.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return tk(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),fk=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return $w(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();fk.EMPTY_BYTE_STRING=new fk("");var dk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pk(t){if(Qw(!!t),"string"==typeof t){var e=0,n=dk.exec(t);if(Qw(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:vk(t.seconds),nanos:vk(t.nanos)}}function vk(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function yk(t){return"string"==typeof t?fk.fromBase64String(t):fk.fromUint8Array(t)}function gk(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function mk(t){var e=pk(t.mapValue.fields.__local_write_time__.timestampValue);return new nk(e.seconds,e.nanos)}function bk(t){return null==t}function _k(t){return 0===t&&1/t==-1/0}function wk(t){return"number"==typeof t&&Number.isInteger(t)&&!_k(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var kk=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(uk.fromString(e))},t.fromName=function(e){return new t(uk.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===uk.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return uk.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new uk(e.slice()))},t}();function Ok(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?gk(t)?4:10:Jw()}function Ck(t,e){var n=Ok(t);if(n!==Ok(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return mk(t).isEqual(mk(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=pk(t.timestampValue),r=pk(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return yk(t.bytesValue).isEqual(yk(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return vk(t.geoPointValue.latitude)===vk(e.geoPointValue.latitude)&&vk(t.geoPointValue.longitude)===vk(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return vk(t.integerValue)===vk(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=vk(t.doubleValue),r=vk(e.doubleValue);return n===r?_k(n)===_k(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return tk(t.arrayValue.values||[],e.arrayValue.values||[],Ck);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(ik(n)!==ik(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ck(n[i],r[i])))return!1;return!0}(t,e);default:return Jw()}}function Sk(t,e){return void 0!==(t.values||[]).find((function(t){return Ck(t,e)}))}function Ek(t,e){var n=Ok(t),r=Ok(e);if(n!==r)return $w(n,r);switch(n){case 0:return 0;case 1:return $w(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=vk(t.integerValue||t.doubleValue),r=vk(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Tk(t.timestampValue,e.timestampValue);case 4:return Tk(mk(t),mk(e));case 5:return $w(t.stringValue,e.stringValue);case 6:return function(t,e){var n=yk(t),r=yk(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=$w(n[i],r[i]);if(0!==o)return o}return $w(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=$w(vk(t.latitude),vk(e.latitude));return 0!==n?n:$w(vk(t.longitude),vk(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Ek(n[i],r[i]);if(o)return o}return $w(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=$w(r[a],o[a]);if(0!==s)return s;var u=Ek(n[r[a]],i[o[a]]);if(0!==u)return u}return $w(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Jw()}}function Tk(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return $w(t,e);var n=pk(t),r=pk(e),i=$w(n.seconds,r.seconds);return 0!==i?i:$w(n.nanos,r.nanos)}function Ik(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=pk(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?yk(e.bytesValue).toBase64():"referenceValue"in e?kk.fromName(e.referenceValue).toString():"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++)r?r=!1:n+=",",n+=t(o[i]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var a=o[i];r?r=!1:n+=",",n+=a+":"+t(e.fields[a])}return n+"}"}(e.mapValue):Jw();var n}(t)}function xk(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Nk(t){return!!t&&"integerValue"in t}function Ak(t){return!!t&&"arrayValue"in t}function jk(t){return!!t&&"nullValue"in t}function Pk(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Rk(t){return!!t&&"mapValue"in t}var Dk=function(){function t(t){this.overlayMap=new Map,this.partialValue=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){return t.extractNestedValue(this.buildProto(),e)},t.prototype.toProto=function(){return this.field(lk.emptyPath())},t.prototype.set=function(t,e){this.setOverlay(t,e)},t.prototype.setAll=function(t){var e=this;t.forEach((function(t,n){t?e.set(n,t):e.delete(n)}))},t.prototype.delete=function(t){this.setOverlay(t,null)},t.prototype.isEqual=function(t){return Ck(this.buildProto(),t.buildProto())},t.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Ok(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.applyOverlay=function(e,n){var r=this,i=!1,o=t.extractNestedValue(this.partialValue,e),a=Rk(o)?Object.assign({},o.mapValue.fields):{};return n.forEach((function(t,n){if(t instanceof Map){var o=r.applyOverlay(e.child(n),t);null!=o&&(a[n]=o,i=!0)}else null!==t?(a[n]=t,i=!0):a.hasOwnProperty(n)&&(delete a[n],i=!0)})),i?{mapValue:{fields:a}}:null},t.prototype.buildProto=function(){var t=this.applyOverlay(lk.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},t.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!Rk(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.clone=function(){return new t(this.buildProto())},t}();function Lk(t){var e=[];return ok(t.fields||{},(function(t,n){var r=new lk([t]);if(Rk(n)){var i=Lk(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++)e.push(r.child(a[o]))}else e.push(r)})),new hk(e)}var Mk=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,rk.min(),Dk.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Dk.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Dk.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Dk.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Dk.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Fk=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};function Uk(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new Fk(t,e,n,r,i,o,a)}function qk(t){var e=Yw(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Ik(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),bk(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=$k(e.startAt)),e.endAt&&(n+="|ub:",n+=$k(e.endAt)),e.h=n}return e.h}function Vk(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!eO(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Ck(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!rO(t.startAt,e.startAt)&&rO(t.endAt,e.endAt)}function zk(t){return kk.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Bk=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(nl.c)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Wk(t,n,r):"array-contains"===n?new Jk(t,r):"in"===n?new Qk(t,r):"not-in"===n?new Yk(t,r):"array-contains-any"===n?new Xk(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Hk(t,n):new Kk(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Ek(e,this.value)):null!==e&&Ok(this.value)===Ok(e)&&this.m(Ek(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Jw()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Wk=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=kk.fromName(r.referenceValue),i}return Object(nl.c)(e,t),e.prototype.matches=function(t){var e=kk.comparator(t.key,this.key);return this.m(e)},e}(Bk),Hk=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Gk(0,n),r}return Object(nl.c)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Bk),Kk=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Gk(0,n),r}return Object(nl.c)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Bk);function Gk(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return kk.fromName(t.referenceValue)}))}var Jk=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(nl.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Ak(e)&&Sk(e.arrayValue,this.value)},e}(Bk),Qk=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(nl.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Sk(this.value.arrayValue,e)},e}(Bk),Yk=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(nl.c)(e,t),e.prototype.matches=function(t){if(Sk(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Sk(this.value.arrayValue,e)},e}(Bk),Xk=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(nl.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Ak(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Sk(e.value.arrayValue,t)}))},e}(Bk),Zk=function(t,e){this.position=t,this.before=e};function $k(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Ik(t)})).join(",")}var tO=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function eO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function nO(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?kk.comparator(kk.fromName(a.referenceValue),n.key):Ek(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function rO(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Ck(t.position[n],e.position[n]))return!1;return!0}var iO=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null};function oO(t,e,n,r,i,o,a,s){return new iO(t,e,n,r,i,o,a,s)}function aO(t){return new iO(t)}function sO(t){return!bk(t.limit)&&"F"===t.limitType}function uO(t){return!bk(t.limit)&&"L"===t.limitType}function cO(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function lO(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function hO(t){return null!==t.collectionGroup}function fO(t){var e=Yw(t);if(null===e.p){e.p=[];var n=lO(e),r=cO(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new tO(n)),e.p.push(new tO(lk.keyField(),"asc"));else{for(var i=!1,o=0,a=e.explicitOrderBy;o<a.length;o++){var s=a[o];e.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new tO(lk.keyField(),u))}}}return e.p}function dO(t){var e=Yw(t);if(!e.T)if("F"===e.limitType)e.T=Uk(e.path,e.collectionGroup,fO(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=fO(e);r<i.length;r++){var o=i[r];n.push(new tO(o.field,"desc"===o.dir?"asc":"desc"))}var a=e.endAt?new Zk(e.endAt.position,!e.endAt.before):null,s=e.startAt?new Zk(e.startAt.position,!e.startAt.before):null;e.T=Uk(e.path,e.collectionGroup,n,e.filters,e.limit,a,s)}return e.T}function pO(t,e,n){return new iO(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function vO(t,e){return Vk(dO(t),dO(e))&&t.limitType===e.limitType}function yO(t){return qk(dO(t))+"|lt:"+t.limitType}function gO(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Ik(e.value);var e})).join(", ")+"]"),bk(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+$k(t.startAt)),t.endAt&&(e+=", endAt: "+$k(t.endAt)),"Target("+e+")"}(dO(t))+"; limitType="+t.limitType+")"}function mO(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):kk.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!nO(t.startAt,fO(t),e)||t.endAt&&nO(t.endAt,fO(t),e))}(t,e)}function bO(t){return function(e,n){for(var r=!1,i=0,o=fO(t);i<o.length;i++){var a=o[i],s=_O(a,e,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function _O(t,e,n){var r=t.field.isKeyField()?kk.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Ek(r,i):Jw()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Jw()}}function wO(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_k(e)?"-0":e}}function kO(t){return{integerValue:""+t}}function OO(t,e){return wk(e)?kO(e):wO(t,e)}var CO=function(){this._=void 0};function SO(t,e,n){return t instanceof IO?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof xO?NO(t,e):t instanceof AO?jO(t,e):function(t,e){var n=TO(t,e),r=RO(n)+RO(t.A);return Nk(n)&&Nk(t.A)?kO(r):wO(t.R,r)}(t,e)}function EO(t,e,n){return t instanceof xO?NO(t,e):t instanceof AO?jO(t,e):n}function TO(t,e){return t instanceof PO?Nk(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var IO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(nl.c)(e,t),e}(CO),xO=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(nl.c)(e,t),e}(CO);function NO(t,e){for(var n=DO(e),r=function(t){n.some((function(e){return Ck(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var AO=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(nl.c)(e,t),e}(CO);function jO(t,e){for(var n=DO(e),r=function(t){n=n.filter((function(e){return!Ck(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var PO=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(nl.c)(e,t),e}(CO);function RO(t){return vk(t.integerValue||t.doubleValue)}function DO(t){return Ak(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var LO=function(t,e){this.field=t,this.transform=e},MO=function(t,e){this.version=t,this.transformResults=e},FO=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function UO(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var qO=function(){};function VO(t,e,n){t instanceof KO?function(t,e,n){var r=t.value.clone(),i=QO(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof GO?function(t,e,n){if(UO(t.precondition,e)){var r=QO(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(JO(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function zO(t,e,n){t instanceof KO?function(t,e,n){if(UO(t.precondition,e)){var r=t.value.clone(),i=YO(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(HO(e),r).setHasLocalMutations()}}(t,e,n):t instanceof GO?function(t,e,n){if(UO(t.precondition,e)){var r=YO(t.fieldTransforms,n,e),i=e.data;i.setAll(JO(t)),i.setAll(r),e.convertToFoundDocument(HO(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){UO(t.precondition,e)&&e.convertToNoDocument(rk.min())}(t,e)}function BO(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e.data.field(o.field),s=TO(o.transform,a||null);null!=s&&(null==n&&(n=Dk.empty()),n.set(o.field,s))}return n||null}function WO(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&tk(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof xO&&e instanceof xO||t instanceof AO&&e instanceof AO?tk(t.elements,e.elements,Ck):t instanceof PO&&e instanceof PO?Ck(t.A,e.A):t instanceof IO&&e instanceof IO}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function HO(t){return t.isFoundDocument()?t.version:rk.min()}var KO=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(nl.c)(e,t),e}(qO),GO=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=t.call(this)||this).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return Object(nl.c)(e,t),e}(qO);function JO(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function QO(t,e,n){var r=new Map;Qw(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,EO(a,s,n[i]))}return r}function YO(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,SO(s,u,e))}return r}var XO,ZO,$O=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(nl.c)(e,t),e}(qO),tC=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(nl.c)(e,t),e}(qO),eC=function(t){this.count=t};function nC(t){switch(t){case qw.OK:return Jw();case qw.CANCELLED:case qw.UNKNOWN:case qw.DEADLINE_EXCEEDED:case qw.RESOURCE_EXHAUSTED:case qw.INTERNAL:case qw.UNAVAILABLE:case qw.UNAUTHENTICATED:return!1;case qw.INVALID_ARGUMENT:case qw.NOT_FOUND:case qw.ALREADY_EXISTS:case qw.PERMISSION_DENIED:case qw.FAILED_PRECONDITION:case qw.ABORTED:case qw.OUT_OF_RANGE:case qw.UNIMPLEMENTED:case qw.DATA_LOSS:return!0;default:return Jw()}}function rC(t){if(void 0===t)return Hw("GRPC error has no .code"),qw.UNKNOWN;switch(t){case XO.OK:return qw.OK;case XO.CANCELLED:return qw.CANCELLED;case XO.UNKNOWN:return qw.UNKNOWN;case XO.DEADLINE_EXCEEDED:return qw.DEADLINE_EXCEEDED;case XO.RESOURCE_EXHAUSTED:return qw.RESOURCE_EXHAUSTED;case XO.INTERNAL:return qw.INTERNAL;case XO.UNAVAILABLE:return qw.UNAVAILABLE;case XO.UNAUTHENTICATED:return qw.UNAUTHENTICATED;case XO.INVALID_ARGUMENT:return qw.INVALID_ARGUMENT;case XO.NOT_FOUND:return qw.NOT_FOUND;case XO.ALREADY_EXISTS:return qw.ALREADY_EXISTS;case XO.PERMISSION_DENIED:return qw.PERMISSION_DENIED;case XO.FAILED_PRECONDITION:return qw.FAILED_PRECONDITION;case XO.ABORTED:return qw.ABORTED;case XO.OUT_OF_RANGE:return qw.OUT_OF_RANGE;case XO.UNIMPLEMENTED:return qw.UNIMPLEMENTED;case XO.DATA_LOSS:return qw.DATA_LOSS;default:return Jw()}}(ZO=XO||(XO={}))[ZO.OK=0]="OK",ZO[ZO.CANCELLED=1]="CANCELLED",ZO[ZO.UNKNOWN=2]="UNKNOWN",ZO[ZO.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ZO[ZO.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ZO[ZO.NOT_FOUND=5]="NOT_FOUND",ZO[ZO.ALREADY_EXISTS=6]="ALREADY_EXISTS",ZO[ZO.PERMISSION_DENIED=7]="PERMISSION_DENIED",ZO[ZO.UNAUTHENTICATED=16]="UNAUTHENTICATED",ZO[ZO.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ZO[ZO.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ZO[ZO.ABORTED=10]="ABORTED",ZO[ZO.OUT_OF_RANGE=11]="OUT_OF_RANGE",ZO[ZO.UNIMPLEMENTED=12]="UNIMPLEMENTED",ZO[ZO.INTERNAL=13]="INTERNAL",ZO[ZO.UNAVAILABLE=14]="UNAVAILABLE",ZO[ZO.DATA_LOSS=15]="DATA_LOSS";var iC=function(){function t(t,e){this.comparator=t,this.root=e||aC.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,aC.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,aC.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new oC(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new oC(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new oC(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new oC(this.root,t,this.comparator,!0)},t}(),oC=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),aC=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Jw();if(this.right.isRed())throw Jw();var t=this.left.check();if(t!==this.right.check())throw Jw();return t+(this.isRed()?0:1)},t}();aC.EMPTY=null,aC.RED=!0,aC.BLACK=!1,aC.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Jw()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Jw()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Jw()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Jw()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Jw()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new aC(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var sC=function(){function t(t){this.comparator=t,this.data=new iC(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new uC(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new uC(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),uC=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),cC=new iC(kk.comparator);function lC(){return cC}var hC=new iC(kk.comparator);function fC(){return hC}var dC=new iC(kk.comparator);function pC(){return dC}var vC=new sC(kk.comparator);function yC(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=vC,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var gC=new sC($w);function mC(){return gC}var bC=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,_C.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(rk.min(),r,mC(),lC(),yC())},t}(),_C=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(fk.EMPTY_BYTE_STRING,n,yC(),yC(),yC())},t}(),wC=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},kC=function(t,e){this.targetId=t,this.V=e},OC=function(t,e,n,r){void 0===n&&(n=fk.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},CC=function(){function t(){this.S=0,this.D=TC(),this.C=fk.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.$=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=yC(),e=yC(),n=yC();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Jw()}})),new _C(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=TC()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),SC=function(){function t(t){this.W=t,this.G=new Map,this.H=lC(),this.J=EC(),this.Y=new sC($w)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.$(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.$(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.$(t.resumeToken));break;default:Jw()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(zk(i))if(0===n){var o=new kk(i.path);this.tt(e,o,Mk.newNoDocument(o,rk.min()))}else Qw(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.at=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&zk(o.target)){var a=new kk(o.target.path);null!==e.H.get(a)||e.ut(i,a)||e.tt(i,a,Mk.newNoDocument(a,t))}r.O&&(n.set(i,r.M()),r.L())}}));var r=yC();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new bC(t,n,this.Y,this.H,r);return this.H=lC(),this.J=EC(),this.Y=new sC($w),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.ut(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.ut(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new CC,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new sC($w),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Ww("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new CC),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.ut=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function EC(){return new iC(kk.comparator)}function TC(){return new iC(kk.comparator)}var IC={asc:"ASCENDING",desc:"DESCENDING"},xC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},NC=function(t,e){this.databaseId=t,this.I=e};function AC(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function jC(t,e){return t.I?e.toBase64():e.toUint8Array()}function PC(t,e){return AC(t,e.toTimestamp())}function RC(t){return Qw(!!t),rk.fromTimestamp(function(t){var e=pk(t);return new nk(e.seconds,e.nanos)}(t))}function DC(t,e){return function(t){return new uk(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function LC(t){var e=uk.fromString(t);return Qw(oS(e)),e}function MC(t,e){return DC(t.databaseId,e.path)}function FC(t,e){var n=LC(e);if(n.get(1)!==t.databaseId.projectId)throw new Vw(qw.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Vw(qw.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new kk(zC(n))}function UC(t,e){return DC(t.databaseId,e)}function qC(t){var e=LC(t);return 4===e.length?uk.emptyPath():zC(e)}function VC(t){return new uk(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function zC(t){return Qw(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function BC(t,e,n){return{name:MC(t,e),fields:n.toProto().mapValue.fields}}function WC(t,e,n){var r=FC(t,e.name),i=RC(e.updateTime),o=new Dk({mapValue:{fields:e.fields}}),a=Mk.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function HC(t,e){var n;if(e instanceof KO)n={update:BC(t,e.key,e.value)};else if(e instanceof $O)n={delete:MC(t,e.key)};else if(e instanceof GO)n={update:BC(t,e.key,e.data),updateMask:iS(e.fieldMask)};else{if(!(e instanceof tC))return Jw();n={verify:MC(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof IO)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof xO)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof AO)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof PO)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Jw()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:PC(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Jw()}(t,e.precondition)),n}function KC(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?FO.updateTime(RC(t.updateTime)):void 0!==t.exists?FO.exists(t.exists):FO.none()}(e.currentDocument):FO.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;"setToServerValue"in e?(Qw("REQUEST_TIME"===e.setToServerValue),n=new IO):"appendMissingElements"in e?n=new xO(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new AO(e.removeAllFromArray.values||[]):"increment"in e?n=new PO(t,e.increment):Jw();var r=lk.fromServerFormat(e.fieldPath);return new LO(r,n)}(t,e)})):[];if(e.update){var i=FC(t,e.update.name),o=new Dk({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){return new hk((t.fieldPaths||[]).map((function(t){return lk.fromServerFormat(t)})))}(e.updateMask);return new GO(i,o,a,n,r)}return new KO(i,o,n,r)}if(e.delete){var s=FC(t,e.delete);return new $O(s,n)}if(e.verify){var u=FC(t,e.verify);return new tC(u,n)}return Jw()}function GC(t,e){return{documents:[UC(t,e.path)]}}function JC(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=UC(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=UC(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Pk(t.value))return{unaryFilter:{field:tS(t.field),op:"IS_NAN"}};if(jk(t.value))return{unaryFilter:{field:tS(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Pk(t.value))return{unaryFilter:{field:tS(t.field),op:"IS_NOT_NAN"}};if(jk(t.value))return{unaryFilter:{field:tS(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tS(t.field),op:$C(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:tS(t.field),direction:ZC(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.I||bk(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=YC(e.startAt)),e.endAt&&(n.structuredQuery.endAt=YC(e.endAt)),n}function QC(t){var e=qC(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Qw(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=function t(e){return e?void 0!==e.unaryFilter?[rS(e)]:void 0!==e.fieldFilter?[nS(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):Jw():[]}(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return function(t){return new tO(eS(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return bk(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=XC(n.startAt));var l=null;return n.endAt&&(l=XC(n.endAt)),oO(e,i,s,a,u,"F",c,l)}function YC(t){return{before:t.before,values:t.position}}function XC(t){return new Zk(t.values||[],!!t.before)}function ZC(t){return IC[t]}function $C(t){return xC[t]}function tS(t){return{fieldPath:t.canonicalString()}}function eS(t){return lk.fromServerFormat(t.fieldPath)}function nS(t){return Bk.create(eS(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Jw()}}(t.fieldFilter.op),t.fieldFilter.value)}function rS(t){switch(t.unaryFilter.op){case"IS_NAN":var e=eS(t.unaryFilter.field);return Bk.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=eS(t.unaryFilter.field);return Bk.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=eS(t.unaryFilter.field);return Bk.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=eS(t.unaryFilter.field);return Bk.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Jw()}}function iS(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function oS(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function aS(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=uS(e)),e=sS(t.get(n),e);return uS(e)}function sS(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function uS(t){return t+"\x01\x01"}function cS(t){var e=t.length;if(Qw(e>=2),2===e)return Qw("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),uk.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("\x01",o);switch((a<0||a>n)&&Jw(),t.charAt(a+1)){case"\x01":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=t.substring(o,a),i+="\0";break;case"\x11":i+=t.substring(o,a+1);break;default:Jw()}o=a+2}return new uk(r)}var lS=function(t,e){this.seconds=t,this.nanoseconds=e},hS=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};hS.store="owner",hS.key="owner";var fS=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};fS.store="mutationQueues",fS.keyPath="userId";var dS=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};dS.store="mutations",dS.keyPath="batchId",dS.userMutationsIndex="userMutationsIndex",dS.userMutationsKeyPath=["userId","batchId"];var pS=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,aS(e)]},t.key=function(t,e,n){return[t,aS(e),n]},t}();pS.store="documentMutations",pS.PLACEHOLDER=new pS;var vS=function(t,e){this.path=t,this.readTime=e},yS=function(t,e){this.path=t,this.version=e},gS=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};gS.store="remoteDocuments",gS.readTimeIndex="readTimeIndex",gS.readTimeIndexPath="readTime",gS.collectionReadTimeIndex="collectionReadTimeIndex",gS.collectionReadTimeIndexPath=["parentPath","readTime"];var mS=function(t){this.byteSize=t};mS.store="remoteDocumentGlobal",mS.key="remoteDocumentGlobalKey";var bS=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};bS.store="targets",bS.keyPath="targetId",bS.queryTargetsIndexName="queryTargetsIndex",bS.queryTargetsKeyPath=["canonicalId","targetId"];var _S=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};_S.store="targetDocuments",_S.keyPath=["targetId","path"],_S.documentTargetsIndex="documentTargetsIndex",_S.documentTargetsKeyPath=["path","targetId"];var wS=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};wS.key="targetGlobalKey",wS.store="targetGlobal";var kS=function(t,e){this.collectionId=t,this.parent=e};kS.store="collectionParents",kS.keyPath=["collectionId","parent"];var OS=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};OS.store="clientMetadata",OS.keyPath="clientId";var CS=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};CS.store="bundles",CS.keyPath="bundleId";var SS=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};SS.store="namedQueries",SS.keyPath="name";var ES=Object(nl.g)(Object(nl.g)([],Object(nl.g)(Object(nl.g)([],Object(nl.g)(Object(nl.g)([],Object(nl.g)(Object(nl.g)([],[fS.store,dS.store,pS.store,gS.store,bS.store,hS.store,wS.store,_S.store]),[OS.store])),[mS.store])),[kS.store])),[CS.store,SS.store]),TS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",IS=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),xS=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},NS=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Jw(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),AS=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new xS,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new RS(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=US(e.target.error);n.ft.reject(new RS(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new RS(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Ww("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new LS(e)},t}(),jS=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Object(ay.p)())&&Hw("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Ww("SimpleDb","Removing database:",t),MS(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Object(ay.p)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Object(nl.b)(this,void 0,void 0,(function(){var e,n=this;return Object(nl.d)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Ww("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new RS(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Vw(qw.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new RS(t,n))},i.onupgradeneeded=function(t){Ww("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next((function(){Ww("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(nl.b)(this,void 0,void 0,(function(){var i,o,a,s,u;return Object(nl.d)(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,a=function(){var e,a,u,c,l;return Object(nl.d)(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,s.At(t)];case 2:return s.db=h.sent(),e=AS.open(s.db,t,i?"readonly":"readwrite",n),a=r(e).catch((function(t){return e.abort(t),NS.reject(t)})).toPromise(),u={},a.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(h.sent(),a),u)];case 4:return Ww("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),s.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},s=this,c.label=1;case 1:return[5,a()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),PS=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return MS(this.Pt.delete())},t}(),RS=function(t){function e(e,n){var r=this;return(r=t.call(this,qw.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(nl.c)(e,t),e}(Vw);function DS(t){return"IndexedDbTransactionError"===t.name}var LS=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Ww("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Ww("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),MS(n)},t.prototype.add=function(t){return Ww("SimpleDb","ADD",this.store.name,t,t),MS(this.store.add(t))},t.prototype.get=function(t){var e=this;return MS(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Ww("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Ww("SimpleDb","DELETE",this.store.name,t),MS(this.store.delete(t))},t.prototype.count=function(){return Ww("SimpleDb","COUNT",this.store.name),MS(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ft=function(t,e){Ww("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.Ot=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.$t=function(t){var e=this.cursor({});return new NS((function(n,r){e.onerror=function(t){var e=US(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new NS((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new PS(i),a=e(i.primaryKey,i.value,o);if(a instanceof NS){var s=a.catch((function(t){return o.done(),NS.reject(t)}));n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return NS.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function MS(t){return new NS((function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=US(t.target.error);n(e)}}))}var FS=!1;function US(t){var e=jS._t(Object(ay.p)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Vw("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return FS||(FS=!0,setTimeout((function(){throw r}),0)),r}}return t}var qS=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(nl.c)(e,t),e}(IS);function VS(t,e){var n=Yw(t);return jS.It(n.Mt,e)}var zS=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&VO(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&zO(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&zO(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(rk.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),yC())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&tk(this.mutations,t.mutations,(function(t,e){return WO(t,e)}))&&tk(this.baseMutations,t.baseMutations,(function(t,e){return WO(t,e)}))},t}(),BS=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Qw(e.mutations.length===r.length);for(var i=pC(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),WS=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=rk.min()),void 0===o&&(o=rk.min()),void 0===a&&(a=fk.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),HS=function(t){this.Lt=t};function KS(t,e){if(e.document)return WC(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=kk.fromSegments(e.noDocument.path),r=XS(e.noDocument.readTime),i=Mk.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=kk.fromSegments(e.unknownDocument.path);return r=XS(e.unknownDocument.version),Mk.newUnknownDocument(o,r)}return Jw()}function GS(t,e,n){var r=JS(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:MC(t,e.key),fields:e.data.toProto().mapValue.fields,updateTime:AC(t,e.version.toTimestamp())}}(t.Lt,e),a=e.hasCommittedMutations;return new gS(null,null,o,a,r,i)}if(e.isNoDocument()){var s=e.key.path.toArray(),u=YS(e.version);return a=e.hasCommittedMutations,new gS(null,new vS(s,u),null,a,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=YS(e.version);return new gS(new yS(c,l),null,null,!0,r,i)}return Jw()}function JS(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function QS(t){var e=new nk(t[0],t[1]);return rk.fromTimestamp(e)}function YS(t){var e=t.toTimestamp();return new lS(e.seconds,e.nanoseconds)}function XS(t){var e=new nk(t.seconds,t.nanoseconds);return rk.fromTimestamp(e)}function ZS(t,e){for(var n=(e.baseMutations||[]).map((function(e){return KC(t.Lt,e)})),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map((function(e){return KC(t.Lt,e)})),o=nk.fromMillis(e.localWriteTimeMs);return new zS(e.batchId,o,n,i)}function $S(t){var e,n,r=XS(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?XS(t.lastLimboFreeSnapshotVersion):rk.min();return void 0!==t.query.documents?(Qw(1===(n=t.query).documents.length),e=dO(aO(qC(n.documents[0])))):e=function(t){return dO(QC(t))}(t.query),new WS(e,t.targetId,0,t.lastListenSequenceNumber,r,i,fk.fromBase64String(t.resumeToken))}function tE(t,e){var n,r=YS(e.snapshotVersion),i=YS(e.lastLimboFreeSnapshotVersion);n=zk(e.target)?GC(t.Lt,e.target):JC(t.Lt,e.target);var o=e.resumeToken.toBase64();return new bS(e.targetId,qk(e.target),r,o,e.sequenceNumber,i,n)}function eE(t){var e=QC({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?pO(e,e.limit,"L"):e}var nE=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return rE(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:XS(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return rE(t).put({bundleId:(n=e).id,createTime:YS(RC(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return iE(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:eE(e.bundledQuery),readTime:XS(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return iE(t).put(function(t){return{name:t.name,readTime:YS(RC(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function rE(t){return VS(t,CS.store)}function iE(t){return VS(t,SS.store)}var oE=function(){function t(){this.Bt=new aE}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),NS.resolve()},t.prototype.getCollectionParents=function(t,e){return NS.resolve(this.Bt.getEntries(e))},t}(),aE=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new sC(uk.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new sC(uk.comparator)).toArray()},t}(),sE=function(){function t(){this.qt=new aE}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:aS(i)};return uE(t).put(o)}return NS.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[ek(e),""],!1,!0);return uE(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(cS(o.parent))}return n}))},t}();function uE(t){return VS(t,kS.store)}var cE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},lE=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function hE(t,e,n){var r=t.store(dS.store),i=t.store(pS.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.Ot({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){Qw(1===s)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=pS.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return NS.waitFor(o).next((function(){return c}))}function fE(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Jw();e=t.noDocument}return JSON.stringify(e).length}lE.DEFAULT_COLLECTION_PERCENTILE=10,lE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,lE.DEFAULT=new lE(41943040,lE.DEFAULT_COLLECTION_PERCENTILE,lE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),lE.DISABLED=new lE(-1,0,0);var dE=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return Qw(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vE(t).Ot({index:dS.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=yE(t),a=vE(t);return a.add({}).next((function(s){Qw("number"==typeof s);for(var u=new zS(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return HC(t.Lt,e)})),i=n.mutations.map((function(e){return HC(t.Lt,e)}));return new dS(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new sC((function(t,e){return $w(t.canonicalString(),e.canonicalString())})),f=0,d=r;f<d.length;f++){var p=d[f],v=pS.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),l.push(a.put(c)),l.push(o.put(v,pS.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Qt[s]=u.keys()})),NS.waitFor(l).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return vE(t).get(e).next((function(t){return t?(Qw(t.userId===n.userId),ZS(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?NS.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return vE(t).Ot({index:dS.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Qw(e.batchId>=r),o=ZS(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return vE(t).Ot({index:dS.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return vE(t).Nt(dS.userMutationsIndex,n).next((function(t){return t.map((function(t){return ZS(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=pS.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return yE(t).Ot({range:i},(function(r,i,a){var s=r[0],u=r[2],c=cS(r[1]);if(s===n.userId&&e.path.isEqual(c))return vE(t).get(u).next((function(t){if(!t)throw Jw();Qw(t.userId===n.userId),o.push(ZS(n.R,t))}));a.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new sC($w),i=[];return e.forEach((function(e){var o=pS.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=yE(t).Ot({range:a},(function(t,i,o){var a=t[0],s=t[2],u=cS(t[1]);a===n.userId&&e.path.isEqual(u)?r=r.add(s):o.done()}));i.push(s)})),NS.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=pS.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new sC($w);return yE(t).Ot({range:a},(function(t,e,o){var a=t[0],u=t[2],c=cS(t[1]);a===n.userId&&r.isPrefixOf(c)?c.length===i&&(s=s.add(u)):o.done()})).next((function(){return n.Wt(t,s)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(vE(t).get(e).next((function(t){if(null===t)throw Jw();Qw(t.userId===n.userId),r.push(ZS(n.R,t))})))})),NS.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return hE(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),NS.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return NS.resolve();var r=IDBKeyRange.lowerBound(pS.prefixForUser(e.userId)),i=[];return yE(t).Ot({range:r},(function(t,n,r){if(t[0]===e.userId){var o=cS(t[1]);i.push(o)}else r.done()})).next((function(){Qw(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return pE(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return gE(t).get(this.userId).next((function(t){return t||new fS(e.userId,-1,"")}))},t}();function pE(t,e,n){var r=pS.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return yE(t).Ot({range:o,kt:!0},(function(t,n,r){t[0]===e&&t[1]===i&&(a=!0),r.done()})).next((function(){return a}))}function vE(t){return VS(t,dS.store)}function yE(t){return VS(t,pS.store)}function gE(t){return VS(t,fS.store)}var mE=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),bE=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new mE(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return rk.fromTimestamp(new nk(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return _E(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return Qw(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return _E(t).Ot((function(a,s){var u=$S(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return NS.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return _E(t).Ot((function(t,n){var r=$S(n);e(r)}))},t.prototype.Xt=function(t){return wE(t).get(wS.key).next((function(t){return Qw(null!==t),t}))},t.prototype.Zt=function(t,e){return wE(t).put(wS.key,e)},t.prototype.te=function(t,e){return _E(t).put(tE(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=qk(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return _E(t).Ot({range:r,index:bS.queryTargetsIndexName},(function(t,n,r){var o=$S(n);Vk(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=kE(t);return e.forEach((function(e){var a=aS(e.path);i.push(o.put(new _S(n,a))),i.push(r.referenceDelegate.addReference(t,n,e))})),NS.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=kE(t);return NS.forEach(e,(function(e){var o=aS(e.path);return NS.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=kE(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=kE(t),i=yC();return r.Ot({range:n,kt:!0},(function(t,e,n){var r=cS(t[1]),o=new kk(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=aS(e.path),r=IDBKeyRange.bound([n],[ek(n)],!1,!0),i=0;return kE(t).Ot({index:_S.documentTargetsIndex,kt:!0,range:r},(function(t,e,n){0!==t[0]&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return _E(t).get(e).next((function(t){return t?$S(t):null}))},t}();function _E(t){return VS(t,bS.store)}function wE(t){return VS(t,wS.store)}function kE(t){return VS(t,_S.store)}function OE(t){return Object(nl.b)(this,void 0,void 0,(function(){return Object(nl.d)(this,(function(e){if(t.code!==qw.FAILED_PRECONDITION||t.message!==TS)throw t;return Ww("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function CE(t,e){var n=t[1],r=e[1],i=$w(t[0],e[0]);return 0===i?$w(n,r):i}var SE=function(){function t(t){this.ne=t,this.buffer=new sC(CE),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();CE(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),EE=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ae(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ae=function(t){var e=this,n=this.oe?3e5:6e4;Ww("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return Object(nl.b)(e,void 0,void 0,(function(){var e;return Object(nl.d)(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return DS(e=n.sent())?(Ww("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,OE(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ae(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),TE=function(){function t(t,e){this.ue=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ue.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return NS.resolve(Uw.o);var r=new SE(e);return this.ue.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ue.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ue.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ue.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Ww("LruGarbageCollector","Garbage collection skipped; disabled"),NS.resolve(cE)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Ww("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),cE):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ue.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,a,s,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(Ww("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,s=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),Bw()<=Ug.a.DEBUG&&Ww("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+t+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-l)+"ms"),NS.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),IE=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new TE(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return xE(t,n)},t.prototype.removeReference=function(t,e,n){return xE(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return xE(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return gE(t).$t((function(r){return pE(t,r,e).next((function(t){return t&&(n=!0),NS.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(a,s){if(s<=e){var u=n._e(t,a).next((function(e){if(!e)return o++,r.getEntry(t,a).next((function(){return r.removeEntry(a),kE(t).delete([0,aS(a.path)])}))}));i.push(u)}})).next((function(){return NS.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return xE(t,e)},t.prototype.we=function(t,e){var n,r=kE(t),i=Uw.o;return r.Ot({index:_S.documentTargetsIndex},(function(t,r){var o=r.path,a=r.sequenceNumber;0===t[0]?(i!==Uw.o&&e(new kk(cS(n)),i),i=a,n=o):i=Uw.o})).next((function(){i!==Uw.o&&e(new kk(cS(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function xE(t,e){return kE(t).put(function(t,e){return new _S(0,aS(t.path),e)}(e,t.currentSequenceNumber))}var NE=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[1];if(this.equalsFn(o[0],t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){ok(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}}))},t.prototype.isEmpty=function(){return ak(this.inner)},t}(),AE=function(){function t(){this.changes=new NE((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:rk.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Mk.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?NS.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),jE=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return DE(t).put(LE(e),n)},t.prototype.removeEntry=function(t,e){var n=DE(t),r=LE(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return DE(t).get(LE(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return DE(t).get(LE(e)).next((function(t){return{document:n.ye(e,t),size:fE(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=lC();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=lC(),i=new iC(kk.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,fE(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return NS.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return DE(t).Ot({range:r},(function(t,e,r){for(var a=kk.fromSegments(t);o&&kk.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=lC(),o=e.path.length+1,a={};if(n.isEqual(rk.min())){var s=e.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.toArray(),c=JS(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=gS.collectionReadTimeIndex}return DE(t).Ot(a,(function(t,n,a){if(t.length===o){var s=KS(r.R,n);e.path.isPrefixOf(s.key.path)?mO(e,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new PE(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return RE(t).get(mS.key).next((function(t){return Qw(!!t),t}))},t.prototype.me=function(t,e){return RE(t).put(mS.key,e)},t.prototype.ye=function(t,e){if(e){var n=KS(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(rk.min()))return n}return Mk.newInvalidDocument(t)},t}(),PE=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new NE((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Object(nl.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new sC((function(t,e){return $w(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,a){var s=e.Ae.get(o);if(a.document.isValidDocument()){var u=GS(e.Ie.R,a.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=fE(u);r+=c-s,n.push(e.Ie.addEntry(t,o,u))}else if(r-=s,e.trackRemovals){var l=GS(e.Ie.R,Mk.newNoDocument(o,rk.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),NS.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(AE);function RE(t){return VS(t,mS.store)}function DE(t){return VS(t,gS.store)}function LE(t){return t.path.toArray()}var ME=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Qw(n<r&&n>=0&&r<=11);var o=new AS("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(hS.store)}(t),function(t){t.createObjectStore(fS.store,{keyPath:fS.keyPath}),t.createObjectStore(dS.store,{keyPath:dS.keyPath,autoIncrement:!0}).createIndex(dS.userMutationsIndex,dS.userMutationsKeyPath,{unique:!0}),t.createObjectStore(pS.store)}(t),FE(t),function(t){t.createObjectStore(gS.store)}(t));var a=NS.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(_S.store),t.deleteObjectStore(bS.store),t.deleteObjectStore(wS.store)}(t),FE(t)),a=a.next((function(){return function(t){var e=t.store(wS.store),n=new wS(0,0,rk.min().toTimestamp(),0);return e.put(wS.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(dS.store).Nt().next((function(n){t.deleteObjectStore(dS.store),t.createObjectStore(dS.store,{keyPath:dS.keyPath,autoIncrement:!0}).createIndex(dS.userMutationsIndex,dS.userMutationsKeyPath,{unique:!0});var r=e.store(dS.store),i=n.map((function(t){return r.put(t)}));return NS.waitFor(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(OS.store,{keyPath:OS.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.Re(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(mS.store)}(t),i.be(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ve(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(gS.store);e.createIndex(gS.readTimeIndex,gS.readTimeIndexPath,{unique:!1}),e.createIndex(gS.collectionReadTimeIndex,gS.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(t){t.createObjectStore(CS.store,{keyPath:CS.keyPath})}(t),function(t){t.createObjectStore(SS.store,{keyPath:SS.keyPath})}(t)}))),a},t.prototype.be=function(t){var e=0;return t.store(gS.store).Ot((function(t,n){e+=fE(n)})).next((function(){var n=new mS(e);return t.store(mS.store).put(mS.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(fS.store),r=t.store(dS.store);return n.Nt().next((function(n){return NS.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(dS.userMutationsIndex,i).next((function(r){return NS.forEach(r,(function(r){Qw(r.userId===n.userId);var i=ZS(e.R,r);return hE(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(_S.store),n=t.store(gS.store);return t.store(wS.store).get(wS.key).next((function(t){var r=[];return n.Ot((function(n,i){var o=new uk(n),a=function(t){return[0,aS(t)]}(o);r.push(e.get(a).next((function(n){return n?NS.resolve():function(n){return e.put(new _S(0,aS(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return NS.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(kS.store,{keyPath:kS.keyPath});var n=e.store(kS.store),r=new aE,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:aS(i)})}};return e.store(gS.store).Ot({kt:!0},(function(t,e){var n=new uk(t);return i(n.popLast())})).next((function(){return e.store(pS.store).Ot({kt:!0},(function(t,e){var n=cS(t[1]);return i(n.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(bS.store);return n.Ot((function(t,r){var i=$S(r),o=tE(e.R,i);return n.put(o)}))},t}();function FE(t){t.createObjectStore(_S.store,{keyPath:_S.keyPath}).createIndex(_S.documentTargetsIndex,_S.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(bS.store,{keyPath:bS.keyPath}).createIndex(bS.queryTargetsIndexName,bS.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(wS.store)}var UE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",qE=function(){function t(e,n,r,i,o,a,s,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Vw(qw.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new IE(this,i),this.Le=n+"main",this.R=new HS(u),this.Be=new jS(this.Le,11,new ME(this.R)),this.qe=new bE(this.referenceDelegate,this.R),this.Ut=new sE,this.Ue=function(t,e){return new jE(t,e)}(this.R,this.Ut),this.Qe=new nE,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&Hw("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Vw(qw.FAILED_PRECONDITION,UE);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new Uw(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(nl.b)(e,void 0,void 0,(function(){return Object(nl.d)(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return Object(nl.b)(e,void 0,void 0,(function(){return Object(nl.d)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return Object(nl.b)(e,void 0,void 0,(function(){return Object(nl.d)(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return zE(e).put(new OS(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(DS(e))return Ww("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Ww("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return VE(t).get(hS.key).next((function(t){return NS.resolve(e.tn(t))}))},t.prototype.en=function(t){return zE(t).delete(this.clientId)},t.prototype.nn=function(){return Object(nl.b)(this,void 0,void 0,(function(){var t,e,n,r=this;return Object(nl.d)(this,(function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=VS(t,OS.store);return e.Nt().next((function(t){var n=r.rn(t,18e5),i=t.filter((function(t){return-1===n.indexOf(t)}));return NS.forEach(i,(function(t){return e.delete(t.clientId)})).next((function(){return i}))}))})).catch((function(){return[]}))]);case 1:if(t=i.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)this.Ke.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?NS.resolve(!0):VE(t).get(hS.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Vw(qw.FAILED_PRECONDITION,UE);return!1}}return!(!e.networkEnabled||!e.inForeground)||zE(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))}))}))})).next((function(t){return e.isPrimary!==t&&Ww("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return Object(nl.b)(this,void 0,void 0,(function(){var t=this;return Object(nl.d)(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.an(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.un(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[hS.store,OS.store],(function(e){var n=new qS(e,Uw.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return zE(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return dE.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Ww("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",ES,(function(o){return r=new qS(o,i.Ne?i.Ne.next():Uw.o),"readwrite-primary"===e?i.Je(r).next((function(t){return!!t||i.Ye(r)})).next((function(e){if(!e)throw Hw("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable((function(){return i.Me(!1)})),new Vw(qw.FAILED_PRECONDITION,TS);return n(r)})).next((function(t){return i.Ze(r).next((function(){return t}))})):i.dn(r).next((function(){return n(r)}))})).then((function(t){return r.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return VE(t).get(hS.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Vw(qw.FAILED_PRECONDITION,UE)}))},t.prototype.Ze=function(t){var e=new hS(this.clientId,this.allowTabSynchronization,Date.now());return VE(t).put(hS.key,e)},t.yt=function(){return jS.yt()},t.prototype.Xe=function(t){var e=this,n=VE(t);return n.get(hS.key).next((function(t){return e.tn(t)?(Ww("IndexedDbPersistence","Releasing primary lease."),n.delete(hS.key)):NS.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Hw("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.un=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.an(),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return Ww("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Hw("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.an=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Hw("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function VE(t){return VS(t,hS.store)}function zE(t){return VS(t,OS.store)}function BE(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var WE=function(t,e){this.progress=t,this.wn=e},HE=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return kk.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):hO(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new kk(e)).next((function(t){var e=fC();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=fC();return this.Ut.getCollectionParents(t,i).next((function(a){return NS.forEach(a,(function(a){var s=function(t,e){return new iO(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,a.child(i));return r.An(t,s,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return o.Rn(t,i=e,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c);null==l&&(l=Mk.newInvalidDocument(c),r=r.insert(c,l)),zO(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){mO(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=yC(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof GO&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),KE=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=yC(),i=yC(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),GE=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(rk.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var a=i.Cn(e,o);return(sO(e)||uO(e))&&i.Nn(e.limitType,a,r,n)?i.Dn(t,e):(Bw()<=Ug.a.DEBUG&&Ww("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),gO(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return a.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new sC(bO(t));return e.forEach((function(e,r){mO(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Bw()<=Ug.a.DEBUG&&Ww("QueryEngine","Using full collection scan to execute query:",gO(e)),this.Sn.getDocumentsMatchingQuery(t,e,rk.min())},t}(),JE=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new iC($w),this.kn=new NE((function(t){return qk(t)}),Vk),this.On=rk.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new HE(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},t}();function QE(t,e,n,r){return new JE(t,e,n,r)}function YE(t,e){return Object(nl.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(nl.d)(this,(function(a){switch(a.label){case 0:return n=Yw(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(a){return o=a,r=n.persistence.getMutationQueue(e),i=new HE(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],a=yC(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)a=a.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var v=0,y=p.mutations;v<y.length;v++)a=a.add(y[v].key)}return i.pn(t,a).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function XE(t,e){var n=Yw(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),a=NS.resolve();return o.forEach((function(t){a=a.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);Qw(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),a.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function ZE(t){var e=Yw(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function $E(t,e){var n=Yw(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var a=[];e.targetChanges.forEach((function(e,o){var s=i.get(o);if(s){a.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Qw(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,e)&&a.push(n.qe.updateTargetData(t,c))}}}));var s=lC();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),a.push(tT(t,o,e.documentUpdates,r,void 0).next((function(t){s=t}))),!r.isEqual(rk.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));a.push(u)}return NS.waitFor(a).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,s)})).next((function(){return s}))})).then((function(t){return n.Fn=i,t}))}function tT(t,e,n,r,i){var o=yC();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=lC();return n.forEach((function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(rk.min())?(e.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(a,u),o=o.insert(n,a)):Ww("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function eT(t,e){var n=Yw(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function nT(t,e){var n=Yw(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?NS.resolve(r=i):n.qe.allocateTargetId(t).next((function(i){return r=new WS(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function rT(t,e,n){return Object(nl.b)(this,void 0,void 0,(function(){var r,i,o,a;return Object(nl.d)(this,(function(s){switch(s.label){case 0:r=Yw(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",s.label=1;case 1:return s.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if(!DS(a=s.sent()))throw a;return Ww("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}}))}))}function iT(t,e,n){var r=Yw(t),i=rk.min(),o=yC();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=Yw(t),i=r.kn.get(n);return void 0!==i?NS.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,dO(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:rk.min(),n?o:yC())})).next((function(t){return{documents:t,Bn:o}}))}))}function oT(t,e){var n=Yw(t),r=Yw(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function aT(t){var e=Yw(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=Yw(t),i=lC(),o=JS(n),a=DE(e),s=IDBKeyRange.lowerBound(o,!0);return a.Ot({index:gS.readTimeIndex,range:s},(function(t,e){var n=KS(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:QS(o)}}))}(e.$n,t,e.On)})).then((function(t){var n=t.wn;return e.On=t.readTime,n}))}function sT(t){return Object(nl.b)(this,void 0,void 0,(function(){var e;return Object(nl.d)(this,(function(n){return[2,(e=Yw(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=DE(t),n=rk.min();return e.Ot({index:gS.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=QS(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.On=t}))]}))}))}function uT(t,e,n,r){return Object(nl.b)(this,void 0,void 0,(function(){var i,o,a,s,u,c,l,h,f,d;return Object(nl.d)(this,(function(p){switch(p.label){case 0:for(i=Yw(t),o=yC(),a=lC(),s=pC(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),a=a.insert(h,e.Un(l)),s=s.insert(h,e.Qn(l.metadata.readTime));return f=i.$n.newChangeBuffer({trackRemovals:!0}),[4,nT(i,function(t){return dO(aO(uk.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return tT(t,f,a,rk.min(),s).next((function(e){return f.apply(t),e})).next((function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next((function(){return i.qe.addMatchingKeys(t,o,d.targetId)})).next((function(){return i.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}function cT(t,e,n){return void 0===n&&(n=yC()),Object(nl.b)(this,void 0,void 0,(function(){var r,i;return Object(nl.d)(this,(function(o){switch(o.label){case 0:return[4,nT(t,dO(eE(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Yw(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=RC(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var a=r.withResumeToken(fk.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(a.targetId,a),i.qe.updateTargetData(t,a).next((function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.Qe.saveNamedQuery(t,e)}))}))]}}))}))}var lT=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return NS.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:RC(n.createTime)}),NS.resolve()},t.prototype.getNamedQuery=function(t,e){return NS.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:eE(t.bundledQuery),readTime:RC(t.readTime)}}(e)),NS.resolve()},t}(),hT=function(){function t(){this.Wn=new sC(fT.Gn),this.zn=new sC(fT.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new fT(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new fT(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new kk(new uk([])),r=new fT(n,t),i=new fT(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new kk(new uk([])),n=new fT(e,t),r=new fT(e,t+1),i=yC();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new fT(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),fT=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return kk.comparator(t.key,e.key)||$w(t.ns,e.ns)},t.Hn=function(t,e){return $w(t.ns,e.ns)||kk.comparator(t.key,e.key)},t}(),dT=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new sC(fT.Gn)}return t.prototype.checkEmpty=function(t){return NS.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new zS(i,e,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new fT(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return NS.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return NS.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return NS.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return NS.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return NS.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new fT(e,0),i=new fT(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),NS.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new sC($w);return e.forEach((function(t){var e=new fT(t,0),i=new fT(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),NS.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;kk.isDocumentKey(i)||(i=i.child(""));var o=new fT(new kk(i),0),a=new sC($w);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.ns)),!0)}),o),NS.resolve(this.us(a))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Qw(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return NS.forEach(e.mutations,(function(i){var o=new fT(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new fT(e,0),r=this.rs.firstAfterOrEqual(n);return NS.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return NS.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),pT=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new iC(kk.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return NS.resolve(n?n.document.clone():Mk.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=lC();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Mk.newInvalidDocument(t))})),NS.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=lC(),i=new kk(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.value,u=s.document,c=s.readTime;if(!e.path.isPrefixOf(a.key.path))break;c.compareTo(n)<=0||mO(e,u)&&(r=r.insert(u.key,u.clone()))}return NS.resolve(r)},t.prototype.fs=function(t,e){return NS.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new vT(this)},t.prototype.getSize=function(t){return NS.resolve(this.size)},t}(),vT=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(nl.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),NS.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(AE),yT=function(){function t(t){this.persistence=t,this.ds=new NE((function(t){return qk(t)}),Vk),this.lastRemoteSnapshotVersion=rk.min(),this.highestTargetId=0,this.ws=0,this._s=new hT,this.targetCount=0,this.ys=mE.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),NS.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return NS.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return NS.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),NS.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),NS.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new mE(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,NS.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),NS.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,NS.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),NS.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return NS.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return NS.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),NS.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),NS.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),NS.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return NS.resolve(n)},t.prototype.containsKey=function(t,e){return NS.resolve(this._s.containsKey(e))},t}(),gT=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Uw(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new yT(this),this.Ut=new oE,this.Ue=function(t,e){return new pT(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new HS(e),this.Qe=new lT(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new dT(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;Ww("MemoryPersistence","Starting transaction:",t);var i=new mT(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return NS.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),mT=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(nl.c)(e,t),e}(IS),bT=function(){function t(t){this.persistence=t,this.As=new hT,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Jw()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),NS.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),NS.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),NS.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return NS.forEach(this.vs,(function(r){var i=kk.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return NS.or([function(){return NS.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),_T=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function wT(t,e){return"firestore_clients_"+t+"_"+e}function kT(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function OT(t,e){return"firestore_targets_"+t+"_"+e}_T.UNAUTHENTICATED=new _T(null),_T.GOOGLE_CREDENTIALS=new _T("google-credentials-uid"),_T.FIRST_PARTY=new _T("first-party-uid");var CT=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Vw(o.error.code,o.error.message)),a?new t(e,n,o.state,i):(Hw("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),ST=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Vw(i.error.code,i.error.message)),o?new t(e,i.state,r):(Hw("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),ET=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=mC(),a=0;i&&a<r.activeTargetIds.length;++a)i=wk(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(Hw("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),TT=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Hw("SharedClientState","Failed to parse online state: "+e),null)},t}(),IT=function(){function t(){this.activeTargetIds=mC()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),xT=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new iC($w),this.started=!1,this.Os=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=wT(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new IT),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(nl.b)(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,s,u,c,l=this;return Object(nl.d)(this,(function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(wT(this.persistenceKey,r)))&&(o=ET.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(a=this.storage.getItem(this.Us))&&(s=this.js(a))&&this.Ws(s),u=0,c=this.Os;u<c.length;u++)this.Fs(c[u]);return this.Os=[],this.window.addEventListener("pagehide",(function(){return l.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(OT(this.persistenceKey,t));if(n){var r=ST.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(OT(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Ww("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Ww("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Ww("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Ww("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void Hw("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return Object(nl.b)(e,void 0,void 0,(function(){var t,e,r,i,o,a;return Object(nl.d)(this,(function(s){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(a=function(t){var e=Uw.o;if(null!=t)try{var n=JSON.parse(t);Qw("number"==typeof n),e=n}catch(t){Hw("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Uw.o&&this.sequenceNumberHandler(a);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new CT(this.currentUser,t,e,n),i=kT(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=kT(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=OT(this.persistenceKey,t),i=new ST(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return ET.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return CT.Vs(new _T(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return ST.Vs(r,e)},t.prototype.js=function(t){return TT.Vs(t)},t.prototype.ii=function(t){return Object(nl.b)(this,void 0,void 0,(function(){return Object(nl.d)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ai(t.batchId,t.state,t.error)]:(Ww("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ui(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.syncEngine.hi(a,s).then((function(){n.ks=r}))},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=mC();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),NT=function(){function t(){this.li=new IT,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new IT,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),AT=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),jT=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Ww("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Ww("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),PT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},RT=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),DT=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(nl.c)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise((function(i,o){var a=new Fw;a.listenOnce(Dw.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case Rw.NO_ERROR:var e=a.getResponseJson();Ww("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Rw.TIMEOUT:Ww("Connection",'RPC "'+t+'" timed out'),o(new Vw(qw.DEADLINE_EXCEEDED,"Request time out"));break;case Rw.HTTP_ERROR:var n=a.getStatus();if(Ww("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(qw).indexOf(e)>=0?e:qw.UNKNOWN}(r.status);o(new Vw(s,r.message))}else o(new Vw(qw.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Vw(qw.UNAVAILABLE,"Connection failed."));break;default:Jw()}}finally{Ww("Connection",'RPC "'+t+'" completed.')}}));var s=JSON.stringify(r);a.send(e,"POST",s,n,15)}))},e.prototype.$i=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new xw,i=jb(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(o.initMessageHeaders,e),Object(ay.w)()||Object(ay.z)()||Object(ay.t)()||Object(ay.v)()||Object(ay.A)()||Object(ay.s)()||(o.httpHeadersOverwriteParam="$httpHeaders");var a=n.join("");Ww("Connection","Creating WebChannel: "+a,o);var s=r.createWebChannel(a,o),u=!1,c=!1,l=new RT({Ei:function(t){c?Ww("Connection","Not sending because WebChannel is closed:",t):(u||(Ww("Connection","Opening WebChannel transport."),s.open(),u=!0),Ww("Connection","WebChannel sending:",t),s.send(t))},Ti:function(){return s.close()}}),h=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return h(s,Mw.EventType.OPEN,(function(){c||Ww("Connection","WebChannel transport opened.")})),h(s,Mw.EventType.CLOSE,(function(){c||(c=!0,Ww("Connection","WebChannel transport closed"),l.Vi())})),h(s,Mw.EventType.ERROR,(function(t){c||(c=!0,Kw("Connection","WebChannel transport errored:",t),l.Vi(new Vw(qw.UNAVAILABLE,"The operation could not be completed")))})),h(s,Mw.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];Qw(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Ww("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=XO[t];if(void 0!==e)return rC(e)}(i),a=r.message;void 0===o&&(o=qw.INTERNAL,a="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new Vw(o,a)),s.close()}else Ww("Connection","WebChannel received:",n),l.Si(n)}})),h(i,Lw.STAT_EVENT,(function(t){10===t.stat?Ww("Connection","Detected buffering proxy"):11===t.stat&&Ww("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Pi()}),0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Ww("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then((function(t){return Ww("RestConnection","Received: ",t),t}),(function(e){throw Kw("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.6.2",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+PT[t]},t}());function LT(){return"undefined"!=typeof window?window:null}function MT(){return"undefined"!=typeof document?document:null}function FT(t){return new NC(t,!0)}var UT=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&Ww("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Qi=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),qT=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new UT(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(nl.b)(this,void 0,void 0,(function(){return Object(nl.d)(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ar(),this.stream.send(t)},t.prototype.rr=function(){return Object(nl.b)(this,void 0,void 0,(function(){return Object(nl.d)(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ar=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(nl.b)(this,void 0,void 0,(function(){return Object(nl.d)(this,(function(n){switch(n.label){case 0:return this.ar(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===qw.RESOURCE_EXHAUSTED?(Hw(e.toString()),Hw("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===qw.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ur(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ur=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new Vw(qw.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return Object(nl.b)(t,void 0,void 0,(function(){return Object(nl.d)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return Ww("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(Ww("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),VT=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return Object(nl.c)(e,t),e.prototype.wr=function(t){return this.Hi.$i("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Jw()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Qw(void 0===e||"string"==typeof e),fk.fromBase64String(e||"")):(Qw(void 0===e||e instanceof Uint8Array),fk.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(s=e.targetChange.cause)&&function(t){var e=void 0===t.code?qw.UNKNOWN:rC(t.code);return new Vw(e,t.message||"")}(s);n=new OC(r,i,o,a||null)}else if("documentChange"in e){i=FC(t,(r=e.documentChange).document.name),o=RC(r.document.updateTime);var s=new Dk({mapValue:{fields:r.document.fields}}),u=(a=Mk.newFoundDocument(i,o,s),r.targetIds||[]);n=new wC(u,r.removedTargetIds||[],a.key,a)}else if("documentDelete"in e)i=FC(t,(r=e.documentDelete).document),o=r.readTime?RC(r.readTime):rk.min(),s=Mk.newNoDocument(i,o),n=new wC([],a=r.removedTargetIds||[],s.key,s);else if("documentRemove"in e)i=FC(t,(r=e.documentRemove).document),n=new wC([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Jw();var c=e.filter;i=new eC(r=c.count||0),n=new kC(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return rk.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?rk.min():e.readTime?RC(e.readTime):rk.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=VC(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=zk(r)?{documents:GC(t,r)}:{query:JC(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=jC(t,e.resumeToken):e.snapshotVersion.compareTo(rk.min())>0&&(n.readTime=AC(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Jw()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=VC(this.R),e.removeTarget=t,this.cr(e)},e}(qT),zT=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return Object(nl.c)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ur=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.$i("Write",t)},e.prototype.onMessage=function(t){if(Qw(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Qw(void 0!==e),t.map((function(t){return function(t,e){var n=RC(t.updateTime?t.updateTime:e);return n.isEqual(rk.min())&&(n=RC(e)),new MO(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=RC(t.commitTime);return this.listener.Tr(n,e)}return Qw(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=VC(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return HC(e.R,t)}))};this.cr(n)},e}(qT),BT=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(nl.c)(e,t),e.prototype.br=function(){if(this.Rr)throw new Vw(qw.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===qw.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Vw(qw.UNKNOWN,t.toString())}))},e.prototype.Oi=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Oi(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===qw.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Vw(qw.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),WT=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Hw(e),this.Vr=!1):Ww("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),HT=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return Object(nl.b)(o,void 0,void 0,(function(){return Object(nl.d)(this,(function(t){switch(t.label){case 0:return tI(this)?(Ww("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(nl.b)(this,void 0,void 0,(function(){var e;return Object(nl.d)(this,(function(n){switch(n.label){case 0:return(e=Yw(t)).$r.add(4),[4,GT(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,KT(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new WT(n,r)};function KT(t){return Object(nl.b)(this,void 0,void 0,(function(){var e,n;return Object(nl.d)(this,(function(r){switch(r.label){case 0:if(!tI(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function GT(t){return Object(nl.b)(this,void 0,void 0,(function(){var e,n;return Object(nl.d)(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function JT(t,e){var n=Yw(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),$T(n)?ZT(n):vI(n).er()&&YT(n,e))}function QT(t,e){var n=Yw(t),r=vI(n);n.Or.delete(e),r.er()&&XT(n,e),0===n.Or.size&&(r.er()?r.ir():tI(n)&&n.Br.set("Unknown"))}function YT(t,e){t.qr.U(e.targetId),vI(t).mr(e)}function XT(t,e){t.qr.U(e),vI(t).yr(e)}function ZT(t){t.qr=new SC({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.Or.get(e)||null}}),vI(t).start(),t.Br.Sr()}function $T(t){return tI(t)&&!vI(t).tr()&&t.Or.size>0}function tI(t){return 0===Yw(t).$r.size}function eI(t){t.qr=void 0}function nI(t){return Object(nl.b)(this,void 0,void 0,(function(){return Object(nl.d)(this,(function(e){return t.Or.forEach((function(e,n){YT(t,e)})),[2]}))}))}function rI(t,e){return Object(nl.b)(this,void 0,void 0,(function(){return Object(nl.d)(this,(function(n){return eI(t),$T(t)?(t.Br.Nr(e),ZT(t)):t.Br.set("Unknown"),[2]}))}))}function iI(t,e,n){return Object(nl.b)(this,void 0,void 0,(function(){var r,i,o;return Object(nl.d)(this,(function(a){switch(a.label){case 0:if(t.Br.set("Online"),!(e instanceof OC&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return Object(nl.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(nl.d)(this,(function(a){switch(a.label){case 0:n=e.cause,r=0,i=e.targetIds,a.label=1;case 1:return r<i.length?t.Or.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:a.sent(),t.Or.delete(o),t.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),Ww("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,oI(t,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof wC?t.qr.X(e):e instanceof kC?t.qr.rt(e):t.qr.et(e),n.isEqual(rk.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,ZE(t.localStore)];case 8:return i=a.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.at(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Or.get(r);i&&t.Or.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.Or.get(e);if(n){t.Or.set(e,n.withResumeToken(fk.EMPTY_BYTE_STRING,n.snapshotVersion)),XT(t,e);var r=new WS(n.target,e,1,n.sequenceNumber);YT(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return Ww("RemoteStore","Failed to raise snapshot:",o=a.sent()),[4,oI(t,o)];case 12:return a.sent(),[3,13];case 13:return[2]}}))}))}function oI(t,e,n){return Object(nl.b)(this,void 0,void 0,(function(){var r=this;return Object(nl.d)(this,(function(i){switch(i.label){case 0:if(!DS(e))throw e;return t.$r.add(1),[4,GT(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return ZE(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return Object(nl.b)(r,void 0,void 0,(function(){return Object(nl.d)(this,(function(e){switch(e.label){case 0:return Ww("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.$r.delete(1),[4,KT(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function aI(t,e){return e().catch((function(n){return oI(t,n,e)}))}function sI(t){return Object(nl.b)(this,void 0,void 0,(function(){var e,n,r,i,o;return Object(nl.d)(this,(function(a){switch(a.label){case 0:e=Yw(t),n=yI(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,a.label=1;case 1:if(!function(t){return tI(t)&&t.kr.length<10}(e))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,eT(e.localStore,r)];case 3:return null===(i=a.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=yI(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=a.sent(),[4,oI(e,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return uI(e)&&cI(e),[2]}}))}))}function uI(t){return tI(t)&&!yI(t).tr()&&t.kr.length>0}function cI(t){yI(t).start()}function lI(t){return Object(nl.b)(this,void 0,void 0,(function(){return Object(nl.d)(this,(function(e){return yI(t).Ar(),[2]}))}))}function hI(t){return Object(nl.b)(this,void 0,void 0,(function(){var e,n,r;return Object(nl.d)(this,(function(i){for(e=yI(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]}))}))}function fI(t,e,n){return Object(nl.b)(this,void 0,void 0,(function(){var r,i;return Object(nl.d)(this,(function(o){switch(o.label){case 0:return r=t.kr.shift(),i=BS.from(r,e,n),[4,aI(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,sI(t)];case 2:return o.sent(),[2]}}))}))}function dI(t,e){return Object(nl.b)(this,void 0,void 0,(function(){return Object(nl.d)(this,(function(n){switch(n.label){case 0:return e&&yI(t).pr?[4,function(t,e){return Object(nl.b)(this,void 0,void 0,(function(){var n,r;return Object(nl.d)(this,(function(i){switch(i.label){case 0:return nC(r=e.code)&&r!==qw.ABORTED?(n=t.kr.shift(),yI(t).sr(),[4,aI(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,sI(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return uI(t)&&cI(t),[2]}}))}))}function pI(t,e){return Object(nl.b)(this,void 0,void 0,(function(){var n;return Object(nl.d)(this,(function(r){switch(r.label){case 0:return n=Yw(t),e?(n.$r.delete(2),[4,KT(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.$r.add(2),[4,GT(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function vI(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Yw(t);return r.br(),new VT(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:nI.bind(null,t),Ri:rI.bind(null,t),_r:iI.bind(null,t)}),t.Mr.push((function(n){return Object(nl.b)(e,void 0,void 0,(function(){return Object(nl.d)(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),$T(t)?ZT(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),eI(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function yI(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=Yw(t);return r.br(),new zT(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:lI.bind(null,t),Ri:dI.bind(null,t),Ir:hI.bind(null,t),Tr:fI.bind(null,t)}),t.Mr.push((function(n){return Object(nl.b)(e,void 0,void 0,(function(){return Object(nl.d)(this,(function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,sI(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(Ww("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Qr}var gI=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new xS,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Vw(qw.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function mI(t,e){if(Hw("AsyncQueue",e+": "+t),DS(t))return new Vw(qw.UNAVAILABLE,e+": "+t);throw t}var bI=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||kk.comparator(e.key,n.key)}:function(t,e){return kk.comparator(t.key,e.key)},this.keyedMap=fC(),this.sortedSet=new iC(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),_I=function(){function t(){this.Kr=new iC(kk.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):Jw():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),wI=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,bI.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&vO(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),kI=function(){this.Wr=void 0,this.listeners=[]},OI=function(){this.queries=new NE((function(t){return yO(t)}),vO),this.onlineState="Unknown",this.Gr=new Set};function CI(t,e){return Object(nl.b)(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return Object(nl.d)(this,(function(c){switch(c.label){case 0:if(n=Yw(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new kI),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Wr=c.sent(),[3,4];case 3:return s=c.sent(),u=mI(s,"Initialization of query '"+gO(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&II(n),[2]}}))}))}function SI(t,e){return Object(nl.b)(this,void 0,void 0,(function(){var n,r,i,o,a;return Object(nl.d)(this,(function(s){return n=Yw(t),i=!1,(o=n.queries.get(r=e.query))&&(a=o.listeners.indexOf(e))>=0&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function EI(t,e){for(var n=Yw(t),r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=n.queries.get(a.query);if(s){for(var u=0,c=s.listeners;u<c.length;u++)c[u].Hr(a)&&(r=!0);s.Wr=a}}r&&II(n)}function TI(t,e,n){var r=Yw(t),i=r.queries.get(e);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(e)}function II(t){t.Gr.forEach((function(t){t.next()}))}var xI=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new wI(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=wI.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),NI=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),AI=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return FC(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?WC(this.R,t.document,!1):Mk.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return RC(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new AI(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],l=(e.get(c)||yC()).add(a);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(nl.b)(this,void 0,void 0,(function(){var t,e,n,r,i;return Object(nl.d)(this,(function(o){switch(o.label){case 0:return[4,uT(this.localStore,new AI(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,cT(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new WE(Object.assign({},this.progress),t))]}}))}))}}();var jI=function(t){this.key=t},PI=function(t){this.key=t},RI=function(){function t(t,e){this.query=t,this.ao=e,this.uo=null,this.current=!1,this.ho=yC(),this.mutatedKeys=yC(),this.lo=bO(t),this.fo=new bI(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.ao},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new _I,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=sO(this.query)&&i.size===this.query.limit?i.last():null,c=uO(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=mO(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(a=a.add(h),o=d?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),sO(this.query)||uO(this.query))for(;a.size>this.query.limit;){var l=sO(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Jw()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var a=e?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.uo;return this.uo=s,0!==o.length||u?{snapshot:new wI(this.query,t.fo,i,o,t.mutatedKeys,0===s,u,!1),To:a}:{To:a}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new _I,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.ao.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.ao=e.ao.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.ao=e.ao.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=yC(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new PI(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new jI(t))})),n},t.prototype.Ao=function(t){this.ao=t.Bn,this.ho=yC();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return wI.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.uo)},t}(),DI=function(t,e,n){this.query=t,this.targetId=e,this.view=n},LI=function(t){this.key=t,this.bo=!1},MI=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new NE((function(t){return yO(t)}),vO),this.Vo=new Map,this.So=new Set,this.Do=new iC(kk.comparator),this.Co=new Map,this.No=new hT,this.xo={},this.Fo=new Map,this.ko=mE.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),t}();function FI(t,e){return Object(nl.b)(this,void 0,void 0,(function(){var n,r,i,o,a;return Object(nl.d)(this,(function(s){switch(s.label){case 0:return n=dx(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,nT(n.localStore,dO(e))];case 2:return o=s.sent(),a=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,UI(n,e,o.targetId,"current"===a)];case 3:r=s.sent(),n.isPrimaryClient&&JT(n.remoteStore,o),s.label=4;case 4:return[2,r]}}))}))}function UI(t,e,n,r){return Object(nl.b)(this,void 0,void 0,(function(){var i,o,a,s,u,c;return Object(nl.d)(this,(function(l){switch(l.label){case 0:return t.$o=function(e,n,r){return function(t,e,n,r){return Object(nl.b)(this,void 0,void 0,(function(){var i,o,a;return Object(nl.d)(this,(function(s){switch(s.label){case 0:return(i=e.view._o(n)).Nn?[4,iT(t.localStore,e.query,!1).then((function(t){return e.view._o(t.documents,i)}))]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),a=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(ZI(t,e.targetId,a.To),a.snapshot)]}}))}))}(t,e,n,r)},[4,iT(t.localStore,e,!0)];case 1:return i=l.sent(),o=new RI(e,i.Bn),a=o._o(i.documents),s=_C.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(a,t.isPrimaryClient,s),ZI(t,n,u.To),c=new DI(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}}))}))}function qI(t,e){return Object(nl.b)(this,void 0,void 0,(function(){var n,r,i;return Object(nl.d)(this,(function(o){switch(o.label){case 0:return n=Yw(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!vO(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,rT(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),QT(n.remoteStore,r.targetId),YI(n,r.targetId)})).catch(OE)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return YI(n,r.targetId),[4,rT(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function VI(t,e,n){return Object(nl.b)(this,void 0,void 0,(function(){var r,i,o,a;return Object(nl.d)(this,(function(s){switch(s.label){case 0:r=px(t),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,function(t,e){var n,r=Yw(t),i=nk.now(),o=e.reduce((function(t,e){return t.add(e.key)}),yC());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],l=BO(c,n.get(c.key));null!=l&&a.push(new GO(c.key,l,Lk(l.toProto().mapValue),FO.exists(!0)))}return r._n.addMutationBatch(t,i,a,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return i=s.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new iC($w)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,ex(r,i.changes)];case 3:return s.sent(),[4,sI(r.remoteStore)];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),a=mI(o,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}function zI(t,e){return Object(nl.b)(this,void 0,void 0,(function(){var n,r;return Object(nl.d)(this,(function(i){switch(i.label){case 0:n=Yw(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,$E(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(Qw(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Qw(r.bo):t.removedDocuments.size>0&&(Qw(r.bo),r.bo=!1))})),[4,ex(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,OE(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function BI(t,e,n){var r=Yw(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Yw(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&II(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function WI(t,e,n){return Object(nl.b)(this,void 0,void 0,(function(){var r,i,o,a,s,u;return Object(nl.d)(this,(function(c){switch(c.label){case 0:return(r=Yw(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(a=(a=new iC(kk.comparator)).insert(o,Mk.newNoDocument(o,rk.min())),s=yC().add(o),u=new bC(rk.min(),new Map,new sC($w),a,s),[4,zI(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),tx(r),[3,4];case 2:return[4,rT(r.localStore,e,!1).then((function(){return YI(r,e,n)})).catch(OE)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function HI(t,e){return Object(nl.b)(this,void 0,void 0,(function(){var n,r,i;return Object(nl.d)(this,(function(o){switch(o.label){case 0:n=Yw(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,XE(n.localStore,e)];case 2:return i=o.sent(),QI(n,r,null),JI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,ex(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,OE(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function KI(t,e,n){return Object(nl.b)(this,void 0,void 0,(function(){var r,i;return Object(nl.d)(this,(function(o){switch(o.label){case 0:r=Yw(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Yw(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return Qw(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),QI(r,e,n),JI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,ex(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,OE(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function GI(t,e){return Object(nl.b)(this,void 0,void 0,(function(){var n,r,i,o,a;return Object(nl.d)(this,(function(s){switch(s.label){case 0:tI((n=Yw(t)).remoteStore)||Ww("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,function(t){var e=Yw(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=s.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=s.sent(),a=mI(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}}))}))}function JI(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function QI(t,e,n){var r=Yw(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function YI(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||XI(t,e)}))}function XI(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(QT(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),tx(t))}function ZI(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof jI?(t.No.addReference(o.key,e),$I(t,o)):o instanceof PI?(Ww("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||XI(t,o.key)):Jw()}}function $I(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Ww("SyncEngine","New document in limbo: "+n),t.So.add(r),tx(t))}function tx(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new kk(uk.fromString(e)),r=t.ko.next();t.Co.set(r,new LI(n)),t.Do=t.Do.insert(n,r),JT(t.remoteStore,new WS(dO(aO(n.path)),r,2,Uw.o))}}function ex(t,e,n){return Object(nl.b)(this,void 0,void 0,(function(){var r,i,o,a;return Object(nl.d)(this,(function(s){switch(s.label){case 0:return r=Yw(t),i=[],o=[],a=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,s){a.push(r.$o(s,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=KE.Pn(s.targetId,t);o.push(e)}})))})),[4,Promise.all(a)]);case 1:return s.sent(),r.vo._r(i),[4,function(t,e){return Object(nl.b)(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return Object(nl.d)(this,(function(l){switch(l.label){case 0:n=Yw(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return NS.forEach(e,(function(e){return NS.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return NS.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return l.sent(),[3,4];case 3:if(!DS(r=l.sent()))throw r;return Ww("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=(a=o[i]).targetId,a.fromCache||(u=n.Fn.get(s),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(s,c));return[2]}}))}))}(r.localStore,o)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function nx(t,e){return Object(nl.b)(this,void 0,void 0,(function(){var n,r;return Object(nl.d)(this,(function(i){switch(i.label){case 0:return(n=Yw(t)).currentUser.isEqual(e)?[3,3]:(Ww("SyncEngine","User change. New user:",e.toKey()),[4,YE(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach((function(t){t.forEach((function(t){t.reject(new Vw(qw.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,ex(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function rx(t,e){var n=Yw(t),r=n.Co.get(e);if(r&&r.bo)return yC().add(r.key);var i=yC(),o=n.Vo.get(e);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=n.Po.get(s[a]);i=i.unionWith(u.view.wo)}return i}function ix(t,e){return Object(nl.b)(this,void 0,void 0,(function(){var n,r,i;return Object(nl.d)(this,(function(o){switch(o.label){case 0:return[4,iT((n=Yw(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&ZI(n,e.targetId,i.To),i)]}}))}))}function ox(t){return Object(nl.b)(this,void 0,void 0,(function(){var e;return Object(nl.d)(this,(function(n){return[2,aT((e=Yw(t)).localStore).then((function(t){return ex(e,t)}))]}))}))}function ax(t,e,n,r){return Object(nl.b)(this,void 0,void 0,(function(){var i,o;return Object(nl.d)(this,(function(a){switch(a.label){case 0:return[4,function(t,e){var n=Yw(t),r=Yw(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):NS.resolve(null)}))}))}((i=Yw(t)).localStore,e)];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,sI(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(QI(i,e,r||null),JI(i,e),function(t,e){Yw(Yw(t)._n).Gt(e)}(i.localStore,e)):Jw(),a.label=4;case 4:return[4,ex(i,o)];case 5:return a.sent(),[3,7];case 6:Ww("SyncEngine","Cannot apply mutation batch with id: "+e),a.label=7;case 7:return[2]}}))}))}function sx(t,e){return Object(nl.b)(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return Object(nl.d)(this,(function(c){switch(c.label){case 0:return dx(n=Yw(t)),px(n),!0!==e||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,ux(n,r.toArray())]);case 1:return i=c.sent(),n.Oo=!0,[4,pI(n.remoteStore,!0)];case 2:for(c.sent(),o=0,a=i;o<a.length;o++)JT(n.remoteStore,a[o]);return[3,7];case 3:return!1!==e||!1===n.Oo?[3,7]:(s=[],u=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?s.push(e):u=u.then((function(){return YI(n,e),rT(n.localStore,e,!0)})),QT(n.remoteStore,e)})),[4,u]);case 4:return c.sent(),[4,ux(n,s)];case 5:return c.sent(),function(t){var e=Yw(t);e.Co.forEach((function(t,n){QT(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new iC(kk.comparator)}(n),n.Oo=!1,[4,pI(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}}))}))}function ux(t,e,n){return Object(nl.b)(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,h,f,d,p;return Object(nl.d)(this,(function(v){switch(v.label){case 0:n=Yw(t),r=[],i=[],o=0,a=e,v.label=1;case 1:return o<a.length?(u=void 0,(c=n.Vo.get(s=a[o]))&&0!==c.length?[4,nT(n.localStore,dO(c[0]))]:[3,7]):[3,13];case 2:u=v.sent(),l=0,h=c,v.label=3;case 3:return l<h.length?(f=n.Po.get(h[l]),[4,ix(n,f)]):[3,6];case 4:(d=v.sent()).snapshot&&i.push(d.snapshot),v.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,oT(n.localStore,s)];case 8:return p=v.sent(),[4,nT(n.localStore,p)];case 9:return u=v.sent(),[4,UI(n,cx(p),s,!1)];case 10:v.sent(),v.label=11;case 11:r.push(u),v.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function cx(t){return oO(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function lx(t){var e=Yw(t);return Yw(Yw(e.localStore).persistence).fn()}function hx(t,e,n,r){return Object(nl.b)(this,void 0,void 0,(function(){var i,o,a;return Object(nl.d)(this,(function(s){switch(s.label){case 0:return(i=Yw(t)).Oo?(Ww("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,aT(i.localStore)];case 3:return o=s.sent(),a=bC.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,ex(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,rT(i.localStore,e,!0)];case 6:return s.sent(),YI(i,e,r),[3,8];case 7:Jw(),s.label=8;case 8:return[2]}}))}))}function fx(t,e,n){return Object(nl.b)(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,h;return Object(nl.d)(this,(function(f){switch(f.label){case 0:if(!(r=dx(t)).Oo)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.Vo.has(a=o[i])?(Ww("SyncEngine","Adding an already active target "+a),[3,5]):[4,oT(r.localStore,a)]:[3,6];case 2:return s=f.sent(),[4,nT(r.localStore,s)];case 3:return u=f.sent(),[4,UI(r,cx(s),u.targetId,!1)];case 4:f.sent(),JT(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(nl.d)(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,rT(r.localStore,t,!1).then((function(){QT(r.remoteStore,t),YI(r,t)})).catch(OE)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function dx(t){var e=Yw(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=zI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rx.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WI.bind(null,e),e.vo._r=EI.bind(null,e.eventManager),e.vo.Mo=TI.bind(null,e.eventManager),e}function px(t){var e=Yw(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=HI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=KI.bind(null,e),e}var vx=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(nl.b)(this,void 0,void 0,(function(){return Object(nl.d)(this,(function(e){switch(e.label){case 0:return this.R=FT(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return QE(this.persistence,new GE,t.initialUser,this.R)},t.prototype.qo=function(t){return new gT(bT.bs,this.R)},t.prototype.Bo=function(t){return new NT},t.prototype.terminate=function(){return Object(nl.b)(this,void 0,void 0,(function(){return Object(nl.d)(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),yx=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(nl.c)(e,t),e.prototype.initialize=function(e){return Object(nl.b)(this,void 0,void 0,(function(){return Object(nl.d)(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,sT(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,px(this.Ko.syncEngine)];case 4:return n.sent(),[4,sI(this.Ko.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Qo=function(t){return QE(this.persistence,new GE,t.initialUser,this.R)},e.prototype.Uo=function(t){return new EE(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=BE(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?lE.withCacheSize(this.cacheSizeBytes):lE.DEFAULT;return new qE(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,LT(),MT(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new NT},e}(vx),gx=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(nl.c)(e,t),e.prototype.initialize=function(e){return Object(nl.b)(this,void 0,void 0,(function(){var n,r=this;return Object(nl.d)(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof xT?(this.sharedClientState.syncEngine={ai:ax.bind(null,n),ui:hx.bind(null,n),hi:fx.bind(null,n),fn:lx.bind(null,n),ci:ox.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return Object(nl.b)(r,void 0,void 0,(function(){return Object(nl.d)(this,(function(e){switch(e.label){case 0:return[4,sx(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=LT();if(!xT.yt(e))throw new Vw(qw.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=BE(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new xT(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(yx),mx=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(nl.b)(this,void 0,void 0,(function(){var n=this;return Object(nl.d)(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return BI(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=nx.bind(null,this.syncEngine),[4,pI(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new OI},t.prototype.createDatastore=function(t){var e=FT(t.databaseInfo.databaseId),n=new DT(t.databaseInfo);return function(t,e,n){return new BT(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,a=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return BI(a.syncEngine,t,0)},o=jT.yt()?new jT:new AT,new HT(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,a){var s=new MI(t,e,n,r,i,o);return a&&(s.Oo=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(nl.b)(this,void 0,void 0,(function(){var e;return Object(nl.d)(this,(function(n){switch(n.label){case 0:return e=Yw(t),Ww("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,GT(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}(),bx=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),_x=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new xS,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(nl.b)(this,void 0,void 0,(function(){return Object(nl.d)(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return Object(nl.b)(this,void 0,void 0,(function(){return Object(nl.d)(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return Object(nl.b)(this,void 0,void 0,(function(){var t,e,n,r;return Object(nl.d)(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new NI(JSON.parse(r),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return Object(nl.b)(this,void 0,void 0,(function(){var t,e;return Object(nl.d)(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return Object(nl.b)(this,void 0,void 0,(function(){var e;return Object(nl.d)(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(nl.b)(this,void 0,void 0,(function(){var t,e;return Object(nl.d)(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(nl.b)(this,void 0,void 0,(function(){var e,n=this;return Object(nl.d)(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Vw(qw.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(nl.b)(this,void 0,void 0,(function(){var n,r,i,o,a,s;return Object(nl.d)(this,(function(u){switch(u.label){case 0:return n=Yw(t),r=VC(n.R)+"/documents",i={documents:e.map((function(t){return MC(n.R,t)}))},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return o=u.sent(),a=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){Qw(!!e.found);var n=FC(t,e.found.name),r=RC(e.found.updateTime),i=new Dk({mapValue:{fields:e.found.fields}});return Mk.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Qw(!!e.missing),Qw(!!e.readTime);var n=FC(t,e.missing),r=RC(e.readTime);return Mk.newNoDocument(n,r)}(t,e):Jw()}(n.R,t);a.set(e.key.toString(),e)})),s=[],[2,(e.forEach((function(t){var e=a.get(t.toString());Qw(!!e),s.push(e)})),s)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new $O(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(nl.b)(this,void 0,void 0,(function(){var t,e=this;return Object(nl.d)(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=kk.fromPath(n);e.mutations.push(new tC(r,e.precondition(r)))})),[4,function(t,e){return Object(nl.b)(this,void 0,void 0,(function(){var n,r,i;return Object(nl.d)(this,(function(o){switch(o.label){case 0:return n=Yw(t),r=VC(n.R)+"/documents",i={writes:e.map((function(t){return HC(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Jw();e=rk.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Vw(qw.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?FO.updateTime(e):FO.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(rk.min()))throw new Vw(qw.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return FO.updateTime(e)}return FO.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),wx=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new UT(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return Object(nl.b)(t,void 0,void 0,(function(){var t,e,n=this;return Object(nl.d)(this,(function(r){return t=new _x(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!bk(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!nC(e)}return!1},t}(),kx=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=_T.UNAUTHENTICATED,this.clientId=Zw.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return Object(nl.b)(r,void 0,void 0,(function(){return Object(nl.d)(this,(function(e){switch(e.label){case 0:return Ww("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return Object(nl.b)(this,void 0,void 0,(function(){return Object(nl.d)(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Vw(qw.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new xS;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return Object(nl.b)(t,void 0,void 0,(function(){var t,n;return Object(nl.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=mI(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function Ox(t,e){return Object(nl.b)(this,void 0,void 0,(function(){var n,r,i=this;return Object(nl.d)(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Ww("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return Object(nl.b)(i,void 0,void 0,(function(){return Object(nl.d)(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,YE(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function Cx(t,e){return Object(nl.b)(this,void 0,void 0,(function(){var n,r;return Object(nl.d)(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Sx(t)];case 1:return n=i.sent(),Ww("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return Object(nl.b)(this,void 0,void 0,(function(){var n,r;return Object(nl.d)(this,(function(i){switch(i.label){case 0:return(n=Yw(t)).asyncQueue.verifyOperationInProgress(),Ww("RemoteStore","RemoteStore received new credentials"),r=tI(n),n.$r.add(3),[4,GT(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.$r.delete(3),[4,KT(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function Sx(t){return Object(nl.b)(this,void 0,void 0,(function(){return Object(nl.d)(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Ww("FirestoreClient","Using default OfflineComponentProvider"),[4,Ox(t,new vx)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function Ex(t){return Object(nl.b)(this,void 0,void 0,(function(){return Object(nl.d)(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Ww("FirestoreClient","Using default OnlineComponentProvider"),[4,Cx(t,new mx)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function Tx(t){return Sx(t).then((function(t){return t.persistence}))}function Ix(t){return Sx(t).then((function(t){return t.localStore}))}function xx(t){return Ex(t).then((function(t){return t.remoteStore}))}function Nx(t){return Ex(t).then((function(t){return t.syncEngine}))}function Ax(t){return Object(nl.b)(this,void 0,void 0,(function(){var e,n;return Object(nl.d)(this,(function(r){switch(r.label){case 0:return[4,Ex(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=FI.bind(null,e.syncEngine),n.onUnlisten=qI.bind(null,e.syncEngine),n)]}}))}))}function jx(t,e,n){var r=this;void 0===n&&(n={});var i=new xS;return t.asyncQueue.enqueueAndForget((function(){return Object(nl.b)(r,void 0,void 0,(function(){var r;return Object(nl.d)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new bx({next:function(o){e.enqueueAndForget((function(){return SI(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new Vw(qw.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new Vw(qw.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new xI(aO(n.path),o,{includeMetadataChanges:!0,so:!0});return CI(t,a)},[4,Ax(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function Px(t,e,n){var r=this;void 0===n&&(n={});var i=new xS;return t.asyncQueue.enqueueAndForget((function(){return Object(nl.b)(r,void 0,void 0,(function(){var r;return Object(nl.d)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new bx({next:function(n){e.enqueueAndForget((function(){return SI(t,a)})),n.fromCache&&"server"===r.source?i.reject(new Vw(qw.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new xI(n,o,{includeMetadataChanges:!0,so:!0});return CI(t,a)},[4,Ax(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var Rx=function(t,e,n,r,i,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a},Dx=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Lx=new Map,Mx=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Fx=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(_T.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Ux=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),qx=function(){function t(t){var e=this;this.currentUser=_T.UNAUTHENTICATED,this.oc=new xS,this.cc=0,this.changeListener=function(){return Promise.resolve()},this.ac=!1,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.hc(),e.oc.resolve(),e.ac&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){Ww("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.lc(),e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):e.ac&&(Ww("FirebaseCredentialsProvider","Auth not yet detected"),e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)})))}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(Ww("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Qw("string"==typeof n.accessToken),new Mx(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){this.ac=!0,this.asyncQueue=t,this.changeListener=e},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.hc=function(){var t=this.auth&&this.auth.getUid();return Qw(null===t||"string"==typeof t),new _T(t)},t.prototype.lc=function(){var t=this;this.ac&&(this.ac=!1,this.asyncQueue.enqueueRetryable((function(){return Object(nl.b)(t,void 0,void 0,(function(){return Object(nl.d)(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,this.changeListener(this.currentUser)];case 2:return t.sent(),this.ac=!0,[2]}}))}))})))},t}(),Vx=function(){function t(t,e,n){this.fc=t,this.dc=e,this.wc=n,this.type="FirstParty",this.user=_T.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.dc},e=this.fc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.wc&&(t["X-Goog-Iam-Authorization-Token"]=this.wc),t},enumerable:!1,configurable:!0}),t}(),zx=function(){function t(t,e,n){this.fc=t,this.dc=e,this.wc=n}return t.prototype.getToken=function(){return Promise.resolve(new Vx(this.fc,this.dc,this.wc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(_T.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Bx(t,e,n){if(!n)throw new Vw(qw.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Wx(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Vw(qw.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Hx(t,e,n,r){if(!0===e&&!0===r)throw new Vw(qw.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Kx(t){if(!kk.isDocumentKey(t))throw new Vw(qw.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Gx(t){if(kk.isDocumentKey(t))throw new Vw(qw.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Jx(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Jw()}function Qx(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Vw(qw.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Jx(t);throw new Vw(qw.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Yx(t,e){if(e<=0)throw new Vw(qw.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Xx=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Vw(qw.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Vw(qw.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Hx("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Zx=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xx({}),this._settingsFrozen=!1,t instanceof Dx?(this._databaseId=t,this._credentials=new Fx):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Vw(qw.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dx(t.options.projectId)}(t),this._credentials=new qx(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Vw(qw.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Vw(qw.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xx(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Fx;switch(t.type){case"gapi":var e=t.client;return Qw(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new zx(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Vw(qw.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Lx.get(this))&&(Ww("ComponentProvider","Removing Datastore"),Lx.delete(this),t.terminate()),Promise.resolve();var t},t}(),$x=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new eN(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),tN=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),eN=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,aO(r))||this)._path=r,i.type="collection",i}return Object(nl.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new $x(this.firestore,null,new kk(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(tN);function nN(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(ay.o)(t),Bx("collection","path",e),t instanceof Zx)return Gx(n=uk.fromString.apply(uk,Object(nl.g)([e],r))),new eN(t,null,n);if(!(t instanceof $x||t instanceof eN))throw new Vw(qw.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Gx(n=uk.fromString.apply(uk,Object(nl.g)([t.path],r)).child(uk.fromString(e))),new eN(t.firestore,null,n)}function rN(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(ay.o)(t),1===arguments.length&&(e=Zw.u()),Bx("doc","path",e),t instanceof Zx)return Kx(n=uk.fromString.apply(uk,Object(nl.g)([e],r))),new $x(t,null,new kk(n));if(!(t instanceof $x||t instanceof eN))throw new Vw(qw.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Kx(n=t._path.child(uk.fromString.apply(uk,Object(nl.g)([e],r)))),new $x(t.firestore,t instanceof eN?t.converter:null,new kk(n))}function iN(t,e){return t=Object(ay.o)(t),e=Object(ay.o)(e),(t instanceof $x||t instanceof eN)&&(e instanceof $x||e instanceof eN)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function oN(t,e){return t=Object(ay.o)(t),e=Object(ay.o)(e),t instanceof tN&&e instanceof tN&&t.firestore===e.firestore&&vO(t._query,e._query)&&t.converter===e.converter}var aN=function(){function t(){var t=this;this._c=Promise.resolve(),this.mc=[],this.yc=!1,this.gc=[],this.Ec=null,this.Tc=!1,this.Ic=[],this.Zi=new UT(this,"async_queue_retry"),this.Ac=function(){var e=MT();e&&Ww("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=MT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ac)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.yc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Rc(),this.bc(t)},t.prototype.enterRestrictedMode=function(){if(!this.yc){this.yc=!0;var t=MT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ac)}},t.prototype.enqueue=function(t){return this.Rc(),this.yc?new Promise((function(t){})):this.bc(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.mc.push(t),e.vc()}))},t.prototype.vc=function(){return Object(nl.b)(this,void 0,void 0,(function(){var t,e=this;return Object(nl.d)(this,(function(n){switch(n.label){case 0:if(0===this.mc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.mc[0]()];case 2:return n.sent(),this.mc.shift(),this.Zi.reset(),[3,4];case 3:if(!DS(t=n.sent()))throw t;return Ww("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.mc.length>0&&this.Zi.ji((function(){return e.vc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.bc=function(t){var e=this,n=this._c.then((function(){return e.Tc=!0,t().catch((function(t){throw e.Ec=t,e.Tc=!1,Hw("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.Tc=!1,t}))}));return this._c=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Rc(),this.Ic.indexOf(t)>-1&&(e=0);var i=gI.createAndSchedule(this,t,e,n,(function(t){return r.Pc(t)}));return this.gc.push(i),i},t.prototype.Rc=function(){this.Ec&&Jw()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Vc=function(){return Object(nl.b)(this,void 0,void 0,(function(){var t;return Object(nl.d)(this,(function(e){switch(e.label){case 0:return[4,t=this._c];case 1:e.sent(),e.label=2;case 2:if(t!==this._c)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Sc=function(t){for(var e=0,n=this.gc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Dc=function(t){var e=this;return this.Vc().then((function(){e.gc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.gc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Vc()}))},t.prototype.Cc=function(t){this.Ic.push(t)},t.prototype.Pc=function(t){var e=this.gc.indexOf(t);this.gc.splice(e,1)},t}();function sN(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new xS,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var uN=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new aN,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(nl.c)(e,t),e.prototype._terminate=function(){return this._firestoreClient||lN(this),this._firestoreClient.terminate()},e}(Zx);function cN(t){return t._firestoreClient||lN(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function lN(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Rx(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new kx(t._credentials,t._queue,r)}function hN(t,e,n){var r=this,i=new xS;return t.asyncQueue.enqueue((function(){return Object(nl.b)(r,void 0,void 0,(function(){var r;return Object(nl.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Ox(t,n)];case 1:return o.sent(),[4,Cx(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===qw.FAILED_PRECONDITION||t.code===qw.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function fN(t){if(t._initialized||t._terminated)throw new Vw(qw.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var dN=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Vw(qw.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lk(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),pN=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(fk.fromBase64String(e))}catch(e){throw new Vw(qw.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(fk.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),vN=function(t){this._methodName=t},yN=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Vw(qw.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Vw(qw.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return $w(this._lat,t._lat)||$w(this._long,t._long)},t}(),gN=/^__.*__$/,mN=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new GO(t,this.data,this.fieldMask,e,this.fieldTransforms):new KO(t,this.data,e,this.fieldTransforms)},t}(),bN=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new GO(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function _N(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Jw()}}var wN=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Nc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"xc",{get:function(){return this.settings.xc},enumerable:!1,configurable:!0}),t.prototype.Fc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Fc({path:n,Oc:!1});return r.$c(t),r},t.prototype.Mc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Fc({path:n,Oc:!1});return r.Nc(),r},t.prototype.Lc=function(t){return this.Fc({path:void 0,Oc:!0})},t.prototype.Bc=function(t){return VN(t,this.settings.methodName,this.settings.qc||!1,this.path,this.settings.Uc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Nc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Bc("Document fields must not be empty");if(_N(this.xc)&&gN.test(t))throw this.Bc('Document fields cannot begin and end with "__"')},t}(),kN=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||FT(t)}return t.prototype.Qc=function(t,e,n,r){return void 0===r&&(r=!1),new wN({xc:t,methodName:e,Uc:n,path:lk.emptyPath(),Oc:!1,qc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function ON(t){var e=t._freezeSettings(),n=FT(t._databaseId);return new kN(t._databaseId,!!e.ignoreUndefinedProperties,n)}function CN(t,e,n,r,i,o){void 0===o&&(o={});var a=t.Qc(o.merge||o.mergeFields?2:0,e,n,i);MN("Data must be an object, but it was:",a,r);var s,u,c=DN(r,a);if(o.merge)s=new hk(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=FN(e,f[h],n);if(!a.contains(d))throw new Vw(qw.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");zN(l,d)||l.push(d)}s=new hk(l),u=a.fieldTransforms.filter((function(t){return s.covers(t.field)}))}else s=null,u=a.fieldTransforms;return new mN(new Dk(c),s,u)}var SN=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(nl.c)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.xc)throw t.Bc(1===t.xc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(vN);function EN(t,e,n){return new wN({xc:3,Uc:e.settings.Uc,methodName:t._methodName,Oc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var TN=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(nl.c)(e,t),e.prototype._toFieldTransform=function(t){return new LO(t.path,new IO)},e.prototype.isEqual=function(t){return t instanceof e},e}(vN),IN=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Object(nl.c)(e,t),e.prototype._toFieldTransform=function(t){var e=EN(this,t,!0),n=this.Kc.map((function(t){return RN(t,e)})),r=new xO(n);return new LO(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(vN),xN=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Object(nl.c)(e,t),e.prototype._toFieldTransform=function(t){var e=EN(this,t,!0),n=this.Kc.map((function(t){return RN(t,e)})),r=new AO(n);return new LO(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(vN),NN=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return Object(nl.c)(e,t),e.prototype._toFieldTransform=function(t){var e=new PO(t.R,OO(t.R,this.jc));return new LO(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(vN);function AN(t,e,n,r){var i=t.Qc(1,e,n);MN("Data must be an object, but it was:",i,r);var o=[],a=Dk.empty();ok(r,(function(t,r){var s=qN(e,t,n);r=Object(ay.o)(r);var u=i.Mc(s);if(r instanceof SN)o.push(s);else{var c=RN(r,u);null!=c&&(o.push(s),a.set(s,c))}}));var s=new hk(o);return new bN(a,s,i.fieldTransforms)}function jN(t,e,n,r,i,o){var a=t.Qc(1,e,n),s=[FN(e,r,n)],u=[i];if(o.length%2!=0)throw new Vw(qw.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(FN(e,o[c])),u.push(o[c+1]);for(var l=[],h=Dk.empty(),f=s.length-1;f>=0;--f)if(!zN(l,s[f])){var d=s[f],p=u[f];p=Object(ay.o)(p);var v=a.Mc(d);if(p instanceof SN)l.push(d);else{var y=RN(p,v);null!=y&&(l.push(d),h.set(d,y))}}var g=new hk(l);return new bN(h,g,a.fieldTransforms)}function PN(t,e,n,r){return void 0===r&&(r=!1),RN(n,t.Qc(r?4:3,e))}function RN(t,e){if(LN(t=Object(ay.o)(t)))return MN("Unsupported field value:",e,t),DN(t,e);if(t instanceof vN)return function(t,e){if(!_N(e.xc))throw e.Bc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Bc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Oc&&4!==e.xc)throw e.Bc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=RN(o[i],e.Lc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(ay.o)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return OO(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=nk.fromDate(t);return{timestampValue:AC(e.R,n)}}if(t instanceof nk)return n=new nk(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:AC(e.R,n)};if(t instanceof yN)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof pN)return{bytesValue:jC(e.R,t._byteString)};if(t instanceof $x){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Bc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:DC(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Bc("Unsupported field value: "+Jx(t))}(t,e)}function DN(t,e){var n={};return ak(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ok(t,(function(t,r){var i=RN(r,e.kc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function LN(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof nk||t instanceof yN||t instanceof pN||t instanceof $x||t instanceof vN)}function MN(t,e,n){if(!LN(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Jx(n);throw e.Bc("an object"===r?t+" a custom object":t+" "+r)}}function FN(t,e,n){if((e=Object(ay.o)(e))instanceof dN)return e._internalPath;if("string"==typeof e)return qN(t,e);throw VN("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var UN=new RegExp("[~\\*/\\[\\]]");function qN(t,e,n){if(e.search(UN)>=0)throw VN("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(dN.bind.apply(dN,Object(nl.g)([void 0],e.split(".")))))._internalPath}catch(r){throw VN("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function VN(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new Vw(qw.INVALID_ARGUMENT,(s+=". ")+t+u)}function zN(t,e){return t.some((function(t){return t.isEqual(e)}))}var BN=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new $x(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new WN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(HN("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),WN=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(nl.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(BN);function HN(t,e){return"string"==typeof e?qN(t,e):e instanceof dN?e._internalPath:e._delegate._internalPath}var KN=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),GN=function(t){function e(e,n,r,i,o,a){var s=this;return(s=t.call(this,e,n,r,i,a)||this)._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return Object(nl.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new JN(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(HN("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(BN),JN=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(nl.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(GN),QN=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new KN(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new JN(n._firestore,n._userDataWriter,r.key,r,new KN(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Vw(qw.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new JN(t._firestore,t._userDataWriter,e.doc.key,e.doc,new KN(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new JN(t._firestore,t._userDataWriter,e.doc.key,e.doc,new KN(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:YN(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function YN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Jw()}}function XN(t,e){return t instanceof GN&&e instanceof GN?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof QN&&e instanceof QN&&t._firestore===e._firestore&&oN(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function ZN(t){if(uO(t)&&0===t.explicitOrderBy.length)throw new Vw(qw.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var $N=function(){};function tA(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var eA=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Wc=e,i.Gc=n,i.zc=r,i.type="where",i}return Object(nl.c)(e,t),e.prototype._apply=function(t){var e=ON(t.firestore),n=function(t,e,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Vw(qw.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){uA(a,o);for(var u=[],c=0,l=a;c<l.length;c++)u.push(sA(r,t,l[c]));s={arrayValue:{values:u}}}else s=sA(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||uA(a,o),s=PN(n,"where",a,"in"===o||"not-in"===o);var h=Bk.create(i,o,s);return function(t,e){if(e.g()){var n=lO(t);if(null!==n&&!n.isEqual(e.field))throw new Vw(qw.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=cO(t);null!==r&&cA(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Vw(qw.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Wc,this.Gc,this.zc);return new tN(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new iO(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}($N),nA=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Wc=e,r.Hc=n,r.type="orderBy",r}return Object(nl.c)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Vw(qw.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Vw(qw.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new tO(e,n);return function(t,e){if(null===cO(t)){var n=lO(t);null!==n&&cA(0,n,e.field)}}(t,r),r}(t._query,this.Wc,this.Hc);return new tN(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new iO(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}($N),rA=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return Object(nl.c)(e,t),e.prototype._apply=function(t){return new tN(t.firestore,t.converter,pO(t._query,this.Jc,this.Yc))},e}($N),iA=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Xc=n,i.Zc=r,i}return Object(nl.c)(e,t),e.prototype._apply=function(t){var e=aA(t,this.type,this.Xc,this.Zc);return new tN(t.firestore,t.converter,function(t,e){return new iO(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}($N),oA=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Xc=n,i.Zc=r,i}return Object(nl.c)(e,t),e.prototype._apply=function(t){var e=aA(t,this.type,this.Xc,this.Zc);return new tN(t.firestore,t.converter,function(t,e){return new iO(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}($N);function aA(t,e,n,r){if(n[0]=Object(ay.o)(n[0]),n[0]instanceof BN)return function(t,e,n,r,i){if(!r)throw new Vw(qw.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=fO(t);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(xk(e,r.key));else{var c=r.data.field(u.field);if(gk(c))throw new Vw(qw.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Vw(qw.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Zk(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=ON(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new Vw(qw.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new Vw(qw.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!hO(t)&&-1!==c.indexOf("/"))throw new Vw(qw.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(uk.fromString(c));if(!kk.isDocumentKey(l))throw new Vw(qw.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new kk(l);s.push(xk(e,h))}else{var f=PN(n,r,c);s.push(f)}}return new Zk(s,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function sA(t,e,n){if("string"==typeof(n=Object(ay.o)(n))){if(""===n)throw new Vw(qw.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!hO(e)&&-1!==n.indexOf("/"))throw new Vw(qw.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(uk.fromString(n));if(!kk.isDocumentKey(r))throw new Vw(qw.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return xk(t,new kk(r))}if(n instanceof $x)return xk(t,n._key);throw new Vw(qw.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Jx(n)+".")}function uA(t,e){if(!Array.isArray(t)||0===t.length)throw new Vw(qw.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Vw(qw.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function cA(t,e,n){if(!n.isEqual(e))throw new Vw(qw.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var lA=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Ok(t)){case 0:return null;case 1:return t.booleanValue;case 2:return vk(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(yk(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Jw()}},t.prototype.convertObject=function(t,e){var n=this,r={};return ok(t.fields||{},(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new yN(vk(t.latitude),vk(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=function t(e){var n=e.mapValue.fields.__previous_value__;return gk(n)?t(n):n}(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(mk(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=pk(t);return new nk(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=uk.fromString(t);Qw(oS(n));var r=new Dx(n.get(1),n.get(3)),i=new kk(n.popFirst(5));return r.isEqual(e)||Hw("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function hA(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var fA=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(nl.c)(e,t),e.prototype.convertBytes=function(t){return new pN(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new $x(this.firestore,null,e)},e}(lA),dA=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=ON(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=pA(t,this._firestore),i=hA(r.converter,e,n),o=CN(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,FO.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,a=pA(t,this._firestore);return o="string"==typeof(e=Object(ay.o)(e))||e instanceof dN?jN(this._dataReader,"WriteBatch.update",a._key,e,n,r):AN(this._dataReader,"WriteBatch.update",a._key,e),this._mutations.push(o.toMutation(a._key,FO.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=pA(t,this._firestore);return this._mutations=this._mutations.concat(new $O(e._key,FO.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Vw(qw.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function pA(t,e){if((t=Object(ay.o)(t)).firestore!==e)throw new Vw(qw.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var vA=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(nl.c)(e,t),e.prototype.convertBytes=function(t){return new pN(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new $x(this.firestore,null,e)},e}(lA);function yA(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Qx(t,$x);var o=Qx(t.firestore,uN),a=ON(o);return mA(o,[("string"==typeof(e=Object(ay.o)(e))||e instanceof dN?jN(a,"updateDoc",t._key,e,n,r):AN(a,"updateDoc",t._key,e)).toMutation(t._key,FO.exists(!0))])}function gA(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Object(ay.o)(t);var a={includeMetadataChanges:!1},s=0;"object"!=typeof i[s]||sN(i[s])||(a=i[s],s++);var u,c,l,h={includeMetadataChanges:a.includeMetadataChanges};if(sN(i[s])){var f=i[s];i[s]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[s+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[s+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof $x)c=Qx(t.firestore,uN),l=aO(t._key.path),u={next:function(e){i[s]&&i[s](bA(c,t,e))},error:i[s+1],complete:i[s+2]};else{var d=Qx(t,tN);c=Qx(d.firestore,uN),l=d._query;var p=new vA(c);u={next:function(t){i[s]&&i[s](new QN(c,p,d,t))},error:i[s+1],complete:i[s+2]},ZN(t._query)}return function(t,e,n,r){var i=this,o=new bx(r),a=new xI(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return Object(nl.b)(i,void 0,void 0,(function(){var e;return Object(nl.d)(this,(function(n){switch(n.label){case 0:return e=CI,[4,Ax(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return Object(nl.b)(i,void 0,void 0,(function(){var e;return Object(nl.d)(this,(function(n){switch(n.label){case 0:return e=SI,[4,Ax(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))}))}}(cN(c),l,h,u)}function mA(t,e){return function(t,e){var n=this,r=new xS;return t.asyncQueue.enqueueAndForget((function(){return Object(nl.b)(n,void 0,void 0,(function(){var n;return Object(nl.d)(this,(function(i){switch(i.label){case 0:return n=VI,[4,Nx(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(cN(t),e)}function bA(t,e,n){var r=n.docs.get(e._key),i=new vA(t);return new GN(t,i,e._key,r,new KN(n.hasPendingWrites,n.fromCache),e.converter)}var _A=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(nl.c)(e,t),e.prototype.get=function(e){var n=this,r=pA(e,this._firestore),i=new vA(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new GN(n._firestore,i,r._key,t._document,new KN(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=ON(t)}return t.prototype.get=function(t){var e=this,n=pA(t,this._firestore),r=new fA(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return Jw();var i=t[0];if(i.isFoundDocument())return new BN(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new BN(e._firestore,r,n._key,null,n.converter);throw Jw()}))},t.prototype.set=function(t,e,n){var r=pA(t,this._firestore),i=hA(r.converter,e,n),o=CN(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a=pA(t,this._firestore);return o="string"==typeof(e=Object(ay.o)(e))||e instanceof dN?jN(this._dataReader,"Transaction.update",a._key,e,n,r):AN(this._dataReader,"Transaction.update",a._key,e),this._transaction.update(a._key,o),this},t.prototype.delete=function(t){var e=pA(t,this._firestore);return this._transaction.delete(e._key),this},t}());function wA(){if("undefined"==typeof Uint8Array)throw new Vw(qw.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function kA(){if("undefined"==typeof atob)throw new Vw(qw.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var OA=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return kA(),new t(pN.fromBase64String(e))},t.fromUint8Array=function(e){return wA(),new t(pN.fromUint8Array(e))},t.prototype.toBase64=function(){return kA(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return wA(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),CA=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){fN(t=Qx(t,uN));var n=cN(t),r=t._freezeSettings(),i=new mx;return hN(n,i,new yx(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){fN(t=Qx(t,uN));var e=cN(t),n=t._freezeSettings(),r=new mx;return hN(e,r,new gx(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Vw(qw.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new xS;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return Object(nl.b)(e,void 0,void 0,(function(){var e;return Object(nl.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(nl.b)(this,void 0,void 0,(function(){return Object(nl.d)(this,(function(e){switch(e.label){case 0:return jS.yt()?[4,jS.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}}))}))}(BE(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),SA=function(){function t(t,e,n){var r=this;this._delegate=e,this.ta=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Dx||(this.ea=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=Qx(t,Zx))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&Kw("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=Object(ay.j)(r.mockUserToken),a=r.mockUserToken.sub||r.mockUserToken.user_id;if(!a)throw new Vw(qw.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new Ux(new Mx(o,new _T(a)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Object(nl.b)(e,void 0,void 0,(function(){var e,n;return Object(nl.d)(this,(function(r){switch(r.label){case 0:return[4,Tx(t)];case 1:return e=r.sent(),[4,xx(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Yw(t);return e.$r.delete(0),KT(e)}(n))]}}))}))}))}(cN(Qx(this._delegate,uN)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Object(nl.b)(e,void 0,void 0,(function(){var e,n;return Object(nl.d)(this,(function(r){switch(r.label){case 0:return[4,Tx(t)];case 1:return e=r.sent(),[4,xx(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(nl.b)(this,void 0,void 0,(function(){var e;return Object(nl.d)(this,(function(n){switch(n.label){case 0:return(e=Yw(t)).$r.add(0),[4,GT(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(cN(Qx(this._delegate,uN)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Hx("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.ta.enableMultiTabIndexedDbPersistence(this):this.ta.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.ta.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.ea&&(this.ea._removeServiceInstance("firestore"),this.ea._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new xS;return t.asyncQueue.enqueueAndForget((function(){return Object(nl.b)(e,void 0,void 0,(function(){var e;return Object(nl.d)(this,(function(r){switch(r.label){case 0:return e=GI,[4,Nx(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(cN(Qx(this._delegate,uN)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new bx(e);return t.asyncQueue.enqueueAndForget((function(){return Object(nl.b)(n,void 0,void 0,(function(){var e;return Object(nl.d)(this,(function(n){switch(n.label){case 0:return e=function(t,e){Yw(t).Gr.add(e),e.next()},[4,Ax(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return Object(nl.b)(n,void 0,void 0,(function(){var e;return Object(nl.d)(this,(function(n){switch(n.label){case 0:return e=function(t,e){Yw(t).Gr.delete(e)},[4,Ax(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(cN(t=Qx(t,uN)),sN(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.ea)throw new Vw(qw.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.ea},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new UA(this,nN(this._delegate,t))}catch(t){throw AA(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new NA(this,rN(this._delegate,t))}catch(t){throw AA(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new LA(this,function(t,e){if(t=Qx(t,Zx),Bx("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Vw(qw.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new tN(t,null,function(t){return new iO(uk.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw AA(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new xS;return t.asyncQueue.enqueueAndForget((function(){return Object(nl.b)(n,void 0,void 0,(function(){var n;return Object(nl.d)(this,(function(i){switch(i.label){case 0:return[4,function(t){return Ex(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new wx(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(cN(t),(function(n){return e(new _A(t,n))}))}(this._delegate,(function(n){return t(new TA(e,n))}))},t.prototype.batch=function(){var t=this;return cN(this._delegate),new IA(new dA(this._delegate,(function(e){return mA(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new Vw(qw.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Vw(qw.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),EA=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(nl.c)(e,t),e.prototype.convertBytes=function(t){return new OA(new pN(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return NA.na(e,this.firestore,null)},e}(lA),TA=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new EA(t)}return t.prototype.get=function(t){var e=this,n=qA(t);return this._delegate.get(n).then((function(t){return new RA(e._firestore,new GN(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=qA(t);return n?(Wx("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=qA(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,Object(nl.g)([a,e,n],i)),this},t.prototype.delete=function(t){var e=qA(t);return this._delegate.delete(e),this},t}(),IA=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=qA(t);return n?(Wx("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=qA(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,Object(nl.g)([a,e,n],i)),this},t.prototype.delete=function(t){var e=qA(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),xA=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new JN(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new DA(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.sa=function(e,n){var r=t.ia,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new EA(e),n),i.set(n,o)),o},t}();xA.ia=new WeakMap;var NA=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new EA(t)}return t.ra=function(e,n,r){if(e.length%2!=0)throw new Vw(qw.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new $x(n._delegate,r,new kk(e)))},t.na=function(e,n,r){return new t(n,new $x(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new UA(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new UA(this.firestore,nN(this._delegate,t))}catch(t){throw AA(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(ay.o)(t))instanceof $x&&iN(this._delegate,t)},t.prototype.set=function(t,e){e=Wx("DocumentReference.set",e);try{return function(t,e,n){t=Qx(t,$x);var r=Qx(t.firestore,uN),i=hA(t.converter,e,n);return mA(r,[CN(ON(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,FO.none())])}(this._delegate,t,e)}catch(t){throw AA(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?yA(this._delegate,t):yA.apply(void 0,Object(nl.g)([this._delegate,t,e],n))}catch(t){throw AA(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return mA(Qx((t=this._delegate).firestore,uN),[new $O(t._key,FO.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=jA(e),i=PA(e,(function(e){return new RA(t.firestore,new GN(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return gA(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Qx(t,$x);var e=Qx(t.firestore,uN),n=cN(e),r=new vA(e);return function(t,e){var n=this,r=new xS;return t.asyncQueue.enqueueAndForget((function(){return Object(nl.b)(n,void 0,void 0,(function(){var n;return Object(nl.d)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(nl.b)(this,void 0,void 0,(function(){var r,i;return Object(nl.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Yw(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Vw(qw.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=mI(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,Ix(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new GN(e,r,t._key,n,new KN(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Qx(t,$x);var e=Qx(t.firestore,uN);return jx(cN(e),t._key,{source:"server"}).then((function(n){return bA(e,t,n)}))}(this._delegate):function(t){t=Qx(t,$x);var e=Qx(t.firestore,uN);return jx(cN(e),t._key).then((function(n){return bA(e,t,n)}))}(this._delegate)).then((function(t){return new RA(e.firestore,new GN(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?xA.sa(this.firestore,e):null))},t}();function AA(t,e,n){return t.message=t.message.replace(e,n),t}function jA(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!sN(r))return r}return{}}function PA(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=sN(t[0])?t[0]:sN(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var RA=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new NA(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return XN(this._delegate,t._delegate)},t}(),DA=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(nl.c)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(RA),LA=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new EA(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,tA(this._delegate,function(t,e,n){var r=e,i=HN("where",t);return new eA(i,r,n)}(e,n,r)))}catch(e){throw AA(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,tA(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=HN("orderBy",t);return new nA(r,n)}(e,n)))}catch(e){throw AA(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,tA(this._delegate,function(t){return Yx("limit",t),new rA("limit",t,"F")}(e)))}catch(e){throw AA(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,tA(this._delegate,function(t){return Yx("limitToLast",t),new rA("limitToLast",t,"L")}(e)))}catch(e){throw AA(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,tA(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new iA("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw AA(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,tA(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new iA("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw AA(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,tA(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new oA("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw AA(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,tA(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new oA("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw AA(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return oN(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Qx(t,tN);var e=Qx(t.firestore,uN),n=cN(e),r=new vA(e);return function(t,e){var n=this,r=new xS;return t.asyncQueue.enqueueAndForget((function(){return Object(nl.b)(n,void 0,void 0,(function(){var n;return Object(nl.d)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(nl.b)(this,void 0,void 0,(function(){var r,i,o,a,s;return Object(nl.d)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,iT(t,e,!0)];case 1:return s=u.sent(),r=new RI(e,s.Bn),i=r._o(s.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return a=u.sent(),s=mI(a,"Failed to execute query '"+e+" against cache"),n.reject(s),[3,3];case 3:return[2]}}))}))},[4,Ix(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new QN(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Qx(t,tN);var e=Qx(t.firestore,uN),n=cN(e),r=new vA(e);return Px(n,t._query,{source:"server"}).then((function(n){return new QN(e,r,t,n)}))}(this._delegate):function(t){t=Qx(t,tN);var e=Qx(t.firestore,uN),n=cN(e),r=new vA(e);return ZN(t._query),Px(n,t._query).then((function(n){return new QN(e,r,t,n)}))}(this._delegate)).then((function(t){return new FA(e.firestore,new QN(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=jA(e),i=PA(e,(function(e){return new FA(t.firestore,new QN(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return gA(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?xA.sa(this.firestore,e):null))},t}(),MA=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new DA(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),FA=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new LA(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new DA(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new MA(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new DA(n._firestore,r))}))},t.prototype.isEqual=function(t){return XN(this._delegate,t._delegate)},t}(),UA=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(nl.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new NA(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new NA(this.firestore,void 0===t?rN(this._delegate):rN(this._delegate,t))}catch(t){throw AA(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Qx(t.firestore,uN),r=rN(t),i=hA(t.converter,e);return mA(n,[CN(ON(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,FO.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new NA(e.firestore,t)}))},e.prototype.isEqual=function(t){return iN(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?xA.sa(this.firestore,t):null))},e}(LA);function qA(t){return Qx(t,$x)}var VA,zA=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(dN.bind.apply(dN,Object(nl.g)([void 0],t)))}return t.documentId=function(){return new t(lk.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(ay.o)(t))instanceof dN&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),BA=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new TN("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new SN("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new IN("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new xN("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new NN("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),WA={Firestore:SA,GeoPoint:yN,Timestamp:nk,Blob:OA,Transaction:TA,WriteBatch:IA,DocumentReference:NA,DocumentSnapshot:RA,Query:LA,QueryDocumentSnapshot:DA,QuerySnapshot:FA,CollectionReference:UA,FieldPath:zA,FieldValue:BA,setLogLevel:function(t){zw.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function HA(t,e){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pp.b;return new de.a((function(n){var r;return null!=e?e.schedule((function(){r=t.onSnapshot({includeMetadataChanges:!0},n)})):r=t.onSnapshot({includeMetadataChanges:!0},n),function(){null!=r&&r()}}))}(t,e)}function KA(t,e){return HA(t,e).pipe(Object(ve.a)((function(t){return{payload:t,type:"query"}})))}function GA(t,n){return KA(t,n).pipe(pl(void 0),Lg(),Object(ve.a)((function(t){var n=e(t,2),r=n[0],i=n[1],o=i.payload.docChanges(),a=o.map((function(t){return{type:t.type,payload:t}}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((function(t,e){var n=o.find((function(e){return e.doc.ref.isEqual(t.ref)})),i=null==r?void 0:r.payload.docs.find((function(e){return e.ref.isEqual(t.ref)}));n&&JSON.stringify(n.doc.metadata)===JSON.stringify(t.metadata)||!n&&i&&JSON.stringify(i.metadata)===JSON.stringify(t.metadata)||a.push({type:"modified",payload:{oldIndex:e,newIndex:e,type:"modified",doc:t}})})),a})))}function JA(t,e,n){return GA(t,n).pipe(pc((function(t,n){return function(t,e,n){return e.forEach((function(e){n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return QA(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){var n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return QA(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return QA(t,e.oldIndex,1)}return t}(t,e))})),t}(t,n.map((function(t){return t.payload})),e)}),[]),_c(),Object(ve.a)((function(t){return t.map((function(t){return{type:t.type,payload:t}}))})))}function QA(t,e,n){for(var r=t.slice(),i=arguments.length,o=new Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];return r.splice.apply(r,[e,n].concat(o)),r}function YA(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(function(t,e){t.INTERNAL.registerComponent(new sy.a("firestore",(function(t){return function(t,e){return new SA(t,new uN(t,e),new CA)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},WA)))})(VA=oy.a),VA.registerVersion("@firebase/firestore","2.3.1");var XA=function(){function n(t,e,r){h(this,n),this.ref=t,this.query=e,this.afs=r}return d(n,[{key:"stateChanges",value:function(t){var n=GA(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(n=n.pipe(Object(ve.a)((function(e){return e.filter((function(e){return t.indexOf(e.type)>-1}))})))),n.pipe(pl(void 0),Lg(),gc((function(t){var n=e(t,2),r=n[0];return n[1].length>0||!r})),Object(ve.a)((function(t){var n=e(t,2);n[0];return n[1]})),this.afs.keepUnstableUntilFirst)}},{key:"auditTrail",value:function(t){return this.stateChanges(t).pipe(pc((function(t,e){return[].concat(i(t),i(e))}),[]))}},{key:"snapshotChanges",value:function(t){var e=YA(t);return JA(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}},{key:"valueChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return KA(this.query,this.afs.schedulers.outsideAngular).pipe(Object(ve.a)((function(n){return n.payload.docs.map((function(n){return e.idField?Object.assign(Object.assign({},n.data()),t({},e.idField,n.id)):n.data()}))})),this.afs.keepUnstableUntilFirst)}},{key:"get",value:function(t){return Object(ge.a)(this.query.get(t)).pipe(Object(ic.b)(this.afs.schedulers.insideAngular))}},{key:"add",value:function(t){return this.ref.add(t)}},{key:"doc",value:function(t){return new ZA(this.ref.doc(t),this.afs)}}]),n}(),ZA=function(){function n(t,e){h(this,n),this.ref=t,this.afs=e}return d(n,[{key:"set",value:function(t,e){return this.ref.set(t,e)}},{key:"update",value:function(t){return this.ref.update(t)}},{key:"delete",value:function(){return this.ref.delete()}},{key:"collection",value:function(t,e){var n=ij(this.ref.collection(t),e),r=n.ref,i=n.query;return new XA(r,i,this.afs)}},{key:"snapshotChanges",value:function(){return HA(this.ref,this.afs.schedulers.outsideAngular).pipe(pl(void 0),Lg(),Object(ve.a)((function(t){var n=e(t,2),r=n[0],i=n[1];return i.exists?(null==r?void 0:r.exists)?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))).pipe(this.afs.keepUnstableUntilFirst)}},{key:"valueChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.snapshotChanges().pipe(Object(ve.a)((function(n){var r=n.payload;return e.idField?Object.assign(Object.assign({},r.data()),t({},e.idField,r.id)):r.data()})))}},{key:"get",value:function(t){return Object(ge.a)(this.ref.get(t)).pipe(Object(ic.b)(this.afs.schedulers.insideAngular))}}]),n}(),$A=function(){function e(t,n){h(this,e),this.query=t,this.afs=n}return d(e,[{key:"stateChanges",value:function(t){return t&&0!==t.length?GA(this.query,this.afs.schedulers.outsideAngular).pipe(Object(ve.a)((function(e){return e.filter((function(e){return t.indexOf(e.type)>-1}))})),gc((function(t){return t.length>0})),this.afs.keepUnstableUntilFirst):GA(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}},{key:"auditTrail",value:function(t){return this.stateChanges(t).pipe(pc((function(t,e){return[].concat(i(t),i(e))}),[]))}},{key:"snapshotChanges",value:function(t){var e=YA(t);return JA(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}},{key:"valueChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return KA(this.query,this.afs.schedulers.outsideAngular).pipe(Object(ve.a)((function(n){return n.payload.docs.map((function(n){return e.idField?Object.assign(t({},e.idField,n.id),n.data()):n.data()}))})),this.afs.keepUnstableUntilFirst)}},{key:"get",value:function(t){return Object(ge.a)(this.query.get(t)).pipe(Object(ic.b)(this.afs.schedulers.insideAngular))}}]),e}(),tj=new s.q("angularfire2.enableFirestorePersistence"),ej=new s.q("angularfire2.firestore.persistenceSettings"),nj=new s.q("angularfire2.firestore.settings"),rj=new s.q("angularfire2.firestore.use-emulator");function ij(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t};return{query:e(t),ref:t}}var oj,aj,sj=((aj=function(){function t(n,r,o,a,s,u,c,l,f){h(this,t),this.schedulers=new mv.d(u),this.keepUnstableUntilFirst=Object(mv.h)(this.schedulers);var d=Object(mv.g)(n,u,r);!Rv.a.auth&&f&&Object(mv.j)();var p=l,v=e(Object(mv.f)(d.name+".firestore","AngularFirestore",d,(function(){var t=u.runOutsideAngular((function(){return d.firestore()}));return a&&t.settings(a),p&&t.useEmulator.apply(t,i(p)),o&&!kt(s)?[t,u.runOutsideAngular((function(){try{return Object(ge.a)(t.enablePersistence(c||void 0).then((function(){return!0}),(function(){return!1})))}catch(VA){return"undefined"!=typeof console&&console.warn(VA),Object(hc.a)(!1)}}))]:[t,Object(hc.a)(!1)]}),[a,p,o]),2);this.firestore=v[0],this.persistenceEnabled$=v[1]}return d(t,[{key:"collection",value:function(t,e){var n=ij("string"==typeof t?this.firestore.collection(t):t,e),r=n.ref,i=n.query,o=this.schedulers.ngZone.run((function(){return r}));return new XA(o,i,this)}},{key:"collectionGroup",value:function(t,e){var n=e||function(t){return t},r=this.firestore.collectionGroup(t);return new $A(n(r),this)}},{key:"doc",value:function(t){var e;e="string"==typeof t?this.firestore.doc(t):t;var n=this.schedulers.ngZone.run((function(){return e}));return new ZA(n,this)}},{key:"createId",value:function(){return this.firestore.collection("_").doc().id}}]),t}()).\u0275fac=function(t){return new(t||aj)(s.Sb(mv.c),s.Sb(mv.b,8),s.Sb(tj,8),s.Sb(nj,8),s.Sb(s.B),s.Sb(s.z),s.Sb(ej,8),s.Sb(rj,8),s.Sb(Ev,8))},aj.\u0275prov=s.Fb({factory:function(){return new aj(s.Sb(mv.c),s.Sb(mv.b,8),s.Sb(tj,8),s.Sb(nj,8),s.Sb(s.B),s.Sb(s.z),s.Sb(ej,8),s.Sb(rj,8),s.Sb(Ev,8))},token:aj,providedIn:"any"}),aj),uj=((oj=function(){function t(e){h(this,t),this.afs=e,this.chats=[],this.usuario={},this.cargados=0}return d(t,[{key:"cargarMensajes",value:function(){var t=this;return this.itemsCollection=this.afs.collection("chats",(function(t){return t.orderBy("fecha","desc").limit(10)})),this.cargados=10,this.itemsCollection.valueChanges().pipe(Object(ve.a)((function(e){t.chats=[];var n,r=a(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;t.chats.unshift(i)}}catch(o){r.e(o)}finally{r.f()}})))}},{key:"cargarMasMensajes",value:function(){var t=this;return this.cargados+=10,this.itemsCollection=this.afs.collection("chats",(function(e){return e.orderBy("fecha","desc").limit(t.cargados)})),this.itemsCollection.valueChanges().pipe(Object(ve.a)((function(e){t.chats=[];var n,r=a(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;t.chats.unshift(i)}}catch(o){r.e(o)}finally{r.f()}})))}},{key:"agregarMensaje",value:function(t,e,n){var r={nombre:e,mensaje:t,fecha:(new Date).getTime(),uid:n};return this.itemsCollection.add(r)}}]),t}()).\u0275fac=function(t){return new(t||oj)(s.Sb(sj))},oj.\u0275prov=s.Fb({token:oj,factory:oj.\u0275fac,providedIn:"root"}),oj),cj=function(t){return{"text-end":t}},lj=function(t,e){return{"bg-primary":t,"bg-success":e}};function hj(t,e){if(1&t&&(s.Ob(0,"div",10),s.Ob(1,"span",11),s.qc(2),s.Nb(),s.Ob(3,"p"),s.qc(4),s.Nb(),s.Nb()),2&t){var n=e.$implicit,r=s.Xb(2);s.dc("ngClass",s.gc(4,cj,r.usuario.id==n.uid)),s.zb(1),s.dc("ngClass",s.hc(6,lj,r.usuario.id==n.uid,r.usuario.id!=n.uid)),s.zb(1),s.sc(" ",n.nombre," "),s.zb(2),s.rc(n.mensaje)}}function fj(t,e){if(1&t){var n=s.Pb();s.Ob(0,"div",3),s.Ob(1,"h2"),s.qc(2,"Chat"),s.Nb(),s.Kb(3,"hr"),s.Ob(4,"div",4,5),s.Ob(6,"div",6),s.Vb("click",(function(){return s.kc(n),s.Xb().cargarMasMensajes()})),s.Ob(7,"h1"),s.Ob(8,"button",7),s.Ob(9,"b"),s.qc(10,"+"),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.oc(11,hj,5,9,"div",8),s.Nb(),s.Ob(12,"input",9),s.Vb("ngModelChange",(function(t){return s.kc(n),s.Xb().mensaje=t}))("keyup.enter",(function(){return s.kc(n),s.Xb().enviar_mensaje()})),s.Nb(),s.Nb()}if(2&t){var r=s.Xb();s.zb(11),s.dc("ngForOf",r._cs.chats),s.zb(1),s.dc("ngModel",r.mensaje)}}var dj=function(){return["/forgot-password"]};function pj(t,e){if(1&t){var n=s.Pb();s.Ob(0,"div",12),s.Ob(1,"h1"),s.qc(2,"You have to be logged in to chat!"),s.Nb(),s.Nb(),s.Ob(3,"div",13),s.Ob(4,"div",14),s.Ob(5,"button",15),s.Vb("click",(function(){return s.kc(n),s.Xb().authService.GoogleAuthWithReload()})),s.Kb(6,"i",16),s.qc(7," Log in with Google "),s.Nb(),s.Nb(),s.Nb(),s.Kb(8,"br"),s.Ob(9,"div",17),s.Ob(10,"div",14),s.Ob(11,"h2",18),s.qc(12,"Enter into your account"),s.Nb(),s.Ob(13,"div",19),s.Kb(14,"input",20,21),s.Nb(),s.Ob(16,"div",22),s.Kb(17,"input",23,24),s.Ob(19,"a",25),s.qc(20,"Forgot Password?"),s.Nb(),s.Nb(),s.Ob(21,"div",19),s.Ob(22,"button",26),s.Vb("click",(function(){s.kc(n);var t=s.jc(15),e=s.jc(18);return s.Xb().authService.SignInFileWithReload(t.value,e.value)})),s.qc(23,"Enter"),s.Nb(),s.Nb(),s.Nb(),s.Kb(24,"div",14),s.Nb(),s.Ob(25,"h4",27),s.qc(26,"Or"),s.Nb(),s.Ob(27,"div",28),s.Ob(28,"div",29),s.Ob(29,"h2",18),s.qc(30,"Create a new account"),s.Nb(),s.Ob(31,"div",19),s.Kb(32,"input",30,31),s.Nb(),s.Ob(34,"div",22),s.Kb(35,"input",23,32),s.Nb(),s.Ob(37,"div",19),s.Ob(38,"button",26),s.Vb("click",(function(){s.kc(n);var t=s.jc(33),e=s.jc(36);return s.Xb().authService.SignUpFileWithReload(t.value,e.value)})),s.qc(39," Create account "),s.Nb(),s.Nb(),s.Nb(),s.Nb()}2&t&&(s.zb(19),s.dc("routerLink",s.fc(1,dj)))}var vj,yj,gj,mj=((gj=function(){function t(e,n){h(this,t),this.authService=e,this._cs=n,this.mensaje="",this.usuario={},this.isLogged=this.authService.isLoggedIn}return d(t,[{key:"ngOnInit",value:function(){var t=this;this._cs.cargarMasMensajes().subscribe((function(){setTimeout((function(){t.elemento=document.getElementById("app-mensajes"),null!=t.elemento&&(t.elemento.scrollTop=t.elemento.scrollHeight)}),20)}));var e=JSON.parse(localStorage.getItem("user"));null!=e&&(this.usuario.nombre=e.displayName,this.usuario.id=e.uid,this.usuario.fotoUrl=e.photoURL,this.usuario.email=e.email,this.usuario.isVerified=e.emailVerified)}},{key:"cargarMasMensajes",value:function(){this._cs.cargarMasMensajes().subscribe()}},{key:"enviar_mensaje",value:function(){var t=this;0!==this.mensaje.length&&this._cs.agregarMensaje(this.mensaje,this.usuario.nombre,this.usuario.id).then((function(){t.mensaje=""})).catch((function(t){return console.log("Error al enviar",t)}))}}]),t}()).\u0275fac=function(t){return new(t||gj)(s.Jb(Ig),s.Jb(uj))},gj.\u0275cmp=s.Db({type:gj,selectors:[["app-chat"]],decls:6,vars:2,consts:[[1,"main-container","text-center","container"],["class","chat-window mt-4",4,"ngIf","ngIfElse"],["loggin",""],[1,"chat-window","mt-4"],["id","app-mensajes",1,"app-mensajes","text-start"],["myOverlay",""],[1,"text-center",3,"click"],[1,"btn","btn-outline-light"],[3,"ngClass",4,"ngFor","ngForOf"],["type","text","name","mensaje","placeholder","Enviar mensaje",1,"form-control","inputChat",3,"ngModel","ngModelChange","keyup.enter"],[3,"ngClass"],[1,"badge",3,"ngClass"],["role","alert",1,"alert","alert-warning","w-75","margin0","mb-3"],[1,"card","text-white","bg-dark","text-center","margin0","mb-3","w40rem"],[1,"card-body"],["type","button",1,"btn","btn-outline-primary","w-100",3,"click"],[1,"fab","fa-google-plus-g"],[1,"card","text-white","bg-dark","text-center","margin0","w40rem","mb-4"],[1,"mb-3"],[1,"formGroup"],["type","text","placeholder","Email Address","required","",1,"formControl","w-75","py-1","mb-1"],["userName",""],[1,"formGroup","mb-2"],["type","password","placeholder","Password","required","",1,"formControl","w-75","py-1","mb-1"],["userPassword",""],[1,"d-block",3,"routerLink"],["type","button",1,"btn","btn-primary","w-75",3,"click"],[1,"mb-4"],[1,"card","text-white","bg-dark","text-center","margin0","w40rem"],[1,"card-body","mb-4"],["type","email","placeholder","Email Address","required","",1,"formControl","w-75","py-1","mb-1"],["userEmail",""],["userPwd",""]],template:function(t,e){if(1&t&&(s.Ob(0,"div",0),s.Ob(1,"h1"),s.qc(2,"Chat with firestore database"),s.Nb(),s.oc(3,fj,13,2,"div",1),s.oc(4,pj,40,2,"ng-template",null,2,s.pc),s.Nb()),2&t){var n=s.jc(5);s.zb(3),s.dc("ngIf",e.isLogged)("ngIfElse",n)}},directives:[st,ot,xe,Re,Ln,rt,Uf],encapsulation:2}),gj),bj=((yj=function(){function t(){h(this,t)}return d(t,[{key:"transform",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t&&t.length>e?t[e].url:"assets/img/noimage.png"}}]),t}()).\u0275fac=function(t){return new(t||yj)},yj.\u0275pipe=s.Ib({name:"sinfoto",type:yj,pure:!0}),yj),_j=((vj=function(){function t(e){h(this,t),this.domSanitazer=e}return d(t,[{key:"transform",value:function(t,e){return this.domSanitazer.bypassSecurityTrustResourceUrl(e+t)}}]),t}()).\u0275fac=function(t){return new(t||vj)(s.Jb(se))},vj.\u0275pipe=s.Ib({name:"domseguro",type:vj,pure:!0}),vj),wj=function(t){return{active:t}};function kj(t,e){if(1&t&&(s.Ob(0,"div",13),s.Kb(1,"img",14),s.Yb(2,"sinfoto"),s.Ob(3,"div",15),s.Ob(4,"h2",16),s.qc(5),s.Nb(),s.Kb(6,"iframe",17),s.Yb(7,"domseguro"),s.Nb(),s.Nb()),2&t){var n=e.$implicit;s.dc("ngClass",s.gc(9,wj,e.first)),s.zb(1),s.dc("src",s.Zb(2,4,n.images),s.mc),s.zb(4),s.rc(n.name),s.zb(1),s.dc("src",s.ac(7,6,n.uri,"https://embed.spotify.com/?uri="),s.lc)}}function Oj(t,e){if(1&t&&(s.Ob(0,"div",5),s.Ob(1,"div",6),s.oc(2,kj,8,11,"div",7),s.Nb(),s.Ob(3,"button",8),s.Kb(4,"span",9),s.Ob(5,"span",10),s.qc(6,"Previous"),s.Nb(),s.Nb(),s.Ob(7,"button",11),s.Kb(8,"span",12),s.Ob(9,"span",10),s.qc(10,"Next"),s.Nb(),s.Nb(),s.Nb()),2&t){var n=s.Xb();s.zb(2),s.dc("ngForOf",n._spotifyService.releases)}}function Cj(t,e){1&t&&(s.Ob(0,"div",0),s.Ob(1,"div",18),s.Ob(2,"h2"),s.qc(3,"CARGANDO DATOS..."),s.Nb(),s.Nb(),s.Nb())}var Sj,Ej,Tj=((Ej=function(){function t(e){h(this,t),this._spotifyService=e,this.termino="","undefined"!=typeof Storage?this.getTokenStorageAndReleases():this.getTokenAndReleasesWithoutStorage()}return d(t,[{key:"getNewReleases",value:function(t){return this._spotifyService.getNewReleasesS(t)}},{key:"createToken",value:function(){return this._spotifyService.createToken()}},{key:"createTokenStorage",value:function(){return this._spotifyService.createToken()}},{key:"getTokenStorageAndReleases",value:function(){var t=this;this.token=sessionStorage.getItem("tokenSpotify"),null==this.token||""==this.token||"null"==this.token?this.createTokenStorage().subscribe((function(e){t.token=e,sessionStorage.setItem("tokenSpotify",t.token),t.getNewReleases(t.token).subscribe((function(){}))})):this.getNewReleases(this.token).subscribe((function(){}))}},{key:"getTokenAndReleasesWithoutStorage",value:function(){var t=this;this.createToken().subscribe((function(){return t.getNewReleases().subscribe((function(){}))}))}}]),t}()).\u0275fac=function(t){return new(t||Ej)(s.Jb(ry))},Ej.\u0275cmp=s.Db({type:Ej,selectors:[["app-spoti"]],decls:10,vars:2,consts:[[1,"container","main-container"],[1,"imgContiner"],["src","/assets/img/banner-ico.png",1,"flexibleImg","spotiLogo"],["id","carouselExampleControls","class","carousel slide","data-bs-ride","carousel",4,"ngIf","ngIfElse"],["charginData",""],["id","carouselExampleControls","data-bs-ride","carousel",1,"carousel","slide"],[1,"carousel-inner"],["class","carousel-item",3,"ngClass",4,"ngFor","ngForOf"],["type","button","data-bs-target","#carouselExampleControls","data-bs-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],["type","button","data-bs-target","#carouselExampleControls","data-bs-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"],[1,"carousel-item",3,"ngClass"],["alt","imagen del slide 1",1,"d-block","carousel-img",3,"src"],[1,"carousel-caption","d-md-block"],[1,"carouselName"],["width","300","height","80","frameborder","0",3,"src"],["role","alert",1,"alert","alert-info"]],template:function(t,e){if(1&t&&(s.Ob(0,"div",0),s.Ob(1,"h1"),s.Ob(2,"div",1),s.Kb(3,"img",2),s.qc(4," Api Spotify - "),s.Ob(5,"small"),s.qc(6,"Top Lanzamientos"),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.oc(7,Oj,11,1,"div",3),s.oc(8,Cj,4,0,"ng-template",null,4,s.pc)),2&t){var n=s.jc(9);s.zb(7),s.dc("ngIf",e._spotifyService.releases.length>17)("ngIfElse",n)}},directives:[st,ot,rt],pipes:[bj,_j],encapsulation:2}),Ej),Ij=((Sj=function(){function t(e){h(this,t),this.domSanitizer=e}return d(t,[{key:"transform",value:function(t){return this.domSanitizer.bypassSecurityTrustResourceUrl("https://www.youtube.com/embed/"+t)}}]),t}()).\u0275fac=function(t){return new(t||Sj)(s.Jb(se))},Sj.\u0275pipe=s.Ib({name:"videoYoutube",type:Sj,pure:!0}),Sj);function xj(t,e){if(1&t){var n=s.Pb();s.Ob(0,"div",8),s.Ob(1,"div",9),s.Kb(2,"img",10),s.Ob(3,"div",11),s.Ob(4,"h5",12),s.qc(5),s.Nb(),s.Ob(6,"button",13),s.Vb("click",(function(){s.kc(n);var t=e.$implicit;return s.Xb(2).verVideo(t)})),s.qc(7,"Ver video"),s.Nb(),s.Nb(),s.Nb(),s.Nb()}if(2&t){var r=e.$implicit;s.zb(2),s.dc("src",r.snippet.thumbnails.high.url,s.mc)("alt",r.snippet.title),s.zb(3),s.rc(r.snippet.title)}}function Nj(t,e){if(1&t&&(s.Ob(0,"div",6),s.oc(1,xj,8,3,"div",7),s.Nb()),2&t){var n=s.Xb();s.zb(1),s.dc("ngForOf",n.videos)}}function Aj(t,e){if(1&t){var n=s.Pb();s.Ob(0,"div",14),s.Ob(1,"div",15),s.Ob(2,"h5",16),s.qc(3),s.Nb(),s.Nb(),s.Ob(4,"div",17),s.Kb(5,"iframe",18),s.Yb(6,"videoYoutube"),s.Nb(),s.Ob(7,"div",19),s.Ob(8,"button",20),s.Vb("click",(function(){return s.kc(n),s.Xb().cerrarModal()})),s.qc(9,"Cerrar Video"),s.Nb(),s.Nb(),s.Nb()}if(2&t){var r=s.Xb();s.zb(3),s.rc(r.videoSel.snippet.title),s.zb(2),s.dc("src",s.Zb(6,2,r.videoSel.id),s.lc)}}var jj,Pj=((jj=function(){function t(e){var n=this;h(this,t),this._yts=e,this.videos=[],this._yts.getVideos().subscribe((function(t){n.videos=t}))}return d(t,[{key:"verVideo",value:function(t){this.videoSel=t}},{key:"cerrarModal",value:function(){this.videoSel=null}},{key:"cargarMas",value:function(){var t=this;this._yts.getVideos().subscribe((function(e){t.videos.push.apply(t.videos,e)}))}}]),t}()).\u0275fac=function(t){return new(t||jj)(s.Jb(iy))},jj.\u0275cmp=s.Db({type:jj,selectors:[["app-youtube"]],decls:10,vars:2,consts:[[1,"container","main-container"],["class","row row-cols-1 row-cols-md-3 g-4",4,"ngIf"],["type","button",1,"btn","btn-outline-primary","w-100","mt-2","mb-5",3,"click"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true","data-bs-backdrop","static","data-bs-keyboard","false",1,"modal","fade","c-black"],[1,"modal-dialog"],["class","modal-content",4,"ngIf"],[1,"row","row-cols-1","row-cols-md-3","g-4"],["class","col",4,"ngFor","ngForOf"],[1,"col"],[1,"card","text-white","bg-dark"],[1,"card-img-top",3,"src","alt"],[1,"card-body"],[1,"card-title"],["data-bs-toggle","modal","data-bs-target","#exampleModal","type","button",1,"btn","btn-outline-primary","w-100",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],["width","100%","height","315","title","YouTube video player","frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","",3,"src"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"]],template:function(t,e){1&t&&(s.Ob(0,"div",0),s.Ob(1,"h1"),s.qc(2,"Api YuTube - Tendencias Espa\xf1a"),s.Nb(),s.Kb(3,"hr"),s.oc(4,Nj,2,1,"div",1),s.Ob(5,"button",2),s.Vb("click",(function(){return e.cargarMas()})),s.qc(6,"Cargar m\xe1s"),s.Nb(),s.Nb(),s.Ob(7,"div",3),s.Ob(8,"div",4),s.oc(9,Aj,10,4,"div",5),s.Nb(),s.Nb()),2&t&&(s.zb(4),s.dc("ngIf",e.videos.length>0),s.zb(5),s.dc("ngIf",e.videoSel))},directives:[st,ot],pipes:[Ij],encapsulation:2}),jj);function Rj(t,e){if(1&t&&(s.Ob(0,"p"),s.qc(1),s.Nb()),2&t){var n=s.Xb().$implicit;s.zb(1),s.rc(n.desc)}}function Dj(t,e){if(1&t){var n=s.Pb();s.Ob(0,"agm-marker",4),s.Vb("markerClick",(function(){s.kc(n);var t=e.$implicit,r=e.index;return s.Xb().clickMarcador(t,r)}))("dragEnd",(function(t){s.kc(n);var r=e.$implicit;return s.Xb().dragEndMarcador(r,t)})),s.Ob(1,"agm-info-window",5),s.Ob(2,"strong"),s.qc(3),s.Nb(),s.oc(4,Rj,2,1,"p",6),s.Ob(5,"p",7),s.Ob(6,"a",8),s.Vb("click",(function(){s.kc(n);var t=e.index,r=s.Xb();return r._ms.borrarMarcador(t),r.marcadorSel=null})),s.qc(7," Borrar marcador "),s.Nb(),s.Nb(),s.Nb(),s.Nb()}if(2&t){var r=e.$implicit;s.dc("latitude",r.lat)("longitude",r.lng)("title",r.titulo)("markerDraggable",r.draggable),s.zb(1),s.dc("disableAutoPan",!0),s.zb(2),s.rc(r.titulo),s.zb(1),s.dc("ngIf",r.desc)}}function Lj(t,e){1&t&&(s.Ob(0,"div",9),s.Ob(1,"div",10),s.qc(2," Haga click en el mapa para crear un marcador o seleccione uno. "),s.Nb(),s.Nb())}function Mj(t,e){if(1&t){var n=s.Pb();s.Ob(0,"div",9),s.Ob(1,"h5"),s.qc(2,"Marcador"),s.Nb(),s.Kb(3,"hr"),s.Ob(4,"div",11),s.Ob(5,"label",12),s.qc(6,"Titulo"),s.Nb(),s.Ob(7,"input",13),s.Vb("ngModelChange",(function(t){return s.kc(n),s.Xb().marcadorSel.titulo=t})),s.Nb(),s.Nb(),s.Ob(8,"div",11),s.Ob(9,"label",12),s.qc(10,"Descripci\xf3n"),s.Nb(),s.Ob(11,"textarea",14),s.Vb("ngModelChange",(function(t){return s.kc(n),s.Xb().marcadorSel.desc=t})),s.qc(12,"        "),s.Nb(),s.Nb(),s.Ob(13,"div",11),s.Ob(14,"label",12),s.qc(15,"Draggable"),s.Nb(),s.Ob(16,"select",15),s.Vb("ngModelChange",(function(t){return s.kc(n),s.Xb().draggable=t}))("change",(function(){return s.kc(n),s.Xb().cambiarDraggable()})),s.Ob(17,"option",16),s.qc(18,"True"),s.Nb(),s.Ob(19,"option",17),s.qc(20,"False"),s.Nb(),s.Nb(),s.Nb(),s.Kb(21,"br"),s.Ob(22,"button",18),s.Vb("click",(function(){return s.kc(n),s.Xb()._ms.guardarMarcadores()})),s.qc(23," Guardar "),s.Nb(),s.Nb()}if(2&t){var r=s.Xb();s.zb(7),s.dc("ngModel",r.marcadorSel.titulo),s.zb(4),s.dc("ngModel",r.marcadorSel.desc),s.zb(5),s.dc("ngModel",r.draggable)}}var Fj,Uj,qj=((Fj=function(){function t(e){h(this,t),this._ms=e,this.lat=38.48420283763195,this.lng=-.7677831619109627,this.zoom=15,this.marcadorSel=null,this.draggable="1",this._ms.cargarMarcadores()}return d(t,[{key:"clickMapa",value:function(t){this._ms.insertarMarcador({lat:t.coords.lat,lng:t.coords.lng,titulo:"sin titulo",draggable:!0})}},{key:"clickMarcador",value:function(t,e){this.marcadorSel=t,this.draggable=this.marcadorSel.draggable?"1":"0"}},{key:"dragEndMarcador",value:function(t,e){var n=e.coords.lng;t.lat=e.coords.lat,t.lng=n,this._ms.guardarMarcadores()}},{key:"cambiarDraggable",value:function(){this.marcadorSel.draggable="1"==this.draggable}}]),t}()).\u0275fac=function(t){return new(t||Fj)(s.Jb(ny))},Fj.\u0275cmp=s.Db({type:Fj,selectors:[["app-maps"]],decls:5,vars:6,consts:[[1,""],[3,"latitude","longitude","zoom","mapClick"],[3,"latitude","longitude","title","markerDraggable","markerClick","dragEnd",4,"ngFor","ngForOf"],["class","container mt-2",4,"ngIf"],[3,"latitude","longitude","title","markerDraggable","markerClick","dragEnd"],[3,"disableAutoPan"],[4,"ngIf"],[1,"puntero"],[1,"text-danger",3,"click"],[1,"container","mt-2"],[1,"alert","alert-info"],[1,"form-group"],["for",""],["type","text","name","titulo",1,"form-control",3,"ngModel","ngModelChange"],["rows","5","name","desc",1,"form-control",3,"ngModel","ngModelChange"],["name","draggable",1,"form-control",3,"ngModel","ngModelChange","change"],["value","1"],["value","0"],["type","button",1,"btn","btn-outline-primary","w-100",3,"click"]],template:function(t,e){1&t&&(s.Ob(0,"div",0),s.Ob(1,"agm-map",1),s.Vb("mapClick",(function(t){return e.clickMapa(t)})),s.oc(2,Dj,8,7,"agm-marker",2),s.Nb(),s.Nb(),s.oc(3,Lj,3,0,"div",3),s.oc(4,Mj,24,3,"div",3)),2&t&&(s.zb(1),s.dc("latitude",e.lat)("longitude",e.lng)("zoom",e.zoom),s.zb(1),s.dc("ngForOf",e._ms.marcadores),s.zb(1),s.dc("ngIf",!e.marcadorSel),s.zb(1),s.dc("ngIf",e.marcadorSel))},directives:[uv,ot,st,lv,Hp,xe,Re,Ln,un,cn,vn],encapsulation:2}),Fj),Vj=function t(e,n){h(this,t),this.url="",this.estaSubiendo=!1,this.progreso=0,this.archivo=e,this.nombreArchivo=e.name,this.user=n},zj=((Uj=function(){function t(e){h(this,t),this.elemento=e,this.archivos=[],this.archivoSobre=new s.n}return d(t,[{key:"onDragEnter",value:function(t){this.archivoSobre.emit(!0)}},{key:"onDragLeave",value:function(t){this.archivoSobre.emit(!1)}},{key:"onDragOver",value:function(t){this._getTransferencia(t).dropEffect="copy",this._prevenirYdetener(t),this.archivoSobre.emit(!0)}},{key:"onDrop",value:function(t){var e=this._getTransferencia(t);e&&(0!=this.archivos.length&&this.limpiarArchivos(),this._agregarArchivos(e.files),this.archivoSobre.emit(!1),this._prevenirYdetener(t))}},{key:"_getTransferencia",value:function(t){return t.dataTransfer?t.dataTransfer:t.originalEvent.dataTransfer}},{key:"_prevenirYdetener",value:function(t){t.preventDefault(),t.stopPropagation()}},{key:"_archivoPuedeSerCargado",value:function(t){return!(this._archivoYaFueDroppeado(t.name)||!this._esImagen(t.type))}},{key:"_archivoYaFueDroppeado",value:function(t){for(var e in this.archivos)if(this.archivos[e].archivo.name===t)return console.log("Archivo ya existe en la lista",t),!0;return!1}},{key:"_esImagen",value:function(t){return""!=t&&null!=t&&t.startsWith("image")}},{key:"_agregarArchivos",value:function(t){for(var e in Object.getOwnPropertyNames(t)){var n=t[e];if(this._archivoPuedeSerCargado(n)){var r=JSON.parse(localStorage.getItem("user")),i=new Vj(n,r.displayName);this.archivos.push(i)}}}},{key:"limpiarArchivos",value:function(){var t,e=a(this.archivos);try{for(e.s();!(t=e.n()).done;)if(100!=t.value.progreso)return}catch(i){e.e(i)}finally{e.f()}for(var n=this.archivos.length,r=0;r<n;r++)this.archivos.pop()}}]),t}()).\u0275fac=function(t){return new(t||Uj)(s.Jb(s.l))},Uj.\u0275dir=s.Eb({type:Uj,selectors:[["","NgDropFiles",""]],hostBindings:function(t,e){1&t&&s.Vb("dragenter",(function(t){return e.onDragEnter(t)}))("dragleave",(function(t){return e.onDragLeave(t)}))("dragover",(function(t){return e.onDragOver(t)}))("drop",(function(t){return e.onDrop(t)}))},inputs:{archivos:"archivos"},outputs:{archivoSobre:"archivoSobre"}}),Uj),Bj=function(t){return{"text-green":t}},Wj=function(t){return{width:t}};function Hj(t,e){if(1&t&&(s.Ob(0,"tr"),s.Ob(1,"td",12),s.Ob(2,"strong"),s.qc(3),s.Nb(),s.Nb(),s.Ob(4,"td"),s.qc(5),s.Yb(6,"number"),s.Nb(),s.Ob(7,"td"),s.Ob(8,"div",13),s.Kb(9,"div",14),s.Nb(),s.Nb(),s.Nb()),2&t){var n=e.$implicit;s.zb(1),s.dc("ngClass",s.gc(7,Bj,n.estaSubiendo)),s.zb(2),s.rc(n.nombreArchivo),s.zb(2),s.sc("",s.ac(6,4,n.archivo.size/1024/1024,"0.2"),"MB"),s.zb(4),s.dc("ngStyle",s.gc(9,Wj,n.progreso+"%"))}}function Kj(t,e){if(1&t&&(s.Ob(0,"table",9),s.Ob(1,"thead",10),s.Ob(2,"tr"),s.Ob(3,"th"),s.qc(4,"Nombre"),s.Nb(),s.Ob(5,"th"),s.qc(6,"Tama\xf1o"),s.Nb(),s.Ob(7,"th"),s.qc(8,"Progreso"),s.Nb(),s.Nb(),s.Nb(),s.Ob(9,"tbody"),s.oc(10,Hj,10,11,"tr",11),s.Nb(),s.Nb()),2&t){var n=s.Xb(2);s.zb(10),s.dc("ngForOf",n.archivos)}}var Gj=function(t){return{"file-over":t}};function Jj(t,e){if(1&t){var n=s.Pb();s.Ob(0,"div",3),s.Ob(1,"div",3),s.Ob(2,"h3"),s.qc(3,"Seleccione y arrastre los archivos que desea subir"),s.Nb(),s.Ob(4,"div",4),s.Vb("archivoSobre",(function(t){return s.kc(n),s.Xb().archivoSobreDropZone(t)})),s.Ob(5,"h4"),s.qc(6,"Suelte los archivos aqu\xed"),s.Nb(),s.Kb(7,"img",5),s.Nb(),s.Nb(),s.Ob(8,"div",6),s.Ob(9,"button",7),s.Vb("click",(function(){return s.kc(n),s.Xb().cargarImagenesFirebase()})),s.qc(10," Subir "),s.Nb(),s.oc(11,Kj,11,1,"table",8),s.Nb(),s.Nb()}if(2&t){var r=s.Xb();s.zb(4),s.dc("ngClass",s.gc(4,Gj,r.estaSobreDropZone))("archivos",r.archivos),s.zb(5),s.dc("disabled",0==r.archivos.length),s.zb(2),s.dc("ngIf",r.archivos.length>0)}}var Qj=function(){return["/forgot-password"]};function Yj(t,e){if(1&t){var n=s.Pb();s.Ob(0,"div",15),s.Ob(1,"h1"),s.qc(2,"You have to be logged in to upload images!"),s.Nb(),s.Nb(),s.Ob(3,"div",16),s.Ob(4,"div",17),s.Ob(5,"button",18),s.Vb("click",(function(){return s.kc(n),s.Xb().authService.GoogleAuthWithReload()})),s.Kb(6,"i",19),s.qc(7," Log in with Google "),s.Nb(),s.Nb(),s.Nb(),s.Kb(8,"br"),s.Ob(9,"div",20),s.Ob(10,"div",17),s.Ob(11,"h2",21),s.qc(12,"Enter into your account"),s.Nb(),s.Ob(13,"div",22),s.Kb(14,"input",23,24),s.Nb(),s.Ob(16,"div",25),s.Kb(17,"input",26,27),s.Ob(19,"a",28),s.qc(20,"Forgot Password?"),s.Nb(),s.Nb(),s.Ob(21,"div",22),s.Ob(22,"button",29),s.Vb("click",(function(){s.kc(n);var t=s.jc(15),e=s.jc(18);return s.Xb().authService.SignInFileWithReload(t.value,e.value)})),s.qc(23,"Enter"),s.Nb(),s.Nb(),s.Nb(),s.Kb(24,"div",17),s.Nb(),s.Ob(25,"h4",30),s.qc(26,"Or"),s.Nb(),s.Ob(27,"div",31),s.Ob(28,"div",32),s.Ob(29,"h2",21),s.qc(30,"Create a new account"),s.Nb(),s.Ob(31,"div",22),s.Kb(32,"input",33,34),s.Nb(),s.Ob(34,"div",25),s.Kb(35,"input",26,35),s.Nb(),s.Ob(37,"div",22),s.Ob(38,"button",29),s.Vb("click",(function(){s.kc(n);var t=s.jc(33),e=s.jc(36);return s.Xb().authService.SignUpFileWithReload(t.value,e.value)})),s.qc(39," Create account "),s.Nb(),s.Nb(),s.Nb(),s.Nb()}2&t&&(s.zb(19),s.dc("routerLink",s.fc(1,Qj)))}var Xj,Zj=((Xj=function(){function t(e,n){h(this,t),this._cargaImagenes=e,this.authService=n,this.estaSobreDropZone=!1,this.archivos=[],this.isLogged=n.isLoggedIn}return d(t,[{key:"ngOnInit",value:function(){}},{key:"archivoSobreDropZone",value:function(t){this.estaSobreDropZone=t}},{key:"cargarImagenesFirebase",value:function(){this._cargaImagenes.charge_images(this.archivos)}}]),t}()).\u0275fac=function(t){return new(t||Xj)(s.Jb(Tg),s.Jb(Ig))},Xj.\u0275cmp=s.Db({type:Xj,selectors:[["app-gestor-archivos"]],decls:4,vars:2,consts:[[1,"main-container","text-center"],["class","row",4,"ngIf","ngIfElse"],["loggin",""],[1,"row"],["NgDropFiles","",1,"well","drop-zone",3,"ngClass","archivos","archivoSobre"],["src","/assets/img/drop-image.png"],[1,"col-md-12","mt-4","mb-3"],["type","button",1,"btn","btn-success","ms-3",3,"disabled","click"],["class","table table-dark table-striped",4,"ngIf"],[1,"table","table-dark","table-striped"],[1,"table-dark"],[4,"ngFor","ngForOf"],[3,"ngClass"],[1,"progress"],["role","progressbar",1,"progress-bar",2,"width","25%",3,"ngStyle"],["role","alert",1,"alert","alert-warning","w-75","margin0","mb-3"],[1,"card","text-white","bg-dark","text-center","margin0","mb-3","w40rem"],[1,"card-body"],["type","button",1,"btn","btn-outline-primary","w-100",3,"click"],[1,"fab","fa-google-plus-g"],[1,"card","text-white","bg-dark","text-center","margin0","w40rem","mb-4"],[1,"mb-3"],[1,"formGroup"],["type","text","placeholder","Email Address","required","",1,"formControl","w-75","py-1","mb-1"],["userName",""],[1,"formGroup","mb-2"],["type","password","placeholder","Password","required","",1,"formControl","w-75","py-1","mb-1"],["userPassword",""],[1,"d-block",3,"routerLink"],["type","button",1,"btn","btn-primary","w-75",3,"click"],[1,"mb-4"],[1,"card","text-white","bg-dark","text-center","margin0","w40rem"],[1,"card-body","mb-4"],["type","email","placeholder","Email Address","required","",1,"formControl","w-75","py-1","mb-1"],["userEmail",""],["userPwd",""]],template:function(t,e){if(1&t&&(s.Ob(0,"div",0),s.oc(1,Jj,12,6,"div",1),s.oc(2,Yj,40,2,"ng-template",null,2,s.pc),s.Nb()),2&t){var n=s.jc(3);s.zb(1),s.dc("ngIf",e.isLogged)("ngIfElse",n)}},directives:[st,zj,rt,ot,ht,Uf],pipes:[_t],encapsulation:2}),Xj),$j=function(t){return["/spotify/search/",t]};function tP(t,e){if(1&t&&(s.Ob(0,"div",9),s.Kb(1,"img",10),s.Yb(2,"sinfoto"),s.Ob(3,"p"),s.qc(4),s.Nb(),s.Kb(5,"hr"),s.Nb()),2&t){var n=e.$implicit;s.dc("routerLink",s.gc(5,$j,n.id)),s.zb(1),s.dc("src",s.Zb(2,3,n.images),s.mc),s.zb(3),s.rc(n.name)}}var eP,nP=((eP=function(){function t(e){h(this,t),this._spotifyService=e,this.termino=""}return d(t,[{key:"ngOnInit",value:function(){}},{key:"buscarArtista",value:function(){this._spotifyService.getArtistas(this.termino).subscribe()}}]),t}()).\u0275fac=function(t){return new(t||eP)(s.Jb(ry))},eP.\u0275cmp=s.Db({type:eP,selectors:[["app-search"]],decls:15,vars:2,consts:[[1,"container","main-container"],[1,"imgContiner"],["src","/assets/img/banner-ico.png",1,"flexibleImg","spotiLogo"],[1,"container","top-30"],[1,"row"],[1,"col-md-3"],["name","termino","type","text","placeholder","Buscar por artista",1,"form-control",3,"ngModel","ngModelChange","keyup"],[1,"col-md-9"],["class","col-md-3 text-center puntero","routerLinkActive","router-link-active",3,"routerLink",4,"ngFor","ngForOf"],["routerLinkActive","router-link-active",1,"col-md-3","text-center","puntero",3,"routerLink"],["alt","",1,"img-fluid","img-thumbnail",3,"src"]],template:function(t,e){1&t&&(s.Ob(0,"div",0),s.Ob(1,"h1"),s.Ob(2,"div",1),s.Kb(3,"img",2),s.qc(4," Api Spotify - "),s.Ob(5,"small"),s.qc(6,"Buscador"),s.Nb(),s.Nb(),s.Nb(),s.Ob(7,"div",3),s.Ob(8,"div",4),s.Ob(9,"div",5),s.Ob(10,"input",6),s.Vb("ngModelChange",(function(t){return e.termino=t}))("keyup",(function(){return e.buscarArtista()})),s.Nb(),s.Kb(11,"hr"),s.Nb(),s.Ob(12,"div",7),s.Ob(13,"div",4),s.oc(14,tP,6,7,"div",8),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Nb()),2&t&&(s.zb(10),s.dc("ngModel",e.termino),s.zb(4),s.dc("ngForOf",e._spotifyService.artistas))},directives:[xe,Re,Ln,ot,Hf,Ff],pipes:[bj],encapsulation:2}),eP);function rP(t,e){if(1&t&&s.Kb(0,"audio",17),2&t){var n=s.Xb().$implicit;s.dc("src",n.preview_url,s.mc)}}function iP(t,e){if(1&t&&(s.Kb(0,"iframe",18),s.Yb(1,"domseguro")),2&t){var n=s.Xb().$implicit;s.dc("src",s.ac(1,1,n.uri,"https://embed.spotify.com/?uri="),s.lc)}}function oP(t,e){if(1&t&&(s.Ob(0,"tr"),s.Ob(1,"td"),s.qc(2),s.Nb(),s.Ob(3,"td"),s.Kb(4,"img",14),s.Yb(5,"sinfoto"),s.Nb(),s.Ob(6,"td"),s.qc(7),s.Nb(),s.Ob(8,"td"),s.qc(9),s.Nb(),s.Ob(10,"td"),s.oc(11,rP,1,1,"audio",15),s.oc(12,iP,2,4,"ng-template",null,16,s.pc),s.Nb(),s.Nb()),2&t){var n=e.$implicit,r=e.index,i=s.jc(13);s.zb(2),s.rc(r+1),s.zb(2),s.dc("src",s.Zb(5,6,null==n.album?null:n.album.images),s.mc),s.zb(3),s.rc(n.name),s.zb(2),s.sc("",n.popularity,"%"),s.zb(2),s.dc("ngIf",n.preview_url)("ngIfElse",i)}}function aP(t,e){if(1&t&&(s.Ob(0,"div",9),s.Ob(1,"h3"),s.qc(2,"Top tracks"),s.Nb(),s.Kb(3,"hr"),s.Ob(4,"div",2),s.Ob(5,"div",10),s.Ob(6,"div",11),s.Ob(7,"table",12),s.Ob(8,"thead"),s.Ob(9,"tr"),s.Ob(10,"th"),s.qc(11,"#"),s.Nb(),s.Ob(12,"th"),s.qc(13,"Foto"),s.Nb(),s.Ob(14,"th"),s.qc(15,"Canci\xf3n"),s.Nb(),s.Ob(16,"th"),s.qc(17,"Popularidad"),s.Nb(),s.Ob(18,"th"),s.qc(19,"Preview"),s.Nb(),s.Nb(),s.Nb(),s.Ob(20,"tbody"),s.oc(21,oP,14,8,"tr",13),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Nb()),2&t){var n=s.Xb(2);s.zb(21),s.dc("ngForOf",n.pistas)}}var sP=function(){return["/spotify/search"]};function uP(t,e){if(1&t&&(s.Ob(0,"div",1),s.Ob(1,"div",2),s.Ob(2,"div",3),s.Kb(3,"img",4),s.Yb(4,"sinfoto"),s.Nb(),s.Ob(5,"div",5),s.Ob(6,"h1"),s.qc(7),s.Ob(8,"small"),s.qc(9),s.Nb(),s.Nb(),s.Kb(10,"hr"),s.Ob(11,"a",6),s.qc(12,"Abrir p\xe1gina Spotify"),s.Nb(),s.Ob(13,"a",7),s.qc(14,"Regresar"),s.Nb(),s.Nb(),s.Nb(),s.oc(15,aP,22,1,"div",8),s.Nb()),2&t){var n=s.Xb();s.zb(3),s.dc("src",s.Zb(4,6,n.artista.images),s.mc),s.zb(4),s.sc("",n.artista.name," "),s.zb(2),s.sc("Popularidad ",n.artista.popularity,"%"),s.zb(2),s.dc("href",null==n.artista.external_urls?null:n.artista.external_urls.spotify,s.mc),s.zb(2),s.dc("routerLink",s.fc(8,sP)),s.zb(2),s.dc("ngIf",n.pistas)}}var cP,lP=((cP=function(){function t(e,n){h(this,t),this.activatedRoute=e,this._spotifyService=n}return d(t,[{key:"ngOnInit",value:function(){var t=this;this.activatedRoute.params.pipe(Object(ve.a)((function(t){return t.id}))).subscribe((function(e){t._spotifyService.getArtista(e).subscribe((function(e){t.artista=e})),t._spotifyService.getTop(e).subscribe((function(e){t.pistas=e}))}))}}]),t}()).\u0275fac=function(t){return new(t||cP)(s.Jb(mh),s.Jb(ry))},cP.\u0275cmp=s.Db({type:cP,selectors:[["app-artist"]],decls:1,vars:1,consts:[["class","main-container container animated fadeIn fast",4,"ngIf"],[1,"main-container","container","animated","fadeIn","fast"],[1,"row"],[1,"col-md-3","text-center"],["alt","",1,"img-circle","img-thumbnail",3,"src"],[1,"col-md-9"],[1,"btn","btn-outline-success","m-right-10",3,"href"],["routerLinkActive","router-link-active",1,"btn","btn-outline-danger",3,"routerLink"],["class","container  text-center",4,"ngIf"],[1,"container","text-center"],[1,"col-md-12"],[1,"table-responsive"],[1,"table","table-dark","table-hover"],[4,"ngFor","ngForOf"],["alt","",1,"img-fluid","img-50",3,"src"],["controls","",3,"src",4,"ngIf","ngIfElse"],["pistaUri",""],["controls","",3,"src"],["width","300","height","80","frameborder","0",3,"src"]],template:function(t,e){1&t&&s.oc(0,uP,16,9,"div",0),2&t&&s.dc("ngIf",e.artista)},directives:[st,Uf,Hf,ot],pipes:[bj,_j],encapsulation:2}),cP);function hP(t,e){1&t&&(s.Ob(0,"div",3),s.Ob(1,"div",4),s.Ob(2,"h2"),s.Ob(3,"div",5),s.Kb(4,"span",6),s.Nb(),s.qc(5," CARGANDO IM\xc1GENES... "),s.Nb(),s.Nb(),s.Nb())}function fP(t,e){1&t&&(s.Ob(0,"div",3),s.Ob(1,"div",4),s.Ob(2,"h2"),s.qc(3,"NO HAY IM\xc1GENES SUBIDAS"),s.Nb(),s.Nb(),s.Nb())}function dP(t,e){if(1&t&&(s.Ob(0,"div",9),s.Kb(1,"img",10),s.Ob(2,"div",11),s.Ob(3,"h4",12),s.qc(4),s.Nb(),s.Ob(5,"i"),s.qc(6),s.Nb(),s.Nb(),s.Nb()),2&t){var n=e.$implicit,r=e.index;s.zb(1),s.dc("src",n[r].url,s.mc),s.zb(3),s.sc(" ",n[r].nombre,""),s.zb(2),s.rc(n[r].user)}}function pP(t,e){if(1&t&&(s.Ob(0,"div",7),s.oc(1,dP,7,3,"div",8),s.Nb()),2&t){var n=s.Xb();s.zb(1),s.dc("ngForOf",n.images)}}var vP,yP=((vP=function(){function e(n){var r=this;h(this,e),this._cargaImagenes=n,this.files=[],this.images=[],this.cargadas=0,this.startAt=0,this.noData=!1,n.getAllImages().then((function(e){r.files=e.val();var n=[];null!=r.files&&(Object.keys(r.files).map((function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n.push(t({},i,r.files[e])),i++})),r.images=n,r.cargadas+=r.images.length)})),setTimeout((function(){0==r.cargadas&&(r.noData=!0)}),1e3)}return d(e,[{key:"cargarMasImagenes",value:function(){var e=this;this.startAt=this.cargadas,this._cargaImagenes.fromStartToEnd(this.startAt.toString()).then((function(n){e.files=n.val();var r=[];if(null!=e.files){var i=!0,o=0;Object.keys(e.files).map((function(n){arguments.length>1&&void 0!==arguments[1]||e.startAt,i&&(o=e.startAt,i=!1),r.push(t({},o,e.files[n])),o++})),e.images=e.images.concat(r),e.cargadas+=e.images.length}}))}}]),e}()).\u0275fac=function(t){return new(t||vP)(s.Jb(Tg))},vP.\u0275cmp=s.Db({type:vP,selectors:[["app-fotos"]],decls:4,vars:3,consts:[[1,"row","text-center"],["class","main-container",4,"ngIf"],["class","card-columns",4,"ngIf"],[1,"main-container"],["role","alert",1,"alert","alert-warning"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"card-columns"],["class","card  text-white bg-dark",4,"ngFor","ngForOf"],[1,"card","text-white","bg-dark"],["alt","",1,"card-img-top","img-fluid",3,"src"],[1,"card-body"],[1,"card-title"]],template:function(t,e){1&t&&(s.Ob(0,"div",0),s.oc(1,hP,6,0,"div",1),s.oc(2,fP,4,0,"div",1),s.oc(3,pP,2,1,"div",2),s.Nb()),2&t&&(s.zb(1),s.dc("ngIf",0==e.images.length&&0==e.noData),s.zb(1),s.dc("ngIf",1==e.noData),s.zb(1),s.dc("ngIf",e.images.length==e.cargadas))},directives:[st,ot],encapsulation:2}),vP),gP=function(){return["/forgot-password"]};function mP(t,e){if(1&t&&s.Kb(0,"img",11),2&t){var n=s.Xb().ngIf;s.ec("src",n.photoURL?n.photoURL:"/assets/dummy-user.png",s.mc),s.ec("alt",n.displayName)}}function bP(t,e){1&t&&(s.Ob(0,"li",8),s.Ob(1,"button",12),s.qc(2," Verify Email "),s.Nb(),s.Nb()),2&t&&(s.zb(1),s.dc("routerLink","/verify-email"))}function _P(t,e){if(1&t&&(s.Ob(0,"ul",7),s.Ob(1,"li",8),s.Ob(2,"h3"),s.oc(3,mP,1,2,"img",9),s.qc(4),s.Nb(),s.Nb(),s.Ob(5,"li",8),s.qc(6,"User ID: "),s.Ob(7,"strong"),s.qc(8),s.Nb(),s.Nb(),s.Ob(9,"li",8),s.qc(10,"Email: "),s.Ob(11,"strong"),s.qc(12),s.Nb(),s.Nb(),s.Ob(13,"li",8),s.qc(14,"Email Verified: "),s.Ob(15,"strong"),s.qc(16),s.Nb(),s.Nb(),s.oc(17,bP,3,1,"li",10),s.Nb()),2&t){var n=e.ngIf;s.zb(3),s.dc("ngIf",null!=n.photoURL),s.zb(1),s.sc(" ",n.displayName?n.displayName:"User"," "),s.zb(4),s.rc(n.uid),s.zb(4),s.rc(n.email),s.zb(4),s.rc(n.emailVerified),s.zb(1),s.dc("ngIf",!n.emailVerified)}}function wP(t,e){if(1&t&&(s.Ob(0,"div",9),s.Ob(1,"p",10),s.qc(2,"We have sent a confirmation email to "),s.Ob(3,"strong"),s.qc(4),s.Nb(),s.qc(5,"."),s.Nb(),s.Ob(6,"p",10),s.qc(7,"Please check your email and click on the link to verfiy your email address."),s.Nb(),s.Nb()),2&t){var n=e.ngIf;s.zb(4),s.rc(n.email)}}var kP,OP,CP,SP,EP,TP,IP=[{path:"home",component:jg},{path:"perfil",component:Dg,canActivate:[Cd]},{path:"sign-in",component:(EP=function(){function t(e){h(this,t),this.authService=e}return d(t,[{key:"ngOnInit",value:function(){}}]),t}(),EP.\u0275fac=function(t){return new(t||EP)(s.Jb(Ig))},EP.\u0275cmp=s.Db({type:EP,selectors:[["app-sign-in"]],decls:27,vars:3,consts:[[1,"main-container"],[1,"card","text-white","bg-dark","text-center","centered","w26rem"],[1,"card-body"],["type","button",1,"btn","btn-outline-primary","w-100",3,"click"],[1,"fab","fa-google-plus-g"],[1,"formGroup"],["type","text","placeholder","Username","required","",1,"formControl","w-75","py-1","mb-1"],["userName",""],["type","text","placeholder","Email Address","required","",1,"formControl","w-75","py-1","mb-1"],["userEmail",""],[1,"formGroup","mb-2"],["type","password","placeholder","Password","required","",1,"formControl","w-75","py-1","mb-1"],["userPassword",""],[1,"d-block",3,"routerLink"],["type","button",1,"btn","btn-primary","w-75",3,"click"],[1,"redirectToLogin"],["type","button",1,"btn","btn-outline-info","w-100",3,"routerLink"]],template:function(t,e){if(1&t){var n=s.Pb();s.Ob(0,"div",0),s.Ob(1,"div",1),s.Ob(2,"div",2),s.Ob(3,"button",3),s.Vb("click",(function(){return e.authService.GoogleAuth()})),s.Kb(4,"i",4),s.qc(5," Log in with Google "),s.Nb(),s.Nb(),s.Nb(),s.Kb(6,"br"),s.Ob(7,"div",1),s.Ob(8,"div",2),s.Ob(9,"div",5),s.Kb(10,"input",6,7),s.Nb(),s.Ob(12,"div",5),s.Kb(13,"input",8,9),s.Nb(),s.Ob(15,"div",10),s.Kb(16,"input",11,12),s.Ob(18,"a",13),s.qc(19,"Forgot Password?"),s.Nb(),s.Nb(),s.Ob(20,"div",5),s.Ob(21,"button",14),s.Vb("click",(function(){s.kc(n);var t=s.jc(14),r=s.jc(17),i=s.jc(11);return e.authService.SignIn(t.value,r.value,i.value)})),s.qc(22,"Enter"),s.Nb(),s.Nb(),s.Nb(),s.Ob(23,"div",2),s.Ob(24,"div",15),s.Ob(25,"button",16),s.qc(26," Don't have an account? Sign Up "),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Nb()}2&t&&(s.zb(18),s.dc("routerLink",s.fc(2,gP)),s.zb(7),s.dc("routerLink","/register-user"))},directives:[Uf,Ff],encapsulation:2}),EP),canActivate:[Ng]},{path:"register-user",component:(SP=function(){function t(e){h(this,t),this.authService=e}return d(t,[{key:"ngOnInit",value:function(){}}]),t}(),SP.\u0275fac=function(t){return new(t||SP)(s.Jb(Ig))},SP.\u0275cmp=s.Db({type:SP,selectors:[["app-sign-up"]],decls:27,vars:1,consts:[[1,"main-container"],[1,"card","text-white","bg-dark","text-center","centered","w26rem"],[1,"card-body"],["type","button",1,"btn","btn-outline-primary","w-100",3,"click"],[1,"fab","fa-google-plus-g"],[1,"mb-3"],[1,"formGroup"],["type","text","placeholder","Username","required","",1,"formControl","w-75","py-1","mb-1"],["userName",""],["type","email","placeholder","Email Address","required","",1,"formControl","w-75","py-1","mb-1"],["userEmail",""],[1,"formGroup","mb-2"],["type","password","placeholder","Password","required","",1,"formControl","w-75","py-1","mb-1"],["userPwd",""],["type","button",1,"btn","btn-primary","w-75",3,"click"],[1,"redirectToLogin"],["type","button",1,"btn","btn-outline-success","w-100",3,"routerLink"]],template:function(t,e){if(1&t){var n=s.Pb();s.Ob(0,"div",0),s.Ob(1,"div",1),s.Ob(2,"div",2),s.Ob(3,"button",3),s.Vb("click",(function(){return e.authService.GoogleAuth()})),s.Kb(4,"i",4),s.qc(5," Continue with Google "),s.Nb(),s.Nb(),s.Nb(),s.Kb(6,"br"),s.Ob(7,"div",1),s.Ob(8,"div",2),s.Ob(9,"h2",5),s.qc(10,"Create a new account"),s.Nb(),s.Ob(11,"div",6),s.Kb(12,"input",7,8),s.Nb(),s.Ob(14,"div",6),s.Kb(15,"input",9,10),s.Nb(),s.Ob(17,"div",11),s.Kb(18,"input",12,13),s.Nb(),s.Ob(20,"div",6),s.Ob(21,"button",14),s.Vb("click",(function(){s.kc(n);var t=s.jc(16),r=s.jc(19),i=s.jc(13);return e.authService.SignUp(t.value,r.value,i.value)})),s.qc(22," Create account "),s.Nb(),s.Nb(),s.Nb(),s.Ob(23,"div",2),s.Ob(24,"div",15),s.Ob(25,"button",16),s.qc(26," Already have an account? Sign In "),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Nb()}2&t&&(s.zb(25),s.dc("routerLink","/sign-in"))},directives:[Ff],encapsulation:2}),SP)},{path:"dashboard",component:(CP=function(){function t(e){h(this,t),this.authService=e}return d(t,[{key:"ngOnInit",value:function(){}}]),t}(),CP.\u0275fac=function(t){return new(t||CP)(s.Jb(Ig))},CP.\u0275cmp=s.Db({type:CP,selectors:[["app-dashboard"]],decls:10,vars:1,consts:[[1,"main-container"],[1,"card","text-white","bg-dark","text-center","centered","w40rem"],[1,"card-body"],[1,"h2"],["class","list-group list-group-flush",4,"ngIf"],[1,"redirectToLogin"],["type","button",1,"btn","btn-danger","w-100",3,"click"],[1,"list-group","list-group-flush"],[1,"list-group-item","bg-dark","text-white","border-light"],["class","align-self-start mr-5 img-thumbnail rounded-circle",3,"src","alt",4,"ngIf"],["class","list-group-item  bg-dark text-white border-light",4,"ngIf"],[1,"align-self-start","mr-5","img-thumbnail","rounded-circle",3,"src","alt"],[1,"btn","btn-outline-primary","w-50","mb-1","mt-1",3,"routerLink"]],template:function(t,e){1&t&&(s.Ob(0,"div",0),s.Ob(1,"div",1),s.Ob(2,"div",2),s.Ob(3,"h1",3),s.qc(4,"User Profile"),s.Nb(),s.oc(5,_P,18,6,"ul",4),s.Nb(),s.Ob(6,"div",2),s.Ob(7,"div",5),s.Ob(8,"button",6),s.Vb("click",(function(){return e.authService.SignOut()})),s.qc(9," Log Out "),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Nb()),2&t&&(s.zb(5),s.dc("ngIf",e.authService.userData))},directives:[st,Ff],encapsulation:2}),CP),canActivate:[xg]},{path:"forgot-password",component:(OP=function(){function t(e){h(this,t),this.authService=e}return d(t,[{key:"ngOnInit",value:function(){}}]),t}(),OP.\u0275fac=function(t){return new(t||OP)(s.Jb(Ig))},OP.\u0275cmp=s.Db({type:OP,selectors:[["app-forgot-password"]],decls:17,vars:1,consts:[[1,"main-container"],[1,"card","text-white","bg-dark","text-center","centered","w26rem"],[1,"card-body"],[1,"text-center"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl","w-75","py-1","mb-1"],["passwordResetEmail",""],["type","button",1,"btn","btn-primary","w-75",3,"click"],[1,"redirectToLogin"],["type","button",1,"btn","btn-outline-info","w-100",3,"routerLink"]],template:function(t,e){if(1&t){var n=s.Pb();s.Ob(0,"div",0),s.Ob(1,"div",1),s.Ob(2,"div",2),s.Ob(3,"h3"),s.qc(4,"Reset Password"),s.Nb(),s.Ob(5,"p",3),s.qc(6,"Please enter your email address to request a password reset."),s.Nb(),s.Ob(7,"div",4),s.Kb(8,"input",5,6),s.Nb(),s.Ob(10,"div",4),s.Ob(11,"button",7),s.Vb("click",(function(){s.kc(n);var t=s.jc(9);return e.authService.ForgotPassword(t.value)})),s.qc(12,"Reset Password"),s.Nb(),s.Nb(),s.Nb(),s.Ob(13,"div",2),s.Ob(14,"div",8),s.Ob(15,"button",9),s.qc(16," Go back? Log In "),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Nb()}2&t&&(s.zb(15),s.dc("routerLink","/sign-in"))},directives:[Ff],encapsulation:2}),OP)},{path:"verify-email",component:(kP=function(){function t(e){h(this,t),this.authService=e}return d(t,[{key:"ngOnInit",value:function(){}}]),t}(),kP.\u0275fac=function(t){return new(t||kP)(s.Jb(Ig))},kP.\u0275cmp=s.Db({type:kP,selectors:[["app-verify-email"]],decls:13,vars:2,consts:[[1,"main-container"],[1,"card","text-white","bg-dark","text-center","centered","w40rem"],[1,"card-body"],["class","formGroup",4,"ngIf"],[1,"formGroup","mb-5"],["type","button",1,"btn","btn-primary","w-75",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["type","button",1,"btn","btn-outline-success","w-100",3,"routerLink"],[1,"formGroup"],[1,"text-center"]],template:function(t,e){1&t&&(s.Ob(0,"div",0),s.Ob(1,"div",1),s.Ob(2,"div",2),s.Ob(3,"h3"),s.qc(4,"Thank You for Registering"),s.Nb(),s.oc(5,wP,8,1,"div",3),s.Ob(6,"div",4),s.Ob(7,"button",5),s.Vb("click",(function(){return e.authService.SendVerificationMail()})),s.Kb(8,"i",6),s.qc(9," Resend Verification Email "),s.Nb(),s.Nb(),s.Ob(10,"div",7),s.Ob(11,"button",8),s.qc(12," Dashboard "),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Nb()),2&t&&(s.zb(5),s.dc("ngIf",e.authService.userData),s.zb(6),s.dc("routerLink","/dashboard"))},directives:[st,Ff],encapsulation:2}),kP)},{path:"chat",component:mj},{path:"spotify",component:Tj},{path:"spotify/search",component:nP},{path:"spotify/search/:id",component:lP},{path:"youtube",component:Pj},{path:"maps",component:qj},{path:"fotos/subir-imagen",component:Zj},{path:"fotos",component:yP},{path:"**",pathMatch:"full",redirectTo:"home"}],xP=((TP=function t(){h(this,t)}).\u0275mod=s.Hb({type:TP}),TP.\u0275inj=s.Gb({factory:function(t){return new(t||TP)},imports:[[rd.forRoot(IP)],rd]}),TP);function NP(t,e){if(1&t){var n=s.Pb();s.Mb(0),s.Ob(1,"button",2),s.Vb("click",(function(){s.kc(n);var t=s.Xb();return t.auth.logout({returnTo:t.document.location.origin})})),s.qc(2," Log out "),s.Nb(),s.Lb()}}function AP(t,e){if(1&t){var n=s.Pb();s.Ob(0,"button",3),s.Vb("click",(function(){return s.kc(n),s.Xb().loginWithRedirect()})),s.qc(1,"Login con Auth0"),s.Nb()}}var jP,PP=((jP=function(){function t(e,n){h(this,t),this.document=e,this.auth=n}return d(t,[{key:"loginWithRedirect",value:function(){this.auth.loginWithRedirect({redirect_uri:"http://localhost:4200/perfil/",appState:{target:"/perfil"}})}}]),t}()).\u0275fac=function(t){return new(t||jP)(s.Jb(b),s.Jb(Od))},jP.\u0275cmp=s.Db({type:jP,selectors:[["app-auth-button"]],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["loggedOut",""],[1,"btn","btn-outline-danger","w-100",3,"click"],[1,"btn","btn-outline-primary","w-100",3,"click"]],template:function(t,e){if(1&t&&(s.oc(0,NP,3,0,"ng-container",0),s.Yb(1,"async"),s.oc(2,AP,2,0,"ng-template",null,1,s.pc)),2&t){var n=s.jc(3);s.dc("ngIf",s.Zb(1,2,e.auth.isAuthenticated$))("ngIfElse",n)}},directives:[st],pipes:[bt],encapsulation:2}),jP),RP=function(){return["perfil"]};function DP(t,e){1&t&&(s.Ob(0,"li",7),s.Ob(1,"a",8),s.qc(2,"Mi perfil Auth0"),s.Nb(),s.Nb()),2&t&&(s.zb(1),s.dc("routerLink",s.fc(1,RP)))}function LP(t,e){1&t&&(s.Ob(0,"div"),s.Ob(1,"button",20),s.qc(2," Dashboard "),s.Nb(),s.Nb()),2&t&&(s.zb(1),s.dc("routerLink","/dashboard"))}function MP(t,e){1&t&&(s.Ob(0,"button",21),s.Kb(1,"i",22),s.qc(2," Login with Firebase Auth "),s.Nb()),2&t&&s.dc("routerLink","/sign-in")}var FP,UP,qP=function(){return["home"]},VP=function(){return["chat"]},zP=function(){return["spotify"]},BP=function(){return["spotify/search"]},WP=function(){return["youtube"]},HP=function(){return["maps"]},KP=function(){return["fotos"]},GP=function(){return["fotos/subir-imagen"]},JP=((UP=function(){function t(e,n){var r=this;h(this,t),this.auth=e,this.afAuth=n,this.afAuth.authState.subscribe((function(t){r.isLogged=!!t}))}return d(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||UP)(s.Jb(Od),s.Jb(jv))},UP.\u0275cmp=s.Db({type:UP,selectors:[["app-navbar"]],decls:47,vars:23,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark"],[1,"container-fluid"],["routerLinkActive","router-link-active",1,"navbar-brand",3,"routerLink"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-link"],["routerLinkActive","router-link-active",1,"nav-link",3,"routerLink"],[1,"nav-link","dropdown"],["routerLinkActive","router-link-active","id","navbarDropdown","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle",3,"routerLink"],["aria-labelledby","navbarDropdown",1,"dropdown-menu"],["routerLinkActive","router-link-active",1,"dropdown-item",3,"routerLink"],["class","nav-link",4,"ngIf"],[1,"justify-content-end","col-md-2"],[1,"nav","justify-content-end","w-100"],[1,"nav-item","w-100"],[1,"navbar-text"],[4,"ngIf","ngIfElse"],["loggin",""],["type","button",1,"btn","btn-outline-success","w-100","mb-1",3,"routerLink"],["type","button",1,"btn","btn-outline-primary","w-100","mb-1",3,"routerLink"],[1,"fa","fa-plus"]],template:function(t,e){if(1&t&&(s.Ob(0,"nav",0),s.Ob(1,"div",1),s.Ob(2,"a",2),s.qc(3,"Qui\xe9n soy"),s.Nb(),s.Ob(4,"button",3),s.Kb(5,"span",4),s.Nb(),s.Ob(6,"div",5),s.Ob(7,"ul",6),s.Ob(8,"li",7),s.Ob(9,"a",8),s.qc(10,"Chat"),s.Nb(),s.Nb(),s.Ob(11,"li",9),s.Ob(12,"a",10),s.qc(13," Api Spotify "),s.Nb(),s.Ob(14,"ul",11),s.Ob(15,"li"),s.Ob(16,"a",12),s.qc(17,"Home"),s.Nb(),s.Nb(),s.Ob(18,"li"),s.Ob(19,"a",12),s.qc(20,"Search"),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Ob(21,"li",7),s.Ob(22,"a",8),s.qc(23,"Api YouTube"),s.Nb(),s.Nb(),s.Ob(24,"li",7),s.Ob(25,"a",8),s.qc(26,"Api Maps"),s.Nb(),s.Nb(),s.Ob(27,"li",9),s.Ob(28,"a",10),s.qc(29," Gestor im\xe1genes "),s.Nb(),s.Ob(30,"ul",11),s.Ob(31,"li"),s.Ob(32,"a",12),s.qc(33,"Subir im\xe1gen"),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.oc(34,DP,3,2,"li",13),s.Yb(35,"async"),s.Nb(),s.Nb(),s.Ob(36,"div",14),s.Ob(37,"ul",15),s.Ob(38,"li",16),s.Ob(39,"span",17),s.oc(40,LP,3,1,"div",18),s.oc(41,MP,3,1,"ng-template",null,19,s.pc),s.Nb(),s.Nb(),s.Nb(),s.Ob(43,"ul",15),s.Ob(44,"li",16),s.Ob(45,"span",17),s.Kb(46,"app-auth-button"),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Nb()),2&t){var n=s.jc(42);s.zb(2),s.dc("routerLink",s.fc(14,qP)),s.zb(7),s.dc("routerLink",s.fc(15,VP)),s.zb(3),s.dc("routerLink",s.fc(16,zP)),s.zb(4),s.dc("routerLink",s.fc(17,zP)),s.zb(3),s.dc("routerLink",s.fc(18,BP)),s.zb(3),s.dc("routerLink",s.fc(19,WP)),s.zb(3),s.dc("routerLink",s.fc(20,HP)),s.zb(3),s.dc("routerLink",s.fc(21,KP)),s.zb(4),s.dc("routerLink",s.fc(22,GP)),s.zb(2),s.dc("ngIf",s.Zb(35,12,e.auth.isAuthenticated$)),s.zb(6),s.dc("ngIf",e.isLogged)("ngIfElse",n)}},directives:[Uf,Hf,st,PP,Ff],pipes:[bt],encapsulation:2}),UP),QP=((FP=function t(e){h(this,t),this.authService=e,this.title="personalApp"}).\u0275fac=function(t){return new(t||FP)(s.Jb(Ig))},FP.\u0275cmp=s.Db({type:FP,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,""]],template:function(t,e){1&t&&(s.Kb(0,"app-navbar"),s.Ob(1,"div",0),s.Kb(2,"router-outlet"),s.Nb())},directives:[JP,Kf],styles:[""]}),FP);Rv.a.initializeApp(u);var YP,XP=((YP=function t(){h(this,t)}).\u0275mod=s.Hb({type:YP,bootstrap:[QP]}),YP.\u0275inj=s.Gb({factory:function(t){return new(t||YP)},providers:[ny,ry,iy,Tg,Ig],imports:[[mv.a.initializeApp(u),fe,xP,Sd.forRoot({domain:"dev-e6zo41pu.eu.auth0.com",clientId:"8j2enBqcYFwrHRZpx67vmTneFr4M7PRk"}),fp,qn,gv.forRoot({apiKey:"AIzaSyDThwGxJqFsSN-etU1MGnLsXBc66dIRYsU"}),ey,wt,Pv,Vn]]}),YP);Object(s.T)(),le().bootstrapModule(XP).catch((function(t){return console.error(t)}))},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return u}));var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD"),a=function(t){p(n,t);var e=y(n);function n(t){var r;return h(this,n),(r=e.call(this)).parent=t,r}return d(n,[{key:"_next",value:function(t){this.parent.notifyNext(t)}},{key:"_error",value:function(t){this.parent.notifyError(t),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(),this.unsubscribe()}}]),n}(r.a),s=function(t){p(n,t);var e=y(n);function n(){return h(this,n),e.apply(this,arguments)}return d(n,[{key:"notifyNext",value:function(t){this.destination.next(t)}},{key:"notifyError",value:function(t){this.destination.error(t)}},{key:"notifyComplete",value:function(){this.destination.complete()}}]),n}(r.a);function u(t,e){if(!e.closed){if(t instanceof i.a)return t.subscribe(e);var n;try{n=Object(o.a)(t)(e)}catch(r){e.error(r)}return n}}}},[[0,0]]])}();